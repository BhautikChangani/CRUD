{"version":3,"file":"kendo.dataviz.core.js","names":["$","window","kendo","dataviz","drawing","util","Path","Group","Class","support","geometry","Rect","Circle","geometryTransform","transform","Segment","deepExtend","isFunction","__common_getter_js","getter","ARC","AXIS_LABEL_CLICK","BLACK","BOTTOM","CENTER","CIRCLE","CROSS","DATE","DEFAULT_FONT","DEFAULT_PRECISION","FORMAT_REGEX","HEIGHT","INSIDE","LEFT","MAX_VALUE","Number","MIN_VALUE","NONE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","OBJECT","OUTSIDE","RIGHT","ROUNDED_RECT","STRING","TOP","TRIANGLE","WHITE","WIDTH","X","Y","constants","ARROW_UP","ARROW_DOWN","ARROW_LEFT","ARROW_RIGHT","TAB","ARIA_ACTIVE_DESCENDANT","COORD_PRECISION","DEFAULT_HEIGHT","DEFAULT_WIDTH","END","ENTER","ESCAPE","HIGHLIGHT_ZINDEX","INHERIT","START","SQUARE","RECT","VALUE","DEFAULT_SERIES_OPACITY","POINTER","HORIZONTAL","VERTICAL","isArray","value","Array","addClass","element","classes","classArray","idx","length","className","indexOf","SPACE_REGEX","removeClass","replace","alignPathToPixel","path","offset","options","stroke","defined","width","i","segments","anchor","round","translate","clockwise","angle1","angle2","x","y","isNumber","isNaN","isString","isObject","styleValue","SIZE_STYLES_REGEX","isSizeField","field","test","getSpacing","defaultSpacing","spacing","top","right","bottom","left","current","compile","template","TemplateService","extend","getTemplate","content","grep","array","callback","result","push","register","userImplementation","HashMap","this","_map","Map","inArray","prototype","get","key","set","TRIGGER","InstanceObserver","init","observer","handlers","handlerMap","trigger","name","args","isDefaultPrevented","callObserver","fnName","len","arguments","apply","requiresHandlers","names","isPlainObject","Object","toString","call","map","browser","ref","append","bindEvents","deg","elementOffset","elementSize","eventCoordinates","eventElement","hashKey","last","limitValue","objectKey","rad","unbindEvents","valueOrDefault","FontLoader","setDefaultOptions","type","proto","fetchFonts","fonts","state","depth","document","keys","forEach","loadFonts","promises","font","load","e","logToConsole","Promise","all","then","preloadFonts","KI_PREFFIX","KSVG_PREFFIX","HTMLBaseIcon","wrapper","addClasses","html","outerHTML","size","themeColor","flip","iconClass","stylingOptions","HTMLFontIcon","fn","currentIconClass","split","find","startsWith","icon","_className","HTMLSvgIcon","innerHTML","iconNameMatch","match","toUpperCase","svgIcons","setAttribute","svgElement","createElementNS","viewBox","appendChild","ICON_TYPES","svg","sparseArrayLimits","arr","min","max","isFinite","Math","undefined","Matrix","matrixRegexp","transformMatrix","getComputedStyle","unit","matrixString","members","parseFloat","Function","bind","concat","parseMatrix","autoTextColor","color","Color","isDark","DELETED","LegacySet","values","_index","_values","slice","filter","item","has","add","delete","index","clear","defineProperties","SetWrapper","_set","Set","from","Matrix$1","height","data","clone","m","row","col","line","each","f","includeEmpty","val","el","transpose","n","a","j","multiply","b","s","va","vb","inverse","augment","loop","k","imax","start","end","pos","v","argmax","tmp","returned","i$1","j$1","k$1","i$2","j$2","ret","STRING$1","FUNCTION","preventDefault","_defaultPrevented","Observable$$1","Class$$1","_events","__proto__","create","constructor","destroy","unbind","event","one","original","handler","that","eventNames","handlersIsFunction","eventName","first","eventName$1","unshift","eventArgs","events","sender","splice","_setEvents","this$1$1","autoMajorUnit","diff","abs","scale","pow","floor","log","relativeValue","Point","equals","point","rotate","center","degrees","theta","cosT","cos","sinT","sin","cx","cy","distanceTo","dx","dy","sqrt","onCircle","angle","radius","radians","Box","x1","y1","x2","y2","box","move","wrap","targetBox","wrapPoint","arrayPoint","snapTo","axis","alignTo","targetCenter","shrink","dw","dh","expand","pad","padding","unpad","containsPoint","points","getHash","join","overlaps","rotation","r1","rotatePoint","r2","r3","r4","toRect","hasSize","align","alignment","c1","c2","sizeFunc","Ring","innerRadius","startAngle","middle","setRadius","newRadius","radianAngle","ax","ay","adjacentBox","distance","sector","midAndle","midPoint","hw","hh","sa","ca","p","endAngle","vector","startPoint","startVector","endPoint","endVector","dist","getBBox","angles","allAngles","sort","numericComparer","startAngleIndex","endAngleIndex","Sector","ShapeBuilder","createRing","arc","Arc","radiusX","radiusY","fromArc","close","innerEnd","pointAt","lineTo","ChartElement","children","initUserOptions","reflow","currentChild","animation","getRoot","parent","getSender","service","getService","chartService","translateChildren","childrenCount","arguments$1","renderVisual","visible","createVisual","addVisual","renderChildren","createAnimation","renderComplete","visual","chartElement","appendVisual","zIndex","Animation","childVisual","noclip","clipRoot","stackRoot","stackVisual","isStackRoot","visuals","sibling","insert","traverse","child","closest","matched","hasHighlight","highlight","createHighlight","toggleHighlight","show","opacity","customVisual","_highlight","highlightOptions","fill","highlightVisualArgs","series","dataItem","category","percentage","runningTotal","total","toggleFocusHighlight","accessibility","focusHighlight","_focusHighlight","highlightColor","background","focusHighlightOptions","border","createFocusHighlight","createGradientOverlay","gradientOptions","overlay","createGradient","closed","elements","supportsPointInactiveOpacity","BoxElement","margin","shrinkToFit","hasSetSize","borderWidth","reflowPaddingBox","vAlign","paddingBox","contentBox","hasBox","fromRect","visualStyle","dashType","cursor","ShapeElement","pointData","getElement","halfWidth","halfHeight","style","fromPoints","MultiPath","moveTo","rect","borderRadius","setCornerRadius","createElement","visualOptions","accessibilityOptions","role","ariaLabel","ariaRoleDescription","ariaChecked","RADIAL","GRADIENTS","glass","stops","sharpBevel","roundedBevel","roundedGlass","supportVML","sharpGlass","bubbleShadow","boxDiff","r","c","d","g","h","boxes","RootElement","rootOptions","parseInt","gradients","currentBox","createBackground","drawingGradient","hashCode","gradient","LinearGradient","usedSpace","currentStops","currentStop","innerRadialStops","RadialGradient","cleanGradients","_observers","FloatElement","_initDirection","vertical","groupAxis","elementAxis","groupSizeField","elementSizeField","groupSpacing","elementSpacing","vSpacing","reflowChildren","ref$1","groupOptions","groups","groupsSize","maxGroupElementsSize","groupsCount","groupsStart","alignStart","groupStart","groupIdx","group","groupElements","elementStart","groupElementsCount","elementSize$$1","groupElementStart","groupSize","elementBox","maxSize","groupElementsSize","DrawingText","Text","measureText","baseline","paintOrder","topLeft","rectToBox","origin","bottomRight","ROWS_SPLIT_REGEX","TextBox","_initContainer","_autoReflow","rows","String","floatElement","textOptions","container","rowIdx","text","trim","visualFn","_boxReflow","visualBox","visualContext","clippedBBox","normalBox","rotatedBox","rotationTransform","context","getDefaultVisual","boxCenter","Title","_textBox","position","collapseVerticalMargins","items","prevBox","buildTitle","defaultOptions","title","titleOptions","orderTitles","titles","reverse","AxisLabel","format","culture","click","widget","alignRotation","bbox","matrix","rotationMatrix","rotationOrigin","alignAxis","distanceAxis","axisAnchor","transformCopy","topRight","bottomLeft","alignEnd","distanceLeft","distanceRight","alignCenter","Note","fields","render","hide","label","childAlias","noteTemplate","auto","aliasFor","marker","wrapperBox","lineStart","linePoints","createLine","defaultVisual","over","out","current$1","parseDate","Date","firstDay","IntlService","implementation","FORMAT_REPLACE_REGEX","FormatService","intlService","_intlService","formatString","intl","localeAuto","locale","placeholderFormat","substring","current$2","ChartService","chart","rtl","Boolean","notify","isPannable","pannable","lock","DomEventsBuilder","services","createAxisTick","tickOptions","tickX","tickY","tick","createAxisGridLine","gridLine","lineEnd","Axis","labels","majorTickSize","minorTickSize","minorTicks","minorTickType","majorTicks","majorTickType","initFields","_deferLabels","createLabels","createTitle","createNotes","labelsRange","skip","labelsCount","normalizeLabelRotation","labelOptions","step","clearLabels","autoRotateLabels","range","labelContext","count","createAxisLabel","clearTitle","lineBox","mirror","axisX","axisY","lineWidth","visualSize","notes","parseNoteValue","note","createPlotBands","gridLinesVisual","gridLines","_gridLines","createTicks","lineGroup","majorUnit","tickLineOptions","tickPositions","skipUnit","getMajorTickPositions","getMinorTickPositions","minorUnit","_alignLines","_lineGroup","getActualTickSize","tickSize","_backgroundPath","plotBands","plotArea","_plotbandGroup","altAxis","pane","axes","slotX","slotY","getSlot","to","createPlotBandLabel","bandRect","textbox","labelTemplate","createGridLines","minorGridLines","majorGridLines","axisLineVisible","linePos","lineOptions","sizeFn","titleSize","space","boxSize","maxLabelSize","labelSize","arrangeTitle","arrangeLabels","arrangeNotes","getLabelsTickPositions","labelTickIndex","labelsBetweenTicks","tickIx","firstTickPosition","nextTickPosition","positionStart","positionEnd","positionLabel","labelBox","labelOffset","labelX","labelY","autoRotateLabelAngle","slotWidth","limit","labelAngle","idx$1","slot","shouldRenderNote","noteSlot","secondAxis","axisLabelText","tmpl","defaultText","maxLabelOffset","lastLabel","offsetField","startPosition","endPosition","maxStartOffset","maxEndOffset","startTick","endTick","limitRange","rangeSize","minValue","maxValue","valueRange","seriesMin","seriesMax","lineDir","lineInfo","lineSize","axisDir","axisOrigin","pointOffset","scaleToDelta","rawScale","justified","prepareUserOptions","axisCrossingValue","MILLISECONDS","SECONDS","MINUTES","HOURS","DAYS","WEEKS","MONTHS","YEARS","TIME_PER_SECOND","TIME_PER_MINUTE","TIME_PER_HOUR","TIME_PER_DAY","TIME_PER_WEEK","TIME_PER_MONTH","TIME_PER_YEAR","TIME_PER_UNIT","years","months","weeks","days","hours","minutes","seconds","milliseconds","absoluteDateDiff","getTime","getTimezoneOffset","addTicks","date","ticks","toDate","startOfWeek","weekStartDay","daysToSubtract","day","getDay","adjustDST","getHours","setHours","addDuration","dateValue","getFullYear","getMonth","getDate","roundedDate","setMinutes","tzDiff","addHours","getSeconds","setSeconds","getMilliseconds","setMilliseconds","floorDate","ceilDate","dateComparer","dateDiff","toTime","dateEquals","timeIndex","baseUnit","dateIndex","baseUnitStep","startDate","duration","parseDates","dates","CategoryAxis","_ticks","categoriesHash","copy","categories","srcCategories","definedMin","definedMax","ceil","rangeIndices","totalRange","roundedRange","_seriesMax","scaleOptions","hideOutOfRangeLabels","valueAxis","firstLabel","getTicks","labelTicks","tickIndices","stepSize","indices","getTickPositions","positions","cache","hash","_hash","hasMinor","filterOutOfRangePositions","inRange","startIndex","endIndex","slotBox","singleSlot","p1","p2","limitSlot","limittedSlot","categoryIndex","pointCategoryIndex","startValue","getCategory","totalIndex","categoryAt","categoriesCount","translateRange","delta","scaleRange","limitedRangeIndices","minDelta","maxDelta","zoomRange","totalMin","totalMax","dataItems","hideOutOfRangeNotes","pan","pointsRange","diffStart","diffEnd","rangeMin","rangeMax","_categoriesMap","currentRangeIndices","totalCount","totalLimit","totalRangeIndices","indexCategories","map$$1","COORDINATE_LIMIT","DateLabelFormats","ZERO_THRESHOLD","BASE_UNITS","FIT","categoryRange","clearCache","_range","EmptyDateRange","displayIndices","displayRange","valueIndex","valuesCount","dateAt","DateRange","roundToBaseUnit","lowerEnd","roundToTotalStep","expandEnd","justifyEnd","valueStart","displayStart","next","valueEnd","displayEnd","_indices","minIdx","maxIdx","upper","roundedStep","autoBaseUnit","startUnit","startStep","unitSteps","nextStep","categoryLimits","span","autoBaseUnitSteps","maxDateGroups","autoUnit","autoUnitIx","units","totalUnits","shift","initUnit","toLowerCase","lastCategory","minDiff","categoryIx","defaultBaseUnit","DateCategoryAxis","dataRange","_parsed","panning","userSetBaseUnit","userSetBaseUnitStep","maxDivisions","safeOptions","forecast","_forecast","before","after","divisionOptions","dataRangeOptions","divisionRange","rangeLabels","last$$1","isEmpty","totalLimits","panRange","datesRange","indicesRange","fit","autoBaseUnitStep","maxDiff","rangeDiff","baseUnitIndex","stepIndex","createRangeLabels","arrangeRangeLabels","position$1","autoRotateRangeLabels","hideOverlappingLabels","firstRangeLabel","clip","lastRangeLabel","rangeLabel","unitFormat","dateFormats","createLabel","rotateLabel","dateRange","limitCoordinate","MIN_VALUE_RANGE$1","NumericAxis","autoOptions","narrowRange","autoMin","narrow","axisMin","autoAxisMin","autoMax","axisMax","autoAxisMax","roundToMajorUnit","remainderClose","autoAxisOptions","totalOptions","totalAxisOptions","userOptions","userSetMin","userSetMax","clearNullValues","userSetLimits","axisOptions","totalMajorUnit","getDivisions","stepValue","divisions","skipStep","getValue","endValue","isValidRange","divisor","ratio","remainder","DateValueAxis","timeUnits","baseUnitTime","userMajorUnit","actualUnits","unitsToAdd","head","tail","applyDefaults","axisCrossingValues","dir","limittedRange","MIN_VALUE_RANGE$2","LogarithmicAxis","base","logMaxRemainder","autoAxisMax$1","autoAxisMin$1","throwNegativeValuesError","initRange","logMin","logMax","floorMax","traverseMajorTicksPositions","tickPosition","traverseMinorTicksPositions","power","minorOptions","_minorIntervalOptions","minorStep","info","Error","GridLinesMixin","majorAngles","minorAngles","skipMajor","majorGridLineAngles","renderMajorGridLines","minorGridLineAngles","renderMinorGridLines","renderGridLines","radiusCallback","circle","gridLineAngles","skipAngles","divs","intervals","altAxisVisible","alpha","intervalAngle","RadarCategoryAxis","reflowLabels","measureBox","skipOption","stepOption","divCount","divAngle","majorIntervals","minorIntervals","interval","minorAngle","minorRadius","band","plotBandSlot","ring","totalDivs","slotAngle","fromValue","slotStart","PolarAxis","instanceOptions","atan2","PI","RadarNumericAxisMixin","polarAxis","bandStyle","shape","plotBandPoints","innerPoints","outerPoints","innerCircle","outerCircle","radarMajorGridLinePositions","radarMinorGridLinePositions","tickRadius","angleIx","angularDistance","gamma","beta","axisType","RadarNumericAxis","minorSkipStep","RadarLogarithmicAxis","CurveProcessor","process","dataPoints","removeDuplicates","initialControlPoint","lastControlPoint","p0","pop","tangent","controlOut","firstControlPoint","secondControlPoint","controlPoints","tangent$1","cp0","controlPoints$1","cp1","controlPoints$2","tangent$2","invertAxis","lineFunction","calculateFunction","isLine","xField","yField","restrict","switchOrientation","monotonic","isMonotonicByField","numberSign","oldXField","restrictControlPoint","cp","p3","t1","t2","xValue","yValue","controlPoint","Gradients","convertableToNumber","cycleUp","cycleDown","cycleIndex","elementStyles","styles","stylesArray","field$1","getAriaTemplate","ariaTemplate","ariaContent","hasClasses","classNames","interpolateValue","progress","mousewheelDelta","wheelDelta","webkit","devicePixelRatio","detail","renderIcon","iconElement","iconOptions","HTMLElement","predicate","elementScale","parentElement","parentMatrix","multiplyCopy","createHashSet","supported","defaultErrorHandler","error","INSERT","DELETE","BACKSPACE","ESC","UP","DOWN","HOME","SPACEBAR","PAGEUP","PAGEDOWN","F2","F10","F12","NUMPAD_PLUS","NUMPAD_MINUS","NUMPAD_DOT","hasOwnProperty","obj","property","Observable","lteDateIndex","sortedDates","low","high","currentDate","jQuery","draw","SASS_THEMES","ExportMixin","skipLegacy","exportVisual","exportSVG","exportImage","exportPDF","imageDataURL","Surface","exportGroup","canvas","css","display","appendTo","body","surface","image","_rootElement","toDataURL","remove","calendars","standard","Point2D","Box2D","mwDelta","originalEvent","__meta__","id","description","depends","hidden","kendo$1"],"sources":["kendo.dataviz.core.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.drawing.js';\n\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n\n(function($) {\n/* eslint-disable space-before-blocks, space-before-function-paren, curly, object-curly-spacing */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar drawing = kendo.drawing;\nvar util = drawing.util;\nvar Path = drawing.Path;\nvar Group = drawing.Group;\nvar Class = kendo.Class;\nvar support = kendo.support;\nvar geometry = kendo.geometry;\nvar Rect = geometry.Rect;\nvar Circle = geometry.Circle;\nvar geometryTransform = geometry.transform;\nvar Segment = geometry.Segment;\nvar dataviz = kendo.dataviz;\n\nvar deepExtend = kendo.deepExtend;\nvar isFunction = kendo.isFunction;\nvar __common_getter_js = kendo.getter;\n\nvar ARC = \"arc\";\nvar ARROW_UP = \"ArrowUp\";\nvar ARROW_DOWN = \"ArrowDown\";\nvar ARROW_LEFT = \"ArrowLeft\";\nvar ARROW_RIGHT = \"ArrowRight\";\nvar TAB = \"Tab\";\nvar ARIA_ACTIVE_DESCENDANT = \"aria-activedescendant\";\nvar AXIS_LABEL_CLICK = \"axisLabelClick\";\nvar BLACK = \"#000\";\nvar BOTTOM = \"bottom\";\nvar CENTER = \"center\";\nvar CIRCLE = \"circle\";\nvar COORD_PRECISION = 3;\nvar CROSS = \"cross\";\nvar DATE = \"date\";\nvar DEFAULT_FONT = \"12px sans-serif\";\nvar DEFAULT_HEIGHT = 400;\nvar DEFAULT_PRECISION = 10;\nvar DEFAULT_WIDTH = 600;\nvar END = \"end\";\nvar ENTER = \"Enter\";\nvar ESCAPE = \"Escape\";\nvar FORMAT_REGEX = /\\{\\d+:?/;\nvar HEIGHT = \"height\";\nvar HIGHLIGHT_ZINDEX = 100;\nvar INSIDE = \"inside\";\nvar INHERIT = \"inherit\";\nvar LEFT = \"left\";\nvar MAX_VALUE = Number.MAX_VALUE;\nvar MIN_VALUE = -Number.MAX_VALUE;\nvar NONE = \"none\";\nvar NOTE_CLICK = \"noteClick\";\nvar NOTE_HOVER = \"noteHover\";\nvar NOTE_LEAVE = \"noteLeave\";\nvar OBJECT = \"object\";\nvar OUTSIDE = \"outside\";\nvar RIGHT = \"right\";\nvar ROUNDED_RECT = \"roundedRect\";\nvar START = \"start\";\nvar STRING = \"string\";\nvar TOP = \"top\";\nvar TRIANGLE = \"triangle\";\nvar SQUARE = \"square\";\nvar RECT = \"rect\";\nvar VALUE = \"value\";\nvar WHITE = \"#fff\";\nvar WIDTH = \"width\";\nvar X = \"x\";\nvar Y = \"y\";\nvar DEFAULT_SERIES_OPACITY = 1;\nvar POINTER = \"pointer\";\nvar HORIZONTAL = \"horizontal\";\nvar VERTICAL = \"vertical\";\n\nvar constants = {\n\tARC: ARC,\n\tARROW_UP: ARROW_UP,\n\tARROW_DOWN: ARROW_DOWN,\n\tARROW_LEFT: ARROW_LEFT,\n\tARROW_RIGHT: ARROW_RIGHT,\n\tTAB: TAB,\n\tARIA_ACTIVE_DESCENDANT: ARIA_ACTIVE_DESCENDANT,\n\tAXIS_LABEL_CLICK: AXIS_LABEL_CLICK,\n\tBLACK: BLACK,\n\tBOTTOM: BOTTOM,\n\tCENTER: CENTER,\n\tCIRCLE: CIRCLE,\n\tCOORD_PRECISION: COORD_PRECISION,\n\tCROSS: CROSS,\n\tDATE: DATE,\n\tDEFAULT_FONT: DEFAULT_FONT,\n\tDEFAULT_HEIGHT: DEFAULT_HEIGHT,\n\tDEFAULT_PRECISION: DEFAULT_PRECISION,\n\tDEFAULT_WIDTH: DEFAULT_WIDTH,\n\tEND: END,\n\tENTER: ENTER,\n\tESCAPE: ESCAPE,\n\tFORMAT_REGEX: FORMAT_REGEX,\n\tHEIGHT: HEIGHT,\n\tHIGHLIGHT_ZINDEX: HIGHLIGHT_ZINDEX,\n\tINSIDE: INSIDE,\n\tINHERIT: INHERIT,\n\tLEFT: LEFT,\n\tMAX_VALUE: MAX_VALUE,\n\tMIN_VALUE: MIN_VALUE,\n\tNONE: NONE,\n\tNOTE_CLICK: NOTE_CLICK,\n\tNOTE_HOVER: NOTE_HOVER,\n\tNOTE_LEAVE: NOTE_LEAVE,\n\tOBJECT: OBJECT,\n\tOUTSIDE: OUTSIDE,\n\tRIGHT: RIGHT,\n\tROUNDED_RECT: ROUNDED_RECT,\n\tSTART: START,\n\tSTRING: STRING,\n\tTOP: TOP,\n\tTRIANGLE: TRIANGLE,\n\tSQUARE: SQUARE,\n\tRECT: RECT,\n\tVALUE: VALUE,\n\tWHITE: WHITE,\n\tWIDTH: WIDTH,\n\tX: X,\n\tY: Y,\n\tDEFAULT_SERIES_OPACITY: DEFAULT_SERIES_OPACITY,\n\tPOINTER: POINTER,\n\tHORIZONTAL: HORIZONTAL,\n\tVERTICAL: VERTICAL\n};\n\nfunction isArray(value) {\n    return Array.isArray(value);\n}\n\nfunction addClass(element, classes) {\n    var classArray = isArray(classes) ? classes : [ classes ];\n\n    for (var idx = 0; idx < classArray.length; idx++) {\n        var className = classArray[idx];\n        if (element.className.indexOf(className) === -1) {\n            element.className += \" \" + className;\n        }\n    }\n}\n\nvar SPACE_REGEX = /\\s+/g;\n\nfunction removeClass(element, className) {\n    if (element && element.className) {\n        element.className = element.className.replace(className, \"\").replace(SPACE_REGEX, \" \");\n    }\n}\n\nfunction alignPathToPixel(path) {\n    var offset = 0.5;\n    if (path.options.stroke && kendo.drawing.util.defined(path.options.stroke.width)) {\n        if (path.options.stroke.width % 2 === 0) {\n            offset = 0;\n        }\n    }\n\n    for (var i = 0; i < path.segments.length; i++) {\n        path.segments[i].anchor().round(0).translate(offset, offset);\n    }\n\n    return path;\n}\n\nfunction clockwise(angle1, angle2) {\n    // True if angle2 is clockwise of angle1\n    // assuming angles grow in clock-wise direction\n    // (as in the pie and radar charts)\n    return -angle1.x * angle2.y + angle1.y * angle2.x < 0;\n}\n\nfunction isNumber(value) {\n    return typeof value === \"number\" && !isNaN(value);\n}\n\nfunction isString(value) {\n    return typeof value === STRING;\n}\n\nfunction convertableToNumber(value) {\n    return isNumber(value) || (isString(value) && isFinite(value));\n}\n\nfunction cycleUp(index, count) {\n    return (index + 1) % count;\n}\n\nfunction cycleDown(index, count) {\n    var result = index - 1;\n\n    return result < 0 ? count - 1 : result;\n}\n\nfunction cycleIndex(index, length) {\n    if (length === 1 || (index % length) === 0) {\n        return 0;\n    }\n\n    if (index < 0) {\n        return length + (index % length);\n    } else if (index >= length) {\n        return index % length;\n    }\n\n    return index;\n}\n\nfunction isObject(value) {\n    return typeof value === \"object\";\n}\n\nfunction styleValue(value) {\n    if (isNumber(value)) {\n        return value + \"px\";\n    }\n    return value;\n}\n\nvar SIZE_STYLES_REGEX = /width|height|top|left|bottom|right/i;\n\nfunction isSizeField(field) {\n    return SIZE_STYLES_REGEX.test(field);\n}\n\nfunction elementStyles(element, styles) {\n    var stylesArray = isString(styles) ? [ styles ] : styles;\n\n    if (isArray(stylesArray)) {\n        var result = {};\n        var style = window.getComputedStyle(element);\n\n        for (var idx = 0; idx < stylesArray.length; idx++) {\n            var field = stylesArray[idx];\n            result[field] = isSizeField(field) ? parseFloat(style[field]) : style[field];\n        }\n\n        return result;\n    } else if (isObject(styles)) {\n        for (var field$1 in styles) {\n            element.style[field$1] = styleValue(styles[field$1]);\n        }\n    }\n}\n\nfunction getSpacing(value, defaultSpacing) {\n    if (defaultSpacing === void 0) { defaultSpacing = 0; }\n\n    var spacing = { top: 0, right: 0, bottom: 0, left: 0 };\n\n    if (typeof(value) === \"number\") {\n        spacing[TOP] = spacing[RIGHT] = spacing[BOTTOM] = spacing[LEFT] = value;\n    } else {\n        spacing[TOP] = value[TOP] || defaultSpacing;\n        spacing[RIGHT] = value[RIGHT] || defaultSpacing;\n        spacing[BOTTOM] = value[BOTTOM] || defaultSpacing;\n        spacing[LEFT] = value[LEFT] || defaultSpacing;\n    }\n\n    return spacing;\n}\n\nvar current = {\n    compile: function(template) {\n        return template;\n    }\n};\n\nvar TemplateService = Class.extend({\n\n});\n\nTemplateService.register = function(userImplementation) {\n    current = userImplementation;\n};\n\nTemplateService.compile = function(template, options) {\n    return current.compile(template, options);\n};\n\nfunction getTemplate(options) {\n    if (options === void 0) { options = {}; }\n\n    var template;\n    if (options.template) {\n        options.template = template = TemplateService.compile(options.template);\n    } else if (isFunction(options.content)) {\n        template = options.content;\n    }\n\n    return template;\n}\n\nfunction getTemplate$1(options) {\n    if (options === void 0) { options = {}; }\n\n    var ariaTemplate;\n    if (options.ariaTemplate) {\n        options.ariaTemplate = ariaTemplate = TemplateService.compile(options.ariaTemplate);\n    } else if (isFunction(options.ariaContent)) {\n        ariaTemplate = options.ariaContent;\n    }\n\n    return ariaTemplate;\n}\n\nfunction grep(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        if (callback(array[idx])) {\n            result .push(array[idx]);\n        }\n    }\n\n    return result;\n}\n\nfunction hasClasses(element, classNames) {\n    if (element.className) {\n        var names = classNames.split(\" \");\n        for (var idx = 0; idx < names.length; idx++) {\n            if (element.className.indexOf && element.className.indexOf(names[idx]) !== -1) {\n                return true;\n            }\n        }\n    }\n}\n\n// TODO: Remove and replace with Map/WeakMap.\nvar HashMap = function HashMap() {\n    this._map = new Map();\n};\n\nHashMap.prototype.get = function get (key) {\n    return this._map.get(key);\n};\n\nHashMap.prototype.set = function set (key, value) {\n    this._map.set(key, value);\n};\n\nfunction inArray(value, array) {\n    if (array) {\n        return array.indexOf(value) !== -1;\n    }\n}\n\nfunction interpolateValue(start, end, progress) {\n    return kendo.drawing.util.round(start + (end - start) * progress, COORD_PRECISION);\n}\n\nvar TRIGGER = 'trigger';\n\nvar InstanceObserver = Class.extend({\n    init: function(observer, handlers) {\n        this.observer = observer;\n        this.handlerMap = deepExtend({}, this.handlerMap, handlers);\n    },\n\n    trigger: function(name, args) {\n        var ref = this;\n        var observer = ref.observer;\n        var handlerMap = ref.handlerMap;\n        var isDefaultPrevented;\n        if (handlerMap[name]) {\n            isDefaultPrevented = this.callObserver(handlerMap[name], args);\n        } else if (observer[TRIGGER]) {\n            isDefaultPrevented = this.callObserver(TRIGGER, name, args);\n        }\n\n        return isDefaultPrevented;\n    },\n\n    callObserver: function(fnName) {\n        var args = [], len = arguments.length - 1;\n        while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n        return this.observer[fnName].apply(this.observer, args);\n    },\n\n    requiresHandlers: function(names) {\n        var this$1$1 = this;\n\n        if (this.observer.requiresHandlers) {\n            return this.observer.requiresHandlers(names);\n        }\n\n        for (var idx = 0; idx < names.length; idx++) {\n            if (this$1$1.handlerMap[names[idx]]) {\n                return true;\n            }\n        }\n    }\n});\n\nfunction isPlainObject(value) {\n    return Object.prototype.toString.call(value) === \"[object Object]\";\n}\n\nfunction map(array, callback) {\n    var length = array.length;\n    var result = [];\n    for (var idx = 0; idx < length; idx++) {\n        var value = callback(array[idx]);\n        if (kendo.drawing.util.defined(value)) {\n            result.push(value);\n        }\n    }\n    return result;\n}\n\nvar browser = support.browser || {};\n\nfunction mousewheelDelta(e) {\n    var delta = 0;\n\n    if (e.wheelDelta) {\n        delta = -e.wheelDelta / 120;\n\n        if (browser.webkit) {\n            // Webkit browsers scale the delta by twice the device resolution.\n            // Possibly related to https://bugs.webkit.org/show_bug.cgi?id=196339\n            //\n            // Low device resolutions (e.g. zoom-out to 30%) also behave strangely.\n            delta = delta / (2 * Math.max(window.devicePixelRatio, 0.625));\n        }\n    } else if (e.detail) {\n        delta = e.detail / 3;\n    }\n\n    delta = delta > 0 ? Math.ceil(delta) : Math.floor(delta);\n\n    return delta;\n}\n\nvar ref = kendo.drawing.util;\nvar append = ref.append;\nvar bindEvents = ref.bindEvents;\nvar defined = ref.defined;\nvar deg = ref.deg;\nvar elementOffset = ref.elementOffset;\nvar elementSize = ref.elementSize;\nvar eventCoordinates = ref.eventCoordinates;\nvar eventElement = ref.eventElement;\nvar hashKey = ref.hashKey;\nvar last = ref.last;\nvar limitValue = ref.limitValue;\nvar objectKey = ref.objectKey;\nvar rad = ref.rad;\nvar round = ref.round;\nvar unbindEvents = ref.unbindEvents;\nvar valueOrDefault = ref.valueOrDefault;\n\nvar FontLoader = Class.extend({\n\n});\n\nFontLoader.fetchFonts = function(options, fonts, state) {\n    if (state === void 0) { state = { depth: 0 }; }\n\n    var MAX_DEPTH = 5;\n\n    if (!options || state.depth > MAX_DEPTH || !document.fonts) {\n        return;\n    }\n\n    Object.keys(options).forEach(function(key) {\n        var value = options[key];\n        if (key === \"dataSource\" || key[0] === \"$\" || !value) {\n            return;\n        }\n\n        if (key === \"font\") {\n            fonts.push(value);\n        } else if (typeof value === \"object\") {\n            state.depth++;\n            FontLoader.fetchFonts(value, fonts, state);\n            state.depth--;\n        }\n    });\n};\n\nFontLoader.loadFonts = function(fonts, callback) {\n    var promises = [];\n\n    if (fonts.length > 0 && document.fonts) {\n        try {\n            promises = fonts.map(function(font) {\n                return document.fonts.load(font);\n            });\n        } catch (e) {\n            // Silence font-loading errors\n            kendo.logToConsole(e);\n        }\n\n        Promise.all(promises).then(callback, callback);\n    } else {\n        callback();\n    }\n};\n\nFontLoader.preloadFonts = function(options, callback) {\n    var fonts = [];\n    FontLoader.fetchFonts(options, fonts);\n\n    FontLoader.loadFonts(fonts, callback);\n};\n\nfunction setDefaultOptions(type, options) {\n    var proto = type.prototype;\n    if (proto.options) {\n        proto.options = deepExtend({}, proto.options, options);\n    } else {\n        proto.options = options;\n    }\n}\n\nvar KICON = 'k-icon';\nvar KI_PREFFIX = 'k-i-';\nvar KFONTICON = 'k-font-icon';\nvar KSVGICON = 'k-svg-icon';\nvar KSVG_PREFFIX = 'k-svg-i-';\n\nvar HTMLBaseIcon = Class.extend({\n    init: function(element, options) {\n        this.element = element;\n        this.options = deepExtend({}, this.options, options);\n\n        this.wrapper();\n    },\n\n    wrapper: function() {\n        this.addClasses();\n    },\n\n    addClasses: function() {\n    },\n\n    html: function() {\n        return this.element.outerHTML;\n    }\n});\n\nsetDefaultOptions(HTMLBaseIcon, {\n    name: '',\n    size: 'none',\n    themeColor: 'none',\n    flip: 'default',\n    iconClass: '',\n    stylingOptions: [ 'size', 'themeColor', 'fill' ]\n});\n\nvar HTMLFontIcon = HTMLBaseIcon.extend({\n    init: function(element, options) {\n        HTMLBaseIcon.fn.init.call(this, element, options);\n    },\n\n    wrapper: function() {\n        // Find if there is an existing k-i- class appended to the element.\n        var currentIconClass = this.element.className.split(\" \").find(function (x) { return x.startsWith(KI_PREFFIX); });\n        var className = this.options.icon ? (\"\" + (this.options.icon.startsWith(KI_PREFFIX) ? \"\" : KI_PREFFIX) + (this.options.icon)) : \"\";\n\n        this._className = className;\n\n        addClass(this.element, KICON);\n        addClass(this.element, KFONTICON);\n        removeClass(this.element, currentIconClass); // Remove any existing icons.\n        addClass(this.element, className);\n        addClass(this.element, this.options.iconClass || '');\n\n        HTMLBaseIcon.fn.wrapper.call(this);\n    }\n});\n\nsetDefaultOptions(HTMLFontIcon, {\n    name: 'HTMLFontIcon',\n    icon: null\n});\n\nvar HTMLSvgIcon = HTMLBaseIcon.extend({\n    init: function(element, options) {\n        // Ensure that the inner contents of the wrapping span element are always removed for re-rendering purposes.\n        element.innerHTML = \"\";\n\n        HTMLBaseIcon.fn.init.call(this, element, options);\n    },\n\n    wrapper: function() {\n        var icon = this.options.icon;\n        var iconClass = this.options.iconClass;\n        var currentIconClass = this.element.className.split(\" \").find(function (x) { return x.startsWith(KSVG_PREFFIX); });\n\n        if (!icon && iconClass) {\n            // match k-i-(some-icon-name)\n            var regex = /k-i-(\\w+(?:-\\w+)*)/;\n            var iconNameMatch = iconClass.match(regex);\n            if (iconNameMatch) {\n                icon = iconNameMatch[1];\n                iconClass = iconClass.replace(iconNameMatch[0], \"\");\n            }\n        }\n\n        if (isString(icon)) {\n            icon = icon.replace(\"k-i-\", \"\").replace(/-./g, function (x) { return x[1].toUpperCase(); });\n            icon = this.options.svgIcons[icon] || this.options.svgIcons[(icon + \"Icon\")];\n        }\n\n        var className = icon && icon.name ? (\"\" + KSVG_PREFFIX + (icon.name)) : \"\";\n        this._className = className;\n\n        addClass(this.element, KSVGICON);\n        removeClass(this.element, currentIconClass);\n        addClass(this.element, className);\n        addClass(this.element, iconClass || \"\");\n        this.element.setAttribute(\"aria-hidden\", \"true\");\n\n        if (icon && isPlainObject(icon)) {\n            var svgElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n            svgElement.setAttribute(\"viewBox\", icon.viewBox || \"\");\n            svgElement.setAttribute(\"focusable\", \"false\");\n            svgElement.innerHTML = icon.content || \"\";\n\n            this.element.appendChild(svgElement);\n        }\n\n        HTMLBaseIcon.fn.wrapper.call(this);\n    }\n});\n\nsetDefaultOptions(HTMLSvgIcon, {\n    name: 'HTMLSvgIcon',\n    icon: null,\n    svgIcons: {}\n});\n\nvar ICON_TYPES = {\n    'svg': HTMLSvgIcon,\n    'font': HTMLFontIcon\n};\n\nfunction renderIcon(iconElement, iconOptions) {\n    var element = iconElement;\n    var options = iconOptions;\n\n    if (!element\n        || (isObject(element) && !(element instanceof HTMLElement))\n        || isString(element)) {\n        options = element;\n        element = document.createElement(\"span\");\n    }\n\n    if (isString(options)) {\n        options = {\n            icon: options\n        };\n    }\n\n    if (!options.type) {\n        options.type = 'svg';\n    }\n\n    if (!ICON_TYPES[options.type]) {\n        return null;\n    }\n\n    return (new ICON_TYPES[options.type](element, options).html());\n}\n\nfunction sparseArrayLimits(arr) {\n    var min = MAX_VALUE;\n    var max = MIN_VALUE;\n\n    for (var idx = 0, length = arr.length; idx < length; idx++) {\n        var value = arr[idx];\n        if (value !== null && isFinite(value)) {\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n        }\n    }\n\n    return {\n        min: min === MAX_VALUE ? undefined : min,\n        max: max === MIN_VALUE ? undefined : max\n    };\n}\n\nfunction find(array, predicate) {\n    for (var i = 0; i < array.length; i++) {\n        var item = array[i];\n        if (predicate(item, i, array)) {\n            return item;\n        }\n    }\n}\n\nvar Matrix = geometry.Matrix;\nvar matrixRegexp = /matrix\\((.*)\\)/;\n\nfunction parseMatrix(matrixString) {\n    var match = matrixString.match(matrixRegexp);\n    if (match === null || match.length !== 2) {\n        return Matrix.unit();\n    }\n\n    var members = match[1].split(',').map(function (x) { return parseFloat(x); });\n    return new (Function.prototype.bind.apply( Matrix, [ null ].concat( members) ));\n}\n\nfunction transformMatrix(element) {\n    var transform = getComputedStyle(element).transform;\n\n    if (transform === 'none') {\n        return Matrix.unit();\n    }\n\n    return parseMatrix(transform);\n}\n\nfunction elementScale(element) {\n    if (!element) {\n        return Matrix.unit();\n    }\n\n    var matrix = transformMatrix(element);\n    var parent = element.parentElement;\n    while (parent) {\n        var parentMatrix = transformMatrix(parent);\n        matrix = matrix.multiplyCopy(parentMatrix);\n        parent = parent.parentElement;\n    }\n\n    matrix.b = matrix.c = matrix.e = matrix.f = 0;\n    return matrix;\n}\n\nfunction autoTextColor(color) {\n    var isDark = new kendo.Color(color).isDark();\n    if (isDark) {\n        return WHITE;\n    }\n\n    return BLACK;\n}\n\nvar DELETED = {};\n\nvar LegacySet = Class.extend({\n    init: function(values) {\n        var this$1$1 = this;\n\n        this._index = {};\n        this._values = values ? values.slice(0) : [];\n\n        for (var i = 0; i < this._values.length; i++) {\n            this$1$1._index[this$1$1._values[i]] = i;\n        }\n    },\n\n    values: function() {\n        return this._values.filter(function (item) { return item !== DELETED; });\n    },\n\n    has: function(value) {\n        return this._index[value] !== undefined;\n    },\n\n    add: function(value) {\n        if (!this.has(value)) {\n            this._index[value] = this._values.length;\n            this._values.push(value);\n        }\n    },\n\n    delete: function(value) {\n        var index = this._index[value];\n        if (index !== undefined) {\n            this._values[index] = DELETED;\n            delete this._index[value];\n        }\n    },\n\n    clear: function() {\n        this._index = {};\n        this._values = [];\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(LegacySet.fn, {\n        size: {\n            get: function() {\n                return this._values.length;\n            }\n        }\n    });\n}\n\nvar SetWrapper = Class.extend({\n    init: function(values) {\n        this._set = new Set(values);\n    },\n\n    values: function() {\n        return Array.from(this._set);\n    },\n\n    has: function(value) {\n        return this._set.has(value);\n    },\n\n    add: function(value) {\n        this._set.add(value);\n    },\n\n    delete: function(value) {\n        this._set.delete(value);\n    },\n\n    clear: function() {\n        this._set.clear();\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(SetWrapper.fn, {\n        size: {\n            get: function() {\n                return this._set.size;\n            }\n        }\n    });\n}\n\n// TODO: Drop LegacySet when removing support for IE10\nvar supportsSet = function () {\n    var supported = false;\n\n    if (typeof Set === 'function') {\n        var set = new Set([1]);\n        supported = set.has(1);\n    }\n\n    return supported;\n};\n\nfunction createHashSet(values) {\n    if (supportsSet()) {\n        return new SetWrapper(values);\n    }\n\n    return new LegacySet(values);\n}\n\nfunction defaultErrorHandler(error) {\n    throw error;\n}\n\nvar keys = {\n    INSERT: 45,\n    DELETE: 46,\n    BACKSPACE: 8,\n    TAB: 9,\n    ENTER: 13,\n    ESC: 27,\n    LEFT: 37,\n    UP: 38,\n    RIGHT: 39,\n    DOWN: 40,\n    END: 35,\n    HOME: 36,\n    SPACEBAR: 32,\n    PAGEUP: 33,\n    PAGEDOWN: 34,\n    F2: 113,\n    F10: 121,\n    F12: 123,\n    NUMPAD_PLUS: 107,\n    NUMPAD_MINUS: 109,\n    NUMPAD_DOT: 110\n};\n\nfunction hasOwnProperty(obj, property) {\n    return Object.prototype.hasOwnProperty.call(obj, property);\n}\n\n// Based on the implementation from kendo-spreadsheet-common/src/calc.js\nvar Matrix$1 = Class.extend({\n    init: function() {\n        this.height = 0;\n        this.width = 0;\n        this.data = [];\n    },\n\n    clone: function() {\n        var m = new Matrix$1();\n        m.height = this.height;\n        m.width = this.width;\n        m.data = this.data.map(function (row) { return row.slice(); });\n        return m;\n    },\n\n    get: function(row, col) {\n        var line = this.data[row];\n        var val = line ? line[col] : null;\n        return val;\n    },\n\n    set: function(row, col, data) {\n        var line = this.data[row];\n        if (line == null) {\n            line = this.data[row] = [];\n        }\n        line[col] = data;\n        if (row >= this.height) {\n            this.height = row + 1;\n        }\n        if (col >= this.width) {\n            this.width = col + 1;\n        }\n    },\n\n    each: function(f, includeEmpty) {\n        var this$1$1 = this;\n\n        for (var row = 0; row < this.height; ++row) {\n            for (var col = 0; col < this.width; ++col) {\n                var val = this$1$1.get(row, col);\n                if (includeEmpty || val != null) {\n                    val = f(val, row, col);\n                    if (val !== undefined) {\n                        return val;\n                    }\n                }\n            }\n        }\n    },\n\n    map: function(f, includeEmpty) {\n        var m = new Matrix$1();\n        this.each(function(el, row, col) {\n            m.set(row, col, f(el, row, col));\n        }, includeEmpty);\n        return m;\n    },\n\n    transpose: function() {\n        var m = new Matrix$1();\n        this.each(function(el, row, col) {\n            m.set(col, row, el);\n        });\n        return m;\n    },\n\n    unit: function(n) {\n        this.width = this.height = n;\n        var a = this.data = new Array(n);\n        for (var i = n; --i >= 0;) {\n            var row = a[i] = new Array(n);\n            for (var j = n; --j >= 0;) {\n                row[j] = i === j ? 1 : 0;\n            }\n        }\n        return this;\n    },\n\n    multiply: function(b) {\n        var a = this;\n        var m = new Matrix$1();\n        for (var row = 0; row < a.height; ++row) {\n            for (var col = 0; col < b.width; ++col) {\n                var s = 0;\n                for (var i = 0; i < a.width; ++i) {\n                    var va = a.get(row, i);\n                    var vb = b.get(i, col);\n                    if (typeof va === \"number\" && typeof vb === \"number\") {\n                        s += va * vb;\n                    }\n                }\n                m.set(row, col, s);\n            }\n        }\n        return m;\n    },\n\n    inverse: function() {\n        var n = this.width;\n        var m = this.augment(new Matrix$1().unit(n));\n        var a = m.data;\n\n        // Gaussian elimination\n        // https://en.wikipedia.org/wiki/Gaussian_elimination#Finding_the_inverse_of_a_matrix\n\n        // 1. Get zeros below main diagonal\n        var loop = function ( k ) {\n            var imax = argmax(k, n, function(i) { return a[i][k]; });\n            if (!a[imax][k]) {\n                return { v: null }; // singular matrix\n            }\n            if (k !== imax) {\n                var tmp = a[k];\n                a[k] = a[imax];\n                a[imax] = tmp;\n            }\n            for (var i = k + 1; i < n; ++i) {\n                for (var j = k + 1; j < 2 * n; ++j) {\n                    a[i][j] -= a[k][j] * a[i][k] / a[k][k];\n                }\n                a[i][k] = 0;\n            }\n        };\n\n        for (var k = 0; k < n; ++k) {\n            var returned = loop( k );\n\n            if ( returned ) return returned.v;\n        }\n\n        // 2. Get 1-s on main diagonal, dividing by pivot\n        for (var i$1 = 0; i$1 < n; ++i$1) {\n            for (var f = a[i$1][i$1], j$1 = 0; j$1 < 2 * n; ++j$1) {\n                a[i$1][j$1] /= f;\n            }\n        }\n\n        // 3. Get zeros above main diagonal.  Actually, we only care to compute the right side\n        // here (that will be the inverse), so in the inner loop below we go while j >= n,\n        // instead of j >= k.\n        for (var k$1 = n; --k$1 >= 0;) {\n            for (var i$2 = k$1; --i$2 >= 0;) {\n                if (a[i$2][k$1]) {\n                    for (var j$2 = 2 * n; --j$2 >= n;) {\n                        a[i$2][j$2] -= a[k$1][j$2] * a[i$2][k$1];\n                    }\n                }\n            }\n        }\n\n        return m.slice(0, n, n, n);\n    },\n\n    augment: function(m) {\n        var ret = this.clone();\n        var n = ret.width;\n        m.each(function(val, row, col) {\n            ret.set(row, col + n, val);\n        });\n        return ret;\n    },\n\n    slice: function(row, col, height, width) {\n        var this$1$1 = this;\n\n        var m = new Matrix$1();\n        for (var i = 0; i < height; ++i) {\n            for (var j = 0; j < width; ++j) {\n                m.set(i, j, this$1$1.get(row + i, col + j));\n            }\n        }\n        return m;\n    }\n});\n\nfunction argmax(start, end, f) {\n    var max = f(start), pos = start;\n    for (var i = start + 1; i < end; i++) {\n        var v = f(start);\n        if (v > max) {\n            max = v;\n            pos = start;\n        }\n    }\n    return pos;\n}\n\nvar STRING$1 = \"string\";\nvar FUNCTION = \"function\";\n\nvar preventDefault = function() {\n    this._defaultPrevented = true;\n};\n\nvar isDefaultPrevented = function() {\n    return this._defaultPrevented === true;\n};\n\nvar Observable$$1 = (function (Class$$1) {\n    function Observable$$1() {\n        Class$$1.call(this);\n        this._events = {};\n    }\n\n    if ( Class$$1 ) Observable$$1.__proto__ = Class$$1;\n    Observable$$1.prototype = Object.create( Class$$1 && Class$$1.prototype );\n    Observable$$1.prototype.constructor = Observable$$1;\n\n    Observable$$1.prototype.destroy = function destroy () {\n        this.unbind();\n    };\n\n    Observable$$1.prototype.bind = function bind (event, handlers, one) {\n        var that = this,\n            idx,\n            eventNames = typeof event === STRING$1 ? [event] : event || [],\n            length,\n            original,\n            handler,\n            handlersIsFunction = typeof handlers === FUNCTION,\n            events;\n\n        if (handlers === undefined) {\n            for (idx in event) {\n                that.bind(idx, event[idx]);\n            }\n\n            return that;\n        }\n\n        /* eslint-disable no-loop-func */\n        var loop = function ( ) {\n            var eventName = eventNames[idx];\n\n            handler = handlersIsFunction ? handlers : handlers[eventName];\n\n            if (handler) {\n                if (one) {\n                    original = handler;\n                    handler = function() {\n                        that.unbind(eventName, handler);\n                        original.apply(that, arguments);\n                    };\n\n                    handler.original = original;\n                }\n\n                events = that._events[eventName] = that._events[eventName] || [];\n                events.push(handler);\n            }\n        };\n\n        for (idx = 0, length = eventNames.length; idx < length; idx++) loop( );\n        /* eslint-enable no-loop-func */\n\n        return that;\n    };\n\n    Observable$$1.prototype.one = function one (eventNames, handlers) {\n        return this.bind(eventNames, handlers, true);\n    };\n\n    Observable$$1.prototype.first = function first (eventName, handlers) {\n        var that = this,\n            idx,\n            eventNames = typeof eventName === STRING$1 ? [eventName] : eventName,\n            length,\n            handler,\n            handlersIsFunction = typeof handlers === FUNCTION,\n            events;\n\n        for (idx = 0, length = eventNames.length; idx < length; idx++) {\n            var eventName$1 = eventNames[idx];\n\n            handler = handlersIsFunction ? handlers : handlers[eventName$1];\n\n            if (handler) {\n                events = that._events[eventName$1] = that._events[eventName$1] || [];\n                events.unshift(handler);\n            }\n        }\n\n        return that;\n    };\n\n    Observable$$1.prototype.trigger = function trigger (eventName, eventArgs) {\n        var that = this,\n            events = that._events[eventName],\n            idx,\n            length;\n\n        if (events) {\n            var e = eventArgs || {};\n\n            e.sender = that;\n\n            e._defaultPrevented = false;\n\n            e.preventDefault = preventDefault;\n\n            e.isDefaultPrevented = isDefaultPrevented;\n\n            events = events.slice();\n\n            for (idx = 0, length = events.length; idx < length; idx++) {\n                events[idx].call(that, e);\n            }\n\n            return e._defaultPrevented === true;\n        }\n\n        return false;\n    };\n\n    Observable$$1.prototype.unbind = function unbind (eventName, handler) {\n        var that = this,\n            events = that._events[eventName],\n            idx;\n\n        if (eventName === undefined) {\n            that._events = {};\n        } else if (events) {\n            if (handler) {\n                for (idx = events.length - 1; idx >= 0; idx--) {\n                    if (events[idx] === handler || events[idx].original === handler) {\n                        events.splice(idx, 1);\n                    }\n                }\n            } else {\n                that._events[eventName] = [];\n            }\n        }\n\n        return that;\n    };\n\n    Observable$$1.prototype._setEvents = function _setEvents (options) {\n        var this$1$1 = this;\n\n        var length = (this.events || []).length;\n\n        for (var idx = 0; idx < length; idx ++) {\n            var e = this$1$1.events[idx];\n\n            if (this$1$1.options[e] && options[e]) {\n                this$1$1.unbind(e, this$1$1.options[e]);\n\n                if (this$1$1._events && this$1$1._events[e]) {\n                    delete this$1$1._events[e];\n                }\n            }\n        }\n\n        this.bind(this.events, options);\n    };\n\n    return Observable$$1;\n}(Class));\n\nfunction autoMajorUnit(min, max) {\n    var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n    if (diff === 0) {\n        if (max === 0) {\n            return 0.1;\n        }\n\n        diff = Math.abs(max);\n    }\n\n    var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n    var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n    var scaleMultiplier = 1;\n\n    if (relativeValue < 1.904762) {\n        scaleMultiplier = 0.2;\n    } else if (relativeValue < 4.761904) {\n        scaleMultiplier = 0.5;\n    } else if (relativeValue < 9.523809) {\n        scaleMultiplier = 1;\n    } else {\n        scaleMultiplier = 2;\n    }\n\n    return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n}\n\nvar Point = Class.extend({\n    init: function(x, y) {\n\n        this.x = x || 0;\n        this.y = y || 0;\n    },\n\n    clone: function() {\n        return new Point(this.x, this.y);\n    },\n\n    equals: function(point) {\n        return point && this.x === point.x && this.y === point.y;\n    },\n\n    rotate: function(center, degrees) {\n        var theta = rad(degrees);\n        var cosT = Math.cos(theta);\n        var sinT = Math.sin(theta);\n        var cx = center.x;\n        var cy = center.y;\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        this.x = round(\n            cx + (x - cx) * cosT + (y - cy) * sinT,\n            COORD_PRECISION\n        );\n\n        this.y = round(\n            cy + (y - cy) * cosT - (x - cx) * sinT,\n            COORD_PRECISION\n        );\n\n        return this;\n    },\n\n    multiply: function(a) {\n\n        this.x *= a;\n        this.y *= a;\n\n        return this;\n    },\n\n    distanceTo: function(point) {\n        var dx = this.x - point.x;\n        var dy = this.y - point.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n});\n\nPoint.onCircle = function(center, angle, radius) {\n    var radians = rad(angle);\n\n    return new Point(\n        center.x - radius * Math.cos(radians),\n        center.y - radius * Math.sin(radians)\n    );\n};\n\nvar Box = Class.extend({\n    init: function(x1, y1, x2, y2) {\n\n        this.x1 = x1 || 0;\n        this.y1 = y1 || 0;\n        this.x2 = x2 || 0;\n        this.y2 = y2 || 0;\n    },\n\n    equals: function(box) {\n        return this.x1 === box.x1 && this.x2 === box.x2 &&\n            this.y1 === box.y1 && this.y2 === box.y2;\n    },\n\n    width: function() {\n        return this.x2 - this.x1;\n    },\n\n    height: function() {\n        return this.y2 - this.y1;\n    },\n\n    translate: function(dx, dy) {\n        this.x1 += dx;\n        this.x2 += dx;\n        this.y1 += dy;\n        this.y2 += dy;\n\n        return this;\n    },\n\n    move: function(x, y) {\n        var height = this.height();\n        var width = this.width();\n\n        if (defined(x)) {\n            this.x1 = x;\n            this.x2 = this.x1 + width;\n        }\n\n        if (defined(y)) {\n            this.y1 = y;\n            this.y2 = this.y1 + height;\n        }\n\n        return this;\n    },\n\n    wrap: function(targetBox) {\n        this.x1 = Math.min(this.x1, targetBox.x1);\n        this.y1 = Math.min(this.y1, targetBox.y1);\n        this.x2 = Math.max(this.x2, targetBox.x2);\n        this.y2 = Math.max(this.y2, targetBox.y2);\n\n        return this;\n    },\n\n    wrapPoint: function(point) {\n        var arrayPoint = isArray(point);\n        var x = arrayPoint ? point[0] : point.x;\n        var y = arrayPoint ? point[1] : point.y;\n        this.wrap(new Box(x, y, x, y));\n\n        return this;\n    },\n\n    snapTo: function(targetBox, axis) {\n\n        if (axis === X || !axis) {\n            this.x1 = targetBox.x1;\n            this.x2 = targetBox.x2;\n        }\n\n        if (axis === Y || !axis) {\n            this.y1 = targetBox.y1;\n            this.y2 = targetBox.y2;\n        }\n\n        return this;\n    },\n\n    alignTo: function(targetBox, anchor) {\n        var height = this.height();\n        var width = this.width();\n        var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n        var offset = axis === Y ? height : width;\n\n        if (anchor === CENTER) {\n            var targetCenter = targetBox.center();\n            var center = this.center();\n\n            this.x1 += targetCenter.x - center.x;\n            this.y1 += targetCenter.y - center.y;\n        } else if (anchor === TOP || anchor === LEFT) {\n            this[axis + 1] = targetBox[axis + 1] - offset;\n        } else {\n            this[axis + 1] = targetBox[axis + 2];\n        }\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    shrink: function(dw, dh) {\n\n        this.x2 -= dw;\n        this.y2 -= dh;\n\n        return this;\n    },\n\n    expand: function(dw, dh) {\n        this.shrink(-dw, -dh);\n        return this;\n    },\n\n    pad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        this.x1 -= spacing.left;\n        this.x2 += spacing.right;\n        this.y1 -= spacing.top;\n        this.y2 += spacing.bottom;\n\n        return this;\n    },\n\n    unpad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        spacing.left = -spacing.left;\n        spacing.top = -spacing.top;\n        spacing.right = -spacing.right;\n        spacing.bottom = -spacing.bottom;\n\n        return this.pad(spacing);\n    },\n\n    clone: function() {\n        return new Box(this.x1, this.y1, this.x2, this.y2);\n    },\n\n    center: function() {\n        return new Point(\n            this.x1 + this.width() / 2,\n            this.y1 + this.height() / 2\n        );\n    },\n\n    containsPoint: function(point) {\n\n        return point.x >= this.x1 && point.x <= this.x2 &&\n               point.y >= this.y1 && point.y <= this.y2;\n    },\n\n    points: function() {\n        return [\n            new Point(this.x1, this.y1),\n            new Point(this.x2, this.y1),\n            new Point(this.x2, this.y2),\n            new Point(this.x1, this.y2)\n        ];\n    },\n\n    getHash: function() {\n        return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n    },\n\n    overlaps: function(box) {\n        return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n    },\n\n    rotate: function(rotation) {\n        var width = this.width();\n        var height = this.height();\n        var ref = this.center();\n        var cx = ref.x;\n        var cy = ref.y;\n\n        var r1 = rotatePoint(0, 0, cx, cy, rotation);\n        var r2 = rotatePoint(width, 0, cx, cy, rotation);\n        var r3 = rotatePoint(width, height, cx, cy, rotation);\n        var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n        width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n        height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    toRect: function() {\n        return new Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n    },\n\n    hasSize: function() {\n        return this.width() !== 0 && this.height() !== 0;\n    },\n\n    align: function(targetBox, axis, alignment) {\n        var c1 = axis + 1;\n        var c2 = axis + 2;\n        var sizeFunc = axis === X ? WIDTH : HEIGHT;\n        var size = this[sizeFunc]();\n\n        if (inArray(alignment, [ LEFT, TOP ])) {\n            this[c1] = targetBox[c1];\n            this[c2] = this[c1] + size;\n        } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n            this[c2] = targetBox[c2];\n            this[c1] = this[c2] - size;\n        } else if (alignment === CENTER) {\n            this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n            this[c2] = this[c1] + size;\n        }\n    }\n});\n\nfunction rotatePoint(x, y, cx, cy, angle) {\n    var theta = rad(angle);\n\n    return new Point(\n        cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n        cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n    );\n}\n\nvar Ring = Class.extend({\n    init: function(center, innerRadius, radius, startAngle, angle) {\n\n        this.center = center;\n        this.innerRadius = innerRadius;\n        this.radius = radius;\n        this.startAngle = startAngle;\n        this.angle = angle;\n    },\n\n    clone: function() {\n        return new Ring(this.center, this.innerRadius, this.radius, this.startAngle, this.angle);\n    },\n\n    middle: function() {\n        return this.startAngle + this.angle / 2;\n    },\n\n    setRadius: function(newRadius, innerRadius) {\n        if (innerRadius) {\n            this.innerRadius = newRadius;\n        } else {\n            this.radius = newRadius;\n        }\n\n        return this;\n    },\n\n    point: function(angle, innerRadius) {\n        var radianAngle = rad(angle);\n        var ax = Math.cos(radianAngle);\n        var ay = Math.sin(radianAngle);\n        var radius = innerRadius ? this.innerRadius : this.radius;\n        var x = round(this.center.x - (ax * radius), COORD_PRECISION);\n        var y = round(this.center.y - (ay * radius), COORD_PRECISION);\n\n        return new Point(x, y);\n    },\n\n    adjacentBox: function(distance, width, height) {\n        var sector = this.clone().expand(distance);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n        var hw = width / 2;\n        var hh = height / 2;\n        var sa = Math.sin(rad(midAndle));\n        var ca = Math.cos(rad(midAndle));\n        var x = midPoint.x - hw;\n        var y = midPoint.y - hh;\n\n        if (Math.abs(sa) < 0.9) {\n            x += hw * -ca / Math.abs(ca);\n        }\n\n        if (Math.abs(ca) < 0.9) {\n            y += hh * -sa / Math.abs(sa);\n        }\n\n        return new Box(x, y, x + width, y + height);\n    },\n\n    containsPoint: function(p) {\n        var center = this.center;\n        var innerRadius = this.innerRadius;\n        var radius = this.radius;\n        var startAngle = this.startAngle;\n        var endAngle = this.startAngle + this.angle;\n        var dx = p.x - center.x;\n        var dy = p.y - center.y;\n        var vector = new Point(dx, dy);\n        var startPoint = this.point(startAngle);\n        var startVector = new Point(startPoint.x - center.x, startPoint.y - center.y);\n        var endPoint = this.point(endAngle);\n        var endVector = new Point(endPoint.x - center.x, endPoint.y - center.y);\n        var dist = round(dx * dx + dy * dy, COORD_PRECISION);\n\n        return (startVector.equals(vector) || clockwise(startVector, vector)) &&\n               !clockwise(endVector, vector) &&\n               dist >= innerRadius * innerRadius && dist <= radius * radius;\n    },\n\n    getBBox: function() {\n        var this$1$1 = this;\n\n        var box = new Box(MAX_VALUE, MAX_VALUE, MIN_VALUE, MIN_VALUE);\n        var startAngle = round(this.startAngle % 360);\n        var endAngle = round((startAngle + this.angle) % 360);\n        var innerRadius = this.innerRadius;\n        var allAngles = [ 0, 90, 180, 270, startAngle, endAngle ].sort(numericComparer);\n        var startAngleIndex = allAngles.indexOf(startAngle);\n        var endAngleIndex = allAngles.indexOf(endAngle);\n        var angles;\n\n        if (startAngle === endAngle) {\n            angles = allAngles;\n        } else {\n            if (startAngleIndex < endAngleIndex) {\n                angles = allAngles.slice(startAngleIndex, endAngleIndex + 1);\n            } else {\n                angles = [].concat(\n                    allAngles.slice(0, endAngleIndex + 1),\n                    allAngles.slice(startAngleIndex, allAngles.length)\n                );\n            }\n        }\n\n        for (var i = 0; i < angles.length; i++) {\n            var point = this$1$1.point(angles[i]);\n            box.wrapPoint(point);\n            box.wrapPoint(point, innerRadius);\n        }\n\n        if (!innerRadius) {\n            box.wrapPoint(this.center);\n        }\n\n        return box;\n    },\n\n    expand: function(value) {\n        this.radius += value;\n        return this;\n    }\n});\n\nfunction numericComparer(a, b) {\n    return a - b;\n}\n\nvar Sector = Ring.extend({\n    init: function(center, radius, startAngle, angle) {\n        Ring.fn.init.call(this, center, 0, radius, startAngle, angle);\n    },\n\n    expand: function(value) {\n        return Ring.fn.expand.call(this, value);\n    },\n\n    clone: function() {\n        return new Sector(this.center, this.radius, this.startAngle, this.angle);\n    },\n\n    setRadius: function(newRadius) {\n        this.radius = newRadius;\n\n        return this;\n    }\n});\n\nvar DIRECTION_ANGLE = 0.001; //any value that will make the endAngle bigger than the start angle will work here.\n\nvar ShapeBuilder = Class.extend({\n    createRing: function(sector, options) {\n        var startAngle = sector.startAngle + 180;\n        var endAngle = sector.angle + startAngle;\n\n        //required in order to avoid reversing the arc direction in cases like 0.000000000000001 + 100 === 100\n        if (sector.angle === 0 || sector.angle > 0 && startAngle === endAngle) {\n            endAngle += DIRECTION_ANGLE;\n        }\n\n        var center = new geometry.Point(sector.center.x, sector.center.y);\n        var radius = Math.max(sector.radius, 0);\n        var innerRadius = Math.max(sector.innerRadius, 0);\n        var arc = new geometry.Arc(center, {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: radius,\n            radiusY: radius\n        });\n        var path = Path.fromArc(arc, options).close();\n\n        if (innerRadius) {\n            arc.radiusX = arc.radiusY = innerRadius;\n            var innerEnd = arc.pointAt(endAngle);\n            path.lineTo(innerEnd.x, innerEnd.y);\n            path.arc(endAngle, startAngle, innerRadius, innerRadius, true);\n        } else {\n            path.lineTo(center.x, center.y);\n        }\n\n        return path;\n    }\n});\n\nShapeBuilder.current = new ShapeBuilder();\n\nvar ChartElement = Class.extend({\n    init: function(options) {\n\n        this.children = [];\n\n        this.options = deepExtend({}, this.options, this.initUserOptions(options));\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    reflow: function(targetBox) {\n        var children = this.children;\n        var box;\n\n        for (var i = 0; i < children.length; i++) {\n            var currentChild = children[i];\n            currentChild.reflow(targetBox);\n\n            box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n        }\n\n        this.box = box || targetBox;\n    },\n\n    destroy: function() {\n        var children = this.children;\n\n        if (this.animation) {\n            this.animation.destroy();\n        }\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n    },\n\n    getRoot: function() {\n        var parent = this.parent;\n\n        return parent ? parent.getRoot() : null;\n    },\n\n    getSender: function() {\n        var service = this.getService();\n        if (service) {\n            return service.sender;\n        }\n    },\n\n    getService: function() {\n        var element = this;\n        while (element) {\n            if (element.chartService) {\n                return element.chartService;\n            }\n            element = element.parent;\n        }\n    },\n\n    translateChildren: function(dx, dy) {\n        var children = this.children;\n        var childrenCount = children.length;\n\n        for (var i = 0; i < childrenCount; i++) {\n            children[i].box.translate(dx, dy);\n        }\n    },\n\n    append: function() {\n        var arguments$1 = arguments;\n        var this$1$1 = this;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var item = arguments$1[i];\n            this$1$1.children.push(item);\n            item.parent = this$1$1;\n        }\n    },\n\n    renderVisual: function() {\n        if (this.options.visible === false) {\n            return;\n        }\n\n        this.createVisual();\n\n        this.addVisual();\n\n        this.renderChildren();\n\n        this.createAnimation();\n        this.renderComplete();\n    },\n\n    addVisual: function() {\n        if (this.visual) {\n            this.visual.chartElement = this;\n\n            if (this.parent) {\n                this.parent.appendVisual(this.visual);\n            }\n        }\n    },\n\n    renderChildren: function() {\n        var children = this.children;\n        var length = children.length;\n        for (var i = 0; i < length; i++) {\n            children[i].renderVisual();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: this.options.zIndex,\n            visible: valueOrDefault(this.options.visible, true)\n        });\n    },\n\n    createAnimation: function() {\n        if (this.visual && this.options.animation) {\n            this.animation = drawing.Animation.create(\n                this.visual, this.options.animation\n            );\n        }\n    },\n\n    appendVisual: function(childVisual) {\n        if (!childVisual.chartElement) {\n            childVisual.chartElement = this;\n        }\n\n        if (childVisual.options.noclip) {\n            this.clipRoot().visual.append(childVisual);\n        } else if (defined(childVisual.options.zIndex)) {\n            this.stackRoot().stackVisual(childVisual);\n        } else if (this.isStackRoot) {\n            this.stackVisual(childVisual);\n        } else if (this.visual) {\n            this.visual.append(childVisual);\n        } else {\n            // Allow chart elements without visuals to\n            // pass through child visuals\n            this.parent.appendVisual(childVisual);\n        }\n    },\n\n    clipRoot: function() {\n        if (this.parent) {\n            return this.parent.clipRoot();\n        }\n\n        return this;\n    },\n\n    stackRoot: function() {\n        if (this.parent) {\n            return this.parent.stackRoot();\n        }\n\n        return this;\n    },\n\n    stackVisual: function(childVisual) {\n        var zIndex = childVisual.options.zIndex || 0;\n        var visuals = this.visual.children;\n        var length = visuals.length;\n        var pos;\n\n        for (pos = 0; pos < length; pos++) {\n            var sibling = visuals[pos];\n            var here = valueOrDefault(sibling.options.zIndex, 0);\n            if (here > zIndex) {\n                break;\n            }\n        }\n\n        this.visual.insert(pos, childVisual);\n    },\n\n    traverse: function(callback) {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            var child = children[i];\n\n            callback(child);\n            if (child.traverse) {\n                child.traverse(callback);\n            }\n        }\n    },\n\n    closest: function(match) {\n        var element = this;\n        var matched = false;\n\n        while (element && !matched) {\n            matched = match(element);\n\n            if (!matched) {\n                element = element.parent;\n            }\n        }\n\n        if (matched) {\n            return element;\n        }\n    },\n\n    renderComplete: function() {},\n\n    hasHighlight: function() {\n        var options = (this.options || {}).highlight;\n        return !(!this.createHighlight || (options && options.visible === false) || this.visible === false);\n    },\n\n    toggleHighlight: function(show, opacity) {\n        var this$1$1 = this;\n\n        var options = (this.options || {}).highlight || {};\n        var customVisual = options.visual;\n        var highlight = this._highlight;\n\n        if (!highlight) {\n            var highlightOptions = {\n                fill: {\n                    color: WHITE,\n                    opacity: opacity || 0.2\n                },\n                stroke: {\n                    color: WHITE,\n                    width: 1,\n                    opacity: opacity || 0.2\n                }\n            };\n\n            if (customVisual) {\n                highlight = this._highlight = customVisual(\n                    $.extend(this.highlightVisualArgs(), {\n                        createVisual: function () { return this$1$1.createHighlight(highlightOptions); },\n                        sender: this.getSender(),\n                        series: this.series,\n                        dataItem: this.dataItem,\n                        category: this.category,\n                        value: this.value,\n                        percentage: this.percentage,\n                        runningTotal: this.runningTotal,\n                        total: this.total\n                    })\n                );\n\n                if (!highlight) {\n                    return;\n                }\n            } else {\n                highlight = this._highlight = this.createHighlight(highlightOptions);\n            }\n\n            if (!defined(highlight.options.zIndex)) {\n                highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n            }\n\n            this.appendVisual(highlight);\n        }\n\n        highlight.visible(show);\n    },\n\n    toggleFocusHighlight: function(show) {\n        var options = ((this.options || {}).accessibility || {}).highlight || {};\n        var focusHighlight = this._focusHighlight;\n\n        if (!show && !focusHighlight) {\n            return;\n        }\n\n        if (!focusHighlight) {\n            var rootBackground = this.getRoot().options.background;\n            var highlightColor = autoTextColor(rootBackground);\n            var focusHighlightOptions = {\n                fill: {\n                    opacity: options.opacity,\n                    color: options.color\n                },\n                stroke: $.extend({}, {color: highlightColor}, options.border),\n                zIndex: options.zIndex\n            };\n\n            focusHighlight = this._focusHighlight = this.createFocusHighlight(focusHighlightOptions);\n\n            this.appendVisual(focusHighlight);\n        }\n\n        focusHighlight.visible(show);\n    },\n\n    createGradientOverlay: function(element, options, gradientOptions) {\n        var overlay = new Path($.extend({\n            stroke: {\n                color: \"none\"\n            },\n            fill: this.createGradient(gradientOptions),\n            closed: element.options.closed\n        }, options));\n\n        overlay.segments.elements(element.segments.elements());\n\n        return overlay;\n    },\n\n    createGradient: function(options) {\n        if (this.parent) {\n            return this.parent.createGradient(options);\n        }\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return true;\n    }\n});\n\nChartElement.prototype.options = { };\n\nvar BoxElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.options.margin = getSpacing(this.options.margin);\n        this.options.padding = getSpacing(this.options.padding);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var width = options.width;\n        var height = options.height;\n        var shrinkToFit = options.shrinkToFit;\n        var hasSetSize = width && height;\n        var margin = options.margin;\n        var padding = options.padding;\n        var borderWidth = options.border.width;\n        var box;\n\n        var reflowPaddingBox = function () {\n            this$1$1.align(targetBox, X, options.align);\n            this$1$1.align(targetBox, Y, options.vAlign);\n            this$1$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n        };\n\n        var contentBox = targetBox.clone();\n        if (hasSetSize) {\n            contentBox.x2 = contentBox.x1 + width;\n            contentBox.y2 = contentBox.y1 + height;\n        }\n\n        if (shrinkToFit) {\n            contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n        }\n\n        ChartElement.fn.reflow.call(this, contentBox);\n\n        if (hasSetSize) {\n            box = this.box = new Box(0, 0, width, height);\n        } else {\n            box = this.box;\n        }\n\n        if (shrinkToFit && hasSetSize) {\n            reflowPaddingBox();\n            contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n        } else {\n            contentBox = this.contentBox = box.clone();\n            box.pad(padding).pad(borderWidth).pad(margin);\n            reflowPaddingBox();\n        }\n\n        this.translateChildren(\n            box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n            box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n        );\n\n        var children = this.children;\n        for (var i = 0; i < children.length; i++) {\n            var item = children[i];\n            item.reflow(item.box);\n        }\n    },\n\n    align: function(targetBox, axis, alignment) {\n        this.box.align(targetBox, axis, alignment);\n    },\n\n    hasBox: function() {\n        var options = this.options;\n        return options.border.width || options.background;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        if (options.visible && this.hasBox()) {\n            this.visual.append(Path.fromRect(\n                this.paddingBox.toRect(),\n                this.visualStyle()\n            ));\n        }\n    },\n\n    visualStyle: function() {\n        var options = this.options;\n        var border = options.border || {};\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    }\n});\n\nsetDefaultOptions(BoxElement, {\n    align: LEFT,\n    vAlign: TOP,\n    margin: {},\n    padding: {},\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    background: \"\",\n    shrinkToFit: false,\n    width: 0,\n    height: 0,\n    visible: true\n});\n\nfunction addAccessibilityAttributesToVisual(visual, accessibilityOptions) {\n    if (accessibilityOptions) {\n        visual.options.className = accessibilityOptions.className;\n        visual.options.role = accessibilityOptions.role;\n        visual.options.ariaLabel = accessibilityOptions.ariaLabel;\n        visual.options.ariaRoleDescription = accessibilityOptions.ariaRoleDescription;\n        visual.options.ariaChecked = accessibilityOptions.ariaChecked;\n    }\n}\n\nvar ShapeElement = BoxElement.extend({\n    init: function(options, pointData) {\n        BoxElement.fn.init.call(this, options);\n\n        this.pointData = pointData;\n    },\n\n    getElement: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.paddingBox;\n        var type = options.type;\n        var rotation = options.rotation;\n        var center = box.center();\n        var halfWidth = box.width() / 2;\n        var halfHeight = box.height() / 2;\n\n        if (!options.visible || !this.hasBox()) {\n            return null;\n        }\n\n        var style = this.visualStyle();\n        var element;\n\n        if (type === CIRCLE) {\n            element = new drawing.Circle(\n                new Circle([\n                    round(box.x1 + halfWidth, COORD_PRECISION),\n                    round(box.y1 + halfHeight, COORD_PRECISION)\n                ], Math.min(halfWidth, halfHeight)),\n                style\n            );\n        } else if (type === TRIANGLE) {\n            element = Path.fromPoints([\n                [ box.x1 + halfWidth, box.y1 ],\n                [ box.x1, box.y2 ],\n                [ box.x2, box.y2 ]\n            ], style).close();\n        } else if (type === CROSS) {\n            element = new drawing.MultiPath(style);\n\n            element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n            element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n        } else {\n            var rect = box.toRect();\n            if (type === ROUNDED_RECT) {\n                var borderRadius = valueOrDefault(options.borderRadius, rect.width() / 5);\n                rect.setCornerRadius(borderRadius);\n            }\n\n            element = Path.fromRect(rect, style);\n        }\n\n        if (rotation) {\n            element.transform(geometryTransform()\n                .rotate(-rotation, [ center.x, center.y ])\n            );\n        }\n\n        element.options.zIndex = options.zIndex;\n\n        return element;\n    },\n\n    createElement: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.options.visual;\n        var pointData = this.pointData || {};\n        var visual;\n\n        if (customVisual) {\n            visual = customVisual({\n                value: pointData.value,\n                dataItem: pointData.dataItem,\n                sender: this.getSender(),\n                series: pointData.series,\n                category: pointData.category,\n                rect: this.paddingBox.toRect(),\n                options: this.visualOptions(),\n                createVisual: function () { return this$1$1.getElement(); }\n            });\n        } else {\n            visual = this.getElement();\n        }\n\n        return visual;\n    },\n\n    visualOptions: function() {\n        var options = this.options;\n        return {\n            background: options.background,\n            border: options.border,\n            margin: options.margin,\n            padding: options.padding,\n            type: options.type,\n            size: options.width,\n            visible: options.visible\n        };\n    },\n\n    createVisual: function() {\n        this.visual = this.createElement();\n\n        addAccessibilityAttributesToVisual(this.visual, this.options.accessibilityOptions);\n    }\n});\n\nsetDefaultOptions(ShapeElement, {\n    type: CIRCLE,\n    align: CENTER,\n    vAlign: CENTER\n});\n\nvar LINEAR = \"linear\";\nvar RADIAL = \"radial\";\n\nvar GRADIENTS = {\n    glass: {\n        type: LINEAR,\n        rotation: 0,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.25,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 1,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.55\n        }, {\n            offset: 0.65,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0.25\n        } ]\n    },\n    roundedBevel: {\n        type: RADIAL,\n        stops: [ {\n            offset: 0.33,\n            color: WHITE,\n            opacity: 0.06\n        }, {\n            offset: 0.83,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.95,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    roundedGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0\n        }, {\n            offset: 0.5,\n            color: WHITE,\n            opacity: 0.3\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    sharpGlass: {\n        type: RADIAL,\n        supportVML: false,\n        stops: [ {\n            offset: 0,\n            color: WHITE,\n            opacity: 0.2\n        }, {\n            offset: 0.15,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.17,\n            color: WHITE,\n            opacity: 0.35\n        }, {\n            offset: 0.85,\n            color: WHITE,\n            opacity: 0.05\n        }, {\n            offset: 0.87,\n            color: WHITE,\n            opacity: 0.15\n        }, {\n            offset: 0.99,\n            color: WHITE,\n            opacity: 0\n        } ]\n    },\n    bubbleShadow: {\n        type: RADIAL,\n        center: [ 0.5, 0.5 ],\n        radius: 0.5\n    }\n};\n\nfunction boxDiff(r, s) {\n    if (r.x1 === s.x1 && r.y1 === s.y1 && r.x2 === s.x2 && r.y2 === s.y2) {\n        return s;\n    }\n\n    var a = Math.min(r.x1, s.x1);\n    var b = Math.max(r.x1, s.x1);\n    var c = Math.min(r.x2, s.x2);\n    var d = Math.max(r.x2, s.x2);\n    var e = Math.min(r.y1, s.y1);\n    var f = Math.max(r.y1, s.y1);\n    var g = Math.min(r.y2, s.y2);\n    var h = Math.max(r.y2, s.y2);\n    var boxes = [];\n\n    // X = intersection, 0-7 = possible difference areas\n    // h +-+-+-+\n    // . |5|6|7|\n    // g +-+-+-+\n    // . |3|X|4|\n    // f +-+-+-+\n    // . |0|1|2|\n    // e +-+-+-+\n    // . a b c d\n\n    // we'll always have rectangles 1, 3, 4 and 6\n    boxes[0] = new Box(b, e, c, f);\n    boxes[1] = new Box(a, f, b, g);\n    boxes[2] = new Box(c, f, d, g);\n    boxes[3] = new Box(b, g, c, h);\n\n    // decide which corners\n    if (r.x1 === a && r.y1 === e || s.x1 === a && s.y1 === e) { // corners 0 and 7\n        boxes[4] = new Box(a, e, b, f);\n        boxes[5] = new Box(c, g, d, h);\n    } else { // corners 2 and 5\n        boxes[4] = new Box(c, e, d, f);\n        boxes[5] = new Box(a, g, b, h);\n    }\n\n    return grep(boxes, function(box) {\n        return box.height() > 0 && box.width() > 0;\n    })[0];\n}\n\nvar RootElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        var rootOptions = this.options;\n        rootOptions.width = parseInt(rootOptions.width, 10);\n        rootOptions.height = parseInt(rootOptions.height, 10);\n\n        this.gradients = {};\n    },\n\n    reflow: function() {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var currentBox = new Box(0, 0, options.width, options.height);\n\n        this.box = currentBox.unpad(options.margin);\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].reflow(currentBox);\n            currentBox = boxDiff(currentBox, children[i].box) || new Box();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group();\n        this.createBackground();\n    },\n\n    createBackground: function() {\n        var options = this.options;\n        var border = options.border || {};\n        var box = this.box.clone().pad(options.margin).unpad(border.width);\n\n        var background = Path.fromRect(box.toRect(), {\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            zIndex: -10\n        });\n\n        this.visual.append(background);\n    },\n\n    getRoot: function() {\n        return this;\n    },\n\n    createGradient: function(options) {\n        var gradients = this.gradients;\n        var hashCode = objectKey(options);\n        var gradient = GRADIENTS[options.gradient];\n        var drawingGradient;\n\n        if (gradients[hashCode]) {\n            drawingGradient = gradients[hashCode];\n        } else {\n            var gradientOptions = $.extend({}, gradient, options);\n            if (gradient.type === \"linear\") {\n                drawingGradient = new drawing.LinearGradient(gradientOptions);\n            } else {\n                if (options.innerRadius) {\n                    gradientOptions.stops = innerRadialStops(gradientOptions);\n                }\n                drawingGradient = new drawing.RadialGradient(gradientOptions);\n                drawingGradient.supportVML = gradient.supportVML !== false;\n            }\n            gradients[hashCode] = drawingGradient;\n        }\n\n        return drawingGradient;\n    },\n\n    cleanGradients: function() {\n        var gradients = this.gradients;\n        for (var hashCode in gradients) {\n            gradients[hashCode]._observers = [];//add clear observers method in drawing ObserversMixin\n        }\n    },\n\n    size: function() {\n        var options = this.options;\n        return new Box(0, 0, options.width, options.height);\n    }\n});\n\nsetDefaultOptions(RootElement, {\n    width: DEFAULT_WIDTH,\n    height: DEFAULT_HEIGHT,\n    background: WHITE,\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    margin: getSpacing(5),\n    zIndex: -2\n});\n\nfunction innerRadialStops(options) {\n    var stops = options.stops;\n    var usedSpace = ((options.innerRadius / options.radius) * 100);\n    var length = stops.length;\n    var currentStops = [];\n\n    for (var i = 0; i < length; i++) {\n        var currentStop = $.extend({}, stops[i]);\n        currentStop.offset = (currentStop.offset * (100 - usedSpace) + usedSpace) / 100;\n        currentStops.push(currentStop);\n    }\n\n    return currentStops;\n}\n\nvar FloatElement = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n        this._initDirection();\n    },\n\n    _initDirection: function() {\n        var options = this.options;\n        if (options.vertical) {\n            this.groupAxis = X;\n            this.elementAxis = Y;\n            this.groupSizeField = WIDTH;\n            this.elementSizeField = HEIGHT;\n            this.groupSpacing = options.spacing;\n            this.elementSpacing = options.vSpacing;\n        } else {\n            this.groupAxis = Y;\n            this.elementAxis = X;\n            this.groupSizeField = HEIGHT;\n            this.elementSizeField = WIDTH;\n            this.groupSpacing = options.vSpacing;\n            this.elementSpacing = options.spacing;\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.box = targetBox.clone();\n        this.reflowChildren();\n    },\n\n    reflowChildren: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var elementAxis = ref.elementAxis;\n        var groupAxis = ref.groupAxis;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var ref$1 = this.groupOptions();\n        var groups = ref$1.groups;\n        var groupsSize = ref$1.groupsSize;\n        var maxGroupElementsSize = ref$1.maxGroupElementsSize;\n        var groupsCount = groups.length;\n        var groupsStart = box[groupAxis + 1] + this.alignStart(groupsSize, box[groupSizeField]());\n\n        if (groupsCount) {\n            var groupStart = groupsStart;\n\n            for (var groupIdx = 0; groupIdx < groupsCount; groupIdx++) {\n                var group = groups[groupIdx];\n                var groupElements = group.groupElements;\n                var elementStart = box[elementAxis + 1];\n                var groupElementsCount = groupElements.length;\n\n                for (var idx = 0; idx < groupElementsCount; idx++) {\n                    var element = groupElements[idx];\n                    var elementSize$$1 = this$1$1.elementSize(element);\n                    var groupElementStart = groupStart + this$1$1.alignStart(elementSize$$1[groupSizeField], group.groupSize);\n\n                    var elementBox = new Box();\n                    elementBox[groupAxis + 1] = groupElementStart;\n                    elementBox[groupAxis + 2] = groupElementStart + elementSize$$1[groupSizeField];\n                    elementBox[elementAxis + 1] = elementStart;\n                    elementBox[elementAxis + 2] = elementStart + elementSize$$1[elementSizeField];\n\n                    element.reflow(elementBox);\n\n                    elementStart += elementSize$$1[elementSizeField] + this$1$1.elementSpacing;\n                }\n                groupStart += group.groupSize + this$1$1.groupSpacing;\n            }\n            box[groupAxis + 1] = groupsStart;\n            box[groupAxis + 2] = groupsStart + groupsSize;\n            box[elementAxis + 2] = box[elementAxis + 1] + maxGroupElementsSize;\n        }\n    },\n\n    alignStart: function(size, maxSize) {\n        var start = 0;\n        var align = this.options.align;\n        if (align === RIGHT || align === BOTTOM) {\n            start = maxSize - size;\n        } else if (align === CENTER) {\n            start = (maxSize - size) / 2;\n        }\n        return start;\n    },\n\n    groupOptions: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var children = ref.children;\n        var elementSizeField = ref.elementSizeField;\n        var groupSizeField = ref.groupSizeField;\n        var elementSpacing = ref.elementSpacing;\n        var groupSpacing = ref.groupSpacing;\n        var maxSize = round(box[elementSizeField]());\n        var childrenCount = children.length;\n        var groups = [];\n\n        var groupSize = 0;\n        var groupElementsSize = 0;\n        var groupsSize = 0;\n        var maxGroupElementsSize = 0;\n        var groupElements = [];\n\n        for (var idx = 0; idx < childrenCount; idx++) {\n            var element = children[idx];\n            if (!element.box) {\n                element.reflow(box);\n            }\n\n            var elementSize$$1 = this$1$1.elementSize(element);\n            if (this$1$1.options.wrap && round(groupElementsSize + elementSpacing + elementSize$$1[elementSizeField]) > maxSize) {\n                groups.push({\n                    groupElements: groupElements,\n                    groupSize: groupSize,\n                    groupElementsSize: groupElementsSize\n                });\n                maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n                groupsSize += groupSpacing + groupSize;\n                groupSize = 0;\n                groupElementsSize = 0;\n                groupElements = [];\n            }\n            groupSize = Math.max(groupSize, elementSize$$1[groupSizeField]);\n            if (groupElementsSize > 0) {\n                groupElementsSize += elementSpacing;\n            }\n            groupElementsSize += elementSize$$1[elementSizeField];\n            groupElements.push(element);\n        }\n\n        groups.push({\n            groupElements: groupElements,\n            groupSize: groupSize,\n            groupElementsSize: groupElementsSize\n        });\n        maxGroupElementsSize = Math.max(maxGroupElementsSize, groupElementsSize);\n        groupsSize += groupSize;\n\n        return {\n            groups: groups,\n            groupsSize: groupsSize,\n            maxGroupElementsSize: maxGroupElementsSize\n        };\n    },\n\n    elementSize: function(element) {\n        return {\n            width: element.box.width(),\n            height: element.box.height()\n        };\n    },\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(FloatElement, {\n    vertical: true,\n    wrap: true,\n    vSpacing: 0,\n    spacing: 0\n});\n\nvar DrawingText = drawing.Text;\n\nvar Text = ChartElement.extend({\n    init: function(content, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.content = content;\n\n        // Calculate size\n        this.reflow(new Box());\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var size = options.size = util.measureText(this.content, { font: options.font });\n\n        this.baseline = size.baseline;\n\n        this.box = new Box(targetBox.x1, targetBox.y1,\n            targetBox.x1 + size.width, targetBox.y1 + size.height);\n    },\n\n    createVisual: function() {\n        var ref = this.options;\n        var font = ref.font;\n        var color = ref.color;\n        var opacity = ref.opacity;\n        var cursor = ref.cursor;\n        var stroke = ref.stroke;\n        var paintOrder = ref.paintOrder;\n\n        this.visual = new DrawingText(this.content, this.box.toRect().topLeft(), {\n            font: font,\n            fill: { color: color, opacity: opacity },\n            cursor: cursor,\n            stroke: stroke,\n            paintOrder: paintOrder\n        });\n    }\n});\n\nsetDefaultOptions(Text, {\n    font: DEFAULT_FONT,\n    color: BLACK\n});\n\nfunction rectToBox(rect) {\n    var origin = rect.origin;\n    var bottomRight = rect.bottomRight();\n\n    return new Box(origin.x, origin.y, bottomRight.x, bottomRight.y);\n}\n\nvar ROWS_SPLIT_REGEX = /\\n/m;\n\nvar TextBox = BoxElement.extend({\n    init: function(content, options, data) {\n        BoxElement.fn.init.call(this, options);\n        this.content = content;\n        this.data = data;\n\n        this._initContainer();\n        if (this.options._autoReflow !== false) {\n            this.reflow(new Box());\n        }\n    },\n\n    _initContainer: function() {\n        var options = this.options;\n        var rows = String(this.content).split(ROWS_SPLIT_REGEX);\n        var floatElement = new FloatElement({ vertical: true, align: options.align, wrap: false });\n        var textOptions = deepExtend({ }, options, { opacity: 1, animation: null });\n\n        this.container = floatElement;\n        this.append(floatElement);\n\n        for (var rowIdx = 0; rowIdx < rows.length; rowIdx++) {\n            var text = new Text(rows[rowIdx].trim(), textOptions);\n            floatElement.append(text);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var visualFn = options.visual;\n        this.container.options.align = options.align;\n\n        if (visualFn && !this._boxReflow) {\n            var visualBox = targetBox;\n            if (!visualBox.hasSize()) {\n                this._boxReflow = true;\n                this.reflow(visualBox);\n                this._boxReflow = false;\n                visualBox = this.box;\n            }\n            var visual = this.visual = visualFn(this.visualContext(visualBox));\n\n            if (visual) {\n                visualBox = rectToBox(visual.clippedBBox() || new Rect());\n\n                visual.options.zIndex = options.zIndex;\n            }\n\n            this.box = this.contentBox = this.paddingBox = visualBox;\n        } else {\n            BoxElement.fn.reflow.call(this, targetBox);\n\n            if (options.rotation) {\n                var margin = getSpacing(options.margin);\n                var box = this.box.unpad(margin);\n\n                this.targetBox = targetBox;\n                this.normalBox = box.clone();\n\n                box = this.rotate();\n                box.translate(margin.left - margin.right, margin.top - margin.bottom);\n\n                this.rotatedBox = box.clone();\n\n                box.pad(margin);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var options = this.options;\n\n        this.visual = new Group({\n            transform: this.rotationTransform(),\n            zIndex: options.zIndex,\n            noclip: options.noclip\n        });\n\n        if (this.hasBox()) {\n            var box = Path.fromRect(this.paddingBox.toRect(), this.visualStyle());\n            this.visual.append(box);\n        }\n    },\n\n    renderVisual: function() {\n        if (!this.options.visible) {\n            return;\n        }\n\n        if (this.options.visual) {\n            var visual = this.visual;\n            if (visual && !defined(visual.options.noclip)) {\n                visual.options.noclip = this.options.noclip;\n            }\n            this.addVisual();\n            this.createAnimation();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    visualContext: function(targetBox) {\n        var this$1$1 = this;\n\n        var context = {\n            text: this.content,\n            rect: targetBox.toRect(),\n            sender: this.getSender(),\n            options: this.options,\n            createVisual: function () {\n                this$1$1._boxReflow = true;\n                this$1$1.reflow(targetBox);\n                this$1$1._boxReflow = false;\n                return this$1$1.getDefaultVisual();\n            }\n        };\n        if (this.data) {\n            $.extend(context, this.data);\n        }\n\n        return context;\n    },\n\n    getDefaultVisual: function() {\n        this.createVisual();\n        this.renderChildren();\n        var visual = this.visual;\n        delete this.visual;\n        return visual;\n    },\n\n    rotate: function() {\n        var options = this.options;\n        this.box.rotate(options.rotation);\n        this.align(this.targetBox, X, options.align);\n        this.align(this.targetBox, Y, options.vAlign);\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var rotation = this.options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        var ref = this.normalBox.center();\n        var cx = ref.x;\n        var cy = ref.y;\n        var boxCenter = this.rotatedBox.center();\n\n        return geometryTransform()\n            .translate(boxCenter.x - cx, boxCenter.y - cy)\n            .rotate(rotation, [ cx, cy ]);\n    }\n});\n\nvar Title = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this._textBox = new TextBox(this.options.text, $.extend({}, this.options, {\n            vAlign: this.options.position\n        }));\n\n        this.append(this._textBox);\n    },\n\n    reflow: function(targetBox) {\n        ChartElement.fn.reflow.call(this, targetBox);\n        this.box.snapTo(targetBox, X);\n    }\n});\n\nTitle.buildTitle = function(options, defaultOptions) {\n    var titleOptions = options;\n\n    if (typeof options === \"string\") {\n        titleOptions = { text: options };\n    }\n\n    titleOptions = $.extend({ visible: true }, defaultOptions, titleOptions);\n\n    var title;\n    if (titleOptions && titleOptions.visible && titleOptions.text) {\n        title = new Title(titleOptions);\n    }\n\n    return title;\n};\n\nTitle.orderTitles = function(titles) {\n    var items = [].concat(titles);\n    var top = items.filter(function (item) { return item && item.options.position !== BOTTOM; });\n    var bottom = items.filter(function (item) { return item && item.options.position === BOTTOM; });\n\n    collapseVerticalMargins(top);\n    collapseVerticalMargins(bottom);\n\n    bottom.reverse();\n    return top.concat(bottom);\n};\n\nfunction collapseVerticalMargins(items) {\n    for (var i = 1; i < items.length; i++) {\n        var box = items[i]._textBox;\n        var prevBox = items[i - 1]._textBox;\n        prevBox.options.margin = $.extend(getSpacing(prevBox.options.margin), { bottom: 0 });\n        box.options.margin = $.extend(getSpacing(box.options.margin), { top: 0 });\n    }\n}\n\nsetDefaultOptions(Title, {\n    color: BLACK,\n    position: TOP,\n    align: CENTER,\n    margin: getSpacing(5),\n    padding: getSpacing(5)\n});\n\nvar AxisLabel = TextBox.extend({\n    init: function(value, text, index, dataItem, options) {\n        TextBox.fn.init.call(this, text, options);\n\n        this.text = text;\n        this.value = value;\n        this.index = index;\n        this.dataItem = dataItem;\n        this.reflow(new Box());\n    },\n\n    visualContext: function(targetBox) {\n        var context = TextBox.fn.visualContext.call(this, targetBox);\n\n        context.value = this.value;\n        context.dataItem = this.dataItem;\n        context.format = this.options.format;\n        context.culture = this.options.culture;\n\n        return context;\n    },\n\n    click: function(widget, e) {\n\n        widget.trigger(AXIS_LABEL_CLICK, {\n            element: eventElement(e),\n            value: this.value,\n            text: this.text,\n            index: this.index,\n            dataItem: this.dataItem,\n            axis: this.parent.options\n        });\n    },\n\n    rotate: function() {\n        if (this.options.alignRotation !== CENTER) {\n            var box = this.normalBox.toRect();\n            var transform = this.rotationTransform();\n\n            this.box = rectToBox(box.bbox(transform.matrix()));\n        } else {\n            TextBox.fn.rotate.call(this);\n        }\n\n        return this.box;\n    },\n\n    rotationTransform: function() {\n        var options = this.options;\n        var rotation = options.rotation;\n        if (!rotation) {\n            return null;\n        }\n\n        if (options.alignRotation === CENTER) {\n            return TextBox.fn.rotationTransform.call(this);\n        }\n\n        var rotationMatrix = geometryTransform().rotate(rotation).matrix();\n        var box = this.normalBox.toRect();\n        var rect = this.targetBox.toRect();\n\n        var rotationOrigin = options.rotationOrigin || TOP;\n        var alignAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? X : Y;\n        var distanceAxis = rotationOrigin === TOP || rotationOrigin === BOTTOM ? Y : X;\n        var axisAnchor = rotationOrigin === TOP || rotationOrigin === LEFT ? rect.origin : rect.bottomRight();\n\n        var topLeft = box.topLeft().transformCopy(rotationMatrix);\n        var topRight = box.topRight().transformCopy(rotationMatrix);\n        var bottomRight = box.bottomRight().transformCopy(rotationMatrix);\n        var bottomLeft = box.bottomLeft().transformCopy(rotationMatrix);\n        var rotatedBox = Rect.fromPoints(topLeft, topRight, bottomRight, bottomLeft);\n\n        var translate = {};\n        translate[distanceAxis] = rect.origin[distanceAxis] - rotatedBox.origin[distanceAxis];\n\n        var distanceLeft = Math.abs(topLeft[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n        var distanceRight = Math.abs(topRight[distanceAxis] + translate[distanceAxis] - axisAnchor[distanceAxis]);\n\n        var alignStart, alignEnd;\n\n        if (round(distanceLeft, DEFAULT_PRECISION) === round(distanceRight, DEFAULT_PRECISION)) {\n            alignStart = topLeft;\n            alignEnd = topRight;\n        } else if (distanceRight < distanceLeft) {\n            alignStart = topRight;\n            alignEnd = bottomRight;\n        } else {\n            alignStart = topLeft;\n            alignEnd = bottomLeft;\n        }\n\n        var alignCenter = alignStart[alignAxis] + (alignEnd[alignAxis] - alignStart[alignAxis]) / 2;\n        translate[alignAxis] = rect.center()[alignAxis] - alignCenter;\n\n        return geometryTransform()\n            .translate(translate.x, translate.y)\n            .rotate(rotation);\n    }\n});\n\nsetDefaultOptions(AxisLabel, {\n    _autoReflow: false\n});\n\nvar DEFAULT_ICON_SIZE = 7;\nvar DEFAULT_LABEL_COLOR = \"#fff\";\n\nvar Note = BoxElement.extend({\n    init: function(fields, options, chartService) {\n        BoxElement.fn.init.call(this, options);\n\n        this.fields = fields;\n        this.chartService = chartService;\n\n        this.render();\n    },\n\n    hide: function() {\n        this.options.visible = false;\n    },\n\n    show: function() {\n        this.options.visible = true;\n    },\n\n    render: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n\n        if (options.visible) {\n            var label = options.label;\n            var icon = options.icon;\n            var box = new Box();\n            var childAlias = function () { return this$1$1; };\n            var size = icon.size;\n            var text = this.fields.text;\n            var width, height;\n\n            if (defined(label) && label.visible) {\n                var noteTemplate = getTemplate(label);\n                if (noteTemplate) {\n                    text = noteTemplate(this.fields);\n                } else if (label.format) {\n                    text = this.chartService.format.auto(label.format, text);\n                }\n\n                if (!label.color) {\n                    label.color = label.position === INSIDE ? DEFAULT_LABEL_COLOR : icon.background;\n                }\n\n                this.label = new TextBox(text, deepExtend({}, label));\n                this.label.aliasFor = childAlias;\n\n                if (label.position === INSIDE && !defined(size)) {\n                    if (icon.type === CIRCLE) {\n                        size = Math.max(this.label.box.width(), this.label.box.height());\n                    } else {\n                        width = this.label.box.width();\n                        height = this.label.box.height();\n                    }\n                    box.wrap(this.label.box);\n                }\n            }\n\n            icon.width = width || size || DEFAULT_ICON_SIZE;\n            icon.height = height || size || DEFAULT_ICON_SIZE;\n\n            var marker = new ShapeElement(deepExtend({}, icon));\n            marker.aliasFor = childAlias;\n\n            this.marker = marker;\n            this.append(marker);\n\n            if (this.label) {\n                this.append(this.label);\n            }\n\n            marker.reflow(new Box());\n            this.wrapperBox = box.wrap(marker.box);\n        }\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var marker = ref.marker;\n        var wrapperBox = ref.wrapperBox;\n        var center = targetBox.center();\n        var length = options.line.length;\n        var position = options.position;\n\n        // TODO: Review\n        if (options.visible) {\n            var lineStart, box, contentBox;\n\n            if (inArray(position, [ LEFT, RIGHT ])) {\n                if (position === LEFT) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(-length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x1, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x2, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(length, targetBox.center().y - wrapperBox.center().y);\n\n                    if (options.line.visible) {\n                        lineStart = [ targetBox.x2, center.y ];\n                        this.linePoints = [\n                            lineStart,\n                            [ contentBox.x1, center.y ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            } else {\n                if (position === BOTTOM) {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y2 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y1 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                } else {\n                    contentBox = wrapperBox.alignTo(targetBox, position).translate(targetBox.center().x - wrapperBox.center().x, -length);\n\n                    if (options.line.visible) {\n                        lineStart = [ center.x, targetBox.y1 ];\n                        this.linePoints = [\n                            lineStart,\n                            [ center.x, contentBox.y2 ]\n                        ];\n                        box = contentBox.clone().wrapPoint(lineStart);\n                    }\n                }\n            }\n\n            if (marker) {\n                marker.reflow(contentBox);\n            }\n\n            if (label) {\n                label.reflow(contentBox);\n                if (marker) {\n                    if (options.label.position === OUTSIDE) {\n                        label.box.alignTo(marker.box, position);\n                    }\n                    label.reflow(label.box);\n                }\n            }\n\n            this.contentBox = contentBox;\n            this.targetBox = targetBox;\n            this.box = box || contentBox;\n        }\n    },\n\n    createVisual: function() {\n        BoxElement.fn.createVisual.call(this);\n        this.visual.options.noclip = this.options.noclip;\n\n        if (this.options.visible) {\n            this.createLine();\n        }\n    },\n\n    renderVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n        if (options.visible && customVisual) {\n            this.visual = customVisual($.extend(this.fields, {\n                sender: this.getSender(),\n                rect: this.targetBox.toRect(),\n                options: {\n                    background: options.background,\n                    border: options.background,\n                    icon: options.icon,\n                    label: options.label,\n                    line: options.line,\n                    position: options.position,\n                    visible: options.visible\n                },\n                createVisual: function () {\n                    this$1$1.createVisual();\n                    this$1$1.renderChildren();\n                    var defaultVisual = this$1$1.visual;\n                    delete this$1$1.visual;\n                    return defaultVisual;\n                }\n            }));\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLine: function() {\n        var options = this.options.line;\n\n        if (this.linePoints) {\n            var path = Path.fromPoints(this.linePoints, {\n                stroke: {\n                    color: options.color,\n                    width: options.width,\n                    dashType: options.dashType\n                }\n            });\n\n            alignPathToPixel(path);\n            this.visual.append(path);\n        }\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_CLICK, args)) {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(NOTE_HOVER, args)) {\n            e.preventDefault();\n        }\n    },\n\n    out: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        widget.trigger(NOTE_LEAVE, args);\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return $.extend(this.fields, {\n            element: eventElement(e),\n            text: defined(options.label) ? options.label.text : \"\",\n            visual: this.visual\n        });\n    }\n});\n\nsetDefaultOptions(Note, {\n    icon: {\n        visible: true,\n        type: CIRCLE\n    },\n    label: {\n        position: INSIDE,\n        visible: true,\n        align: CENTER,\n        vAlign: CENTER\n    },\n    line: {\n        visible: true\n    },\n    visible: true,\n    position: TOP,\n    zIndex: 2\n});\n\nvar defaultImplementation = {\n    format: function (format, value) { return value; },\n\n    toString: function (value) { return value; },\n\n    parseDate: function (value) { return new Date(value); },\n\n    firstDay: function () { return 0; }\n};\n\nvar current$1 = defaultImplementation;\n\nvar IntlService = Class.extend({\n\n});\n\nIntlService.register = function(userImplementation) {\n    current$1 = userImplementation;\n};\n\nif (Object.defineProperties) {\n    Object.defineProperties(IntlService, {\n        implementation: {\n            get: function() {\n                return current$1;\n            }\n        }\n    });\n}\n\n// eslint-disable-next-line no-useless-escape\nvar FORMAT_REPLACE_REGEX = /\\{(\\d+)(:[^\\}]+)?\\}/g;\n\nvar FormatService = Class.extend({\n    init: function(intlService) {\n        this._intlService = intlService;\n    },\n\n    auto: function(formatString) {\n        var values = [], len = arguments.length - 1;\n        while ( len-- > 0 ) values[ len ] = arguments[ len + 1 ];\n\n        var intl = this.intl;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            return intl.format.apply(intl, [ formatString ].concat( values ));\n        }\n\n        return intl.toString(values[0], formatString);\n    },\n\n    localeAuto: function(formatString, values, locale) {\n        var intl = this.intl;\n        var result;\n\n        if (isString(formatString) && formatString.match(FORMAT_REGEX)) {\n            result = formatString.replace(FORMAT_REPLACE_REGEX, function(match, index, placeholderFormat) {\n                var value = values[parseInt(index, 10)];\n\n                return intl.toString(value, placeholderFormat ? placeholderFormat.substring(1) : \"\", locale);\n            });\n        } else {\n            result = intl.toString(values[0], formatString, locale);\n        }\n\n        return result;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(FormatService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n            }\n        }\n    });\n}\n\nvar ChartService = Class.extend({\n    init: function(chart, context) {\n        if (context === void 0) { context = {}; }\n\n        this._intlService = context.intlService;\n        this.sender = context.sender || chart;\n        this.format = new FormatService(context.intlService);\n        this.chart = chart;\n        this.rtl = Boolean(context.rtl);\n    },\n\n    notify: function(name, args) {\n        if (this.chart) {\n            this.chart.trigger(name, args);\n        }\n    },\n\n    isPannable: function(axis) {\n        var pannable = ((this.chart || {}).options || {}).pannable;\n        return pannable && pannable.lock !== axis;\n    }\n});\n\nif (Object.defineProperties) {\n    Object.defineProperties(ChartService.fn, {\n        intl: {\n            get: function() {\n                return this._intlService || IntlService.implementation;\n            },\n            set: function(value) {\n                this._intlService = value;\n                this.format.intl = value;\n            }\n        }\n    });\n}\n\nvar current$2;\n\nvar DomEventsBuilder = Class.extend({\n\n});\n\nDomEventsBuilder.register = function(userImplementation) {\n    current$2 = userImplementation;\n};\n\nDomEventsBuilder.create = function(element, events) {\n    if (current$2) {\n        return current$2.create(element, events);\n    }\n};\n\nvar services = {\n\tChartService: ChartService,\n\tDomEventsBuilder: DomEventsBuilder,\n\tFormatService: FormatService,\n\tIntlService: IntlService,\n\tTemplateService: TemplateService\n};\n\nfunction createAxisTick(options, tickOptions) {\n    var tickX = options.tickX;\n    var tickY = options.tickY;\n    var position = options.position;\n\n    var tick = new Path({\n        stroke: {\n            width: tickOptions.width,\n            color: tickOptions.color\n        }\n    });\n\n    if (options.vertical) {\n        tick.moveTo(tickX, position)\n            .lineTo(tickX + tickOptions.size, position);\n    } else {\n        tick.moveTo(position, tickY)\n            .lineTo(position, tickY + tickOptions.size);\n    }\n\n    alignPathToPixel(tick);\n\n    return tick;\n}\n\nfunction createAxisGridLine(options, gridLine) {\n    var lineStart = options.lineStart;\n    var lineEnd = options.lineEnd;\n    var position = options.position;\n\n    var line = new Path({\n        stroke: {\n            width: gridLine.width,\n            color: gridLine.color,\n            dashType: gridLine.dashType\n        }\n    });\n\n    if (options.vertical) {\n        line.moveTo(lineStart, position)\n            .lineTo(lineEnd, position);\n    } else {\n        line.moveTo(position, lineStart)\n            .lineTo(position, lineEnd);\n    }\n\n    alignPathToPixel(line);\n\n    return line;\n}\n\nvar Axis = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = new ChartService(); }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!this.options.visible) {\n            this.options = deepExtend({}, this.options, {\n                labels: {\n                    visible: false\n                },\n                line: {\n                    visible: false\n                },\n                margin: 0,\n                majorTickSize: 0,\n                minorTickSize: 0\n            });\n        }\n\n        this.options.minorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.minorTickType !== NONE\n        }, this.options.minorTicks, {\n            size: this.options.minorTickSize,\n            align: this.options.minorTickType\n        });\n\n        this.options.majorTicks = deepExtend({}, {\n            color: this.options.line.color,\n            width: this.options.line.width,\n            visible: this.options.majorTickType !== NONE\n        }, this.options.majorTicks, {\n            size: this.options.majorTickSize,\n            align: this.options.majorTickType\n        });\n\n        this.initFields();\n\n        if (!this.options._deferLabels) {\n            this.createLabels();\n        }\n\n        this.createTitle();\n        this.createNotes();\n    },\n\n    initFields: function() {\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.labelsCount()\n        };\n    },\n\n    normalizeLabelRotation: function(labelOptions) {\n        var rotation = labelOptions.rotation;\n\n        if (isObject(rotation)) {\n            labelOptions.alignRotation = rotation.align;\n            labelOptions.rotation = rotation.angle;\n        }\n    },\n\n    createLabels: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var align = options.vertical ? RIGHT : CENTER;\n        var labelOptions = deepExtend({ }, options.labels, {\n            align: align,\n            zIndex: options.zIndex\n        });\n        var step = Math.max(1, labelOptions.step);\n\n        this.clearLabels();\n\n        if (labelOptions.visible) {\n            this.normalizeLabelRotation(labelOptions);\n            if (labelOptions.rotation === \"auto\") {\n                labelOptions.rotation = 0;\n                options.autoRotateLabels = true;\n            }\n\n            var range = this.labelsRange();\n            for (var idx = range.min; idx < range.max; idx += step) {\n                var labelContext = { index: idx, count: range.max };\n                var label = this$1$1.createAxisLabel(idx, labelOptions, labelContext);\n                if (label) {\n                    this$1$1.append(label);\n                    this$1$1.labels.push(label);\n                }\n            }\n        }\n    },\n\n    clearLabels: function() {\n        this.children = grep(this.children, function (child) { return !(child instanceof AxisLabel); });\n        this.labels = [];\n    },\n\n    clearTitle: function() {\n        var this$1$1 = this;\n\n        if (this.title) {\n            this.children = grep(this.children, function (child) { return child !== this$1$1.title; });\n            this.title = undefined;\n        }\n    },\n\n    clear: function() {\n        this.clearLabels();\n        this.clearTitle();\n    },\n\n    lineBox: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var axisX = mirror ? box.x1 : box.x2;\n        var axisY = mirror ? box.y2 : box.y1;\n        var lineWidth = options.line.width || 0;\n\n        return vertical ?\n            new Box(axisX, box.y1, axisX, box.y2 - lineWidth) :\n            new Box(box.x1, axisY, box.x2 - lineWidth, axisY);\n    },\n\n    createTitle: function() {\n        var options = this.options;\n        var titleOptions = deepExtend({\n            rotation: options.vertical ? -90 : 0,\n            text: \"\",\n            zIndex: 1,\n            visualSize: true\n        }, options.title);\n\n        if (titleOptions.visible && titleOptions.text) {\n            var title = new TextBox(titleOptions.text, titleOptions);\n            this.append(title);\n            this.title = title;\n        }\n    },\n\n    createNotes: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var notes = options.notes;\n        var items = notes.data || [];\n\n        this.notes = [];\n\n        for (var i = 0; i < items.length; i++) {\n            var item = deepExtend({}, notes, items[i]);\n            item.value = this$1$1.parseNoteValue(item.value);\n\n            var note = new Note({\n                value: item.value,\n                text: item.label.text,\n                dataItem: item\n            }, item, this$1$1.chartService);\n\n            if (note.options.visible) {\n                if (defined(note.options.position)) {\n                    if (options.vertical && !inArray(note.options.position, [ LEFT, RIGHT ])) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else if (!options.vertical && !inArray(note.options.position, [ TOP, BOTTOM ])) {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                } else {\n                    if (options.vertical) {\n                        note.options.position = options.reverse ? LEFT : RIGHT;\n                    } else {\n                        note.options.position = options.reverse ? BOTTOM : TOP;\n                    }\n                }\n                this$1$1.append(note);\n                this$1$1.notes.push(note);\n            }\n        }\n    },\n\n    parseNoteValue: function(value) {\n        return value;\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        this.createPlotBands();\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.createBackground();\n        this.createLine();\n    },\n\n    gridLinesVisual: function() {\n        var gridLines = this._gridLines;\n        if (!gridLines) {\n            gridLines = this._gridLines = new Group({\n                zIndex: -2\n            });\n            this.appendVisual(this._gridLines);\n        }\n\n        return gridLines;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var mirror = options.labels.mirror;\n        var majorUnit = options.majorTicks.visible ? options.majorUnit : 0;\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: options.vertical\n        };\n\n        function render(tickPositions, tickOptions, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, tickOptions.step);\n\n            if (tickOptions.visible) {\n                for (var i = tickOptions.skip; i < count; i += step) {\n                    if (defined(skipUnit) && (i % skipUnit === 0)) {\n                        continue;\n                    }\n\n                    tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n                    tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n                    tickLineOptions.position = tickPositions[i];\n\n                    lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), options.majorTicks);\n        render(this.getMinorTickPositions(), options.minorTicks, majorUnit / options.minorUnit);\n    },\n\n    createLine: function() {\n        var options = this.options;\n        var line = options.line;\n        var lineBox = this.lineBox();\n\n        if (line.width > 0 && line.visible) {\n            var path = new Path({\n                stroke: {\n                    width: line.width,\n                    color: line.color,\n                    dashType: line.dashType\n                }\n\n                /* TODO\n                zIndex: line.zIndex,\n                */\n            });\n\n            path.moveTo(lineBox.x1, lineBox.y1)\n                .lineTo(lineBox.x2, lineBox.y2);\n\n            if (options._alignLines) {\n                alignPathToPixel(path);\n            }\n\n            var group = this._lineGroup = new Group();\n            group.append(path);\n\n            this.visual.append(group);\n            this.createTicks(group);\n        }\n    },\n\n    getActualTickSize: function() {\n        var options = this.options;\n        var tickSize = 0;\n\n        if (options.majorTicks.visible && options.minorTicks.visible) {\n            tickSize = Math.max(options.majorTicks.size, options.minorTicks.size);\n        } else if (options.majorTicks.visible) {\n            tickSize = options.majorTicks.size;\n        } else if (options.minorTicks.visible) {\n            tickSize = options.minorTicks.size;\n        }\n\n        return tickSize;\n    },\n\n    createBackground: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var background = options.background;\n\n        if (background) {\n            this._backgroundPath = Path.fromRect(box.toRect(), {\n                fill: {\n                    color: background\n                },\n                stroke: null\n            });\n\n            this.visual.append(this._backgroundPath);\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var plotBands = options.plotBands || [];\n        var vertical = options.vertical;\n        var plotArea = this.plotArea;\n\n        if (plotBands.length === 0) {\n            return;\n        }\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        var altAxis = grep(this.pane.axes, function (axis) { return axis.options.vertical !== this$1$1.options.vertical; })[0];\n\n        for (var idx = 0; idx < plotBands.length; idx++) {\n            var item = plotBands[idx];\n            var slotX = (void 0), slotY = (void 0);\n            var labelOptions = item.label;\n            var label = (void 0);\n\n            if (vertical) {\n                slotX = (altAxis || plotArea.axisX).lineBox();\n                slotY = this$1$1.getSlot(item.from, item.to, true);\n            } else {\n                slotX = this$1$1.getSlot(item.from, item.to, true);\n                slotY = (altAxis || plotArea.axisY).lineBox();\n            }\n\n            if (labelOptions) {\n                labelOptions.vAlign = labelOptions.position || LEFT;\n                label = this$1$1.createPlotBandLabel(\n                    labelOptions,\n                    item,\n                    new Box(\n                        slotX.x1,\n                        slotY.y1,\n                        slotX.x2,\n                        slotY.y2\n                    )\n\n                );\n            }\n\n            if (slotX.width() !== 0 && slotY.height() !== 0) {\n                var bandRect = new Rect(\n                    [ slotX.x1, slotY.y1 ],\n                    [ slotX.width(), slotY.height() ]\n                );\n\n                var path = Path.fromRect(bandRect, {\n                    fill: {\n                        color: item.color,\n                        opacity: item.opacity\n                    },\n                    stroke: null\n                });\n\n                group.append(path);\n                if (label) {\n                    group.append(label);\n                }\n            }\n        }\n\n        this.appendVisual(group);\n    },\n\n    createPlotBandLabel: function(label, item, box) {\n\n        if (label.visible === false) {\n            return null;\n        }\n\n        var text = label.text;\n        var textbox;\n\n        if (defined(label) && label.visible) {\n            var labelTemplate = getTemplate(label);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text, item: item });\n            } else if (label.format) {\n                text = this.chartService.format.auto(label.format, text);\n            }\n\n            if (!label.color) {\n                label.color = this.options.labels.color;\n            }\n        }\n\n        textbox = new TextBox(text, label);\n        textbox.reflow(box);\n        textbox.renderVisual();\n\n        return textbox.visual;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var minorUnit = options.minorUnit;\n        var vertical = options.vertical;\n        var axisLineVisible = altAxis.options.line.visible;\n        var majorUnit = majorGridLines.visible ? options.majorUnit : 0;\n        var lineBox = altAxis.lineBox();\n        var linePos = lineBox[vertical ? \"y1\" : \"x1\"];\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n\n        function render(tickPositions, gridLine, skipUnit) {\n            var count = tickPositions.length;\n            var step = Math.max(1, gridLine.step);\n\n            if (gridLine.visible) {\n                for (var i = gridLine.skip; i < count; i += step) {\n                    var pos = round(tickPositions[i]);\n                    if (!inArray(pos, majorTicks)) {\n                        if (i % skipUnit !== 0 && (!axisLineVisible || linePos !== pos)) {\n                            lineOptions.position = pos;\n                            container.append(createAxisGridLine(lineOptions, gridLine));\n\n                            majorTicks.push(pos);\n                        }\n                    }\n                }\n            }\n        }\n\n        render(this.getMajorTickPositions(), majorGridLines);\n        render(this.getMinorTickPositions(), minorGridLines, majorUnit / minorUnit);\n\n        return container.children;\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var title = ref.title;\n        var vertical = options.vertical;\n        var count = labels.length;\n        var sizeFn = vertical ? WIDTH : HEIGHT;\n        var titleSize = title ? title.box[sizeFn]() : 0;\n        var space = this.getActualTickSize() + options.margin + titleSize;\n        var rootBox = (this.getRoot() || {}).box || box;\n        var boxSize = rootBox[sizeFn]();\n        var maxLabelSize = 0;\n\n        for (var i = 0; i < count; i++) {\n            var labelSize = labels[i].box[sizeFn]();\n            if (labelSize + space <= boxSize) {\n                maxLabelSize = Math.max(maxLabelSize, labelSize);\n            }\n        }\n\n        if (vertical) {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x1 + maxLabelSize + space, box.y2\n            );\n        } else {\n            this.box = new Box(\n                box.x1, box.y1,\n                box.x2, box.y1 + maxLabelSize + space\n            );\n        }\n\n        this.arrangeTitle();\n        this.arrangeLabels();\n        this.arrangeNotes();\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getMajorTickPositions();\n    },\n\n    labelTickIndex: function(label) {\n        return label.index;\n    },\n\n    arrangeLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var tickPositions = this.getLabelsTickPositions();\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1$1.labelTickIndex(label);\n            var labelSize = vertical ? label.box.height() : label.box.width();\n            var firstTickPosition = tickPositions[tickIx];\n            var nextTickPosition = tickPositions[tickIx + 1];\n            var positionStart = (void 0), positionEnd = (void 0);\n\n            if (vertical) {\n                if (labelsBetweenTicks) {\n                    var middle = firstTickPosition + (nextTickPosition - firstTickPosition) / 2;\n                    positionStart = middle - (labelSize / 2);\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                }\n\n                positionEnd = positionStart;\n            } else {\n                if (labelsBetweenTicks) {\n                    positionStart = firstTickPosition;\n                    positionEnd = nextTickPosition;\n                } else {\n                    positionStart = firstTickPosition - (labelSize / 2);\n                    positionEnd = positionStart + labelSize;\n                }\n            }\n\n            this$1$1.positionLabel(label, mirror, positionStart, positionEnd);\n        }\n    },\n\n    positionLabel: function(label, mirror, positionStart, positionEnd) {\n        if (positionEnd === void 0) { positionEnd = positionStart; }\n\n        var options = this.options;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var labelOffset = this.getActualTickSize() + options.margin;\n        var labelBox;\n\n        if (vertical) {\n            var labelX = lineBox.x2;\n\n            if (mirror) {\n                labelX += labelOffset;\n                label.options.rotationOrigin = LEFT;\n            } else {\n                labelX -= labelOffset + label.box.width();\n                label.options.rotationOrigin = RIGHT;\n            }\n\n            labelBox = label.box.move(labelX, positionStart);\n        } else {\n            var labelY = lineBox.y1;\n\n            if (mirror) {\n                labelY -= labelOffset + label.box.height();\n                label.options.rotationOrigin = BOTTOM;\n            } else {\n                labelY += labelOffset;\n                label.options.rotationOrigin = TOP;\n            }\n\n            labelBox = new Box(\n                positionStart, labelY,\n                positionEnd, labelY + label.box.height()\n            );\n        }\n\n        label.reflow(labelBox);\n    },\n\n    autoRotateLabelAngle: function(labelBox, slotWidth) {\n        if (labelBox.width() < slotWidth) {\n            return 0;\n        }\n\n        if (labelBox.height() > slotWidth) {\n            return -90;\n        }\n\n        return -45;\n    },\n\n    autoRotateLabels: function() {\n        var this$1$1 = this;\n\n        if (!this.options.autoRotateLabels || this.options.vertical) {\n            return false;\n        }\n\n        var tickPositions = this.getMajorTickPositions();\n        var labels = this.labels;\n        var limit = Math.min(labels.length, tickPositions.length - 1);\n        var angle = 0;\n\n        for (var idx = 0; idx < limit; idx++) {\n            var width = Math.abs(tickPositions[idx + 1] - tickPositions[idx]);\n            var labelBox = labels[idx].box;\n            var labelAngle = this$1$1.autoRotateLabelAngle(labelBox, width);\n\n            if (labelAngle !== 0) {\n                angle = labelAngle;\n            }\n\n            if (angle === -90) {\n                break;\n            }\n        }\n\n        if (angle !== 0) {\n            for (var idx$1 = 0; idx$1 < labels.length; idx$1++) {\n                labels[idx$1].options.rotation = angle;\n                labels[idx$1].reflow(new Box());\n            }\n\n            return true;\n        }\n    },\n\n    arrangeTitle: function() {\n        var ref = this;\n        var options = ref.options;\n        var title = ref.title;\n        var mirror = options.labels.mirror;\n        var vertical = options.vertical;\n\n        if (title) {\n            if (vertical) {\n                title.options.align = mirror ? RIGHT : LEFT;\n                title.options.vAlign = title.options.position;\n            } else {\n                title.options.align = title.options.position;\n                title.options.vAlign = mirror ? TOP : BOTTOM;\n            }\n\n            title.reflow(this.box);\n        }\n    },\n\n    arrangeNotes: function() {\n        var this$1$1 = this;\n\n        for (var idx = 0; idx < this.notes.length; idx++) {\n            var item = this$1$1.notes[idx];\n            var value = item.options.value;\n            var slot = (void 0);\n\n            if (defined(value)) {\n                if (this$1$1.shouldRenderNote(value)) {\n                    item.show();\n                } else {\n                    item.hide();\n                }\n\n                slot = this$1$1.noteSlot(value);\n            } else {\n                item.hide();\n            }\n\n            item.reflow(slot || this$1$1.lineBox());\n        }\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    alignTo: function(secondAxis) {\n        var lineBox = secondAxis.lineBox();\n        var vertical = this.options.vertical;\n        var pos = vertical ? Y : X;\n\n        this.box.snapTo(lineBox, pos);\n        if (vertical) {\n            this.box.shrink(0, this.lineBox().height() - lineBox.height());\n        } else {\n            this.box.shrink(this.lineBox().width() - lineBox.width(), 0);\n        }\n        this.box[pos + 1] -= this.lineBox()[pos + 1] - lineBox[pos + 1];\n        this.box[pos + 2] -= this.lineBox()[pos + 2] - lineBox[pos + 2];\n    },\n\n    axisLabelText: function(value, options, context) {\n        var this$1$1 = this;\n\n        var text;\n        var tmpl = getTemplate(options);\n        var defaultText = function () {\n            if (!options.format) {\n                return value;\n            }\n\n            return this$1$1.chartService.format.localeAuto(\n                options.format, [ value ], options.culture\n            );\n        };\n\n        if (tmpl) {\n            var templateContext = $.extend({}, context, {\n                get text() { return defaultText(); },\n                value: value,\n                format: options.format,\n                culture: options.culture\n            });\n\n            text = tmpl(templateContext);\n        } else {\n            text = defaultText();\n        }\n\n        return text;\n    },\n\n    slot: function(from , to, limit) {\n        var slot = this.getSlot(from, to, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    contentBox: function() {\n        var box = this.box.clone();\n        var labels = this.labels;\n        if (labels.length) {\n            var axis = this.options.vertical ? Y : X;\n            if (this.chartService.isPannable(axis)) {\n                var offset = this.maxLabelOffset();\n                box[axis + 1] -= offset.start;\n                box[axis + 2] += offset.end;\n            } else {\n                if (labels[0].options.visible) {\n                    box.wrap(labels[0].box);\n                }\n                var lastLabel = labels[labels.length - 1];\n                if (lastLabel.options.visible) {\n                    box.wrap(lastLabel.box);\n                }\n            }\n        }\n\n        return box;\n    },\n\n    maxLabelOffset: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var labelsBetweenTicks = this.labelsBetweenTicks();\n        var tickPositions = this.getLabelsTickPositions();\n        var offsetField = vertical ? Y : X;\n        var labels = this.labels;\n        var startPosition = reverse ? 1 : 0;\n        var endPosition = reverse ? 0 : 1;\n        var maxStartOffset = 0;\n        var maxEndOffset = 0;\n\n        for (var idx = 0; idx < labels.length; idx++) {\n            var label = labels[idx];\n            var tickIx = this$1$1.labelTickIndex(label);\n            var startTick = (void 0), endTick = (void 0);\n\n            if (labelsBetweenTicks) {\n                startTick = tickPositions[tickIx + startPosition];\n                endTick = tickPositions[tickIx + endPosition];\n            } else {\n                startTick = endTick = tickPositions[tickIx];\n            }\n\n            maxStartOffset = Math.max(maxStartOffset, startTick - label.box[offsetField + 1]);\n            maxEndOffset = Math.max(maxEndOffset, label.box[offsetField + 2] - endTick);\n        }\n\n        return {\n            start: maxStartOffset,\n            end: maxEndOffset\n        };\n    },\n\n    limitRange: function(from, to, min, max, offset) {\n        var options = this.options;\n\n        if ((from < min && offset < 0 && (!defined(options.min) || options.min <= min)) || (max < to && offset > 0 && (!defined(options.max) || max <= options.max))) {\n            return null;\n        }\n\n        if ((to < min && offset > 0) || (max < from && offset < 0)) {\n            return {\n                min: from,\n                max: to\n            };\n        }\n\n        var rangeSize = to - from;\n        var minValue = from;\n        var maxValue = to;\n\n        if (from < min && offset < 0) {\n            minValue = limitValue(from, min, max);\n            maxValue = limitValue(from + rangeSize, min + rangeSize, max);\n        } else if (to > max && offset > 0) {\n            maxValue = limitValue(to, min, max);\n            minValue = limitValue(to - rangeSize, min, max - rangeSize);\n        }\n\n        return {\n            min: minValue,\n            max: maxValue\n        };\n    },\n\n    valueRange: function() {\n        return {\n            min: this.seriesMin,\n            max: this.seriesMax\n        };\n    },\n\n    lineDir: function() {\n        /*\n         * Axis line direction:\n         *   * Vertical: up.\n         *   * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        return (vertical ? -1 : 1) * (reverse ? -1 : 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = this.lineDir();\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    pointOffset: function(point) {\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var relative = axisDir > 0 ? point[axis] - lineBox[axisOrigin] : lineBox[axisOrigin] - point[axis];\n        var offset = relative / lineSize;\n\n        return offset;\n    },\n\n    scaleToDelta: function(rawScale, range) {\n        // Scale >= 1 would result in axis range of 0.\n        // Scale <= -1 would reverse the scale direction.\n        var MAX_SCALE = 0.999;\n        var scale = limitValue(rawScale, -MAX_SCALE, MAX_SCALE);\n\n        var delta;\n        if (scale > 0) {\n            delta = range * Math.min(1, scale);\n        } else {\n            delta = range - (range / (1 + scale));\n        }\n\n        return delta;\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.options.justified;\n    },\n\n    prepareUserOptions: function() {\n    }\n});\n\nsetDefaultOptions(Axis, {\n    labels: {\n        visible: true,\n        rotation: 0,\n        mirror: false,\n        step: 1,\n        skip: 0\n    },\n    line: {\n        width: 1,\n        color: BLACK,\n        visible: true\n    },\n    title: {\n        visible: true,\n        position: CENTER\n    },\n    majorTicks: {\n        align: OUTSIDE,\n        size: 4,\n        skip: 0,\n        step: 1\n    },\n    minorTicks: {\n        align: OUTSIDE,\n        size: 3,\n        skip: 0,\n        step: 1\n    },\n    axisCrossingValue: 0,\n    majorTickType: OUTSIDE,\n    minorTickType: NONE,\n    majorGridLines: {\n        skip: 0,\n        step: 1\n    },\n    minorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK,\n        skip: 0,\n        step: 1\n    },\n    // TODO: Move to line or labels options\n    margin: 5,\n    visible: true,\n    reverse: false,\n    justified: true,\n    notes: {\n        label: {\n            text: \"\"\n        }\n    },\n\n    _alignLines: true,\n    _deferLabels: false\n});\n\nvar MILLISECONDS = \"milliseconds\";\nvar SECONDS = \"seconds\";\nvar MINUTES = \"minutes\";\nvar HOURS = \"hours\";\nvar DAYS = \"days\";\nvar WEEKS = \"weeks\";\nvar MONTHS = \"months\";\nvar YEARS = \"years\";\n\nvar TIME_PER_MILLISECOND = 1;\nvar TIME_PER_SECOND = 1000;\nvar TIME_PER_MINUTE = 60 * TIME_PER_SECOND;\nvar TIME_PER_HOUR = 60 * TIME_PER_MINUTE;\nvar TIME_PER_DAY = 24 * TIME_PER_HOUR;\nvar TIME_PER_WEEK = 7 * TIME_PER_DAY;\nvar TIME_PER_MONTH = 31 * TIME_PER_DAY;\nvar TIME_PER_YEAR = 365 * TIME_PER_DAY;\nvar TIME_PER_UNIT = {\n    \"years\": TIME_PER_YEAR,\n    \"months\": TIME_PER_MONTH,\n    \"weeks\": TIME_PER_WEEK,\n    \"days\": TIME_PER_DAY,\n    \"hours\": TIME_PER_HOUR,\n    \"minutes\": TIME_PER_MINUTE,\n    \"seconds\": TIME_PER_SECOND,\n    \"milliseconds\": TIME_PER_MILLISECOND\n};\n\nfunction absoluteDateDiff(a, b) {\n    var diff = a.getTime() - b;\n    var offsetDiff = a.getTimezoneOffset() - b.getTimezoneOffset();\n\n    return diff - (offsetDiff * TIME_PER_MINUTE);\n}\n\nfunction addTicks(date, ticks) {\n    return new Date(date.getTime() + ticks);\n}\n\nfunction toDate(value) {\n    var result;\n\n    if (value instanceof Date) {\n        result = value;\n    } else if (value) {\n        result = new Date(value);\n    }\n\n    return result;\n}\n\nfunction startOfWeek(date, weekStartDay) {\n    if (weekStartDay === void 0) { weekStartDay = 0; }\n\n    var daysToSubtract = 0;\n    var day = date.getDay();\n\n    if (!isNaN(day)) {\n        while (day !== weekStartDay) {\n            if (day === 0) {\n                day = 6;\n            } else {\n                day--;\n            }\n\n            daysToSubtract++;\n        }\n    }\n\n    return addTicks(date, -daysToSubtract * TIME_PER_DAY);\n}\n\nfunction adjustDST(date, hours) {\n    if (hours === 0 && date.getHours() === 23) {\n        date.setHours(date.getHours() + 2);\n        return true;\n    }\n\n    return false;\n}\n\nfunction addHours(date, hours) {\n    var roundedDate = new Date(date);\n\n    roundedDate.setMinutes(0, 0, 0);\n\n    var tzDiff = (date.getTimezoneOffset() - roundedDate.getTimezoneOffset()) * TIME_PER_MINUTE;\n\n    return addTicks(roundedDate, tzDiff + hours * TIME_PER_HOUR);\n}\n\nfunction addDuration(dateValue, value, unit, weekStartDay) {\n    var result = dateValue;\n\n    if (dateValue) {\n        var date = toDate(dateValue);\n        var hours = date.getHours();\n\n        if (unit === YEARS) {\n            result = new Date(date.getFullYear() + value, 0, 1);\n            adjustDST(result, 0);\n        } else if (unit === MONTHS) {\n            result = new Date(date.getFullYear(), date.getMonth() + value, 1);\n            adjustDST(result, hours);\n        } else if (unit === WEEKS) {\n            result = addDuration(startOfWeek(date, weekStartDay), value * 7, DAYS);\n            adjustDST(result, hours);\n        } else if (unit === DAYS) {\n            result = new Date(date.getFullYear(), date.getMonth(), date.getDate() + value);\n            adjustDST(result, hours);\n        } else if (unit === HOURS) {\n            result = addHours(date, value);\n        } else if (unit === MINUTES) {\n            result = addTicks(date, value * TIME_PER_MINUTE);\n\n            if (result.getSeconds() > 0) {\n                result.setSeconds(0);\n            }\n        } else if (unit === SECONDS) {\n            result = addTicks(date, value * TIME_PER_SECOND);\n        } else if (unit === MILLISECONDS) {\n            result = addTicks(date, value);\n        }\n\n        if (unit !== MILLISECONDS && result.getMilliseconds() > 0) {\n            result.setMilliseconds(0);\n        }\n    }\n\n    return result;\n}\n\nfunction floorDate(date, unit, weekStartDay) {\n    return addDuration(toDate(date), 0, unit, weekStartDay);\n}\n\nfunction ceilDate(dateValue, unit, weekStartDay) {\n    var date = toDate(dateValue);\n\n    if (date && floorDate(date, unit, weekStartDay).getTime() === date.getTime()) {\n        return date;\n    }\n\n    return addDuration(date, 1, unit, weekStartDay);\n}\n\nfunction dateComparer(a, b) {\n    if (a && b) {\n        return a.getTime() - b.getTime();\n    }\n\n    return -1;\n}\n\nfunction dateDiff(a, b) {\n    return a.getTime() - b;\n}\n\nfunction toTime(value) {\n    if (isArray(value)) {\n        var result = [];\n        for (var idx = 0; idx < value.length; idx++) {\n            result.push(toTime(value[idx]));\n        }\n\n        return result;\n    } else if (value) {\n        return toDate(value).getTime();\n    }\n}\n\nfunction dateEquals(a, b) {\n    if (a && b) {\n        return toTime(a) === toTime(b);\n    }\n\n    return a === b;\n}\n\nfunction timeIndex(date, start, baseUnit) {\n    return absoluteDateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n}\n\nfunction dateIndex(value, start, baseUnit, baseUnitStep) {\n    var date = toDate(value);\n    var startDate = toDate(start);\n    var index;\n\n    if (baseUnit === MONTHS) {\n        index = (date.getMonth() - startDate.getMonth() + (date.getFullYear() - startDate.getFullYear()) * 12) +\n            timeIndex(date, new Date(date.getFullYear(), date.getMonth()), DAYS) / new Date(date.getFullYear(), date.getMonth() + 1, 0).getDate();\n    } else if (baseUnit === YEARS) {\n        index = date.getFullYear() - startDate.getFullYear() + dateIndex(date, new Date(date.getFullYear(), 0), MONTHS, 1) / 12;\n    } else if (baseUnit === DAYS || baseUnit === WEEKS) {\n        index = timeIndex(date, startDate, baseUnit);\n    } else {\n        index = dateDiff(date, start) / TIME_PER_UNIT[baseUnit];\n    }\n\n    return index / baseUnitStep;\n}\n\nfunction duration(a, b, unit) {\n    var diff;\n\n    if (unit === YEARS) {\n        diff = b.getFullYear() - a.getFullYear();\n    } else if (unit === MONTHS) {\n        diff = duration(a, b, YEARS) * 12 + b.getMonth() - a.getMonth();\n    } else if (unit === DAYS) {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_DAY);\n    } else {\n        diff = Math.floor(dateDiff(b, a) / TIME_PER_UNIT[unit]);\n    }\n\n    return diff;\n}\n\nfunction lteDateIndex(date, sortedDates) {\n    var low = 0;\n    var high = sortedDates.length - 1;\n    var index;\n\n    while (low <= high) {\n        index = Math.floor((low + high) / 2);\n        var currentDate = sortedDates[index];\n\n        if (currentDate < date) {\n            low = index + 1;\n            continue;\n        }\n\n        if (currentDate > date) {\n            high = index - 1;\n            continue;\n        }\n\n        while (dateEquals(sortedDates[index - 1], date)) {\n            index--;\n        }\n\n        return index;\n    }\n\n    if (sortedDates[index] <= date) {\n        return index;\n    }\n\n    return index - 1;\n}\n\nfunction parseDate(intlService, date) {\n    var result;\n    if (isString(date)) {\n        result = intlService.parseDate(date) || toDate(date);\n    } else {\n        result = toDate(date);\n    }\n    return result;\n}\n\nfunction parseDates(intlService, dates) {\n    if (isArray(dates)) {\n        var result = [];\n        for (var idx = 0; idx < dates.length; idx++) {\n            result.push(parseDate(intlService, dates[idx]));\n        }\n\n        return result;\n    }\n\n    return parseDate(intlService, dates);\n}\n\nfunction firstDay(options, intlService) {\n    if (isNumber(options.weekStartDay)) {\n        return options.weekStartDay;\n    }\n\n    if (intlService && intlService.firstDay) {\n        return intlService.firstDay();\n    }\n\n    return 0;\n}\n\nvar MIN_CATEGORY_POINTS_RANGE = 0.01;\nvar MIN_CATEGORY_RANGE = 0.1;\n\nfunction indexOf(value, arr) {\n    if (value instanceof Date) {\n        var length = arr.length;\n        for (var idx = 0; idx < length; idx++) {\n            if (dateEquals(arr[idx], value)) {\n                return idx;\n            }\n        }\n\n        return -1;\n    }\n\n    return arr.indexOf(value);\n}\n\nvar CategoryAxis = Axis.extend({\n    initFields: function() {\n        this._ticks = {};\n    },\n\n    categoriesHash: function() {\n        return \"\";\n    },\n\n    clone: function() {\n        var copy = new CategoryAxis($.extend({}, this.options, {\n            categories: this.options.srcCategories\n        }), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    initUserOptions: function(options) {\n        var categories = options.categories || [];\n        var definedMin = defined(options.min);\n        var definedMax = defined(options.max);\n        options.srcCategories = options.categories = categories;\n\n        if ((definedMin || definedMax) && categories.length) {\n            var min = definedMin ? Math.floor(options.min) : 0;\n            var max;\n\n            if (definedMax) {\n                max = options.justified ? Math.floor(options.max) + 1 : Math.ceil(options.max);\n            } else {\n                max = categories.length;\n            }\n\n            options.categories = options.categories.slice(min, max);\n        }\n\n        return options;\n    },\n\n    rangeIndices: function() {\n        var options = this.options;\n        var length = options.categories.length || 1;\n        var min = isNumber(options.min) ? options.min % 1 : 0;\n        var max;\n\n        if (isNumber(options.max) && options.max % 1 !== 0 && options.max < this.totalRange().max) {\n            max = length - (1 - options.max % 1);\n        } else {\n            max = length - (options.justified ? 1 : 0);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    range: function() {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max = isNumber(options.max) ? options.max : this.totalRange().max;\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    roundedRange: function() {\n        return this.range();\n    },\n\n    totalRange: function() {\n        var options = this.options;\n        return { min: 0, max: Math.max(this._seriesMax || 0, options.srcCategories.length) - (options.justified ? 1 : 0) };\n    },\n\n    scaleOptions: function() {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var lineBox = this.lineBox();\n        var size = this.options.vertical ? lineBox.height() : lineBox.width();\n        var scale = size / ((max - min) || 1);\n\n        return {\n            scale: scale * (this.options.reverse ? -1 : 1),\n            box: lineBox,\n            min: min,\n            max: max\n        };\n    },\n\n    arrangeLabels: function() {\n        Axis.fn.arrangeLabels.call(this);\n        this.hideOutOfRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        var ref = this;\n        var box = ref.box;\n        var labels = ref.labels;\n\n        if (labels.length > 0) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n            var firstLabel = labels[0];\n            var lastLabel = last(labels);\n\n            if (firstLabel.box[valueAxis + 1] > end || firstLabel.box[valueAxis + 2] < start) {\n                firstLabel.options.visible = false;\n            }\n            if (lastLabel.box[valueAxis + 1] > end || lastLabel.box[valueAxis + 2] < start) {\n                lastLabel.options.visible = false;\n            }\n        }\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTicks().majorTicks;\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTicks().minorTicks;\n    },\n\n    getLabelsTickPositions: function() {\n        return this.getTicks().labelTicks;\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this.rangeIndices();\n        var min = ref.min;\n        var max = ref.max;\n        var limit = Math.ceil(max);\n        var current = Math.floor(min);\n        var indices = [];\n\n        while (current <= limit) {\n            indices.push(current);\n            current += stepSize;\n        }\n\n        return indices;\n    },\n\n    getTickPositions: function(stepSize) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var pos = box[(vertical ? Y : X) + (reverse ? 2 : 1)];\n        var indices = this.tickIndices(stepSize);\n        var positions = [];\n\n        for (var idx = 0; idx < indices.length; idx++) {\n            positions.push(pos + round(scale * (indices[idx] - min), COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getTicks: function() {\n        var options = this.options;\n        var cache = this._ticks;\n        var range = this.rangeIndices();\n        var lineBox = this.lineBox();\n        var hash = lineBox.getHash() + range.min + \",\" + range.max + options.reverse + options.justified;\n\n        if (cache._hash !== hash) {\n            var hasMinor = options.minorTicks.visible || options.minorGridLines.visible;\n            cache._hash = hash;\n            cache.labelTicks = this.getTickPositions(1);\n            cache.majorTicks = this.filterOutOfRangePositions(cache.labelTicks, lineBox);\n            cache.minorTicks = hasMinor ? this.filterOutOfRangePositions(this.getTickPositions(0.5), lineBox) : [];\n        }\n\n        return cache;\n    },\n\n    filterOutOfRangePositions: function(positions, lineBox) {\n        if (!positions.length) {\n            return positions;\n        }\n\n        var axis = this.options.vertical ? Y : X;\n        var inRange = function (position) { return lineBox[axis + 1] <= position && position <= lineBox[axis + 2]; };\n\n        var end = positions.length - 1;\n        var startIndex = 0;\n        while (!inRange(positions[startIndex]) && startIndex <= end) {\n            startIndex++;\n        }\n\n        var endIndex = end;\n\n        while (!inRange(positions[endIndex]) && endIndex >= 0) {\n            endIndex--;\n        }\n\n        return positions.slice(startIndex, endIndex + 1);\n    },\n\n    lineInfo: function() {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n        var lineBox = this.lineBox();\n        var lineSize = vertical ? lineBox.height() : lineBox.width();\n        var axis = vertical ? Y : X;\n        var axisDir = reverse ? -1 : 1;\n        var startEdge = axisDir === 1 ? 1 : 2;\n        var axisOrigin = axis + startEdge.toString();\n        var lineStart = lineBox[axisOrigin];\n\n        return {\n            axis: axis,\n            axisOrigin: axisOrigin,\n            axisDir: axisDir,\n            lineBox: lineBox,\n            lineSize: lineSize,\n            lineStart: lineStart\n        };\n    },\n\n    lineDir: function() {\n        /*\n         *  Category axis line direction:\n         *    * Vertical: down.\n         *    * Horizontal: right.\n         */\n\n        var ref = this.options;\n        var reverse = ref.reverse;\n        return reverse ? -1 : 1;\n    },\n\n    getSlot: function(from, to, limit) {\n        var options = this.options;\n        var reverse = options.reverse;\n        var justified = options.justified;\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var box = ref.box;\n        var min = ref.min;\n        var ref$1 = this.lineInfo();\n        var valueAxis = ref$1.axis;\n        var lineStart = ref$1.lineStart;\n\n        var slotBox = box.clone();\n        var singleSlot = !defined(to);\n\n        var start = valueOrDefault(from, 0);\n        var end = valueOrDefault(to, start);\n        end = Math.max(end - 1, start);\n\n        // Fixes transient bug caused by iOS 6.0 JIT\n        // (one can never be too sure)\n        end = Math.max(start, end);\n\n        var p1 = lineStart + (start - min) * scale;\n        var p2 = lineStart + (end + 1 - min) * scale;\n\n        if (singleSlot && justified) {\n            p2 = p1;\n        }\n\n        if (limit) {\n            p1 = limitValue(p1, box[valueAxis + 1], box[valueAxis + 2]);\n            p2 = limitValue(p2, box[valueAxis + 1], box[valueAxis + 2]);\n        }\n\n        slotBox[valueAxis + 1] = reverse ? p2 : p1;\n        slotBox[valueAxis + 2] = reverse ? p1 : p2;\n\n        return slotBox;\n    },\n\n    limitSlot: function(slot) {\n        var vertical = this.options.vertical;\n        var valueAxis = vertical ? Y : X;\n        var lineBox = this.lineBox();\n        var limittedSlot = slot.clone();\n\n        limittedSlot[valueAxis + 1] = limitValue(slot[valueAxis + 1], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n        limittedSlot[valueAxis + 2] = limitValue(slot[valueAxis + 2], lineBox[valueAxis + 1], lineBox[valueAxis + 2]);\n\n        return limittedSlot;\n    },\n\n    slot: function(from, to, limit) {\n        var min = Math.floor(this.options.min || 0);\n        var start = from;\n        var end = to;\n\n        if (typeof start === \"string\") {\n            start = this.categoryIndex(start);\n        } else if (isNumber(start)) {\n            start -= min;\n        }\n\n        if (typeof end === \"string\") {\n            end = this.categoryIndex(end);\n        } else if (isNumber(end)) {\n            end -= min;\n        }\n\n        return Axis.fn.slot.call(this, start, end, limit);\n    },\n\n    pointCategoryIndex: function(point) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var min = ref$1.min;\n        var max = ref$1.max;\n        var startValue = reverse ? max : min;\n        var lineStart = box[valueAxis + 1];\n        var lineEnd = box[valueAxis + 2];\n        var pos = point[valueAxis];\n\n        if (pos < lineStart || pos > lineEnd) {\n            return null;\n        }\n\n        var value = startValue + (pos - lineStart) / scale;\n        var diff = value % 1;\n\n        if (justified) {\n            value = Math.round(value);\n        } else if (diff === 0 && value > 0) {\n            value--;\n        }\n\n        return Math.floor(value);\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.options.categories[index];\n    },\n\n    categoryIndex: function(value) {\n        return this.totalIndex(value) - Math.floor(this.options.min || 0);\n    },\n\n    categoryAt: function(index, total) {\n        var options = this.options;\n\n        return (total ? options.srcCategories : options.categories)[index];\n    },\n\n    categoriesCount: function() {\n        return (this.options.categories || []).length;\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var range = options.categories.length;\n        var scale = size / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        return {\n            min: offset,\n            max: range + offset\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var rangeIndices = this.limitedRangeIndices();\n        var range = rangeIndices.max - rangeIndices.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = rangeIndices.min + minDelta;\n        var max = rangeIndices.max - maxDelta;\n\n        if (max - min < MIN_CATEGORY_RANGE) {\n            max = min + MIN_CATEGORY_RANGE;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this.totalRange();\n        var totalMin = ref.min;\n        var totalMax = ref.max;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    labelsCount: function() {\n        var labelsRange = this.labelsRange();\n\n        return labelsRange.max - labelsRange.min;\n    },\n\n    labelsRange: function() {\n        var options = this.options;\n        var justified = options.justified;\n        var labelOptions = options.labels;\n        var ref = this.limitedRangeIndices(true);\n        var min = ref.min;\n        var max = ref.max;\n        var start = Math.floor(min);\n\n        if (!justified) {\n            min = Math.floor(min);\n            max = Math.ceil(max);\n        } else {\n            min = Math.ceil(min);\n            max = Math.floor(max);\n        }\n\n        var skip;\n\n        if (min > labelOptions.skip) {\n            skip = labelOptions.skip + labelOptions.step * Math.ceil((min - labelOptions.skip) / labelOptions.step);\n        } else {\n            skip = labelOptions.skip;\n        }\n\n        return {\n            min: skip - start,\n            max: (options.categories.length ? max + (justified ? 1 : 0) : 0) - start\n        };\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var dataItem = options.dataItems ? options.dataItems[index] : null;\n        var category = valueOrDefault(options.categories[index], \"\");\n\n        labelContext.dataItem = dataItem;\n        var text = this.axisLabelText(category, labelOptions, labelContext);\n\n        return new AxisLabel(category, text, index, dataItem, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.limitedRangeIndices();\n\n        return Math.floor(range.min) <= value && value <= Math.ceil(range.max);\n    },\n\n    noteSlot: function(value) {\n        var options = this.options;\n        var index = value - Math.floor(options.min || 0);\n        return this.getSlot(index);\n    },\n\n    arrangeNotes: function() {\n        Axis.fn.arrangeNotes.call(this);\n        this.hideOutOfRangeNotes();\n    },\n\n    hideOutOfRangeNotes: function() {\n        var ref = this;\n        var notes = ref.notes;\n        var box = ref.box;\n        if (notes && notes.length) {\n            var valueAxis = this.options.vertical ? Y : X;\n            var start = box[valueAxis + 1];\n            var end = box[valueAxis + 2];\n\n            for (var idx = 0; idx < notes.length; idx++) {\n                var note = notes[idx];\n                if (note.box && (end < note.box[valueAxis + 1] || note.box[valueAxis + 2] < start)) {\n                    note.hide();\n                }\n            }\n        }\n    },\n\n    pan: function(delta) {\n        var range = this.limitedRangeIndices(true);\n        var ref = this.scaleOptions();\n        var scale = ref.scale;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        var totalRange = this.totalRange();\n        var min = range.min + offset;\n        var max = range.max + offset;\n\n        return this.limitRange(min, max, 0, totalRange.max, offset);\n    },\n\n    pointsRange: function(start, end) {\n        var ref = this.options;\n        var reverse = ref.reverse;\n        var vertical = ref.vertical;\n        var valueAxis = vertical ? Y : X;\n        var range = this.limitedRangeIndices(true);\n        var ref$1 = this.scaleOptions();\n        var scale = ref$1.scale;\n        var box = ref$1.box;\n        var lineStart = box[valueAxis + (reverse ? 2 : 1)];\n\n        var diffStart = start[valueAxis] - lineStart;\n        var diffEnd = end[valueAxis] - lineStart;\n\n        var min = range.min + diffStart / scale;\n        var max = range.min + diffEnd / scale;\n        var rangeMin = Math.min(min, max);\n        var rangeMax = Math.max(min, max);\n\n        if (rangeMax - rangeMin >= MIN_CATEGORY_POINTS_RANGE) {\n            return {\n                min: rangeMin,\n                max: rangeMax\n            };\n        }\n    },\n\n    valueRange: function() {\n        return this.range();\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        var index = this._categoriesMap ?\n            this._categoriesMap.get(value) : indexOf(value, options.srcCategories);\n\n        return index;\n    },\n\n    currentRangeIndices: function() {\n        var options = this.options;\n        var min = 0;\n\n        if (isNumber(options.min)) {\n            min = Math.floor(options.min);\n        }\n\n        var max;\n        if (isNumber(options.max)) {\n            max = options.justified ? Math.floor(options.max) : Math.ceil(options.max) - 1;\n        } else {\n            max = this.totalCount() - 1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    limitedRangeIndices: function(totalLimit) {\n        var options = this.options;\n        var min = isNumber(options.min) ? options.min : 0;\n        var max;\n\n        if (isNumber(options.max)) {\n            max = options.max;\n        } else if (isNumber(options.min)) {\n            max = min + options.categories.length;\n        } else {\n            max = this.totalRange().max || 1;\n        }\n\n        if (totalLimit) {\n            var totalRange = this.totalRange();\n            min = limitValue(min, 0, totalRange.max);\n            max = limitValue(max, 0, totalRange.max);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    totalRangeIndices: function() {\n        return {\n            min: 0,\n            max: this.totalRange().max || 1\n        };\n    },\n\n    indexCategories: function() {\n        if (!this._categoriesMap) {\n            var map$$1 = this._categoriesMap = new HashMap();\n            var srcCategories = this.options.srcCategories;\n            for (var idx = 0; idx < srcCategories.length; idx++) {\n                map$$1.set(srcCategories[idx], idx);\n            }\n        }\n    },\n\n    totalCount: function() {\n        return Math.max(this.options.srcCategories.length, this._seriesMax || 0);\n    }\n});\n\nsetDefaultOptions(CategoryAxis, {\n    type: \"category\",\n    vertical: false,\n    majorGridLines: {\n        visible: false,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        zIndex: 1\n    },\n    justified: false,\n    _deferLabels: true\n});\n\nvar COORDINATE_LIMIT = 300000;\n\nvar DateLabelFormats = {\n    milliseconds: \"HH:mm:ss.fff\",\n    seconds: \"HH:mm:ss\",\n    minutes: \"HH:mm\",\n    hours: \"HH:mm\",\n    days: \"M/d\",\n    weeks: \"M/d\",\n    months: \"MMM 'yy\",\n    years: \"yyyy\"\n};\n\nvar ZERO_THRESHOLD = 0.2;\n\nvar AUTO = \"auto\";\nvar BASE_UNITS = [\n    MILLISECONDS, SECONDS, MINUTES, HOURS, DAYS, WEEKS, MONTHS, YEARS\n];\nvar FIT = \"fit\";\n\nfunction categoryRange(categories, clearCache) {\n    if (clearCache) {\n        categories._range = undefined;\n    }\n\n    var range = categories._range;\n    if (!range) {\n        range = categories._range = sparseArrayLimits(categories);\n        range.min = toDate(range.min);\n        range.max = toDate(range.max);\n    }\n\n    return range;\n}\n\nvar EmptyDateRange = Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n\n    displayIndices: function() {\n        return {\n            min: 0,\n            max: 1\n        };\n    },\n\n    displayRange: function() {\n        return {};\n    },\n\n    total: function() {\n        return {};\n    },\n\n    valueRange: function() {\n        return {};\n    },\n\n    valueIndex: function() {\n        return -1;\n    },\n\n    values: function() {\n        return [];\n    },\n\n    totalIndex: function() {\n        return -1;\n    },\n\n    valuesCount: function() {\n        return 0;\n    },\n\n    totalCount: function() {\n        return 0;\n    },\n\n    dateAt: function() {\n        return null;\n    }\n});\n\nvar DateRange = Class.extend({\n    init: function(start, end, options) {\n        this.options = options;\n        options.baseUnitStep = options.baseUnitStep || 1;\n\n        var roundToBaseUnit = options.roundToBaseUnit;\n        var justified = options.justified;\n\n        this.start = addDuration(start, 0, options.baseUnit, options.weekStartDay);\n        var lowerEnd = this.roundToTotalStep(end);\n        var expandEnd = !justified && dateEquals(end, lowerEnd) && !options.justifyEnd;\n\n        this.end = this.roundToTotalStep(end, !justified, expandEnd ? 1 : 0);\n\n        var min = options.min || start;\n        this.valueStart = this.roundToTotalStep(min);\n        this.displayStart = roundToBaseUnit ? this.valueStart : min;\n\n        var max = options.max;\n        if (!max) {\n            this.valueEnd = lowerEnd;\n            this.displayEnd = roundToBaseUnit || expandEnd ? this.end : end;\n        } else {\n            var next = !justified && dateEquals(max, this.roundToTotalStep(max)) ? -1 : 0;\n            this.valueEnd = this.roundToTotalStep(max, false, next);\n            this.displayEnd = roundToBaseUnit ? this.roundToTotalStep(max, !justified) : options.max;\n        }\n\n        if (this.valueEnd < this.valueStart) {\n            this.valueEnd = this.valueStart;\n        }\n        if (this.displayEnd <= this.displayStart) {\n            this.displayEnd = this.roundToTotalStep(this.displayStart, false, 1);\n        }\n    },\n\n    displayRange: function() {\n        return {\n            min: this.displayStart,\n            max: this.displayEnd\n        };\n    },\n\n    displayIndices: function() {\n        if (!this._indices) {\n            var options = this.options;\n\n            var baseUnit = options.baseUnit;\n            var baseUnitStep = options.baseUnitStep;\n\n            var minIdx = dateIndex(this.displayStart, this.valueStart, baseUnit, baseUnitStep);\n            var maxIdx = dateIndex(this.displayEnd, this.valueStart, baseUnit, baseUnitStep);\n\n            this._indices = { min: minIdx, max: maxIdx };\n        }\n\n        return this._indices;\n    },\n\n    total: function() {\n        return {\n            min: this.start,\n            max: this.end\n        };\n    },\n\n    totalCount: function() {\n        var last$$1 = this.totalIndex(this.end);\n\n        return last$$1 + (this.options.justified ? 1 : 0);\n    },\n\n    valueRange: function() {\n        return {\n            min: this.valueStart,\n            max: this.valueEnd\n        };\n    },\n\n    valueIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep));\n    },\n\n    totalIndex: function(value) {\n        var options = this.options;\n        return Math.floor(dateIndex(value, this.start, options.baseUnit, options.baseUnitStep));\n    },\n\n    dateIndex: function(value) {\n        var options = this.options;\n        return dateIndex(value, this.valueStart, options.baseUnit, options.baseUnitStep);\n    },\n\n    valuesCount: function() {\n        var maxIdx = this.valueIndex(this.valueEnd);\n\n        return maxIdx + 1;\n    },\n\n    values: function() {\n        var values = this._values;\n        if (!values) {\n            var options = this.options;\n            var range = this.valueRange();\n            this._values = values = [];\n\n            for (var date = range.min; date <= range.max;) {\n                values.push(date);\n                date = addDuration(date, options.baseUnitStep, options.baseUnit, options.weekStartDay);\n            }\n        }\n\n        return values;\n    },\n\n    dateAt: function(index, total) {\n        var options = this.options;\n\n        return addDuration(total ? this.start : this.valueStart, options.baseUnitStep * index, options.baseUnit, options.weekStartDay);\n    },\n\n    roundToTotalStep: function(value, upper, next) {\n        var ref = this.options;\n        var baseUnit = ref.baseUnit;\n        var baseUnitStep = ref.baseUnitStep;\n        var weekStartDay = ref.weekStartDay;\n        var start = this.start;\n\n        var step = dateIndex(value, start, baseUnit, baseUnitStep);\n        var roundedStep = upper ? Math.ceil(step) : Math.floor(step);\n\n        if (next) {\n            roundedStep += next;\n        }\n\n        return addDuration(start, roundedStep * baseUnitStep, baseUnit, weekStartDay);\n    }\n});\n\nfunction autoBaseUnit(options, startUnit, startStep) {\n    var categoryLimits = categoryRange(options.categories);\n    var span = (options.max || categoryLimits.max) - (options.min || categoryLimits.min);\n    var autoBaseUnitSteps = options.autoBaseUnitSteps;\n    var maxDateGroups = options.maxDateGroups;\n    var autoUnit = options.baseUnit === FIT;\n    var autoUnitIx = startUnit ? BASE_UNITS.indexOf(startUnit) : 0;\n    var baseUnit = autoUnit ? BASE_UNITS[autoUnitIx++] : options.baseUnit;\n    var units = span / TIME_PER_UNIT[baseUnit];\n    var totalUnits = units;\n    var unitSteps, step, nextStep;\n\n    while (!step || units >= maxDateGroups) {\n        unitSteps = unitSteps || autoBaseUnitSteps[baseUnit].slice(0);\n\n        do {\n            nextStep = unitSteps.shift();\n        } while (nextStep && startUnit === baseUnit && nextStep < startStep);\n\n        if (nextStep) {\n            step = nextStep;\n            units = totalUnits / step;\n        } else if (baseUnit === last(BASE_UNITS)) {\n            step = Math.ceil(totalUnits / maxDateGroups);\n            break;\n        } else if (autoUnit) {\n            baseUnit = BASE_UNITS[autoUnitIx++] || last(BASE_UNITS);\n            totalUnits = span / TIME_PER_UNIT[baseUnit];\n            unitSteps = null;\n        } else {\n            if (units > maxDateGroups) {\n                step = Math.ceil(totalUnits / maxDateGroups);\n            }\n            break;\n        }\n    }\n\n    options.baseUnitStep = step;\n    options.baseUnit = baseUnit;\n}\n\nfunction defaultBaseUnit(options) {\n    var categories = options.categories;\n    var count = defined(categories) ? categories.length : 0;\n    var minDiff = MAX_VALUE;\n    var lastCategory, unit;\n\n    for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n        var category = categories[categoryIx];\n\n        if (category && lastCategory) {\n            var diff = Math.abs(absoluteDateDiff(category, lastCategory));\n\n            if (diff !== 0) {\n                minDiff = Math.min(minDiff, diff);\n\n                if (minDiff >= TIME_PER_YEAR) {\n                    unit = YEARS;\n                } else if (minDiff >= TIME_PER_MONTH - TIME_PER_DAY * 3) {\n                    unit = MONTHS;\n                } else if (minDiff >= TIME_PER_WEEK) {\n                    unit = WEEKS;\n                } else if (minDiff >= TIME_PER_DAY) {\n                    unit = DAYS;\n                } else if (minDiff >= TIME_PER_HOUR) {\n                    unit = HOURS;\n                } else if (minDiff >= TIME_PER_MINUTE) {\n                    unit = MINUTES;\n                } else {\n                    unit = SECONDS;\n                }\n            }\n        }\n\n        lastCategory = category;\n    }\n\n    options.baseUnit = unit || DAYS;\n}\n\nfunction initUnit(options) {\n    var baseUnit = (options.baseUnit || \"\").toLowerCase();\n    var useDefault = baseUnit !== FIT && !inArray(baseUnit, BASE_UNITS);\n\n    if (useDefault) {\n        defaultBaseUnit(options);\n    }\n\n    if (baseUnit === FIT || options.baseUnitStep === AUTO) {\n        autoBaseUnit(options);\n    }\n\n    return options;\n}\n\nvar DateCategoryAxis = CategoryAxis.extend({\n    clone: function() {\n        var copy = new DateCategoryAxis($.extend({}, this.options), this.chartService);\n        copy.createLabels();\n\n        return copy;\n    },\n\n    categoriesHash: function() {\n        var start = this.dataRange.total().min;\n        return this.options.baseUnit + this.options.baseUnitStep + start;\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    initFields: function() {\n        CategoryAxis.fn.initFields.call(this);\n\n        var chartService = this.chartService;\n        var intlService = chartService.intl;\n        var options = this.options;\n\n        var categories = options.categories || [];\n        if (!categories._parsed) {\n            categories = parseDates(intlService, categories);\n            categories._parsed = true;\n        }\n\n        options = deepExtend({\n            roundToBaseUnit: true\n        }, options, {\n            categories: categories,\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            weekStartDay: firstDay(options, intlService)\n        });\n\n        if (chartService.panning && chartService.isPannable(options.vertical ? Y : X)) {\n            options.roundToBaseUnit = false;\n        }\n\n        options.userSetBaseUnit = options.userSetBaseUnit || options.baseUnit;\n        options.userSetBaseUnitStep = options.userSetBaseUnitStep || options.baseUnitStep;\n\n        this.options = options;\n        options.srcCategories = categories;\n\n        if (categories.length > 0) {\n            var range = categoryRange(categories, true);\n            var maxDivisions = options.maxDivisions;\n            var safeOptions = initUnit(options);\n\n            var forecast = options._forecast;\n            if (forecast) {\n                if (forecast.before > 0) {\n                    range.min = addDuration(range.min, -forecast.before, safeOptions.baseUnit, safeOptions.weekStartDay);\n                }\n\n                if (forecast.after > 0) {\n                    range.max = addDuration(range.max, forecast.after, safeOptions.baseUnit, safeOptions.weekStartDay);\n                }\n            }\n\n            this.dataRange = new DateRange(range.min, range.max, safeOptions);\n\n            if (maxDivisions) {\n                var dataRange = this.dataRange.displayRange();\n\n                var divisionOptions = $.extend({}, options, {\n                    justified: true,\n                    roundToBaseUnit: false,\n                    baseUnit: 'fit',\n                    min: dataRange.min,\n                    max: dataRange.max,\n                    maxDateGroups: maxDivisions\n                });\n\n                var dataRangeOptions = this.dataRange.options;\n\n                autoBaseUnit(divisionOptions, dataRangeOptions.baseUnit, dataRangeOptions.baseUnitStep);\n\n                this.divisionRange = new DateRange(range.min, range.max, divisionOptions);\n            } else {\n                this.divisionRange = this.dataRange;\n            }\n\n        } else {\n            options.baseUnit = options.baseUnit || DAYS;\n            this.dataRange = this.divisionRange = new EmptyDateRange(options);\n        }\n\n        this.rangeLabels = [];\n    },\n\n    tickIndices: function(stepSize) {\n        var ref = this;\n        var dataRange = ref.dataRange;\n        var divisionRange = ref.divisionRange;\n        var valuesCount = divisionRange.valuesCount();\n\n        if (!this.options.maxDivisions || !valuesCount) {\n            return CategoryAxis.fn.tickIndices.call(this, stepSize);\n        }\n\n        var indices = [];\n        var values = divisionRange.values();\n        var offset = 0;\n\n        if (!this.options.justified) {\n            values = values.concat(divisionRange.dateAt(valuesCount));\n            offset = 0.5;//align ticks to the center of not justified categories\n        }\n\n        for (var idx = 0; idx < values.length; idx++) {\n            indices.push(dataRange.dateIndex(values[idx]) + offset);\n            if (stepSize !== 1 && idx >= 1) {\n                var last$$1 = indices.length - 1;\n                indices.splice(idx, 0, indices[last$$1 - 1] + (indices[last$$1] - indices[last$$1 - 1]) * stepSize);\n            }\n        }\n\n        return indices;\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        var categories = this.options.categories || [];\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0 && categories.length;\n    },\n\n    parseNoteValue: function(value) {\n        return parseDate(this.chartService.intl, value);\n    },\n\n    noteSlot: function(value) {\n        return this.getSlot(value);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var baseUnit = options.baseUnit;\n        var weekStartDay = options.weekStartDay;\n        var vertical = options.vertical;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / (range.max - range.min);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if (range.min && range.max) {\n            var from = addTicks(options.min || range.min, offset);\n            var to = addTicks(options.max || range.max, offset);\n\n            range = {\n                min: addDuration(from, 0, baseUnit, weekStartDay),\n                max: addDuration(to, 0, baseUnit, weekStartDay)\n            };\n        }\n\n        return range;\n    },\n\n    labelsRange: function() {\n        return {\n            min: this.options.labels.skip,\n            max: this.divisionRange.valuesCount()\n        };\n    },\n\n    pan: function(delta) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var size = options.vertical ? lineBox.height() : lineBox.width();\n        var ref = this.dataRange.displayRange();\n        var min = ref.min;\n        var max = ref.max;\n        var totalLimits = this.dataRange.total();\n        var scale = size / (max - min);\n        var offset = round(delta / scale, DEFAULT_PRECISION) * (options.reverse ? -1 : 1);\n        var from = addTicks(min, offset);\n        var to = addTicks(max, offset);\n\n        var panRange = this.limitRange(toTime(from), toTime(to), toTime(totalLimits.min), toTime(totalLimits.max), offset);\n\n        if (panRange) {\n            panRange.min = toDate(panRange.min);\n            panRange.max = toDate(panRange.max);\n            panRange.baseUnit = options.baseUnit;\n            panRange.baseUnitStep = options.baseUnitStep || 1;\n            panRange.userSetBaseUnit = options.userSetBaseUnit;\n            panRange.userSetBaseUnitStep = options.userSetBaseUnitStep;\n\n            return panRange;\n        }\n    },\n\n    pointsRange: function(start, end) {\n        if (this.isEmpty()) {\n            return null;\n        }\n\n        var pointsRange = CategoryAxis.fn.pointsRange.call(this, start, end);\n        var datesRange = this.dataRange.displayRange();\n        var indicesRange = this.dataRange.displayIndices();\n        var scale = dateDiff(datesRange.max, datesRange.min) / (indicesRange.max - indicesRange.min);\n        var options = this.options;\n\n        var min = addTicks(datesRange.min, pointsRange.min * scale);\n        var max = addTicks(datesRange.min, pointsRange.max * scale);\n\n        return {\n            min: min,\n            max: max,\n            baseUnit: options.userSetBaseUnit || options.baseUnit,\n            baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        if (this.isEmpty()) {\n            return {};\n        }\n\n        var options = this.options;\n        var fit = options.userSetBaseUnit === FIT;\n        var totalLimits = this.dataRange.total();\n        var ref = this.dataRange.displayRange();\n        var rangeMin = ref.min;\n        var rangeMax = ref.max;\n\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = rangeMax - rangeMin;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = Math.round(position * delta);\n        var maxDelta = Math.round((1 - position) * delta);\n\n        var ref$1 = this.dataRange.options;\n        var baseUnit = ref$1.baseUnit;\n        var min = new Date(rangeMin.getTime() + minDelta);\n        var max = new Date(rangeMax.getTime() - maxDelta);\n\n        if (fit) {\n            var autoBaseUnitSteps = options.autoBaseUnitSteps;\n            var maxDateGroups = options.maxDateGroups;\n\n            var maxDiff = last(autoBaseUnitSteps[baseUnit]) * maxDateGroups * TIME_PER_UNIT[baseUnit];\n            var rangeDiff = dateDiff(rangeMax, rangeMin);\n            var diff = dateDiff(max, min);\n            var baseUnitIndex = BASE_UNITS.indexOf(baseUnit);\n            var autoBaseUnitStep, ticks;\n\n            if (diff < TIME_PER_UNIT[baseUnit] && baseUnit !== MILLISECONDS) {\n                baseUnit = BASE_UNITS[baseUnitIndex - 1];\n                autoBaseUnitStep = last(autoBaseUnitSteps[baseUnit]);\n                ticks = (rangeDiff - (maxDateGroups - 1) * autoBaseUnitStep * TIME_PER_UNIT[baseUnit]) / 2;\n                min = addTicks(rangeMin, ticks);\n                max = addTicks(rangeMax, -ticks);\n\n            } else if (diff > maxDiff && baseUnit !== YEARS) {\n                var stepIndex = 0;\n\n                do {\n                    baseUnitIndex++;\n                    baseUnit = BASE_UNITS[baseUnitIndex];\n                    stepIndex = 0;\n                    ticks = 2 * TIME_PER_UNIT[baseUnit];\n                    do {\n                        autoBaseUnitStep = autoBaseUnitSteps[baseUnit][stepIndex];\n                        stepIndex++;\n                    } while (stepIndex < autoBaseUnitSteps[baseUnit].length && ticks * autoBaseUnitStep < rangeDiff);\n                } while (baseUnit !== YEARS && ticks * autoBaseUnitStep < rangeDiff);\n\n                ticks = (ticks * autoBaseUnitStep - rangeDiff) / 2;\n                if (ticks > 0) {\n                    min = addTicks(rangeMin, -ticks);\n                    max = addTicks(rangeMax, ticks);\n                    min = addTicks(min, limitValue(max, totalLimits.min, totalLimits.max) - max);\n                    max = addTicks(max, limitValue(min, totalLimits.min, totalLimits.max) - min);\n                }\n            }\n        }\n\n        if (min && max && dateDiff(max, min) > 0) {\n            return {\n                min: min,\n                max: max,\n                baseUnit: options.userSetBaseUnit || options.baseUnit,\n                baseUnitStep: options.userSetBaseUnitStep || options.baseUnitStep\n            };\n        }\n    },\n\n    zoomRange: function(scale, cursor) {\n        var totalLimits = this.dataRange.total();\n        var range = this.scaleRange(scale, cursor);\n\n        if (range) {\n            if (range.min < totalLimits.min) {\n                range.min = totalLimits.min;\n            }\n            if (range.max > totalLimits.max) {\n                range.max = totalLimits.max;\n            }\n        }\n\n        return range;\n    },\n\n    range: function() {\n        return this.dataRange.displayRange();\n    },\n\n    createLabels: function() {\n        CategoryAxis.fn.createLabels.call(this);\n        this.createRangeLabels();\n    },\n\n    clearLabels: function() {\n        CategoryAxis.fn.clearLabels.call(this);\n        this.rangeLabels = [];\n    },\n\n    arrangeLabels: function() {\n        this.arrangeRangeLabels();\n        CategoryAxis.fn.arrangeLabels.call(this);\n    },\n\n    arrangeRangeLabels: function() {\n        var ref = this;\n        var options = ref.options;\n        var rangeLabels = ref.rangeLabels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var mirror = options.rangeLabels.mirror || options.labels.mirror;\n\n        var firstLabel = rangeLabels[0];\n        if (firstLabel) {\n            var position = vertical ? lineBox.y1 - (firstLabel.box.height() / 2) : lineBox.x1;\n            this.positionLabel(firstLabel, mirror, position);\n        }\n\n        var lastLabel = rangeLabels[1];\n        if (lastLabel) {\n            var position$1 = vertical ? lineBox.y2 - (lastLabel.box.height() / 2) : lineBox.x2;\n            this.positionLabel(lastLabel, mirror, position$1);\n        }\n    },\n\n    autoRotateLabels: function() {\n        CategoryAxis.fn.autoRotateLabels.call(this);\n        this.autoRotateRangeLabels();\n    },\n\n    hideOutOfRangeLabels: function() {\n        CategoryAxis.fn.hideOutOfRangeLabels.call(this);\n        this.hideOverlappingLabels();\n    },\n\n    hideOverlappingLabels: function() {\n        var ref = this;\n        var rangeLabels = ref.rangeLabels;\n        var labels = ref.labels;\n        if (rangeLabels.length === 0) {\n            return;\n        }\n\n        function clip(rangeLabel, label) {\n            if (!label.options.visible || label.box.overlaps(rangeLabel.box)) {\n                label.options.visible = false;\n                return true;\n            }\n\n            return false;\n        }\n\n        var firstRangeLabel = rangeLabels[0];\n        if (firstRangeLabel && firstRangeLabel.options.visible) {\n            for (var i = 0; i < labels.length; i++) {\n                var overlaps = clip(firstRangeLabel, labels[i]);\n                if (!overlaps) {\n                    break;\n                }\n            }\n        }\n\n        var lastRangeLabel = rangeLabels[1];\n        if (lastRangeLabel && lastRangeLabel.options.visible) {\n            for (var i$1 = labels.length - 1; i$1 > 0; --i$1) {\n                var overlaps$1 = clip(lastRangeLabel, labels[i$1]);\n                if (!overlaps$1) {\n                    break;\n                }\n            }\n        }\n    },\n\n    contentBox: function() {\n        var box = CategoryAxis.fn.contentBox.call(this);\n        var rangeLabels = this.rangeLabels;\n\n        for (var i = 0; i < rangeLabels.length; i++) {\n            var label = rangeLabels[i];\n            if (label.options.visible) {\n                box.wrap(label.box);\n            }\n        }\n\n        return box;\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        if (labelContext === void 0) { labelContext = {}; }\n\n        var options = this.options;\n        var dataItem = options.dataItems && !options.maxDivisions ? options.dataItems[index] : null;\n        var date = this.divisionRange.dateAt(index);\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n\n        labelOptions.format = labelOptions.format || unitFormat;\n        labelContext.dataItem = dataItem;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        if (text) {\n            return new AxisLabel(date, text, index, dataItem, labelOptions);\n        }\n    },\n\n    createRangeLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this.divisionRange;\n        var displayStart = ref.displayStart;\n        var displayEnd = ref.displayEnd;\n        var options = this.options;\n        var labelOptions = $.extend({}, options.labels, options.rangeLabels, {\n            align: CENTER,\n            zIndex: options.zIndex\n        });\n\n        if (labelOptions.visible !== true) {\n            return;\n        }\n\n        this.normalizeLabelRotation(labelOptions);\n        labelOptions.alignRotation = CENTER;\n\n        if (labelOptions.rotation === \"auto\") {\n            labelOptions.rotation = 0;\n            options.autoRotateRangeLabels = true;\n        }\n\n        var unitFormat = labelOptions.dateFormats[this.divisionRange.options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var createLabel = function (index, date, text) {\n            if (text) {\n                var label = new AxisLabel(date, text, index, null, labelOptions);\n                this$1$1.append(label);\n                this$1$1.rangeLabels.push(label);\n            }\n        };\n\n        var startText = this.axisLabelText(displayStart, labelOptions, { index: 0, count: 2 });\n        createLabel(0, displayStart, startText);\n\n        var endText = this.axisLabelText(displayEnd, labelOptions, { index: 1, count: 2 });\n        createLabel(1, displayEnd, endText);\n    },\n\n    autoRotateRangeLabels: function() {\n        var this$1$1 = this;\n\n        var labels = this.rangeLabels;\n        if (!this.options.autoRotateRangeLabels || this.options.vertical || labels.length !== 2) {\n            return;\n        }\n\n        var rotateLabel = function (label, tickPositions, index) {\n            var width = Math.abs(tickPositions[index + 1] - tickPositions[index]) * 2;\n            var angle = this$1$1.autoRotateLabelAngle(label.box, width);\n            if (angle !== 0) {\n                label.options.rotation = angle;\n                label.reflow(new Box());\n            }\n        };\n\n        var tickPositions = this.getMajorTickPositions();\n        rotateLabel(labels[0], tickPositions, 0);\n        rotateLabel(labels[1], tickPositions, tickPositions.length - 2);\n    },\n\n    categoryIndex: function(value) {\n        return this.dataRange.valueIndex(value);\n    },\n\n    slot: function(from, to, limit) {\n        var dateRange = this.dataRange;\n        var start = from;\n        var end = to;\n\n        if (start instanceof Date) {\n            start = dateRange.dateIndex(start);\n        }\n\n        if (end instanceof Date) {\n            end = dateRange.dateIndex(end);\n        }\n\n        var slot = this.getSlot(start, end, limit);\n        if (slot) {\n            return slot.toRect();\n        }\n    },\n\n    getSlot: function(a, b, limit) {\n        var start = a;\n        var end = b;\n\n        if (typeof start === OBJECT) {\n            start = this.categoryIndex(start);\n        }\n\n        if (typeof end === OBJECT) {\n            end = this.categoryIndex(end);\n        }\n\n        return CategoryAxis.fn.getSlot.call(this, start, end, limit);\n    },\n\n    valueRange: function() {\n        var options = this.options;\n        var range = categoryRange(options.srcCategories);\n\n        return {\n            min: toDate(range.min),\n            max: toDate(range.max)\n        };\n    },\n\n    categoryAt: function(index, total) {\n        return this.dataRange.dateAt(index, total);\n    },\n\n    categoriesCount: function() {\n        return this.dataRange.valuesCount();\n    },\n\n    rangeIndices: function() {\n        return this.dataRange.displayIndices();\n    },\n\n    labelsBetweenTicks: function() {\n        return !this.divisionRange.options.justified;\n    },\n\n    prepareUserOptions: function() {\n        if (this.isEmpty()) {\n            return;\n        }\n\n        this.options.categories = this.dataRange.values();\n    },\n\n    getCategory: function(point) {\n        var index = this.pointCategoryIndex(point);\n\n        if (index === null) {\n            return null;\n        }\n\n        return this.dataRange.dateAt(index);\n    },\n\n    totalIndex: function(value) {\n        return this.dataRange.totalIndex(value);\n    },\n\n    currentRangeIndices: function() {\n        var range = this.dataRange.valueRange();\n        return {\n            min: this.dataRange.totalIndex(range.min),\n            max: this.dataRange.totalIndex(range.max)\n        };\n    },\n\n    totalRange: function() {\n        return this.dataRange.total();\n    },\n\n    totalRangeIndices: function() {\n        var range = this.dataRange.total();\n        return {\n            min: this.dataRange.totalIndex(range.min),\n            max: this.dataRange.totalIndex(range.max)\n        };\n    },\n\n    totalCount: function() {\n        return this.dataRange.totalCount();\n    },\n\n    isEmpty: function() {\n        return !this.options.srcCategories.length;\n    },\n\n    roundedRange: function() {\n        if (this.options.roundToBaseUnit !== false || this.isEmpty()) {\n            return this.range();\n        }\n\n        var options = this.options;\n        var datesRange = categoryRange(options.srcCategories);\n\n        var dateRange = new DateRange(datesRange.min, datesRange.max, $.extend({}, options, {\n            justified: false,\n            roundToBaseUnit: true,\n            justifyEnd: false\n        }));\n\n        return dateRange.displayRange();\n    }\n});\n\nsetDefaultOptions(DateCategoryAxis, {\n    type: DATE,\n    labels: {\n        dateFormats: DateLabelFormats\n    },\n    rangeLabels: {\n        visible: false\n    },\n    autoBaseUnitSteps: {\n        milliseconds: [ 1, 10, 100 ],\n        seconds: [ 1, 2, 5, 15, 30 ],\n        minutes: [ 1, 2, 5, 15, 30 ],\n        hours: [ 1, 2, 3 ],\n        days: [ 1, 2, 3 ],\n        weeks: [ 1, 2 ],\n        months: [ 1, 2, 3, 6 ],\n        years: [ 1, 2, 3, 5, 10, 25, 50 ]\n    },\n    maxDateGroups: 10\n});\n\nfunction autoAxisMin(min, max, narrow) {\n    if (!min && !max) {\n        return 0;\n    }\n\n    var axisMin;\n\n    if (min >= 0 && max >= 0) {\n        var minValue = min === max ? 0 : min;\n\n        var diff = (max - minValue) / max;\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMin = Math.max(0, minValue - ((max - minValue) / 2));\n    } else {\n        axisMin = min;\n    }\n\n    return axisMin;\n}\n\nfunction autoAxisMax(min, max, narrow) {\n    if (!min && !max) {\n        return 1;\n    }\n\n    var axisMax;\n\n    if (min <= 0 && max <= 0) {\n        var maxValue = min === max ? 0 : max;\n\n        var diff = Math.abs((maxValue - min) / maxValue);\n        if (narrow === false || (!narrow && diff > ZERO_THRESHOLD)) {\n            return 0;\n        }\n\n        axisMax = Math.min(0, maxValue - ((min - maxValue) / 2));\n    } else {\n        axisMax = max;\n    }\n\n    return axisMax;\n}\n\nfunction floor(value, step) {\n    return round(Math.floor(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction ceil(value, step) {\n    return round(Math.ceil(value / step) * step, DEFAULT_PRECISION);\n}\n\nfunction limitCoordinate(value) {\n    return Math.max(Math.min(value, COORDINATE_LIMIT), -COORDINATE_LIMIT);\n}\n\nvar MIN_VALUE_RANGE$1 = Math.pow(10, -DEFAULT_PRECISION + 1);\n\nvar NumericAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n        Axis.fn.init.call(this, $.extend({}, options, {\n            seriesMin: seriesMin,\n            seriesMax: seriesMax\n        }), chartService);\n    },\n\n    initUserOptions: function(options) {\n        var autoOptions = autoAxisOptions(options.seriesMin, options.seriesMax, options);\n        this.totalOptions = totalAxisOptions(autoOptions, options);\n\n        return axisOptions(autoOptions, options);\n    },\n\n    initFields: function() {\n        this.totalMin = this.totalOptions.min;\n        this.totalMax = this.totalOptions.max;\n        this.totalMajorUnit = this.totalOptions.majorUnit;\n        this.seriesMin = this.options.seriesMin;\n        this.seriesMax = this.options.seriesMax;\n    },\n\n    clone: function() {\n        return new NumericAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return 0;\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        if (stepValue === 0) {\n            return 1;\n        }\n\n        var options = this.options;\n        var range = options.max - options.min;\n\n        return Math.floor(round(range / stepValue, COORD_PRECISION)) + 1;\n    },\n\n    getTickPositions: function(unit, skipUnit) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axisDir = ref.axisDir;\n        var axisOrigin = ref.axisOrigin;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var range = options.max - options.min;\n        var scale = lineSize / range;\n        var step = unit * scale;\n        var divisions = this.getDivisions(unit);\n        var positions = [];\n        var pos = lineBox[axisOrigin];\n        var skipStep = 0;\n\n        if (skipUnit) {\n            skipStep = skipUnit / unit;\n        }\n\n        for (var idx = 0; idx < divisions; idx++) {\n            if (idx % skipStep !== 0) {\n                positions.push(round(pos, COORD_PRECISION));\n            }\n\n            pos = pos + step * axisDir;\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        if (limit === void 0) { limit = false; }\n\n        var options = this.options;\n        var ref = this.lineInfo();\n        var axis = ref.axis;\n        var axisDir = ref.axisDir;\n        var lineBox = ref.lineBox;\n        var lineSize = ref.lineSize;\n        var lineStart = ref.lineStart;\n        var step = axisDir * (lineSize / (options.max - options.min));\n\n        var start = valueOrDefault(a, b || 0);\n        var end = valueOrDefault(b, a || 0);\n\n        if (limit) {\n            start = limitValue(start, options.min, options.max);\n            end = limitValue(end, options.min, options.max);\n        }\n\n        var p1 = Math.min(start, end) - options.min;\n        var p2 = Math.max(start, end) - options.min;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var max = Number(options.max);\n        var min = Number(options.min);\n        var offset = this.pointOffset(point);\n        var valueOffset = offset * (max - min);\n\n        if (offset < 0 || offset > 1) {\n            return null;\n        }\n\n        var value = min + valueOffset;\n        return round(value, DEFAULT_PRECISION);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var max = options.max;\n        var min = options.min;\n        var ref = this.lineInfo();\n        var lineSize = ref.lineSize;\n        var range = max - min;\n        var scale = lineSize / range;\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: min + offset,\n            max: max + offset,\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var value = round(options.min + (index * options.majorUnit), DEFAULT_PRECISION);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        if (this.isValidRange(min, max)) {\n            return {\n                min: min,\n                max: max\n            };\n        }\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = round(this.options.min + minDelta, DEFAULT_PRECISION);\n        var max = round(this.options.max - maxDelta, DEFAULT_PRECISION);\n\n        if (max - min < MIN_VALUE_RANGE$1) {\n            max = min + MIN_VALUE_RANGE$1;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n        var range = this.scaleRange(scale, cursor);\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax),\n            narrowRange: false\n        };\n    },\n\n    isValidRange: function(min, max) {\n        return max - min > MIN_VALUE_RANGE$1;\n    }\n});\n\nfunction autoAxisOptions(seriesMin, seriesMax, options) {\n    var narrowRange = options.narrowRange;\n\n    var autoMin = autoAxisMin(seriesMin, seriesMax, narrowRange);\n    var autoMax = autoAxisMax(seriesMin, seriesMax, narrowRange);\n\n    var majorUnit = autoMajorUnit(autoMin, autoMax);\n    var autoOptions = {\n        majorUnit: majorUnit\n    };\n\n    if (options.roundToMajorUnit !== false) {\n        if (autoMin < 0 && remainderClose(autoMin, majorUnit, 1 / 3)) {\n            autoMin -= majorUnit;\n        }\n\n        if (autoMax > 0 && remainderClose(autoMax, majorUnit, 1 / 3)) {\n            autoMax += majorUnit;\n        }\n    }\n\n    autoOptions.min = floor(autoMin, majorUnit);\n    autoOptions.max = ceil(autoMax, majorUnit);\n\n    return autoOptions;\n}\n\nfunction totalAxisOptions(autoOptions, options) {\n    return {\n        min: defined(options.min) ? Math.min(autoOptions.min, options.min) : autoOptions.min,\n        max: defined(options.max) ? Math.max(autoOptions.max, options.max) : autoOptions.max,\n        majorUnit: autoOptions.majorUnit\n    };\n}\n\nfunction clearNullValues(options, fields) {\n    for (var idx = 0; idx < fields.length; idx++) {\n        var field = fields[idx];\n        if (options[field] === null) {\n            options[field] = undefined;\n        }\n    }\n}\n\nfunction axisOptions(autoOptions, userOptions) {\n    var options = userOptions;\n    var userSetMin, userSetMax;\n\n    if (userOptions) {\n        clearNullValues(userOptions, [ 'min', 'max' ]);\n\n        userSetMin = defined(userOptions.min);\n        userSetMax = defined(userOptions.max);\n\n        var userSetLimits = userSetMin || userSetMax;\n\n        if (userSetLimits) {\n            if (userOptions.min === userOptions.max) {\n                if (userOptions.min > 0) {\n                    userOptions.min = 0;\n                } else {\n                    userOptions.max = 1;\n                }\n            }\n        }\n\n        if (userOptions.majorUnit) {\n            autoOptions.min = floor(autoOptions.min, userOptions.majorUnit);\n            autoOptions.max = ceil(autoOptions.max, userOptions.majorUnit);\n        } else if (userSetLimits) {\n            options = deepExtend(autoOptions, userOptions);\n\n            // Determine an auto major unit after min/max have been set\n            autoOptions.majorUnit = autoMajorUnit(options.min, options.max);\n        }\n    }\n\n    autoOptions.minorUnit = (options.majorUnit || autoOptions.majorUnit) / 5;\n\n    var result = deepExtend(autoOptions, options);\n    if (result.min >= result.max) {\n        if (userSetMin && !userSetMax) {\n            result.max = result.min + result.majorUnit;\n        } else if (!userSetMin && userSetMax) {\n            result.min = result.max - result.majorUnit;\n        }\n    }\n\n    return result;\n}\n\nfunction remainderClose(value, divisor, ratio) {\n    var remainder = round(Math.abs(value % divisor), DEFAULT_PRECISION);\n    var threshold = divisor * (1 - ratio);\n\n    return remainder === 0 || remainder > threshold;\n}\n\nsetDefaultOptions(NumericAxis, {\n    type: \"numeric\",\n    min: 0,\n    max: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        format: \"#.####################\"\n    },\n    zIndex: 1\n});\n\nvar MIN_VALUE_RANGE = 1000;\n\nvar DateValueAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, axisOptions, chartService) {\n        var min = toDate(seriesMin);\n        var max = toDate(seriesMax);\n\n        var intlService = chartService.intl;\n        var options = axisOptions || {};\n        options = deepExtend(options || {}, {\n            min: parseDate(intlService, options.min),\n            max: parseDate(intlService, options.max),\n            axisCrossingValue: parseDates(intlService, options.axisCrossingValues || options.axisCrossingValue),\n            weekStartDay: firstDay(options, intlService)\n        });\n        options = applyDefaults(min, max, options);\n\n        Axis.fn.init.call(this, options, chartService);\n\n        this.intlService = intlService;\n        this.seriesMin = min;\n        this.seriesMax = max;\n\n        var weekStartDay = options.weekStartDay || 0;\n        this.totalMin = toTime(floorDate(toTime(min) - 1, options.baseUnit, weekStartDay));\n        this.totalMax = toTime(ceilDate(toTime(max) + 1, options.baseUnit, weekStartDay));\n    },\n\n    clone: function() {\n        return new DateValueAxis(this.seriesMin, this.seriesMax, $.extend({}, this.options), this.chartService);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    getDivisions: function(stepValue) {\n        var options = this.options;\n\n        return Math.floor(\n            duration(options.min, options.max, options.baseUnit) / stepValue + 1\n        );\n    },\n\n    getTickPositions: function(step) {\n        var options = this.options;\n        var ref = this.lineInfo();\n        var dir = ref.axisDir;\n        var lineSize = ref.lineSize;\n        var start = ref.lineStart;\n        var divisions = this.getDivisions(step);\n        var timeRange = dateDiff(options.max, options.min);\n        var scale = lineSize / timeRange;\n        var weekStartDay = options.weekStartDay || 0;\n\n        var positions = [ start ];\n        for (var i = 1; i < divisions; i++) {\n            var date = addDuration(options.min, i * step, options.baseUnit, weekStartDay);\n            var pos = start + dateDiff(date, options.min) * scale * dir;\n\n            positions.push(round(pos, COORD_PRECISION));\n        }\n\n        return positions;\n    },\n\n    getMajorTickPositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    getMinorTickPositions: function() {\n        return this.getTickPositions(this.options.minorUnit);\n    },\n\n    getSlot: function(a, b, limit) {\n        return NumericAxis.prototype.getSlot.call(\n            this, parseDate(this.intlService, a), parseDate(this.intlService, b), limit\n        );\n    },\n\n    getValue: function(point) {\n        var value = NumericAxis.prototype.getValue.call(this, point);\n\n        return value !== null ? toDate(value) : null;\n    },\n\n    labelsCount: function() {\n        return this.getDivisions(this.options.majorUnit);\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var options = this.options;\n        var offset = index * options.majorUnit;\n        var weekStartDay = options.weekStartDay || 0;\n        var date = options.min;\n\n        if (offset > 0) {\n            date = addDuration(date, offset, options.baseUnit, weekStartDay);\n        }\n\n        var unitFormat = labelOptions.dateFormats[options.baseUnit];\n        labelOptions.format = labelOptions.format || unitFormat;\n\n        var text = this.axisLabelText(date, labelOptions, labelContext);\n        return new AxisLabel(date, text, index, null, labelOptions);\n    },\n\n    translateRange: function(delta) {\n        var options = this.options;\n        var lineBox = this.lineBox();\n        var vertical = options.vertical;\n        var reverse = options.reverse;\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var range = this.range();\n        var scale = size / dateDiff(range.max, range.min);\n\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        var from = addTicks(options.min, offset);\n        var to = addTicks(options.max, offset);\n\n        return {\n            min: from,\n            max: to,\n            offset: offset\n        };\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n\n        return dateComparer(value, range.min) >= 0 && dateComparer(value, range.max) <= 0;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta, true);\n        var limittedRange = this.limitRange(toTime(range.min), toTime(range.max), this.totalMin, this.totalMax, range.offset);\n\n        if (limittedRange) {\n            return {\n                min: toDate(limittedRange.min),\n                max: toDate(limittedRange.max)\n            };\n        }\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: toDate(min),\n            max: toDate(max)\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = this.options.max - this.options.min;\n        var delta = this.scaleToDelta(scale, range);\n        var minDelta = position * delta;\n        var maxDelta = (1 - position) * delta;\n        var min = toDate(toTime(this.options.min) + minDelta);\n        var max = toDate(toTime(this.options.max) - maxDelta);\n\n        if (max - min < MIN_VALUE_RANGE) {\n            max = toDate(toTime(min) + MIN_VALUE_RANGE);\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var min = toDate(limitValue(toTime(range.min), this.totalMin, this.totalMax));\n        var max = toDate(limitValue(toTime(range.max), this.totalMin, this.totalMax));\n\n        return {\n            min: min,\n            max: max\n        };\n    }\n});\n\nfunction timeUnits(delta) {\n    var unit = HOURS;\n\n    if (delta >= TIME_PER_YEAR) {\n        unit = YEARS;\n    } else if (delta >= TIME_PER_MONTH) {\n        unit = MONTHS;\n    } else if (delta >= TIME_PER_WEEK) {\n        unit = WEEKS;\n    } else if (delta >= TIME_PER_DAY) {\n        unit = DAYS;\n    }\n\n    return unit;\n}\n\nfunction applyDefaults(seriesMin, seriesMax, options) {\n    var min = options.min || seriesMin;\n    var max = options.max || seriesMax;\n    var baseUnit = options.baseUnit || (max && min ? timeUnits(absoluteDateDiff(max, min)) : HOURS);\n    var baseUnitTime = TIME_PER_UNIT[baseUnit];\n    var weekStartDay = options.weekStartDay || 0;\n    var autoMin = floorDate(toTime(min) - 1, baseUnit, weekStartDay) || toDate(max);\n    var autoMax = ceilDate(toTime(max) + 1, baseUnit, weekStartDay);\n    var userMajorUnit = options.majorUnit ? options.majorUnit : undefined;\n    var majorUnit = userMajorUnit || ceil(\n        autoMajorUnit(autoMin.getTime(), autoMax.getTime()),\n        baseUnitTime\n    ) / baseUnitTime;\n    var actualUnits = duration(autoMin, autoMax, baseUnit);\n    var totalUnits = ceil(actualUnits, majorUnit);\n    var unitsToAdd = totalUnits - actualUnits;\n    var head = Math.floor(unitsToAdd / 2);\n    var tail = unitsToAdd - head;\n\n    if (!options.baseUnit) {\n        delete options.baseUnit;\n    }\n\n    options.baseUnit = options.baseUnit || baseUnit;\n    options.min = options.min || addDuration(autoMin, -head, baseUnit, weekStartDay);\n    options.max = options.max || addDuration(autoMax, tail, baseUnit, weekStartDay);\n    options.minorUnit = options.minorUnit || majorUnit / 5;\n    options.majorUnit = majorUnit;\n\n    return options;\n}\n\nsetDefaultOptions(DateValueAxis, {\n    type: DATE,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    labels: {\n        dateFormats: DateLabelFormats\n    }\n});\n\nvar DEFAULT_MAJOR_UNIT = 10;\nvar MIN_VALUE_RANGE$2 = 1e-6;\n\nvar LogarithmicAxis = Axis.extend({\n    init: function(seriesMin, seriesMax, options, chartService) {\n\n        var axisOptions = deepExtend({ majorUnit: DEFAULT_MAJOR_UNIT, min: seriesMin, max: seriesMax }, options);\n        var base = axisOptions.majorUnit;\n        var autoMax = autoAxisMax$1(seriesMax, base);\n        var autoMin = autoAxisMin$1(seriesMin, seriesMax, axisOptions);\n        var range = initRange(autoMin, autoMax, axisOptions, options);\n\n        axisOptions.max = range.max;\n        axisOptions.min = range.min;\n        axisOptions.minorUnit = options.minorUnit || round(base - 1, DEFAULT_PRECISION);\n\n        Axis.fn.init.call(this, axisOptions, chartService);\n\n        this.totalMin = defined(options.min) ? Math.min(autoMin, options.min) : autoMin;\n        this.totalMax = defined(options.max) ? Math.max(autoMax, options.max) : autoMax;\n        this.logMin = round(log(range.min, base), DEFAULT_PRECISION);\n        this.logMax = round(log(range.max, base), DEFAULT_PRECISION);\n        this.seriesMin = seriesMin;\n        this.seriesMax = seriesMax;\n\n        this.createLabels();\n    },\n\n    clone: function() {\n        return new LogarithmicAxis(\n            this.seriesMin,\n            this.seriesMax,\n            $.extend({}, this.options),\n            this.chartService\n        );\n    },\n\n    startValue: function() {\n        return this.options.min;\n    },\n\n    getSlot: function(a, b, limit) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var min = options.min;\n        var max = options.max;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineBox = ref$1.lineBox;\n        var lineSize = ref$1.lineSize;\n        var lineStart = ref$1.lineStart;\n        var step = axisDir * (lineSize / (logMax - logMin));\n        var start = valueOrDefault(a, b || 1);\n        var end = valueOrDefault(b, a || 1);\n\n        if (start <= 0 || end <= 0) {\n            return null;\n        }\n\n        if (limit) {\n            start = limitValue(start, min, max);\n            end = limitValue(end, min, max);\n        }\n\n        start = log(start, base);\n        end = log(end, base);\n\n        var p1 = Math.min(start, end) - logMin;\n        var p2 = Math.max(start, end) - logMin;\n\n        var slotBox = new Box(lineBox.x1, lineBox.y1, lineBox.x1, lineBox.y1);\n        slotBox[axis + 1] = limitCoordinate(lineStart + step * (axisDir > 0 ? p1 : p2));\n        slotBox[axis + 2] = limitCoordinate(lineStart + step * (axisDir > 0 ? p2 : p1));\n\n        return slotBox;\n    },\n\n    getValue: function(point) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var base = options.majorUnit;\n        var ref$1 = this.lineInfo();\n        var axis = ref$1.axis;\n        var axisDir = ref$1.axisDir;\n        var lineStart = ref$1.lineStart;\n        var lineSize = ref$1.lineSize;\n        var step = ((logMax - logMin) / lineSize);\n        var offset = axisDir * (point[axis] - lineStart);\n        var valueOffset = offset * step;\n\n        if (offset < 0 || offset > lineSize) {\n            return null;\n        }\n\n        var value = logMin + valueOffset;\n\n        return round(Math.pow(base, value), DEFAULT_PRECISION);\n    },\n\n    range: function() {\n        var options = this.options;\n        return { min: options.min, max: options.max };\n    },\n\n    translateRange: function(delta) {\n        var ref = this;\n        var options = ref.options;\n        var logMin = ref.logMin;\n        var logMax = ref.logMax;\n        var reverse = options.reverse;\n        var vertical = options.vertical;\n        var base = options.majorUnit;\n        var lineBox = this.lineBox();\n        var size = vertical ? lineBox.height() : lineBox.width();\n        var scale = size / (logMax - logMin);\n        var offset = round(delta / scale, DEFAULT_PRECISION);\n\n        if ((vertical || reverse) && !(vertical && reverse )) {\n            offset = -offset;\n        }\n\n        return {\n            min: Math.pow(base, logMin + offset),\n            max: Math.pow(base, logMax + offset),\n            offset: offset\n        };\n    },\n\n    labelsCount: function() {\n        var floorMax = Math.floor(this.logMax);\n        var count = Math.floor(floorMax - this.logMin) + 1;\n\n        return count;\n    },\n\n    getMajorTickPositions: function() {\n        var ticks = [];\n\n        this.traverseMajorTicksPositions(function (position) {\n            ticks.push(position);\n        }, { step: 1, skip: 0 });\n\n        return ticks;\n    },\n\n    createTicks: function(lineGroup) {\n        var options = this.options;\n        var majorTicks = options.majorTicks;\n        var minorTicks = options.minorTicks;\n        var vertical = options.vertical;\n        var mirror = options.labels.mirror;\n        var lineBox = this.lineBox();\n        var ticks = [];\n        var tickLineOptions = {\n            // TODO\n            // _alignLines: options._alignLines,\n            vertical: vertical\n        };\n\n        function render(tickPosition, tickOptions) {\n            tickLineOptions.tickX = mirror ? lineBox.x2 : lineBox.x2 - tickOptions.size;\n            tickLineOptions.tickY = mirror ? lineBox.y1 - tickOptions.size : lineBox.y1;\n            tickLineOptions.position = tickPosition;\n\n            lineGroup.append(createAxisTick(tickLineOptions, tickOptions));\n        }\n\n        if (majorTicks.visible) {\n            this.traverseMajorTicksPositions(render, majorTicks);\n        }\n\n        if (minorTicks.visible) {\n            this.traverseMinorTicksPositions(render, minorTicks);\n        }\n\n        return ticks;\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var vertical = options.vertical;\n        var lineBox = altAxis.lineBox();\n        var lineOptions = {\n            lineStart: lineBox[vertical ? \"x1\" : \"y1\"],\n            lineEnd: lineBox[vertical ? \"x2\" : \"y2\"],\n            vertical: vertical\n        };\n        var majorTicks = [];\n\n        var container = this.gridLinesVisual();\n        function render(tickPosition, gridLine) {\n            if (!inArray(tickPosition, majorTicks)) {\n                lineOptions.position = tickPosition;\n                container.append(createAxisGridLine(lineOptions, gridLine));\n\n                majorTicks.push(tickPosition);\n            }\n        }\n\n        if (majorGridLines.visible) {\n            this.traverseMajorTicksPositions(render, majorGridLines);\n        }\n\n        if (minorGridLines.visible) {\n            this.traverseMinorTicksPositions(render, minorGridLines);\n        }\n\n        return container.children;\n    },\n\n    traverseMajorTicksPositions: function(callback, tickOptions) {\n        var ref = this.lineInfo();\n        var lineStart = ref.lineStart;\n        var step = ref.step;\n        var ref$1 = this;\n        var logMin = ref$1.logMin;\n        var logMax = ref$1.logMax;\n\n        for (var power = Math.ceil(logMin) + tickOptions.skip; power <= logMax; power += tickOptions.step) {\n            var position = round(lineStart + step * (power - logMin), DEFAULT_PRECISION);\n            callback(position, tickOptions);\n        }\n    },\n\n    traverseMinorTicksPositions: function(callback, tickOptions) {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var min = ref.min;\n        var max = ref.max;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var ref$1 = this.lineInfo();\n        var lineStart = ref$1.lineStart;\n        var step = ref$1.step;\n        var ref$2 = this;\n        var logMin = ref$2.logMin;\n        var logMax = ref$2.logMax;\n        var start = Math.floor(logMin);\n\n        for (var power = start; power < logMax; power++) {\n            var minorOptions = this$1$1._minorIntervalOptions(power);\n            for (var idx = tickOptions.skip; idx < minorUnit; idx += tickOptions.step) {\n                var value = minorOptions.value + idx * minorOptions.minorStep;\n                if (value > max) {\n                    break;\n                }\n                if (value >= min) {\n                    var position = round(lineStart + step * (log(value, base) - logMin), DEFAULT_PRECISION);\n                    callback(position, tickOptions);\n                }\n            }\n        }\n    },\n\n    createAxisLabel: function(index, labelOptions, labelContext) {\n        var power = Math.ceil(this.logMin + index);\n        var value = Math.pow(this.options.majorUnit, power);\n        var text = this.axisLabelText(value, labelOptions, labelContext);\n\n        return new AxisLabel(value, text, index, null, labelOptions);\n    },\n\n    shouldRenderNote: function(value) {\n        var range = this.range();\n        return range.min <= value && value <= range.max;\n    },\n\n    pan: function(delta) {\n        var range = this.translateRange(delta);\n        return this.limitRange(range.min, range.max, this.totalMin, this.totalMax, range.offset);\n    },\n\n    pointsRange: function(start, end) {\n        var startValue = this.getValue(start);\n        var endValue = this.getValue(end);\n        var min = Math.min(startValue, endValue);\n        var max = Math.max(startValue, endValue);\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    scaleRange: function(scale, cursor) {\n        var ref = this.options;\n        var base = ref.majorUnit;\n        var logMin = log(this.options.min, base);\n        var logMax = log(this.options.max, base);\n        var position = Math.abs(this.pointOffset(cursor));\n        var range = logMax - logMin;\n        var delta = this.scaleToDelta(scale, range);\n        var min = Math.pow(base, logMin + position * delta);\n        var max = Math.pow(base, logMax - (1 - position) * delta);\n\n        if (max - min < MIN_VALUE_RANGE$2) {\n            max = min + MIN_VALUE_RANGE$2;\n        }\n\n        return {\n            min: min,\n            max: max\n        };\n    },\n\n    zoomRange: function(scale, cursor) {\n        var range = this.scaleRange(scale, cursor);\n        var ref = this;\n        var totalMin = ref.totalMin;\n        var totalMax = ref.totalMax;\n\n        return {\n            min: limitValue(range.min, totalMin, totalMax),\n            max: limitValue(range.max, totalMin, totalMax)\n        };\n    },\n\n    _minorIntervalOptions: function(power) {\n        var ref = this.options;\n        var minorUnit = ref.minorUnit;\n        var base = ref.majorUnit;\n        var value = Math.pow(base, power);\n        var nextValue = Math.pow(base, power + 1);\n        var difference = nextValue - value;\n        var minorStep = difference / minorUnit;\n\n        return {\n            value: value,\n            minorStep: minorStep\n        };\n    },\n\n    lineInfo: function() {\n        var info = Axis.fn.lineInfo.call(this);\n        info.step = info.axisDir * (info.lineSize / (this.logMax - this.logMin));\n\n        return info;\n    }\n});\n\nfunction initRange(autoMin, autoMax, axisOptions, options) {\n    var min = axisOptions.min;\n    var max = axisOptions.max;\n\n    if (defined(axisOptions.axisCrossingValue) && axisOptions.axisCrossingValue <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.max)) {\n        max = autoMax;\n    } else if (options.max <= 0) {\n        throwNegativeValuesError();\n    }\n\n    if (!defined(options.min)) {\n        min = autoMin;\n    } else if (options.min <= 0) {\n        throwNegativeValuesError();\n    }\n\n    return {\n        min: min,\n        max: max\n    };\n}\n\nfunction autoAxisMin$1(min, max, options) {\n    var base = options.majorUnit;\n    var autoMin = min;\n    if (min <= 0) {\n        autoMin = max <= 1 ? Math.pow(base, -2) : 1;\n    } else if (!options.narrowRange) {\n        autoMin = Math.pow(base, Math.floor(log(min, base)));\n    }\n    return autoMin;\n}\n\nfunction autoAxisMax$1(max, base) {\n    var logMaxRemainder = round(log(max, base), DEFAULT_PRECISION) % 1;\n    var autoMax;\n    if (max <= 0) {\n        autoMax = base;\n    } else if (logMaxRemainder !== 0 && (logMaxRemainder < 0.3 || logMaxRemainder > 0.9)) {\n        autoMax = Math.pow(base, log(max, base) + 0.2);\n    } else {\n        autoMax = Math.pow(base, Math.ceil(log(max, base)));\n    }\n\n    return autoMax;\n}\n\nfunction throwNegativeValuesError() {\n    throw new Error(\"Non positive values cannot be used for a logarithmic axis\");\n}\n\nfunction log(x, base) {\n    return Math.log(x) / Math.log(base);\n}\n\nsetDefaultOptions(LogarithmicAxis, {\n    type: \"log\",\n    majorUnit: DEFAULT_MAJOR_UNIT,\n    minorUnit: 1,\n    axisCrossingValue: 1,\n    vertical: true,\n    majorGridLines: {\n        visible: true,\n        width: 1,\n        color: BLACK\n    },\n    zIndex: 1,\n    _deferLabels: true\n});\n\nvar GridLinesMixin = {\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var radius = Math.abs(this.box.center().y - altAxis.lineBox().y1);\n        var gridLines = [];\n        var skipMajor = false;\n        var majorAngles, minorAngles;\n\n        if (options.majorGridLines.visible) {\n            majorAngles = this.majorGridLineAngles(altAxis);\n            skipMajor = true;\n\n            gridLines = this.renderMajorGridLines(\n                majorAngles, radius, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            minorAngles = this.minorGridLineAngles(altAxis, skipMajor);\n\n            append(gridLines, this.renderMinorGridLines(\n                minorAngles, radius, options.minorGridLines, altAxis, skipMajor\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderMajorGridLines: function(angles, radius, options) {\n        return this.renderGridLines(angles, radius, options);\n    },\n\n    renderMinorGridLines: function(angles, radius, options, altAxis, skipMajor) {\n        var radiusCallback = this.radiusCallback && this.radiusCallback(radius, altAxis, skipMajor);\n        return this.renderGridLines(angles, radius, options, radiusCallback);\n    },\n\n    renderGridLines: function(angles, radius, options, radiusCallback) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n\n        var center = this.box.center();\n        var circle = new Circle([ center.x, center.y ], radius);\n        var container = this.gridLinesVisual();\n\n        for (var i = 0; i < angles.length; i++) {\n            var line = new Path(style);\n            if (radiusCallback) {\n                circle.radius = radiusCallback(angles[i]);\n            }\n\n            line.moveTo(circle.center)\n                .lineTo(circle.pointAt(angles[i] + 180));\n\n            container.append(line);\n        }\n\n        return container.children;\n    },\n\n    gridLineAngles: function(altAxis, size, skip, step, skipAngles) {\n        var this$1$1 = this;\n\n        var divs = this.intervals(size, skip, step, skipAngles);\n        var options = altAxis.options;\n        var altAxisVisible = options.visible && (options.line || {}).visible !== false;\n\n        return map(divs, function (d) {\n            var alpha = this$1$1.intervalAngle(d);\n\n            if (!altAxisVisible || alpha !== 90) {\n                return alpha;\n            }\n        });\n    }\n};\n\nvar RadarCategoryAxis = CategoryAxis.extend({\n    range: function() {\n        return { min: 0, max: this.options.categories.length };\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    reflowLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n        var measureBox = new Box();\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1$1.getSlot(skip + i * step).adjacentBox(\n                0, labelBox.width(), labelBox.height()\n            ));\n        }\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var options = this.options;\n        var categories = options.categories.length;\n        var divCount = categories / size || 1;\n        var divAngle = 360 / divCount;\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n        var divs = [];\n        var angle = 0;\n\n        for (var i = skip; i < divCount; i += step) {\n            if (options.reverse) {\n                angle = 360 - i * divAngle;\n            } else {\n                angle = i * divAngle;\n            }\n\n            angle = round(angle, COORD_PRECISION) % 360;\n\n            if (!(skipAngles && inArray(angle, skipAngles))) {\n                divs.push(angle);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(1);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(0.5);\n    },\n\n    intervalAngle: function(interval) {\n        return (360 + interval + this.options.startAngle) % 360;\n    },\n\n    majorAngles: function() {\n        var this$1$1 = this;\n\n        return map(this.majorIntervals(), function (interval) { return this$1$1.intervalAngle(interval); });\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, 1, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var ref = this.options;\n        var minorGridLines = ref.minorGridLines;\n        var majorGridLines = ref.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(1, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, 0.5, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    radiusCallback: function(radius, altAxis, skipMajor) {\n        if (altAxis.options.type !== ARC) {\n            var minorAngle = rad(360 / (this.options.categories.length * 2));\n            var minorRadius = Math.cos(minorAngle) * radius;\n            var majorAngles = this.majorAngles();\n\n            var radiusCallback = function(angle) {\n                if (!skipMajor && inArray(angle, majorAngles)) {\n                    return radius;\n                }\n\n                return minorRadius;\n            };\n            return radiusCallback;\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var plotBands = this.options.plotBands || [];\n\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var slot = this$1$1.plotBandSlot(band);\n            var singleSlot = this$1$1.getSlot(band.from);\n\n            var head = band.from - Math.floor(band.from);\n            slot.startAngle += head * singleSlot.angle;\n\n            var tail = Math.ceil(band.to) - band.to;\n            slot.angle -= (tail + head) * singleSlot.angle;\n\n            var ring = ShapeBuilder.current.createRing(slot, {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            });\n            group.append(ring);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to - 1);\n    },\n\n    getSlot: function(from, to) {\n        var options = this.options;\n        var justified = options.justified;\n        var box = this.box;\n        var divs = this.majorAngles();\n        var totalDivs = divs.length;\n        var slotAngle = 360 / totalDivs;\n        var fromValue = from;\n\n        if (options.reverse && !justified) {\n            fromValue = (fromValue + 1) % totalDivs;\n        }\n\n        fromValue = limitValue(Math.floor(fromValue), 0, totalDivs - 1);\n        var slotStart = divs[fromValue];\n\n        if (justified) {\n            slotStart = slotStart - slotAngle / 2;\n\n            if (slotStart < 0) {\n                slotStart += 360;\n            }\n        }\n\n        var toValue = limitValue(Math.ceil(to || fromValue), fromValue, totalDivs - 1);\n        var slots = toValue - fromValue + 1;\n        var angle = slotAngle * slots;\n\n        return new Ring(box.center(), 0, box.height() / 2, slotStart, angle);\n    },\n\n    slot: function(from, to) {\n        var slot = this.getSlot(from, to);\n        var startAngle = slot.startAngle + 180;\n        var endAngle = startAngle + slot.angle;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    pointCategoryIndex: function(point) {\n        var this$1$1 = this;\n\n        var length = this.options.categories.length;\n        var index = null;\n\n        for (var i = 0; i < length; i++) {\n            var slot = this$1$1.getSlot(i);\n            if (slot.containsPoint(point)) {\n                index = i;\n                break;\n            }\n        }\n\n        return index;\n    }\n});\n\nsetDefaultOptions(RadarCategoryAxis, {\n    startAngle: 90,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        visible: true\n    },\n    justified: true\n});\ndeepExtend(RadarCategoryAxis.prototype, GridLinesMixin);\n\nvar PolarAxis = Axis.extend({\n    init: function(options, chartService) {\n        Axis.fn.init.call(this, options, chartService);\n\n        var instanceOptions = this.options;\n\n        instanceOptions.minorUnit = instanceOptions.minorUnit || instanceOptions.majorUnit / 2;\n    },\n\n    getDivisions: function(stepValue) {\n        return NumericAxis.prototype.getDivisions.call(this, stepValue) - 1;\n    },\n\n    reflow: function(box) {\n        this.box = box;\n        this.reflowLabels();\n    },\n\n    reflowLabels: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var labels = ref.labels;\n        var labelOptions = ref.options.labels;\n        var skip = labelOptions.skip || 0;\n        var step = labelOptions.step || 1;\n\n        var measureBox = new Box();\n        var divs = this.intervals(options.majorUnit, skip, step);\n\n        for (var i = 0; i < labels.length; i++) {\n            labels[i].reflow(measureBox);\n            var labelBox = labels[i].box;\n\n            labels[i].reflow(this$1$1.getSlot(divs[i]).adjacentBox(0, labelBox.width(), labelBox.height()));\n        }\n    },\n\n    lineBox: function() {\n        return this.box;\n    },\n\n    intervals: function(size, skipOption, stepOption, skipAngles) {\n        if (skipAngles === void 0) { skipAngles = false; }\n\n        var min = this.options.min;\n        var divisions = this.getDivisions(size);\n        var divs = [];\n        var skip = skipOption || 0;\n        var step = stepOption || 1;\n\n        for (var i = skip; i < divisions; i += step) {\n            var current = (360 + min + i * size) % 360;\n            if (!(skipAngles && inArray(current, skipAngles))) {\n                divs.push(current);\n            }\n        }\n\n        return divs;\n    },\n\n    majorIntervals: function() {\n        return this.intervals(this.options.majorUnit);\n    },\n\n    minorIntervals: function() {\n        return this.intervals(this.options.minorUnit);\n    },\n\n    intervalAngle: function(i) {\n        return (540 - i - this.options.startAngle) % 360;\n    },\n\n    createLine: function() {\n        return [];\n    },\n\n    majorGridLineAngles: function(altAxis) {\n        var majorGridLines = this.options.majorGridLines;\n        return this.gridLineAngles(altAxis, this.options.majorUnit, majorGridLines.skip, majorGridLines.step);\n    },\n\n    minorGridLineAngles: function(altAxis, skipMajor) {\n        var options = this.options;\n        var minorGridLines = options.minorGridLines;\n        var majorGridLines = options.majorGridLines;\n        var majorGridLineAngles = skipMajor ? this.intervals(options.majorUnit, majorGridLines.skip, majorGridLines.step) : null;\n\n        return this.gridLineAngles(altAxis, options.minorUnit, minorGridLines.skip, minorGridLines.step, majorGridLineAngles);\n    },\n\n    plotBandSlot: function(band) {\n        return this.getSlot(band.from, band.to);\n    },\n\n    getSlot: function(a, b) {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var startAngle = options.startAngle;\n        var start = limitValue(a, options.min, options.max);\n        var end = limitValue(b || start, start, options.max);\n\n        if (options.reverse) {\n            start *= -1;\n            end *= -1;\n        }\n\n        start = (540 - start - startAngle) % 360;\n        end = (540 - end - startAngle) % 360;\n\n        if (end < start) {\n            var tmp = start;\n            start = end;\n            end = tmp;\n        }\n\n        return new Ring(box.center(), 0, box.height() / 2, start, end - start);\n    },\n\n    slot: function(from, to) {\n        if (to === void 0) { to = from; }\n\n        var options = this.options;\n        var start = 360 - options.startAngle;\n        var slot = this.getSlot(from, to);\n        var min = Math.min(from, to);\n        var max = Math.max(from, to);\n        var startAngle, endAngle;\n\n        if (options.reverse) {\n            startAngle = min;\n            endAngle = max;\n        } else {\n            startAngle = 360 - max;\n            endAngle = 360 - min;\n        }\n\n        startAngle = (startAngle + start) % 360;\n        endAngle = (endAngle + start) % 360;\n\n        return new geometry.Arc([ slot.center.x, slot.center.y ], {\n            startAngle: startAngle,\n            endAngle: endAngle,\n            radiusX: slot.radius,\n            radiusY: slot.radius\n        });\n    },\n\n    getValue: function(point) {\n        var options = this.options;\n        var center = this.box.center();\n        var dx = point.x - center.x;\n        var dy = point.y - center.y;\n        var theta = Math.round(deg(Math.atan2(dy, dx)));\n        var start = options.startAngle;\n\n        if (!options.reverse) {\n            theta *= -1;\n            start *= -1;\n        }\n\n        return (theta + start + 360) % 360;\n    },\n\n    valueRange: function() {\n        return {\n            min: 0,\n            max: Math.PI * 2\n        };\n    }\n});\n\nsetDefaultOptions(PolarAxis, {\n    type: \"polar\",\n    startAngle: 0,\n    reverse: false,\n    majorUnit: 60,\n    min: 0,\n    max: 360,\n    labels: {\n        margin: getSpacing(10)\n    },\n    majorGridLines: {\n        color: BLACK,\n        visible: true,\n        width: 1\n    },\n    minorGridLines: {\n        color: \"#aaa\"\n    }\n});\n\ndeepExtend(PolarAxis.prototype, GridLinesMixin, {\n    createPlotBands: RadarCategoryAxis.prototype.createPlotBands,\n    majorAngles: RadarCategoryAxis.prototype.majorAngles,\n    range: NumericAxis.prototype.range,\n    labelsCount: NumericAxis.prototype.labelsCount,\n    createAxisLabel: NumericAxis.prototype.createAxisLabel\n});\n\nvar RadarNumericAxisMixin = {\n    options: {\n        majorGridLines: {\n            visible: true\n        }\n    },\n\n    createPlotBands: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var type = ref.majorGridLines.type;\n        var plotBands = ref.plotBands; if (plotBands === void 0) { plotBands = []; }\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var group = this._plotbandGroup = new Group({\n            zIndex: -1\n        });\n\n        for (var i = 0; i < plotBands.length; i++) {\n            var band = plotBands[i];\n            var bandStyle = {\n                fill: {\n                    color: band.color,\n                    opacity: band.opacity\n                },\n                stroke: {\n                    opacity: band.opacity\n                }\n            };\n\n            var slot = this$1$1.getSlot(band.from, band.to, true);\n            var ring = new Ring(center, center.y - slot.y2, center.y - slot.y1, 0, 360);\n\n            var shape = (void 0);\n            if (type === ARC) {\n                shape = ShapeBuilder.current.createRing(ring, bandStyle);\n            } else {\n                shape = Path.fromPoints(this$1$1.plotBandPoints(ring, majorAngles), bandStyle).close();\n            }\n\n            group.append(shape);\n        }\n\n        this.appendVisual(group);\n    },\n\n    plotBandPoints: function(ring, angles) {\n        var innerPoints = [];\n        var outerPoints = [];\n        var center = [ ring.center.x, ring.center.y ];\n        var innerCircle = new Circle(center, ring.innerRadius);\n        var outerCircle = new Circle(center, ring.radius);\n\n        for (var i = 0; i < angles.length; i++) {\n            innerPoints.push(innerCircle.pointAt(angles[i] + 180));\n            outerPoints.push(outerCircle.pointAt(angles[i] + 180));\n        }\n\n        innerPoints.reverse();\n        innerPoints.push(innerPoints[0]);\n        outerPoints.push(outerPoints[0]);\n\n        return outerPoints.concat(innerPoints);\n    },\n\n    createGridLines: function(altAxis) {\n        var options = this.options;\n        var majorTicks = this.radarMajorGridLinePositions();\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var gridLines = [];\n\n        if (options.majorGridLines.visible) {\n            gridLines = this.renderGridLines(\n                center, majorTicks, majorAngles, options.majorGridLines\n            );\n        }\n\n        if (options.minorGridLines.visible) {\n            var minorTicks = this.radarMinorGridLinePositions();\n            append(gridLines, this.renderGridLines(\n                center, minorTicks, majorAngles, options.minorGridLines\n            ));\n        }\n\n        return gridLines;\n    },\n\n    renderGridLines: function(center, ticks, angles, options) {\n        var style = {\n            stroke: {\n                width: options.width,\n                color: options.color,\n                dashType: options.dashType\n            }\n        };\n        var skip = options.skip; if (skip === void 0) { skip = 0; }\n        var step = options.step; if (step === void 0) { step = 0; }\n        var container = this.gridLinesVisual();\n\n        for (var tickIx = skip; tickIx < ticks.length; tickIx += step) {\n            var tickRadius = center.y - ticks[tickIx];\n            if (tickRadius > 0) {\n                var circle = new Circle([ center.x, center.y ], tickRadius);\n                if (options.type === ARC) {\n                    container.append(new drawing.Circle(circle, style));\n                } else {\n                    var line = new Path(style);\n                    for (var angleIx = 0; angleIx < angles.length; angleIx++) {\n                        line.lineTo(circle.pointAt(angles[angleIx] + 180));\n                    }\n\n                    line.close();\n                    container.append(line);\n                }\n            }\n        }\n\n        return container.children;\n    },\n\n    getValue: function(point) {\n        var lineBox = this.lineBox();\n        var altAxis = this.plotArea.polarAxis;\n        var majorAngles = altAxis.majorAngles();\n        var center = altAxis.box.center();\n        var radius = point.distanceTo(center);\n        var distance = radius;\n\n        if (this.options.majorGridLines.type !== ARC && majorAngles.length > 1) {\n            var dx = point.x - center.x;\n            var dy = point.y - center.y;\n            var theta = (deg(Math.atan2(dy, dx)) + 540) % 360;\n\n            majorAngles.sort(function(a, b) {\n                return angularDistance(a, theta) - angularDistance(b, theta);\n            });\n\n            // Solve triangle (center, point, axis X) using one side (radius) and two angles.\n            // Angles are derived from triangle (center, point, gridline X)\n            var midAngle = angularDistance(majorAngles[0], majorAngles[1]) / 2;\n            var alpha = angularDistance(theta, majorAngles[0]);\n            var gamma = 90 - midAngle;\n            var beta = 180 - alpha - gamma;\n\n            distance = radius * (Math.sin(rad(beta)) / Math.sin(rad(gamma)));\n        }\n\n        return this.axisType().prototype.getValue.call(\n            this, new Point(lineBox.x1, lineBox.y2 - distance)\n        );\n    }\n};\n\nfunction angularDistance(a, b) {\n    return 180 - Math.abs(Math.abs(a - b) - 180);\n}\n\nvar RadarNumericAxis = NumericAxis.extend({\n    radarMajorGridLinePositions: function() {\n        return this.getTickPositions(this.options.majorUnit);\n    },\n\n    radarMinorGridLinePositions: function() {\n        var options = this.options;\n        var minorSkipStep = 0;\n\n        if (options.majorGridLines.visible) {\n            minorSkipStep = options.majorUnit;\n        }\n        return this.getTickPositions(options.minorUnit, minorSkipStep);\n    },\n\n    axisType: function() {\n        return NumericAxis;\n    }\n});\n\ndeepExtend(RadarNumericAxis.prototype, RadarNumericAxisMixin);\n\nvar RadarLogarithmicAxis = LogarithmicAxis.extend({\n    radarMajorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMajorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.majorGridLines);\n\n        return positions;\n    },\n\n    radarMinorGridLinePositions: function() {\n        var positions = [];\n\n        this.traverseMinorTicksPositions(function(position) {\n            positions.push(position);\n        }, this.options.minorGridLines);\n\n        return positions;\n    },\n\n    axisType: function() {\n        return LogarithmicAxis;\n    }\n});\n\ndeepExtend(RadarLogarithmicAxis.prototype, RadarNumericAxisMixin);\n\nvar WEIGHT = 0.333;\nvar EXTREMUM_ALLOWED_DEVIATION = 0.01;\n\nvar CurveProcessor = Class.extend({\n    init: function(closed) {\n\n        this.closed = closed;\n    },\n\n    process: function(dataPoints) {\n        var this$1$1 = this;\n\n        var points = dataPoints.slice(0);\n        var segments = [];\n        var closed = this.closed;\n        var length = points.length;\n\n        if (length > 2) {\n            this.removeDuplicates(0, points);\n            length = points.length;\n        }\n\n        if (length < 2 || (length === 2 && points[0].equals(points[1]))) {\n            return segments;\n        }\n\n        var p0 = points[0];\n        var p1 = points[1];\n        var p2 = points[2];\n\n        segments.push(new Segment(p0));\n\n        while (p0.equals(points[length - 1])) {\n            closed = true;\n            points.pop();\n            length--;\n        }\n\n        if (length === 2) {\n            var tangent = this.tangent(p0,p1, X, Y);\n\n            last(segments).controlOut(\n                this.firstControlPoint(tangent, p0, p1, X, Y)\n            );\n\n            segments.push(new Segment(\n                p1,\n                this.secondControlPoint(tangent, p0, p1, X, Y)\n            ));\n\n            return segments;\n        }\n\n        var initialControlPoint, lastControlPoint;\n\n        if (closed) {\n            p0 = points[length - 1]; p1 = points[0]; p2 = points[1];\n            var controlPoints = this.controlPoints(p0, p1, p2);\n            initialControlPoint = controlPoints[1];\n            lastControlPoint = controlPoints[0];\n        } else {\n            var tangent$1 = this.tangent(p0, p1, X,Y);\n            initialControlPoint = this.firstControlPoint(tangent$1, p0, p1, X, Y);\n        }\n\n        var cp0 = initialControlPoint;\n        for (var idx = 0; idx <= length - 3; idx++) {\n            this$1$1.removeDuplicates(idx, points);\n            length = points.length;\n            if (idx + 3 <= length) {\n                p0 = points[idx]; p1 = points[idx + 1]; p2 = points[idx + 2];\n                var controlPoints$1 = this$1$1.controlPoints(p0,p1,p2);\n\n                last(segments).controlOut(cp0);\n                cp0 = controlPoints$1[1];\n\n                var cp1 = controlPoints$1[0];\n                segments.push(new Segment(p1, cp1));\n            }\n        }\n\n        if (closed) {\n            p0 = points[length - 2]; p1 = points[length - 1]; p2 = points[0];\n            var controlPoints$2 = this.controlPoints(p0, p1, p2);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p1,\n                controlPoints$2[0]\n            ));\n\n            last(segments).controlOut(controlPoints$2[1]);\n            segments.push(new Segment(\n                p2,\n                lastControlPoint\n            ));\n        } else {\n            var tangent$2 = this.tangent(p1, p2, X, Y);\n\n            last(segments).controlOut(cp0);\n            segments.push(new Segment(\n                p2,\n                this.secondControlPoint(tangent$2, p1, p2, X, Y)\n            ));\n        }\n\n        return segments;\n    },\n\n    removeDuplicates: function(idx, points) {\n        while (points[idx + 1] && (points[idx].equals(points[idx + 1]) || points[idx + 1].equals(points[idx + 2]))) {\n            points.splice(idx + 1, 1);\n        }\n    },\n\n    invertAxis: function(p0, p1, p2) {\n        var invertAxis = false;\n\n        if (p0.x === p1.x) {\n            invertAxis = true;\n        } else if (p1.x === p2.x) {\n            if ((p1.y < p2.y && p0.y <= p1.y) || (p2.y < p1.y && p1.y <= p0.y)) {\n                invertAxis = true;\n            }\n        } else {\n            var fn = this.lineFunction(p0,p1);\n            var y2 = this.calculateFunction(fn, p2.x);\n            if (!(p0.y <= p1.y && p2.y <= y2) &&\n                !(p1.y <= p0.y && p2.y >= y2)) {\n                invertAxis = true;\n            }\n        }\n\n        return invertAxis;\n    },\n\n    isLine: function(p0, p1, p2) {\n        var fn = this.lineFunction(p0, p1);\n        var y2 = this.calculateFunction(fn, p2.x);\n\n        return (p0.x === p1.x && p1.x === p2.x) || round(y2, 1) === round(p2.y, 1);\n    },\n\n    lineFunction: function(p1, p2) {\n        var a = (p2.y - p1.y) / (p2.x - p1.x);\n        var b = p1.y - a * p1.x;\n\n        return [ b, a ];\n    },\n\n    controlPoints: function(p0, p1, p2) {\n        var xField = X;\n        var yField = Y;\n        var restrict = false;\n        var switchOrientation = false;\n        var tangent;\n\n        if (this.isLine(p0, p1, p2)) {\n            tangent = this.tangent(p0, p1, X, Y);\n        } else {\n            var monotonic = {\n                x: this.isMonotonicByField(p0, p1, p2, X),\n                y: this.isMonotonicByField(p0, p1, p2, Y)\n            };\n\n            if (monotonic.x && monotonic.y) {\n                tangent = this.tangent(p0, p2, X, Y);\n                restrict = true;\n            } else {\n                if (this.invertAxis(p0, p1, p2)) {\n                    xField = Y;\n                    yField = X;\n                }\n\n                if (monotonic[xField]) {\n                    tangent = 0;\n                } else {\n                    var sign;\n                    if ((p2[yField] < p0[yField] && p0[yField] <= p1[yField]) ||\n                        (p0[yField] < p2[yField] && p1[yField] <= p0[yField])) {\n                        sign = numberSign((p2[yField] - p0[yField]) * (p1[xField] - p0[xField]));\n                    } else {\n                        sign = -numberSign((p2[xField] - p0[xField]) * (p1[yField] - p0[yField]));\n                    }\n\n                    tangent = EXTREMUM_ALLOWED_DEVIATION * sign;\n                    switchOrientation = true;\n                }\n            }\n        }\n\n        var secondControlPoint = this.secondControlPoint(tangent, p0, p1, xField, yField);\n\n        if (switchOrientation) {\n            var oldXField = xField;\n            xField = yField;\n            yField = oldXField;\n        }\n\n        var firstControlPoint = this.firstControlPoint(tangent, p1, p2, xField, yField);\n\n        if (restrict) {\n            this.restrictControlPoint(p0, p1, secondControlPoint, tangent);\n            this.restrictControlPoint(p1, p2, firstControlPoint, tangent);\n        }\n\n        return [ secondControlPoint, firstControlPoint ];\n    },\n\n    restrictControlPoint: function(p1, p2, cp, tangent) {\n        if (p1.y < p2.y) {\n            if (p2.y < cp.y) {\n                cp.x = p1.x + (p2.y - p1.y) / tangent;\n                cp.y = p2.y;\n            } else if (cp.y < p1.y) {\n                cp.x = p2.x - (p2.y - p1.y) / tangent;\n                cp.y = p1.y;\n            }\n        } else {\n            if (cp.y < p2.y) {\n                cp.x = p1.x - (p1.y - p2.y) / tangent;\n                cp.y = p2.y;\n            } else if (p1.y < cp.y) {\n                cp.x = p2.x + (p1.y - p2.y) / tangent;\n                cp.y = p1.y;\n            }\n        }\n    },\n\n    tangent: function(p0, p1, xField, yField) {\n        var x = p1[xField] - p0[xField];\n        var y = p1[yField] - p0[yField];\n        var tangent;\n\n        if (x === 0) {\n            tangent = 0;\n        } else {\n            tangent = y / x;\n        }\n\n        return tangent;\n    },\n\n    isMonotonicByField: function(p0, p1, p2, field) {\n        return (p2[field] > p1[field] && p1[field] > p0[field]) ||\n                    (p2[field] < p1[field] && p1[field] < p0[field]);\n    },\n\n    firstControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t1 + distance, p0[yField] + distance * tangent, xField, yField);\n    },\n\n    secondControlPoint: function(tangent, p0, p3, xField, yField) {\n        var t1 = p0[xField];\n        var t2 = p3[xField];\n        var distance = (t2 - t1) * WEIGHT;\n\n        return this.point(t2 - distance, p3[yField] - distance * tangent, xField, yField);\n    },\n\n    point: function(xValue, yValue, xField, yField) {\n        var controlPoint = new geometry.Point();\n        controlPoint[xField] = xValue;\n        controlPoint[yField] = yValue;\n\n        return controlPoint;\n    },\n\n    calculateFunction: function(fn, x) {\n        var length = fn.length;\n        var result = 0;\n\n        for (var i = 0; i < length; i++) {\n            result += Math.pow(x,i) * fn[i];\n        }\n        return result;\n    }\n});\n\nfunction numberSign(value) {\n    return value <= 0 ? -1 : 1;\n}\n\ndataviz.Gradients = GRADIENTS;\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    services: services,\n    autoMajorUnit: autoMajorUnit,\n    Point: Point,\n    Box: Box,\n    Ring: Ring,\n    Sector: Sector,\n    ShapeBuilder: ShapeBuilder,\n    ShapeElement: ShapeElement,\n    ChartElement: ChartElement,\n    BoxElement: BoxElement,\n    RootElement: RootElement,\n    FloatElement: FloatElement,\n    Text: Text,\n    TextBox: TextBox,\n    Title: Title,\n    AxisLabel: AxisLabel,\n    Axis: Axis,\n    Note: Note,\n    CategoryAxis: CategoryAxis,\n    DateCategoryAxis: DateCategoryAxis,\n    DateValueAxis: DateValueAxis,\n    NumericAxis: NumericAxis,\n    LogarithmicAxis: LogarithmicAxis,\n    PolarAxis: PolarAxis,\n    RadarCategoryAxis: RadarCategoryAxis,\n    RadarNumericAxis: RadarNumericAxis,\n    RadarLogarithmicAxis: RadarLogarithmicAxis,\n    CurveProcessor: CurveProcessor,\n    rectToBox: rectToBox,\n    addClass: addClass,\n    removeClass: removeClass,\n    alignPathToPixel: alignPathToPixel,\n    clockwise: clockwise,\n    convertableToNumber: convertableToNumber,\n    cycleUp: cycleUp,\n    cycleDown: cycleDown,\n    cycleIndex: cycleIndex,\n    deepExtend: deepExtend,\n    elementStyles: elementStyles,\n    getSpacing: getSpacing,\n    getTemplate: getTemplate,\n    getAriaTemplate: getTemplate$1,\n    getter: __common_getter_js,\n    grep: grep,\n    hasClasses: hasClasses,\n    HashMap: HashMap,\n    inArray: inArray,\n    interpolateValue: interpolateValue,\n    InstanceObserver: InstanceObserver,\n    isArray: isArray,\n    isFunction: isFunction,\n    isNumber: isNumber,\n    isObject: isObject,\n    isPlainObject: isPlainObject,\n    isString: isString,\n    map: map,\n    mousewheelDelta: mousewheelDelta,\n    FontLoader: FontLoader,\n    renderIcon: renderIcon,\n    setDefaultOptions: setDefaultOptions,\n    sparseArrayLimits: sparseArrayLimits,\n    styleValue: styleValue,\n    find: find,\n    elementScale: elementScale,\n    autoTextColor: autoTextColor,\n    createHashSet: createHashSet,\n    defaultErrorHandler: defaultErrorHandler,\n    keys: keys,\n    hasOwnProperty: hasOwnProperty,\n    Matrix: Matrix$1,\n    Observable: Observable$$1,\n    append: append,\n    bindEvents: bindEvents,\n    Class: Class,\n    defined: defined,\n    deg: deg,\n    elementOffset: elementOffset,\n    elementSize: elementSize,\n    eventCoordinates: eventCoordinates,\n    eventElement: eventElement,\n    hashKey: hashKey,\n    last: last,\n    limitValue: limitValue,\n    logToConsole: kendo.logToConsole,\n    objectKey: objectKey,\n    rad: rad,\n    round: round,\n    unbindEvents: unbindEvents,\n    valueOrDefault: valueOrDefault,\n    absoluteDateDiff: absoluteDateDiff,\n    addDuration: addDuration,\n    addTicks: addTicks,\n    ceilDate: ceilDate,\n    dateComparer: dateComparer,\n    dateDiff: dateDiff,\n    dateEquals: dateEquals,\n    dateIndex: dateIndex,\n    duration: duration,\n    floorDate: floorDate,\n    lteDateIndex: lteDateIndex,\n    startOfWeek: startOfWeek,\n    toDate: toDate,\n    parseDate: parseDate,\n    parseDates: parseDates,\n    toTime: toTime,\n    firstDay: firstDay\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    var dataviz = kendo.dataviz;\n    var services = dataviz.services;\n    var draw = kendo.drawing;\n\n    dataviz.SASS_THEMES = [\"sass\", \"default-v2\", \"bootstrap-v4\", \"material-v2\"];\n\n    dataviz.ExportMixin = {\n        extend: function(proto, skipLegacy) {\n            if (!proto.exportVisual) {\n                throw new Error(\"Mixin target has no exportVisual method defined.\");\n            }\n\n            proto.exportSVG = this.exportSVG;\n            proto.exportImage = this.exportImage;\n            proto.exportPDF = this.exportPDF;\n\n            if (!skipLegacy) {\n                proto.svg = this.svg;\n                proto.imageDataURL = this.imageDataURL;\n            }\n        },\n\n        exportSVG: function(options) {\n            return draw.exportSVG(this.exportVisual(), options);\n        },\n\n        exportImage: function(options) {\n            return draw.exportImage(this.exportVisual(options), options);\n        },\n\n        exportPDF: function(options) {\n            return draw.exportPDF(this.exportVisual(), options);\n        },\n\n        svg: function() {\n            if (draw.svg.Surface) {\n                return draw.svg.exportGroup(this.exportVisual());\n            } else {\n                throw new Error(\"SVG Export failed. Unable to export instantiate kendo.drawing.svg.Surface\");\n            }\n        },\n\n        imageDataURL: function() {\n            if (!kendo.support.canvas) {\n                return null;\n            }\n\n            if (draw.canvas.Surface) {\n                var container = $(\"<div />\").css({\n                    display: \"none\",\n                    width: this.element.width(),\n                    height: this.element.height()\n                }).appendTo(document.body);\n\n                var surface = new draw.canvas.Surface(container[0]);\n                surface.draw(this.exportVisual());\n                var image = surface._rootElement.toDataURL();\n\n                surface.destroy();\n                container.remove();\n\n                return image;\n            } else {\n                throw new Error(\"Image Export failed. Unable to export instantiate kendo.drawing.canvas.Surface\");\n            }\n        }\n    };\n\n    services.IntlService.register({\n       format: function(format) {\n           return kendo.format.apply(null, [format].concat(Array.prototype.slice.call(arguments, 1)));\n       },\n       toString: kendo.toString,\n       parseDate: kendo.parseDate,\n       firstDay: function() {\n           return kendo.culture().calendars.standard.firstDay;\n       }\n    });\n\n    services.TemplateService.register({\n       compile: kendo.template\n    });\n\n    dataviz.Point2D = dataviz.Point;\n    dataviz.Box2D = dataviz.Box;\n    dataviz.mwDelta = function(e) {\n        return dataviz.mousewheelDelta(e.originalEvent);\n    };\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"dataviz.core\",\n    name: \"Core\",\n    description: \"The DataViz core functions\",\n    category: \"dataviz\",\n    depends: [ \"core\", \"drawing\" ],\n    hidden: true\n};\n\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}