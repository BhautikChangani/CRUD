{"version":3,"file":"kendo.aiprompt.views.js","names":["$","Widget","kendo","ui","AIPromptBaseView","extend","init","element","options","that","this","fn","call","aiprompt","getKendoAIPrompt","contentElement","footerElement","buttonText","buttonIcon","name","render","_renderContent","_renderFooter","_renderContentElement","content","addClass","append","_renderFooterElement","footer","destroy","off","remove","DEFAULT_PROMPT_VIEW_TEMPLATE","suggestions","promptSuggestionItemTemplate","messages","length","promptSuggestions","map","suggestion","join","DEFAULT_PROMPT_VIEW_FOOTER_TEMPLATE","generateOutput","DEFAULT_PROMPT_VIEW_SUGGESTION_ITEM_TEMPLATE","AIPromptPromptView","template","viewTemplate","footerTemplate","setTextAreaValue","value","find","getKendoTextArea","_focusSuggestion","attr","trigger","initializeComponents","kendoTextArea","resize","placeholder","promptPlaceholder","kendoButton","icon","themeColor","rounded","click","e","isRetry","prompt","first","nextExpanderContentId","guid","expanderButton","next","fillMode","target","closest","iconEl","sender","is","toggle","on","text","keyCode","preventDefault","prev","siblings","last","DEFAULT_OUTPUT_CARD_TEMPLATE_FUNC","output","showOutputRating","id","outputTitle","copyOutput","retryGeneration","ratePositive","rateNegative","DEFAULT_OUTPUT_VIEW_TEMPLATE","promptOutputs","AIPromptOutputView","addPromptOutput","unshift","renderPromptOutput","card","outputsContainer","_getOutputFromElement","data","parentElement","promptOutput","navigator","clipboard","writeText","rateType","AIPromptCommandsView","promptCommands","commandItems","panelBarEl","kendoPanelBar","animation","dataSource","selectable","select","ev","item","dataItem","hasChildren","EMPTY_TEMPLATE","AIPromptCustomView","window","jQuery","kendo$1"],"sources":["kendo.aiprompt.views.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.icons.js';\nimport './kendo.textarea.js';\nimport './kendo.button.js';\nimport './kendo.panelbar.js';\n\n(function($) {\n    let Widget = kendo.ui.Widget;\n\n    let AIPromptBaseView = kendo.ui.AIPromptBaseView = Widget.extend({\n        init: function(element, options) {\n            let that = this;\n\n            Widget.fn.init.call(that, element, options);\n\n            that.aiprompt = element.getKendoAIPrompt();\n\n            that.contentElement = that.options.contentElement;\n            that.footerElement = that.options.footerElement;\n            that.buttonText = that.options.buttonText;\n            that.buttonIcon = that.options.buttonIcon;\n        },\n\n        options: {\n            name: \"AIPromptBaseView\",\n            buttonText: \"\",\n            buttonIcon: \"\",\n        },\n\n        render: function() {\n            let that = this;\n\n            that._renderContent();\n            that._renderFooter();\n        },\n\n        _renderContentElement: function() {\n            let that = this;\n            let content = $(\"<div></div>\").addClass(\"k-prompt-content\");\n            that.contentElement = content;\n            that.element.append(content);\n\n            return that.contentElement;\n        },\n\n        _renderFooterElement: function() {\n            let that = this;\n            let footer = $(\"<div></div>\").addClass(\"k-prompt-footer\");\n            that.footerElement = footer;\n            that.element.append(footer);\n\n            return that.footerElement;\n        },\n\n        destroy: function() {\n            let that = this;\n            Widget.fn.destroy.call(that);\n\n            if (that.contentElement) {\n                that.contentElement.off();\n                kendo.destroy(that.contentElement);\n                that.contentElement.remove();\n            }\n\n            if (that.footerElement) {\n                that.footerElement.off();\n                kendo.destroy(that.footerElement);\n                that.footerElement.remove();\n            }\n        }\n    });\n\n    let DEFAULT_PROMPT_VIEW_TEMPLATE = ({ suggestions, promptSuggestionItemTemplate, messages }) => `<div class=\"k-prompt-view\">\n        <textarea ref-prompt-input></textarea>\n        ${suggestions?.length ?\n            `<div class=\"k-prompt-expander\">\n                <button ref-prompt-suggestions-button aria-expanded=\"true\">${messages.promptSuggestions}</button>\n                <div class=\"k-prompt-expander-content\" role=\"list\">\n                    ${suggestions.map(suggestion => promptSuggestionItemTemplate({ suggestion })).join(\"\")}\n                </div>\n            </div>` : ''\n        }\n    </div>`;\n\n    let DEFAULT_PROMPT_VIEW_FOOTER_TEMPLATE = ({ messages }) => `<div class=\"k-actions k-actions-start k-actions-horizontal k-prompt-actions\">\n        <button ref-generate-output-button>${messages.generateOutput}</button>\n    </div>`;\n\n    let DEFAULT_PROMPT_VIEW_SUGGESTION_ITEM_TEMPLATE = ({ suggestion }) => `<div role=\"listitem\" class=\"k-prompt-suggestion\">${suggestion}</div>`;\n    kendo.ui.AIPromptPromptView = AIPromptBaseView.extend({\n        init: function(element, options) {\n            let that = this;\n\n            AIPromptBaseView.fn.init.call(that, element, options);\n            that.promptSuggestions = that.options.promptSuggestions;\n            that.promptSuggestionItemTemplate = kendo.template(that.options.promptSuggestionItemTemplate || DEFAULT_PROMPT_VIEW_SUGGESTION_ITEM_TEMPLATE);\n        },\n        options: {\n            name: \"AIPromptPromptView\",\n            buttonIcon: \"sparkles\",\n        },\n\n        _renderContent: function() {\n            let that = this;\n            let suggestions = that.promptSuggestions;\n            let promptSuggestionItemTemplate = that.promptSuggestionItemTemplate;\n            let content = kendo.template(that.options.viewTemplate || DEFAULT_PROMPT_VIEW_TEMPLATE)({ suggestions, promptSuggestionItemTemplate, messages: that.options.messages });\n\n            that._renderContentElement();\n            that.contentElement.append(content);\n        },\n\n        _renderFooter: function() {\n            let that = this;\n            let footer = kendo.template(that.options.footerTemplate || DEFAULT_PROMPT_VIEW_FOOTER_TEMPLATE)({ messages: that.options.messages });\n\n            that._renderFooterElement();\n            that.footerElement.append(footer);\n        },\n\n        setTextAreaValue: function(value) {\n            let that = this;\n            that.contentElement.find(\"textarea[ref-prompt-input]\").getKendoTextArea().value(value);\n        },\n\n        _focusSuggestion(element) {\n            let that = this;\n            if (!element || !element.length) {\n                return;\n            }\n\n            that.contentElement.find(\".k-prompt-suggestion[tabindex=0]\").attr(\"tabindex\", \"-1\");\n            element.attr(\"tabindex\", \"0\").trigger(\"focus\");\n        },\n\n        initializeComponents: function() {\n            let that = this;\n            let suggestions = that.promptSuggestions;\n\n            that.contentElement.find(\"textarea[ref-prompt-input]\").kendoTextArea({\n                resize: \"vertical\",\n                placeholder: that.options.messages.promptPlaceholder\n            });\n\n            that.footerElement.find(\"button[ref-generate-output-button]\").kendoButton({\n                icon: \"sparkles\",\n                themeColor: \"primary\",\n                rounded: \"full\",\n                click: function(e) {\n                    that.aiprompt.trigger(\"promptRequest\", {\n                        isRetry: false,\n                        prompt: that.contentElement.find(\"textarea[ref-prompt-input]\").getKendoTextArea().value()\n                    });\n                }\n            });\n\n            if (suggestions?.length) {\n                that.contentElement.find(\".k-prompt-suggestion\").first().attr(\"tabindex\", \"0\");\n                let nextExpanderContentId = kendo.guid();\n                let expanderButton = that.contentElement.find(\".k-prompt-expander button[ref-prompt-suggestions-button]\");\n\n                that.contentElement.find(\".k-prompt-expander button[ref-prompt-suggestions-button]\").attr(\"aria-controls\", nextExpanderContentId);\n                expanderButton.next(\".k-prompt-expander-content\").attr(\"id\", nextExpanderContentId);\n\n                that.contentElement.find(\".k-prompt-expander button[ref-prompt-suggestions-button]\").kendoButton({\n                    icon: \"chevron-up\",\n                    fillMode: \"flat\",\n                    click: function(e) {\n                        let expander = $(e.target).closest(\".k-prompt-expander\");\n                        let content = expander.find(\".k-prompt-expander-content\");\n                        let iconEl = e.sender.element.find(\".k-icon\");\n                        kendo.ui.icon(iconEl, content.is(\":visible\") ? \"chevron-down\" : \"chevron-up\");\n                        content.toggle();\n                        e.sender.element.attr(\"aria-expanded\", content.is(\":visible\"));\n                    }\n                });\n\n                that.contentElement.on(\"click\", \".k-prompt-suggestion\", function(e) {\n                    that.setTextAreaValue($(e.target).text());\n                });\n\n                that.contentElement.on(\"keydown\", \".k-prompt-suggestion\", function(e) {\n                    if (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 36 || e.keyCode === 35 || e.keyCode === 13 || e.keyCode === 32) {\n                        e.preventDefault();\n                        let target = $(e.target);\n                        let siblings = target.siblings();\n                        let next, prev;\n\n                        // down arrow\n                        if (e.keyCode === 40) {\n                            next = target.next();\n                            that._focusSuggestion(next);\n                        }\n\n                        // up arrow\n                        if (e.keyCode === 38) {\n                            prev = target.prev();\n                            that._focusSuggestion(prev);\n                        }\n\n                        // home\n                        if (e.keyCode === 36) {\n                            prev = siblings.first();\n                            that._focusSuggestion(prev);\n                        }\n\n                        // end\n                        if (e.keyCode === 35) {\n                            next = siblings.last();\n                            that._focusSuggestion(next);\n                        }\n\n                        // enter or space\n                        if (e.keyCode === 13 || e.keyCode === 32) {\n                            that.setTextAreaValue($(e.target).text());\n                        }\n                    }\n                });\n            }\n        },\n\n        render: function() {\n            let that = this;\n\n            that._renderContent();\n            that._renderFooter();\n            that.initializeComponents();\n        },\n    });\n\n    let DEFAULT_OUTPUT_CARD_TEMPLATE_FUNC = ({ output, showOutputRating, messages }) => `\n    <div role=\"listitem\" tabindex=\"0\" class=\"k-card\" data-id=\"${output.id}\" >\n        <div class=\"k-card-header\">\n            <div class=\"k-card-title\">${messages.outputTitle}</div>\n            <div class=\"k-card-subtitle\">${output.prompt}</div>\n        </div>\n        <div class=\"k-card-body\">\n            <p class=\"k-white-space-pre-line\">${output.output}</p>\n        </div>\n        <div class=\"k-actions k-actions-start k-actions-horizontal k-card-actions\">\n            <button ref-copy-button>${messages.copyOutput}</button>\n            <button ref-retry-button>${messages.retryGeneration}</button>\n\n            <span class=\"k-spacer\"></span>\n            ${showOutputRating ? `\n            <button ref-rate-positive>${messages.ratePositive}</button>\n            <button ref-rate-negative>${messages.rateNegative}</button>\n            ` : \"\"}\n        </div>\n    </div>`;\n\n    let DEFAULT_OUTPUT_VIEW_TEMPLATE = ({ promptOutputs, showOutputRating, messages }) => `<div role=\"list\" class=\"k-card-list\">\n    ${promptOutputs ? promptOutputs.map(output => DEFAULT_OUTPUT_CARD_TEMPLATE_FUNC({ output, showOutputRating, messages })).join(\"\") : ''}\n    </div>`;\n\n    kendo.ui.AIPromptOutputView = AIPromptBaseView.extend({\n        init: function(element, options) {\n            let that = this;\n\n            AIPromptBaseView.fn.init.call(that, element, options);\n\n            that.promptOutputs = (that.options.promptOutputs || []).map(output => {\n                output.id = output.id || kendo.guid();\n                return output;\n            });\n\n            that.showOutputRating = that.options.showOutputRating;\n        },\n\n        options: {\n            name: \"AIPromptOutputView\",\n            buttonIcon: \"comment\",\n            promptOutputs: []\n        },\n\n        addPromptOutput: function(output) {\n            let that = this;\n            output.id = output.id || kendo.guid();\n            that.promptOutputs.unshift(output);\n            that.renderPromptOutput(output);\n        },\n\n        renderPromptOutput: function(output) {\n            let that = this;\n            let showOutputRating = that.options.showOutputRating;\n            let messages = that.options.messages;\n\n            let card = $(kendo.template(DEFAULT_OUTPUT_CARD_TEMPLATE_FUNC)({ output, showOutputRating, messages }));\n            that.outputsContainer.append(card);\n            that.initializeComponents(card);\n        },\n\n        _renderContent: function() {\n            let that = this;\n            let promptOutputs = that.promptOutputs;\n            let showOutputRating = that.options.showOutputRating;\n            let messages = that.options.messages;\n\n            let outputsContainer = kendo.template(that.viewTemplate || DEFAULT_OUTPUT_VIEW_TEMPLATE)({ promptOutputs, showOutputRating, messages });\n            that.outputsContainer = $(outputsContainer);\n            that._renderContentElement();\n            that.contentElement.append(that.outputsContainer);\n        },\n\n        _getOutputFromElement: function(element) {\n            let that = this;\n            let card = $(element).closest(\".k-card\");\n            let id = card.data(\"id\");\n\n            let promptOutput = that.promptOutputs.find(output => output.id === id);\n\n            return promptOutput;\n        },\n\n        initializeComponents: function(parentElement) {\n            let that = this;\n            parentElement = parentElement || that.contentElement;\n\n            parentElement.find(\"[ref-copy-button]\").kendoButton({\n                icon: \"copy\",\n                fillMode: \"flat\",\n                themeColor: \"primary\",\n                click: function(e) {\n                    let promptOutput = that._getOutputFromElement(e.target);\n                    if (!that.aiprompt.trigger(\"outputCopy\", { output: promptOutput, prompt: promptOutput.prompt })) {\n                        if (navigator.clipboard && typeof navigator.clipboard.writeText === \"function\") {\n                            navigator.clipboard.writeText(promptOutput.output);\n                        }\n                    }\n                }\n            });\n\n            parentElement.find(\"[ref-retry-button]\").kendoButton({\n                icon: \"arrow-rotate-cw\",\n                fillMode: \"flat\",\n                click: function(e) {\n                    let promptOutput = that._getOutputFromElement(e.target);\n\n                    that.aiprompt.trigger(\"promptRequest\", { isRetry: true, prompt: promptOutput.prompt, output: promptOutput });\n                }\n            });\n\n            if (that.options.showOutputRating) {\n                parentElement.find(\"[ref-rate-positive]\").kendoButton({\n                    icon: \"thumb-up-outline\",\n                    fillMode: \"flat\",\n                    click: function(e) {\n                        let promptOutput = that._getOutputFromElement(e.target);\n                        let rateType = \"positive\";\n\n                        that.aiprompt.trigger(\"outputRatingChange\", { rateType, output: promptOutput });\n\n                        kendo.ui.icon(e.sender.element.find(\".k-icon\"), \"thumb-up\");\n                        kendo.ui.icon(e.target.next(\"[ref-rate-negative]\").find(\".k-icon\"), \"thumb-down-outline\");\n                    }\n                });\n\n                parentElement.find(\"[ref-rate-negative]\").kendoButton({\n                    icon: \"thumb-down-outline\",\n                    fillMode: \"flat\",\n                    click: function(e) {\n                        let promptOutput = that._getOutputFromElement(e.target);\n                        let rateType = \"negative\";\n                        that.aiprompt.trigger(\"outputRatingChange\", { rateType, output: promptOutput });\n\n                        kendo.ui.icon(e.sender.element.find(\".k-icon\"), \"thumb-down\");\n                        kendo.ui.icon(e.target.prev(\"[ref-rate-positive]\").find(\".k-icon\"), \"thumb-up-outline\");\n                    }\n                });\n            }\n        },\n\n        render: function() {\n            let that = this;\n            that._renderContent();\n            that.initializeComponents();\n\n            that.contentElement.on(\"keydown\", \".k-card\", function(e) {\n                let target = $(e.target);\n\n                // if up or down arrow, focus next or previous card\n                // if home or end, focus first or last card\n                if (e.keyCode === 40 || e.keyCode === 38 || e.keyCode === 36 || e.keyCode === 35) {\n                    e.preventDefault();\n\n                    // down arrow\n                    if (e.keyCode === 40) {\n                        target.next(\".k-card\").trigger(\"focus\");\n                    }\n\n                    // up arrow\n                    if (e.keyCode === 38) {\n                        target.prev(\".k-card\").trigger(\"focus\");\n                    }\n\n                    // home\n                    if (e.keyCode === 36) {\n                        that.contentElement.find(\".k-card\").first().trigger(\"focus\");\n                    }\n\n                    // end\n                    if (e.keyCode === 35) {\n                        that.contentElement.find(\".k-card\").last().trigger(\"focus\");\n                    }\n                }\n            });\n        }\n    });\n\n    kendo.ui.AIPromptCommandsView = AIPromptBaseView.extend({\n        options: {\n            name: \"AIPromptCommandsView\",\n            buttonText: \"\",\n            buttonIcon: \"more-horizontal\",\n            promptCommands: []\n        },\n\n        initializeComponents: function() {\n            let that = this;\n            let commandItems = that.options.promptCommands;\n\n            let panelBarEl = $(\"<div></div>\").kendoPanelBar({\n                animation: false,\n                dataSource: commandItems,\n                selectable: false,\n                select: function(ev) {\n                    let item = $(ev.item);\n                    let dataItem = this.dataItem(item);\n                    if (dataItem.hasChildren) {\n                        return;\n                    }\n\n                    that.aiprompt.trigger(\"commandExecute\", { sender: that.aiprompt, item: dataItem });\n                }\n            });\n\n            that.contentElement.append(panelBarEl);\n        },\n\n        render: function() {\n            let that = this;\n            that._renderContentElement();\n            that.initializeComponents();\n        },\n    });\n\n    let EMPTY_TEMPLATE = () => \"\";\n    kendo.ui.AIPromptCustomView = AIPromptBaseView.extend({\n        options: {\n            name: \"AIPromptCustomView\",\n            buttonText: \"\",\n            buttonIcon: \"\",\n            viewTemplate: EMPTY_TEMPLATE,\n            footerTemplate: EMPTY_TEMPLATE,\n        },\n\n        initializeComponents: function() {\n            let that = this;\n            if (typeof that.options.initializeComponents === \"function\") {\n                that.options.initializeComponents.call(that);\n            }\n        },\n\n        _renderContent: function() {\n            let that = this;\n            let content = kendo.template(that.options.viewTemplate)({ aiprompt: that });\n\n            that._renderContentElement();\n            that.contentElement.append(content);\n        },\n\n        _renderFooter: function() {\n            let that = this;\n            if (that.options.footerTemplate === EMPTY_TEMPLATE) {\n                return;\n            }\n\n            let footer = kendo.template(that.options.footerTemplate)({ messages: that.options.messages });\n\n            that._renderFooterElement();\n            that.footerElement.append(footer);\n        },\n        render: function() {\n            let that = this;\n            that._renderContent();\n            that._renderFooter();\n            that.initializeComponents();\n        },\n    });\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}