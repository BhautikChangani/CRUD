{"version":3,"file":"kendo.dropdowntree.js","names":["$","undefined$1","subGroup","filter","kendo","window","ui","keys","DISABLED","SELECT","CHECKED","INDETERMINATE","TreeView","node","result","children","length","Tree","extend","init","element","options","dropdowntree","that","this","fn","call","_isMultipleSelection","wrapper","on","CLICK","_clickSelectedItem","bind","_checkOnSelect","e","isDefaultPrevented","dataItem","set","checked","_setCheckedValue","value","_click","one","currentTarget","_trigger","defaultrefresh","i","action","items","parentNode","loadOnDemand","checkChildren","checkboxes","_skip","field","level","_updateNodes","findByUid","uid","_progress","bubble","_appendItems","index","_remove","_refreshChildren","_refreshRoot","expanded","load","find","attr","trigger","_treeViewDataBound","sender","updateIndeterminate","_previousVisible","lastChild","prev","root","last","_expanded","parent","checkAll","is","filterInput","_keydown","target","key","keyCode","focused","current","checkbox","first","rtl","support","isRtl","RIGHT","LEFT","_nextVisible","hasClass","expand","collapse","_enabled","DOWN","UP","altKey","HOME","END","ENTER","SPACEBAR","prop","data","_checkboxChange","ESC","_closePopup","TAB","preventDefault","select","scrollTo","close","refresh","skipUpdateOnBind","_checkValue","selected","_selectValue","_dropdowntree","jQuery","valueMapperOptions","callback","selectable","success","response","__meta__","id","name","category","description","depends","html","encode","htmlEncode","mediaQuery","Widget","ObservableArray","ObservableObject","activeElement","_activeElement","ns","HIDDENCLASS","WIDTH","browser","outerWidth","_outerWidth","DOT","READONLY","STATEDISABLED","ARIA_DISABLED","FOCUSED","HOVEREVENTS","TABINDEX","OPEN","CLOSE","CHANGE","quotRegExp","CHIP","DropDownTree","_selection","_getSelection","_focusInputHandler","_focusInput","_initial","val","_values","_noInitialValue","_isNullorUndefined","_valueMethodCalled","_isArrayOfObjects","autoBind","map","x","dataValueField","Array","isArray","slice","bigScreenMQL","smallScreenMQL","adaptiveMode","onChange","popup","isFunction","fullscreen","mediaQueryList","matches","_inputTemplate","_accessors","_setTreeViewOptions","_dataSource","_initWrapper","_applyCssClasses","_placeholder","_tabindex","tree","tabIndex","list","append","_header","_noData","_footer","_reset","_popup","destroy","remove","treeview","_filterHeader","_treeview","_renderFooter","_checkAll","_enable","_toggleCloseVisibility","_aria","_clearButton","text","_textAccessor","placeholder","_preselect","parents","enable","label","_label","valueMapper","requireValueMapper","notify","labelOptions","isPlainObject","content","Label","widget","floatCheck","_floatCheck","_inputLabel","visible","_refreshFloatingLabel","floatingLabel","treeviewOptions","dataImageUrlField","dataSpriteCssClassField","dataTextField","dataUrlField","size","template","rootDataSource","dataSource","HierarchicalDataSource","create","_popupOpen","wrap","_altname","MultipleSelection","SingleSelection","setDataSource","_isDataSourceSet","_tags","setValue","empty","span","show","_multipleTags","includes","animation","autoClose","autoWidth","clearButton","delay","enabled","enforceMinLength","height","ignoreCase","messages","singleTag","clear","deleteTag","noData","minLength","noDataTemplate","checkAllTemplate","tagMode","valuePrimitive","footerTemplate","headerTemplate","valueTemplate","filterLabel","fillMode","rounded","events","focus","readonly","_editable","disable","toggle","open","_toggle","_isFilterEnabled","_search","fetch","_allowOpening","_hovered","search","word","clearTimeout","_typingTimeout","_getFilter","_filtering","_mapValuesToId","values","schema","model","Error","item","hasValue","_useValueMapper","deferred","Deferred","_deferred","_handleValueMapperData","done","_loadItem","get","resolve","operator","flatView","_renderNoData","setOptions","console","warn","css","_unwrapFloating","off","_clear","tagList","unbind","_form","_resetHandler","_useValueMapperWithValue","_setValue","_filter","loweredText","toLowerCase","_selectItemByText","role","_activeId","guid","_ariaLabel","header","prepend","hide","appendTo","instance","footer","disabled","_adjustListWidth","computedStyle","computedWidth","width","style","getComputedStyle","parseFloat","msie","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","fontFamily","minWidth","whiteSpace","formId","form","closest","setTimeout","_hasActionSheet","addClass","Popup","anchor","_openHandler","_closeHandler","autosize","deactivate","activate","document","body","ActionSheet","adaptive","hideOverflowContent","closeButton","renderButton","icon","focusOnActivate","toggleClass","_currentValue","currentValue","_value","indexOfValue","isMultiple","_level","indexOf","grep","_tagUid","itemToAdd","toJSON","push","itemToRemove","idx","_treeViewCheckAllCheck","splice","_preventChangeTrigger","position","_updateSelectedOptions","tagName","selectedItems","_option","_text","dataValue","dataText","option","replace","_accessor","_clearClick","stopPropagation","_clearTextAndValue","shouldTrigger","_clearValue","_clearInput","_clearText","_assignInstance","assign","split","removeClass","getter","textField","valueField","getterFunction","count","levels","d","Math","min","_accessorInput","clearTitle","insertAfter","isReadOnly","valueDoesNotEqualPlaceHolder","_hideClear","_showClear","_prev","_deselectItem","rootItem","subItems","_checkLoadedItems","rootItems","_valueComparer","_checkLoadedItem","_getAllChecked","_checkCheckAll","_uncheckCheckAll","checkAllCheckbox","_allItemsAreChecked","_allItemsAreUnchecked","filterTemplate","iconClass","_disableCheckChildren","title","_filterChange","insertBefore","renderCheckBox","_changeCheckAll","_keydownCheckAll","_disabledCheckedItems","_disabledUnCheckedItems","isChecked","_updateCheckAll","_toggleCheckAllItems","edge","_clickCheckAll","_dfs","_traverceChildren","_uncheckItemByUid","_uncheckItemEqualsUid","_itemEqualsText","_selectItemByValue","_itemEqualsValue","_checkItemByValue","dataItems","_checkItemEqualsValue","itemText","itemValue","newValue","_allCheckedItems","_getAllCheckedItems","_childrenOptions","_checkAllCheckItem","add","dropDownWrapper","removeAttr","_focusinHandler","_focusoutHandler","_toggleHover","_wrapperClick","_removeTagClick","_prevent","_focused","type","preventScroll","_ie11PreventScrollOnFocus","version","_toggleResize","isFilterInputActive","isWrapperActive","tagItem","isPopupVisible","_focusPrevTag","_focusNextTag","_focusFirstTag","_focusLastTag","DELETE","_removeTag","BACKSPACE","_clearFilter","activedescendant","next","_clearDisabledTag","firstTag","lastTag","fields","lastIndex","plugin","cssProperties","registerPrefix","registerValues","roundedValues","concat","Class","view","_wrapper","_span","DOMelement","cssText","className","accesskey","unselectable","SELECTOR","shape","_arrow","_arrowIcon","selectedNode","dropdowntreeHasValue","triggerChange","tempItem","_tagTemplate","_tagList","valueToSelect","tagTemplate","renderChip","themeColor","removable","removeIcon","removableAttr","tagCollection","renderChipList","viewModel","observable","multipleTag","tags","_refreshTagListAria","oldValues","_removeValues","removedValues","_getNewValues","j","tagsArray","_findTag","tempItemValue","kendo$1"],"sources":["kendo.dropdowntree.js"],"mappings":"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","sourcesContent":["import './kendo.treeview.js';\nimport './kendo.popup.js';\nimport './kendo.actionsheet.js';\nimport './kendo.binder.js';\nimport './kendo.html.chip.js';\nimport './kendo.html.chiplist.js';\nimport './kendo.html.button.js';\nimport './kendo.html.input.js';\nimport './kendo.label.js';\nimport './kendo.icons.js';\n\n(function($, undefined$1) {\n\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        keys = kendo.keys,\n        DISABLED = \"k-disabled\",\n        SELECT = \"select\",\n        CHECKED = \"checked\",\n        DATABOUND = \"dataBound\",\n        CLICK = \"click\",\n        NS = \".kendoTreeView\",\n        INDETERMINATE = \"indeterminate\",\n        NAVIGATE = \"navigate\",\n        subGroup,\n        TreeView = ui.TreeView;\n\n        function contentChild(filter) {\n            return function(node) {\n                var result = node.children(\".k-animation-container\");\n\n                if (!result.length) {\n                    result = node;\n                }\n\n                return result.children(filter);\n            };\n        }\n\n        subGroup = contentChild(\".k-treeview-group\");\n\n    var Tree = TreeView.extend({\n        init: function(element, options, dropdowntree) {\n            var that = this;\n\n            that.dropdowntree = dropdowntree;\n\n            TreeView.fn.init.call(that, element, options);\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.wrapper.on(CLICK + NS, '.k-treeview-leaf.k-selected', that._clickSelectedItem.bind(that));\n            }\n        },\n\n        _checkOnSelect: function(e) {\n            if (!e.isDefaultPrevented()) {\n                var dataItem = this.dataItem(e.node);\n\n                dataItem.set(\"checked\", !dataItem.checked);\n            }\n        },\n\n        _setCheckedValue: function(node, value) {\n            node.set(CHECKED, value);\n        },\n\n        _click: function(e) {\n            var that = this;\n\n            if (that.dropdowntree._isMultipleSelection()) {\n                that.one(\"select\", that._checkOnSelect);\n            }\n            TreeView.fn._click.call(that, e);\n        },\n\n        _clickSelectedItem: function(e) {\n            var that = this,\n            node = $(e.currentTarget);\n\n            that.one(\"select\", that._checkOnSelect);\n            if (!that._trigger(SELECT, node)) {\n                that.dataItem(node).set(\"selected\", false);\n            }\n        },\n\n        defaultrefresh: function(e) {\n            var that = this;\n            var node = e.node;\n            var action = e.action;\n            var items = e.items;\n            var parentNode = this.wrapper;\n            var options = this.options;\n            var loadOnDemand = options.loadOnDemand;\n            var checkChildren = options.checkboxes && options.checkboxes.checkChildren;\n            var i;\n\n            if (this._skip) {\n                return;\n            }\n\n            if (e.field) {\n                if (!items[0] || !items[0].level) {\n                    return;\n                }\n\n                return this._updateNodes(items, e.field);\n            }\n\n            if (node) {\n                parentNode = this.findByUid(node.uid);\n                this._progress(parentNode, false);\n            }\n\n            if (checkChildren && action != \"remove\") {\n                var bubble = false;\n\n                for (i = 0; i < items.length; i++) {\n                    if (\"checked\" in items[i]) {\n                        bubble = true;\n                        break;\n                    }\n                }\n\n                if (!bubble && node && node.checked) {\n                    for (i = 0; i < items.length; i++) {\n                        items[i].checked = true;\n                    }\n                }\n            }\n\n            if (action == \"add\") {\n                this._appendItems(e.index, items, parentNode);\n            } else if (action == \"remove\") {\n                this._remove(this.findByUid(items[0].uid), false);\n            } else if (action == \"itemchange\") {\n                this._updateNodes(items);\n            } else if (action == \"itemloaded\") {\n                this._refreshChildren(parentNode, items, e.index);\n            } else {\n                this._refreshRoot(items);\n            }\n\n            if (action != \"remove\") {\n                for (i = 0; i < items.length; i++) {\n                    if (!loadOnDemand || items[i].expanded) {\n                        items[i].load();\n                    }\n                }\n            }\n\n            that.wrapper.find(\">ul\").attr(\"role\", \"tree\");\n\n            this.trigger(DATABOUND, { node: node ? parentNode : undefined$1 });\n            this.dropdowntree._treeViewDataBound({ node: node ? parentNode : undefined$1, sender: this });\n            if (this.options.checkboxes.checkChildren) {\n                this.updateIndeterminate();\n            }\n        },\n\n        _previousVisible: function(node) {\n            var that = this,\n                lastChild,\n                result;\n\n            if (!node.length || node.prev().length) {\n                if (node.length) {\n                    result = node.prev();\n                } else {\n                    result = that.root.children().last();\n                }\n\n                while (that._expanded(result)) {\n                    lastChild = subGroup(result).children().last();\n\n                    if (!lastChild.length) {\n                        break;\n                    }\n\n                    result = lastChild;\n                }\n            } else {\n                result = that.parent(node) || node;\n\n                if (!result.length) {\n                    if (that.dropdowntree.checkAll && that.dropdowntree.checkAll.is(\":visible\")) {\n                        that.dropdowntree.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n                    } else if (that.dropdowntree.filterInput) {\n                        that.dropdowntree.filterInput.trigger(\"focus\");\n                    } else {\n                        that.dropdowntree.wrapper.trigger(\"focus\");\n                    }\n                }\n            }\n\n            return result;\n        },\n\n        _keydown: function(e) {\n            var that = this,\n                key = e.keyCode,\n                target,\n                focused = that.current(),\n                expanded = that._expanded(focused),\n                checkbox = focused.find(\".k-checkbox-wrap\").first().find(\":checkbox\"),\n                rtl = kendo.support.isRtl(that.element);\n\n            if (e.target != e.currentTarget) {\n                return;\n            }\n\n            if ((!rtl && key == keys.RIGHT) || (rtl && key == keys.LEFT)) {\n                if (expanded) {\n                    target = that._nextVisible(focused);\n                } else if (!focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                    that.expand(focused);\n                }\n            } else if ((!rtl && key == keys.LEFT) || (rtl && key == keys.RIGHT)) {\n                if (expanded && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                    that.collapse(focused);\n                } else {\n                    target = that.parent(focused);\n\n                    if (!that._enabled(target)) {\n                        target = undefined$1;\n                    }\n                }\n            } else if (key == keys.DOWN) {\n                target = that._nextVisible(focused);\n            } else if (key == keys.UP && !e.altKey) {\n                target = that._previousVisible(focused);\n            } else if (key == keys.HOME) {\n                target = that._nextVisible($());\n            } else if (key == keys.END) {\n                target = that._previousVisible($());\n            } else if (key == keys.ENTER && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                if (!focused.find(\".k-treeview-leaf\").first().hasClass(\"k-selected\")) {\n                    if (!that._trigger(SELECT, focused)) {\n                        that.select(focused);\n                    }\n                }\n            } else if (key == keys.SPACEBAR && checkbox.length && !focused.find(\".k-treeview-leaf\").first().hasClass(DISABLED)) {\n                checkbox.prop(CHECKED, !checkbox.prop(CHECKED))\n                    .data(INDETERMINATE, false)\n                    .prop(INDETERMINATE, false);\n\n                that._checkboxChange({ target: checkbox });\n\n                target = focused;\n            } else if ((e.altKey && key === keys.UP) || key === keys.ESC) {\n                that._closePopup();\n            } else if ( key === keys.TAB) {\n                e.preventDefault();\n                that._closePopup();\n            }\n\n            if (target) {\n                e.preventDefault();\n\n                if (focused[0] != target[0]) {\n                    that._trigger(NAVIGATE, target);\n                    that.current(target);\n                    that.scrollTo(target);\n                }\n            }\n        },\n\n        _closePopup: function() {\n            this.dropdowntree.close();\n            this.dropdowntree.wrapper.trigger(\"focus\");\n        },\n\n        refresh: function(e) {\n            this.defaultrefresh(e);\n\n            if (this.dropdowntree.options.skipUpdateOnBind) {\n                return;\n            }\n\n            if (e.action === \"itemchange\") {\n                if (this.dropdowntree._isMultipleSelection()) {\n                    if (e.field === \"checked\") {\n                        this.dropdowntree._checkValue(e.items[0]);\n                    }\n                } else {\n                    if (e.field !== \"checked\" && e.field !== \"expanded\" && e.items[0].selected) {\n                        this.dropdowntree._selectValue(e.items[0]);\n                    }\n                }\n            } else {\n                this.dropdowntree.refresh(e);\n            }\n        }\n\n    });\n\n    kendo.ui._dropdowntree = Tree;\n\n})(window.kendo.jQuery);\n\nlet $ = kendo.jQuery;\n\nfunction valueMapperOptions(options, value, callback) {\n    return {\n        value: (options.selectable === \"multiple\" || options.checkboxes) ? value : value[0],\n        success: function(response) {\n            callback(response);\n        }\n    };\n}\n\nvar __meta__ = {\n    id: \"dropdowntree\",\n    name: \"DropDownTree\",\n    category: \"web\",\n    description: \"The DropDownTree widget displays a hierarchy of items and allows the selection of single or multiple items.\",\n    depends: [ \"treeview\", \"popup\", \"binder\", \"html.chip\", \"html.chiplist\", \"html.button\", \"html.input\", \"label\", \"icons\", \"actionsheet\" ]\n};\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        ui = kendo.ui,\n        html = kendo.html,\n        encode = kendo.htmlEncode,\n        mediaQuery = kendo.mediaQuery,\n        Widget = ui.Widget,\n        TreeView = ui._dropdowntree,\n        ObservableArray = kendo.data.ObservableArray,\n        ObservableObject = kendo.data.ObservableObject,\n        extend = $.extend,\n        activeElement = kendo._activeElement,\n        ns = \".kendoDropDownTree\",\n        keys = kendo.keys,\n        support = kendo.support,\n        HIDDENCLASS = \"k-hidden\",\n        WIDTH = \"width\",\n        browser = support.browser,\n        outerWidth = kendo._outerWidth,\n        DOT = \".\",\n        DISABLED = \"disabled\",\n        READONLY = \"readonly\",\n        STATEDISABLED = \"k-disabled\",\n        ARIA_DISABLED = \"aria-disabled\",\n        HOVER = \"k-hover\",\n        FOCUSED = \"k-focus\",\n        HOVEREVENTS = \"mouseenter\" + ns + \" mouseleave\" + ns,\n        TABINDEX = \"tabindex\",\n        CLICK = \"click\",\n        OPEN = \"open\",\n        CLOSE = \"close\",\n        CHANGE = \"change\",\n        quotRegExp = /\"/g,\n\n        CHIP = \".k-chip\";\n\n    var DropDownTree = kendo.ui.Widget.extend( {\n        init: function(element, options) {\n            var that = this;\n            this.ns = ns;\n\n            kendo.ui.Widget.fn.init.call(this, element, options);\n            this._selection = this._getSelection();\n            this._focusInputHandler = this._focusInput.bind(this);\n            this._initial = this.element.val();\n\n            this._values = [];\n\n            var value = this.options.value;\n\n            if (value === null || !value.length) {\n                this._noInitialValue = true;\n            }\n\n            if (!this._isNullorUndefined(value)) {\n                this._valueMethodCalled = true;\n                value = this._isArrayOfObjects(value) && that.options.autoBind ? value.map(x=>x[that.options.dataValueField]) : value;\n                this._values = Array.isArray(value) ? value.slice(0) : [value];\n            }\n\n            that.bigScreenMQL = mediaQuery(\"large\");\n            that.smallScreenMQL = mediaQuery(\"small\");\n            if (that.options.adaptiveMode == \"auto\") {\n                that.smallScreenMQL.onChange(function() {\n                    if (that.popup && kendo.isFunction(that.popup.fullscreen)) {\n                        that.popup.fullscreen(that.smallScreenMQL.mediaQueryList.matches);\n                    }\n                });\n            }\n\n            this._inputTemplate();\n\n            this._accessors();\n            this._setTreeViewOptions(this.options);\n            this._dataSource();\n            this._selection._initWrapper();\n            this._applyCssClasses();\n            this._placeholder(true);\n            this._tabindex();\n            this.wrapper.data(TABINDEX, this.wrapper.attr(TABINDEX));\n\n            this.tree = $('<div/>')\n            .attr({\n                tabIndex: -1,\n                \"aria-hidden\": true\n            });\n\n            this.list = $(\"<div/>\")\n                .append(this.tree);\n\n            this._header();\n            this._noData();\n            this._footer();\n            this._reset();\n            this._popup();\n\n            if (that.options.adaptiveMode == \"auto\") {\n                that.bigScreenMQL.onChange(() => {\n                    that.list = $(\"<div class='k-list-container'/>\")\n                        .append(that.tree);\n                    that._header.bind(that)();\n                    that._noData.bind(that)();\n                    that._footer.bind(that)();\n                    that._reset.bind(that)();\n\n                    if (that.popup) {\n                        that.popup.destroy();\n                        that.popup.element.remove();\n                        that.popup = null;\n                    }\n                    if (that.treeview) {\n                        that.treeview.destroy();\n                    }\n\n                    that._popup.bind(that)();\n                    that._filterHeader.bind(that)();\n                    that._treeview.bind(that)();\n\n                    that._renderFooter.bind(that)();\n\n                    that._checkAll.bind(that)();\n                    that._enable.bind(that)();\n                    that._toggleCloseVisibility.bind(that)();\n\n                    that._aria.bind(that)();\n                });\n            }\n\n            this._clearButton();\n            this._filterHeader();\n            this._treeview();\n\n            this._renderFooter();\n\n            this._checkAll();\n            this._enable();\n            this._toggleCloseVisibility();\n\n            if (!this.options.autoBind) {\n                var text = options.text || \"\";\n                if (!this._isNullorUndefined(options.value)) {\n                    this._preselect(options.value);\n                } else if (text) {\n                    this._textAccessor(text);\n                } else if (options.placeholder) {\n                    this._placeholder(true);\n                }\n            }\n\n            var disabled = $(this.element).parents(\"fieldset\").is(':disabled');\n\n            if (disabled) {\n                this.enable(false);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.label) {\n                this._label();\n            }\n            if (this.options.loadOnDemand && this.options.loadOnDemand.valueMapper && this.options.value) {\n                this.one('dataBound', () => this.requireValueMapper(this.options));\n            }\n            this._aria();\n\n            kendo.notify(this);\n        },\n\n        _label: function() {\n            var that = this;\n            var options = that.options;\n            var labelOptions = $.isPlainObject(options.label) ? options.label : {\n                content: options.label\n            };\n\n            that.label = new kendo.ui.Label(null, $.extend({}, labelOptions, {\n                widget: that,\n                floatCheck: that._floatCheck.bind(that)\n            }));\n\n            that._inputLabel = that.label.element;\n        },\n\n        _floatCheck: function() {\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length || this.text();\n            return !hasValue && !this.popup.visible();\n        },\n\n        _refreshFloatingLabel: function() {\n            var that = this;\n\n            if (that.label && that.label.floatingLabel) {\n                that.label.floatingLabel.refresh();\n            }\n        },\n\n        _preselect: function(data, value) {\n            this._selection._preselect(data, value);\n        },\n\n        _setTreeViewOptions: function(options) {\n            var treeviewOptions = {\n                autoBind: options.autoBind,\n                checkboxes: options.checkboxes,\n                dataImageUrlField: options.dataImageUrlField,\n                dataSpriteCssClassField: options.dataSpriteCssClassField,\n                dataTextField: options.dataTextField,\n                dataUrlField: options.dataUrlField,\n                loadOnDemand: options.loadOnDemand,\n                size: options.size\n            };\n\n            this.options.treeview = $.extend({}, treeviewOptions, this.options.treeview);\n\n            if (options.template) {\n                this.options.treeview.template = options.template;\n            }\n\n            if (options.size) {\n                this.options.treeview.size = options.size;\n            }\n        },\n\n        _dataSource: function() {\n            var rootDataSource = this.options.dataSource;\n\n            this.dataSource = kendo.data.HierarchicalDataSource.create(rootDataSource);\n            if (rootDataSource) {\n                $.extend(this.options.treeview,{\n                    dataSource: this.dataSource\n                });\n            }\n        },\n\n        _popupOpen: function() {\n            var popup = this.popup;\n            popup.wrapper = kendo.wrap(popup.element);\n        },\n\n        _getSelection: function() {\n            if (this._isMultipleSelection()) {\n                this.options._altname = \"MultiSelectTree\";\n                return new ui.DropDownTree.MultipleSelection(this);\n            } else {\n                return new ui.DropDownTree.SingleSelection(this);\n            }\n        },\n\n        setDataSource: function(dataSource) {\n            this._isDataSourceSet = true;\n            if (this._tags) {\n                this._noInitialValue = true;\n                this.setValue([]);\n                this._tags.empty();\n                this.span.show();\n                this._multipleTags.empty();\n            }\n            this.dataSource = dataSource;\n            this.treeview.setDataSource(dataSource);\n            this._isDataSourceSet = false;\n        },\n\n        _isMultipleSelection: function() {\n            return this.options && (this.options.treeview.checkboxes || this.options.checkboxes);\n        },\n\n        _isArrayOfObjects: function(value) {\n            return Array.isArray(value) && value.map(x=> typeof x == \"object\").includes(true);\n        },\n\n        options: {\n            name: \"DropDownTree\",\n            adaptiveMode: \"none\",\n            animation: {},\n            autoBind: true,\n            autoClose: true,\n            autoWidth: false,\n            clearButton: true,\n            dataTextField: \"\",\n            dataValueField: \"\",\n            dataImageUrlField: \"\",\n            dataSpriteCssClassField: \"\",\n            dataUrlField: \"\",\n            delay: 500,\n            enabled: true,\n            enforceMinLength: false,\n            filter: \"none\",\n            height: 200,\n            ignoreCase: true,\n            index: 0,\n            loadOnDemand: false,\n            messages: {\n                \"singleTag\": \"item(s) selected\",\n                \"clear\": \"clear\",\n                \"deleteTag\": \"delete\",\n                \"noData\": \"No data found.\"\n            },\n            minLength: 1,\n            checkboxes: false,\n            noDataTemplate: true,\n            placeholder: \"\",\n            checkAll: false,\n            checkAllTemplate: () => \"Check all\",\n            tagMode: \"multiple\",\n            template: null,\n            text: null,\n            treeview: {},\n            valuePrimitive: false,\n            footerTemplate: () => \"\",\n            headerTemplate: () => \"\",\n            value: null,\n            valueTemplate: null,\n            popup: null,\n            filterLabel: null,\n            size: \"medium\",\n            fillMode: \"solid\",\n            rounded: \"medium\",\n            label: null\n        },\n\n        events: [\n            \"open\",\n            \"close\",\n            \"dataBound\",\n            CHANGE,\n            \"select\",\n            \"filtering\"\n        ],\n\n        focus: function() {\n            this.wrapper.trigger(\"focus\");\n        },\n\n        dataItem: function(node) {\n            return this.treeview.dataItem(node);\n        },\n\n        readonly: function(readonly) {\n            this._editable({\n                readonly: readonly === undefined$1 ? true : readonly,\n                disable: false\n            });\n            this._toggleCloseVisibility();\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.readonly(readonly === undefined$1 ? true : readonly);\n            }\n        },\n\n        enable: function(enable) {\n            this._editable({\n                readonly: false,\n                disable: !(enable = enable === undefined$1 ? true : enable)\n            });\n            this._toggleCloseVisibility();\n\n            if (this.label && this.label.floatingLabel) {\n                this.label.floatingLabel.enable(enable = enable === undefined$1 ? true : enable);\n            }\n        },\n\n        toggle: function(open) {\n            this._toggle(open);\n        },\n\n        open: function() {\n            var popup = this.popup;\n\n            if (!this.options.autoBind && !this.dataSource.data().length) {\n                this.treeview._progress(true);\n                if (this._isFilterEnabled()) {\n                    this._search();\n                } else {\n                    this.dataSource.fetch();\n                }\n            }\n\n            if (popup.visible() || !this._allowOpening()) {\n                return;\n            }\n\n            popup.one(\"activate\", this._focusInputHandler);\n            popup._hovered = true;\n            popup.open();\n        },\n\n        close: function() {\n            this.popup.close();\n        },\n\n        search: function(word) {\n            var options = this.options;\n            var filter;\n            clearTimeout(this._typingTimeout);\n\n            if ((!options.enforceMinLength && !word.length) || word.length >= options.minLength) {\n                filter = this._getFilter(word);\n                if (this.trigger(\"filtering\", { filter: filter }) ||\n                 Array.isArray(this.options.dataTextField)) {\n                    return;\n                }\n\n                this._filtering = true;\n                this.treeview.dataSource.filter(filter);\n            }\n        },\n\n        _mapValuesToId: function(values) {\n            const that = this;\n\n            if (typeof that.dataSource.options.schema.model === 'function') {\n                throw new Error(\"The valueMapper needs dataSource.schema\");\n            }\n            const field = that.dataSource.options.schema.model.id;\n\n            return values.map((item) => item[field]);\n        },\n\n        requireValueMapper: function(options, value) {\n            const that = this;\n            let hasValue = value ? value : options.value;\n            hasValue = hasValue && (hasValue instanceof Array ? hasValue : [hasValue]);\n\n            if (hasValue && options.loadOnDemand && typeof options.loadOnDemand.valueMapper !== \"function\") {\n                throw new Error(\"ValueMapper is not provided while the value is being set. See http://docs.telerik.com/kendo-ui/controls/editors/combobox/virtualization#the-valuemapper-function\");\n            }\n\n            if (hasValue.length) {\n                let index = 0;\n                that.options.loadOnDemand.valueMapper(valueMapperOptions(that.options, hasValue, that._useValueMapper.bind(that, hasValue, index)));\n\n            }\n        },\n\n        _useValueMapper: function(data, index, response) {\n            const that = this;\n            const deferred = $.Deferred();\n            that._deferred = deferred;\n\n            that._handleValueMapperData(index, response);\n\n            deferred.done(() => {\n                index++;\n                if (index < data.length) {\n                    that._useValueMapper(data, index, response);\n                }\n            });\n        },\n\n        _handleValueMapperData: function(index, data) {\n            const that = this;\n\n            const response = data[index] instanceof Array ? data[index] : data;\n            if (!response || !response.length) {\n                return;\n            }\n\n                let idIndex = 0;\n                that._loadItem(response, idIndex);\n        },\n\n        _loadItem: function(data, index) {\n            const that = this;\n            const node = that.dataSource.get(data[index]);\n                if (node) {\n                    node.load().done(() => {\n                        index++;\n                        if (index < data.length - 1) {\n                            that._loadItem(data, index);\n                        } else {\n                            that._deferred.resolve();\n                        }\n                    });\n                }\n        },\n\n        _getFilter: function(word) {\n            return {\n                field: this.options.dataTextField,\n                operator: this.options.filter,\n                value: word,\n                ignoreCase: this.options.ignoreCase\n              };\n        },\n\n        refresh: function() {\n            var data = this.treeview.dataSource.flatView();\n            this._renderFooter();\n            this._renderNoData();\n            if (this.filterInput && this.checkAll) {\n                this.checkAll.toggle(!this.filterInput.val().length);\n            }\n\n            this.tree.toggle(!!data.length);\n            $(this.noData).toggle(!data.length);\n        },\n\n        setOptions: function(options) {\n            if (this.options.checkboxes != options.checkboxes) {\n                delete options.checkboxes;\n                window.console.warn('setOptions method can not be used to set the checkboxes option in DropDownTree');\n            }\n\n            Widget.fn.setOptions.call(this, options);\n\n            this._setTreeViewOptions(options);\n            this._dataSource();\n            if (this.options.treeview || options.size) {\n                this.treeview.setOptions(this.options.treeview);\n            }\n\n            if (options.height && this.tree) {\n                this.tree.css('max-height', options.height);\n            }\n\n            this._header();\n            this._noData();\n            this._footer();\n\n            this._renderFooter();\n            this._renderNoData();\n            if (this.span && (this._isMultipleSelection() || this.span.hasClass(\"k-readonly\"))) {\n                this._placeholder(true);\n            }\n            this._inputTemplate();\n            this._accessors();\n            this._filterHeader();\n            this._checkAll();\n            this._enable();\n            if (options && (options.enable || options.enabled)) {\n                this.enable(true);\n            }\n            this._clearButton();\n\n            if (options === undefined$1 || options === null) {\n                options = {};\n            }\n\n            if (options.label && this._inputLabel) {\n                this.label.setOptions(options.label);\n            } else if (options.label === false) {\n                this.label._unwrapFloating();\n                this._inputLabel.remove();\n                delete this._inputLabel;\n            } else if (options.label) {\n                this._label();\n            }\n        },\n\n        destroy: function() {\n            kendo.ui.Widget.fn.destroy.call(this);\n            if (this.treeview) {\n                this.treeview.destroy();\n            }\n            this.popup.destroy();\n\n            this.wrapper.off(ns);\n            this._clear.off(ns);\n            if (this.filterInput) {\n                this.filterInput.off(ns);\n            }\n\n            if (this.tagList) {\n                this.tagList.off(ns);\n            }\n\n            if (this.bigScreenMQL) {\n                this.bigScreenMQL.destroy();\n            }\n\n            if (this.smallScreenMQL) {\n                this.smallScreenMQL.destroy();\n            }\n\n            kendo.unbind(this.tagList);\n            if (this.options.checkAll && this.checkAll) {\n                this.checkAll.off(ns);\n            }\n\n            if (this._form) {\n                this._form.off(\"reset\", this._resetHandler);\n            }\n\n            if (this.label) {\n                this.label.destroy();\n            }\n        },\n\n        setValue: function(value) {\n            value = Array.isArray(value) || value instanceof ObservableArray ? value.slice(0) : [value];\n\n            this._values = value;\n        },\n\n        items: function() {\n            return this.treeview.items();\n        },\n\n        _useValueMapperWithValue: function(value) {\n            const that = this;\n            let values = value instanceof Array ? value : [value];\n\n            if (typeof values[0] === 'object') {\n                values = that._mapValuesToId(values);\n            }\n            that.requireValueMapper(this.options, values);\n            that._deferred.done(() => {\n                that._selection._setValue(values);\n            });\n        },\n\n        value: function(value) {\n            const that = this;\n            const loadOnDemand = that.options.loadOnDemand;\n            if (value) {\n                if (that.filterInput && that.dataSource._filter) {\n                    that._filtering = true;\n                    that.dataSource.filter({});\n                } else if (!that.dataSource.data().length || !that.treeview.dataSource.data().length) {\n                    if (!loadOnDemand) {\n                        that.treeview.one('loadCompleted', function() {\n                            that._selection._setValue(value);\n                        });\n\n                        if (!that.options.autoBind && that.options.valuePrimitive) {\n                            that.dataSource.fetch();\n                        }\n                    } else if (loadOnDemand.valueMapper) {\n                        that.one('dataBound', () => {\n                            that._useValueMapperWithValue(value);\n                        });\n                    } else {\n                        that.dataSource.fetch(function() {\n                            that._selection._setValue(value);\n                        });\n                    }\n\n                    return;\n                } else if (loadOnDemand && loadOnDemand.valueMapper) {\n                    that._useValueMapperWithValue(value);\n                return;\n                }\n            }\n\n            return that._selection._setValue(value);\n        },\n\n        text: function(text) {\n            var loweredText;\n            var ignoreCase = this.options.ignoreCase;\n\n            text = text === null ? \"\" : text;\n\n            if (text !== undefined$1 && !this._isMultipleSelection()) {\n                if (typeof text !== \"string\") {\n                    this._textAccessor(text);\n                    return;\n                }\n\n                loweredText = ignoreCase ? text : text.toLowerCase();\n\n                this._selectItemByText(loweredText);\n\n                this._textAccessor(loweredText);\n                this._refreshFloatingLabel();\n            } else {\n                return this._textAccessor();\n            }\n\n        },\n\n        _aria: function() {\n            var input = this.wrapper.find(\"span.k-input-inner\");\n\n            this.wrapper.attr({\n                \"aria-haspopup\": \"tree\",\n                \"aria-expanded\": false,\n                \"aria-controls\": this.treeview.element.attr(\"id\"),\n                \"role\": \"combobox\"\n            });\n\n            this._activeId = kendo.guid();\n            this._ariaLabel(this.wrapper);\n\n            if (this.filterInput && this.options.filterLabel) {\n                this.filterInput.attr(\"aria-label\", this.options.filterLabel);\n            }\n\n            if (this.options.checkboxes) {\n                this.wrapper.attr({\n                    \"aria-describedby\": this.tagList[0].id\n                });\n                this.tagList.attr({\n                    \"role\": \"listbox\",\n                    \"aria-orientation\": \"horizontal\",\n                    \"aria-multiselectable\": true\n                });\n                this._ariaLabel(this.tagList);\n            }\n        },\n\n        _header: function() {\n            var list = this;\n            var header = $(list.header);\n            var template = list.options.headerTemplate;\n\n            kendo.destroy(header);\n            header.remove();\n\n            if (!template) {\n                list.header = null;\n                return;\n            }\n\n            var headerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n            header = $(headerTemplate({}));\n\n            list.header = header[0] ? header : null;\n            list.list.prepend(header);\n        },\n\n        _noData: function() {\n            var list = this;\n            var noData = $(list.noData);\n            var template = list.options.noDataTemplate === true ? encode(list.options.messages.noData) : list.options.noDataTemplate;\n\n            kendo.destroy(noData);\n            noData.remove();\n\n            if (!template) {\n                list.noData = null;\n                return;\n            }\n\n            list.noData = $('<div class=\"k-no-data\"></div>').hide().appendTo(list.list);\n            list.noDataTemplate = typeof template !== \"function\" ? kendo.template(() => template) : template;\n        },\n\n        _renderNoData: function() {\n            var list = this;\n            var noData = list.noData;\n\n            if (!noData) {\n                return;\n            }\n\n            noData.html(list.noDataTemplate({ instance: list }));\n        },\n\n        _footer: function() {\n            var list = this;\n            var footer = $(list.footer);\n            var template = list.options.footerTemplate;\n\n            kendo.destroy(footer);\n            footer.remove();\n\n            if (!template) {\n                list.footer = null;\n                return;\n            }\n\n            list.footer = $('<div class=\"k-footer\"></div>').appendTo(list.list);\n            list.footerTemplate = typeof template !== \"function\" ? kendo.template(template) : template;\n        },\n\n        _renderFooter: function() {\n            var list = this;\n            var footer = list.footer;\n\n            if (!footer) {\n                return;\n            }\n\n            footer.html(list.footerTemplate({ instance: list }));\n        },\n\n        _enable: function() {\n            var that = this,\n                options = that.options,\n                disabled = that.element.is(\"[disabled]\");\n\n            if (options.enable !== undefined$1) {\n                options.enabled = options.enable;\n            }\n\n            if (!options.enabled || disabled) {\n                that.enable(false);\n            } else {\n                that.readonly(that.element.is(\"[readonly]\"));\n            }\n        },\n\n        _adjustListWidth: function() {\n            var that = this,\n                list = that.list,\n                width = list[0].style.width,\n                wrapper = that.wrapper,\n                computedStyle, computedWidth;\n\n            if (!list.data(WIDTH) && width) {\n                return;\n            }\n\n            computedStyle = window.getComputedStyle ? window.getComputedStyle(wrapper[0], null) : 0;\n            computedWidth = parseFloat(computedStyle && computedStyle.width) || outerWidth(wrapper);\n\n            if (computedStyle && browser.msie) { // getComputedStyle returns different box in IE.\n                computedWidth += parseFloat(computedStyle.paddingLeft) + parseFloat(computedStyle.paddingRight) + parseFloat(computedStyle.borderLeftWidth) + parseFloat(computedStyle.borderRightWidth);\n            }\n\n            if (list.css(\"box-sizing\") !== \"border-box\") {\n                width = computedWidth - (outerWidth(list) - list.width());\n            } else {\n                width = computedWidth;\n            }\n\n            list.css({\n                fontFamily: wrapper.css(\"font-family\"),\n                width: that.options.autoWidth ? \"auto\" : width,\n                minWidth: width,\n                whiteSpace: that.options.autoWidth ? \"nowrap\" : \"normal\"\n            })\n            .data(WIDTH, width);\n\n            return true;\n        },\n\n        _reset: function() {\n            var that = this,\n                element = that.element,\n                formId = element.attr(\"form\"),\n                form = formId ? $(\"#\" + formId) : element.closest(\"form\");\n\n            if (form[0]) {\n                that._resetHandler = function() {\n                    setTimeout(function() {\n                        that.value(that._initial);\n                    });\n                };\n\n                that._form = form.on(\"reset\", that._resetHandler);\n            }\n        },\n\n        _hasActionSheet: function() {\n            return this.options.adaptiveMode === \"auto\" && !this.bigScreenMQL.mediaQueryList.matches;\n        },\n\n        _popup: function() {\n            var that = this;\n            var list = this;\n\n            if (that.options.checkboxes) {\n                if (that.options.checkAll) {\n                    that.list.attr(\"role\", \"application\");\n                }\n\n                that.list.addClass(\"k-multiselecttree-popup\");\n            } else {\n                that.list.addClass(\"k-dropdowntree-popup\");\n            }\n\n            if (list.options.adaptiveMode == \"auto\" && !list.bigScreenMQL.mediaQueryList.matches) {\n                $(document.body).append(list.list);\n                list.popup = new ui.ActionSheet(list.list, {\n                    adaptive: true,\n                    hideOverflowContent: true,\n                    headerTemplate: (options) =>\n                        `<div class=\"k-text-center k-actionsheet-titlebar\" >` +\n                            '<div class=\"k-actionsheet-titlebar-group k-hbox\">' +\n                                `<div  class=\"k-actionsheet-title\">` +\n                                    `<div class=\"k-text-center\">${list.label ? list.label.element.text() : list.options.label || list.options.placeholder || \"Select\"}</div>` +\n                                    (list.options.placeholder && (list.label || list.options.label) ? `<div class=\"k-actionsheet-subtitle k-text-center\">${list.options.placeholder || \"\"}</div>` : \"\") +\n                                '</div>' +\n                                (options.closeButton ?\n                                '<div class=\"k-actionsheet-actions\">' +\n                                    kendo.html.renderButton(`<button tabindex=\"-1\" ${kendo.attr(\"ref-actionsheet-close-button\")}></button>`, { icon: \"x\", fillMode: \"flat\", size: \"large\" }) +\n                                '</div>'\n                                : \"\") +\n                                '</div>' +\n                            (this._isFilterEnabled() ? `<div class=\"k-actionsheet-titlebar-group k-actionsheet-filter\"></div>` : '') +\n                        '</div>',\n                    closeButton: true,\n                    focusOnActivate: false,\n                    fullscreen: list.smallScreenMQL.mediaQueryList.matches,\n                    popup: extend({}, list.options.popup, {\n                        anchor: list.wrapper,\n                        open: list._openHandler.bind(list),\n                        close: list._closeHandler.bind(list),\n                        animation: list.options.animation,\n                        isRtl: support.isRtl(list.wrapper),\n                        autosize: list.options.autoWidth,\n                    }),\n                    deactivate: () => {\n                        this._refreshFloatingLabel();\n                    },\n                    activate: () => {\n                        this._refreshFloatingLabel();\n                    }\n                });\n            } else {\n                list.popup = new ui.Popup(list.list, extend({}, list.options.popup, {\n                    anchor: list.wrapper,\n                    open: list._openHandler.bind(list),\n                    close: list._closeHandler.bind(list),\n                    animation: list.options.animation,\n                    isRtl: support.isRtl(list.wrapper),\n                    autosize: list.options.autoWidth,\n                    deactivate: () => {\n                        this._refreshFloatingLabel();\n                    },\n                    activate: () => {\n                        this._refreshFloatingLabel();\n                    }\n                }));\n\n                list.popup.one(\"open\", list._popupOpen.bind(list));\n            }\n        },\n\n        _allowOpening: function() {\n            return this.options.noDataTemplate || this.treeview.dataSource.flatView().length;\n        },\n\n        _placeholder: function(show) {\n            if (this.span) {\n                this.span.toggleClass(\"k-readonly\", show).text(show ? this.options.placeholder : \"\");\n            }\n        },\n\n        _currentValue: function(dataItem) {\n            var currentValue = this._value(dataItem);\n            if (!currentValue && currentValue !== 0) {\n                currentValue = dataItem;\n            }\n\n            return currentValue;\n        },\n\n        _checkValue: function(dataItem) {\n            var value = \"\";\n            var indexOfValue = -1;\n            var currentValue = this.value();\n            var isMultiple = this.options.tagMode === \"multiple\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n\n                value = this._currentValue(dataItem);\n\n                indexOfValue = currentValue.indexOf(value);\n            }\n\n            if (dataItem.checked) {\n                var alreadyAddedTag = $.grep(this._tags, function( item ) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                if (alreadyAddedTag.length) {\n                    return;\n                }\n\n                var itemToAdd = new ObservableObject(dataItem.toJSON());\n                dataItem._tagUid = itemToAdd.uid;\n                this._tags.push(itemToAdd);\n\n                if (this._tags.length === 1) {\n                    this.span.hide();\n\n                    if (!isMultiple) {\n                        this._multipleTags.push(itemToAdd);\n                    }\n                }\n\n                if (indexOfValue === -1) {\n                    currentValue.push(value);\n                    this.setValue(currentValue);\n                }\n            } else {\n                var itemToRemove = this._tags.find(function(item) {\n                    return item.uid === dataItem._tagUid;\n                });\n\n                var idx = this._tags.indexOf(itemToRemove);\n\n                if (idx !== -1) {\n                    this._tags.splice(idx, 1);\n                } else {\n                    this._treeViewCheckAllCheck(dataItem);\n                    return;\n                }\n\n                if (this._tags.length === 0) {\n                    this.span.show();\n                    if (!isMultiple) {\n                        this._multipleTags.splice(0, 1);\n                    }\n                }\n                if (indexOfValue !== -1) {\n                    currentValue.splice(indexOfValue, 1);\n                    this.setValue(currentValue);\n                }\n            }\n\n            this._treeViewCheckAllCheck(dataItem);\n            if (!this._preventChangeTrigger && !this._valueMethodCalled && !this._noInitialValue) {\n                this.trigger(CHANGE);\n            }\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._updateSelectedOptions();\n        },\n\n        _updateSelectedOptions: function() {\n            if (this.element[0].tagName.toLowerCase() !== 'select') {\n                return;\n            }\n\n            var selectedItems = this._tags;\n            var options = '';\n            var dataItem = null;\n            var value = null;\n\n            if (selectedItems.length) {\n                for (var idx = 0; idx < selectedItems.length; idx++) {\n                    dataItem = selectedItems[idx];\n\n                    value = this._value(dataItem);\n                    options += this._option(value, this._text(dataItem), true);\n                }\n            }\n\n            this.element.html(options);\n        },\n\n        _option: function(dataValue, dataText, selected) {\n            var option = \"<option\";\n\n            if (dataValue !== undefined$1) {\n                dataValue += \"\";\n\n                if (dataValue.indexOf('\"') !== -1) {\n                    dataValue = dataValue.replace(quotRegExp, \"&quot;\");\n                }\n\n                option += ' value=\"' + dataValue + '\"';\n            }\n\n            if (selected) {\n                option += ' selected';\n            }\n\n            option += \">\";\n\n            if (dataText !== undefined$1) {\n                option += kendo.htmlEncode(dataText);\n            }\n\n            return option += \"</option>\";\n        },\n\n        _selectValue: function(dataItem) {\n            var value = \"\";\n            var text = \"\";\n\n            if (dataItem || dataItem === 0) {\n                if (dataItem.level) {\n                    dataItem._level = dataItem.level();\n                }\n                text = this._text(dataItem) || dataItem;\n                value = this._currentValue(dataItem);\n            }\n\n            if (value === null) {\n                value = \"\";\n            }\n            this.setValue(value);\n            this._textAccessor(text, dataItem);\n            this._accessor(value);\n\n            if (!this._preventChangeTrigger && !this._valueMethodCalled) {\n                this.trigger(CHANGE);\n            }\n            this._valueMethodCalled = false;\n\n            if (this.options.autoClose && this.popup.visible()) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n            }\n\n            this.popup.position();\n            this._toggleCloseVisibility();\n        },\n\n        _clearClick: function(e) {\n            e.stopPropagation();\n            this.wrapper.trigger(\"focus\");\n            this._clearTextAndValue();\n        },\n\n        _clearTextAndValue: function() {\n            var shouldTrigger = this._selection._clearValue();\n\n            this.setValue([]);\n            this._clearInput();\n            this._clearText();\n            this.popup.position();\n            this._toggleCloseVisibility();\n            this._refreshFloatingLabel();\n\n            if (shouldTrigger) {\n                this.trigger(CHANGE);\n            }\n        },\n\n        _clearText: function() {\n            if (this.options.placeholder) {\n                this._placeholder(true);\n            } else {\n                if (this.span) {\n                    this.span.html(\"\");\n                }\n            }\n        },\n\n        _inputTemplate: function() {\n            var template = this.options.valueTemplate;\n\n            if (!template) {\n                template = (data) => encode(this._text(data));\n            } else {\n                template = kendo.template(template);\n            }\n\n            this.valueTemplate = template;\n        },\n\n        _assignInstance: function(text, value) {\n            var dataTextField = this.options.dataTextField;\n            var dataItem = {};\n\n            if (dataTextField) {\n                assign(dataItem, dataTextField.split(DOT), text);\n                assign(dataItem, this.options.dataValueField.split(DOT), value);\n                dataItem = new ObservableObject(dataItem);\n            } else {\n                dataItem = text;\n            }\n\n            return dataItem;\n        },\n\n        _textAccessor: function(text, dataItem) {\n            var valueTemplate = this.valueTemplate;\n            var span = this.span;\n\n            if (text === undefined$1) {\n                return span.text();\n            }\n\n            span.removeClass(\"k-readonly\");\n\n            if (!dataItem && ($.isPlainObject(text) || text instanceof ObservableObject)) {\n                dataItem = text;\n            }\n\n            if (!dataItem) {\n                dataItem = this._assignInstance(text, this._accessor());\n            }\n\n            var getElements = function() {\n                return {\n                    elements: span.get(),\n                    data: [ { dataItem: dataItem } ]\n                };\n            };\n\n            try {\n                span.html(valueTemplate(dataItem));\n            } catch (e) {\n                //dataItem has missing fields required in custom template\n                if (span) {\n                    span.html(\"\");\n                }\n            }\n        },\n\n        _accessors: function() {\n            var element = this.element;\n            var options = this.options;\n            var getter = kendo.getter;\n            var textField = element.attr(kendo.attr(\"text-field\"));\n            var valueField = element.attr(kendo.attr(\"value-field\"));\n\n            var getterFunction = function(field) {\n                if (Array.isArray(field)) {\n                    var count = field.length;\n                    var levels = $.map(field, function(x) {\n                        return function(d) { return d[x];};\n                    });\n\n                    return function(dataItem) {\n                        var level = dataItem._level;\n\n                        if (!level && level !== 0) {\n                            return;\n                        }\n\n                        return levels[Math.min(level, count - 1)](dataItem);\n                    };\n                } else {\n                    return getter(field);\n                }\n            };\n\n            if (!options.dataTextField && textField) {\n                options.dataTextField = textField;\n            }\n\n            if (!options.dataValueField && valueField) {\n                options.dataValueField = valueField;\n            }\n\n            options.dataTextField = options.dataTextField || \"text\";\n            options.dataValueField = options.dataValueField || \"value\";\n\n            this._text = getterFunction(options.dataTextField);\n            this._value = getterFunction(options.dataValueField);\n        },\n\n        _accessor: function(value, idx) {\n            return this._accessorInput(value, idx);\n        },\n\n        _accessorInput: function(value) {\n            var element = this.element[0];\n\n            if (value === undefined$1) {\n                return element.value;\n            } else {\n                if (value === null) {\n                    value = \"\";\n                }\n                element.value = value;\n            }\n        },\n\n        _clearInput: function() {\n            var element = this.element[0];\n            element.value = \"\";\n        },\n\n        _clearButton: function() {\n            var clearTitle = encode(this.options.messages.clear);\n\n            if (!this._clear) {\n                this._clear = $('<span unselectable=\"on\" class=\"k-clear-value\" title=\"' + clearTitle + '\">' + kendo.ui.icon(\"x\") + '</span>').attr({\n                    \"tabIndex\": -1\n                });\n            }\n\n            if (this.options.clearButton) {\n                this._clear.insertAfter(this.span.parent());\n            } else {\n                if (!this.options.clearButton) {\n                    this._clear.remove();\n                }\n            }\n        },\n\n        _toggleCloseVisibility: function() {\n            var isReadOnly = this.element.attr(READONLY);\n            var hasValue = (this.value() && !this._isMultipleSelection()) || this.value().length;\n            var valueDoesNotEqualPlaceHolder = this.element.val() && this.element.val() !== this.options.placeholder;\n\n            if ((!isReadOnly && (hasValue || valueDoesNotEqualPlaceHolder))) {\n                this._showClear();\n            } else {\n                this._hideClear();\n            }\n        },\n\n        _showClear: function() {\n            if (this._clear) {\n                this._clear.removeClass(HIDDENCLASS);\n            }\n        },\n\n        _hideClear: function() {\n            if (this._clear) {\n                this._clear.addClass(HIDDENCLASS);\n            }\n        },\n\n        _openHandler: function(e) {\n            this._adjustListWidth();\n\n            if (this.trigger(OPEN)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", true);\n                 this.tree.attr(\"aria-hidden\", false);\n            }\n        },\n\n        _closeHandler: function(e) {\n            if (this.trigger(CLOSE)) {\n                e.preventDefault();\n            } else {\n                 this.wrapper.attr(\"aria-expanded\", false);\n                 this.tree.attr(\"aria-hidden\", true);\n            }\n        },\n\n        _treeview: function() {\n            var that = this;\n\n            if (that.options.adaptiveMode != \"auto\" && that.options.height) {\n                that.tree.css('max-height',that.options.height);\n            }\n            that.tree.attr('id', kendo.guid());\n            that.treeview = new TreeView(that.tree, extend({ size: that.options.size }, that.options.treeview), that);\n            that.dataSource = that.treeview.dataSource;\n\n            that.treeview.bind(\"select\",function(e) {\n                that.trigger(\"select\", e);\n            });\n        },\n\n        _treeViewDataBound: function(e) {\n            if (e.node && this._prev && this._prev.length) {\n                e.sender.expand(e.node);\n            }\n\n            if (this._filtering) {\n                if (!e.node) {\n                    this._filtering = false;\n                }\n\n                if (!this._isMultipleSelection()) {\n                    this._deselectItem(e);\n                }\n                return;\n            }\n\n            if (!this.treeview) {\n                this.treeview = e.sender;\n            }\n\n            if (!e.node) {\n                var rootItems = e.sender.dataSource.data();\n\n                this._checkLoadedItems(rootItems);\n                if (this._noInitialValue) {\n                    this._noInitialValue = false;\n                }\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    var subItems = rootItem.children.data();\n                    this._checkLoadedItems(subItems);\n                }\n            }\n                this.trigger(\"dataBound\", e);\n        },\n\n        _deselectItem: function(e) {\n            var items = [];\n            if (!e.node) {\n                items = e.sender.dataSource.data();\n            } else {\n                var rootItem = e.sender.dataItem(e.node);\n                if (rootItem) {\n                    items = rootItem.children.data();\n                }\n            }\n\n            for (var i = 0; i < items.length; i++) {\n                if (items[i].selected &&\n                    !this._valueComparer(items[i], this.value())) {\n                    items[i].set(\"selected\", false);\n                }\n            }\n        },\n\n        _checkLoadedItems: function(items) {\n            var value = this.value();\n\n            if (!items) {\n                return;\n            }\n\n            for (var idx = 0; idx < items.length; idx++) {\n                this._selection._checkLoadedItem(items[idx], value);\n            }\n        },\n\n        _treeViewCheckAllCheck: function(dataItem) {\n            if (this.options.checkAll && this.checkAll) {\n                this._getAllChecked();\n\n                if (dataItem.checked) {\n                    this._checkCheckAll();\n                } else {\n                    this._uncheckCheckAll();\n                }\n            }\n        },\n\n        _checkCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreChecked) {\n                checkAllCheckbox.prop('checked', true)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _uncheckCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n\n            if (this._allItemsAreUnchecked) {\n                checkAllCheckbox.prop('checked', false)\n                                .prop('indeterminate', false);\n            } else {\n                checkAllCheckbox.prop('indeterminate', true);\n            }\n        },\n\n        _filterHeader: function() {\n            var filterTemplate = '<div class=\"k-list-filter\">' +\n                '<span class=\"k-textbox k-input k-input-md k-rounded-md k-input-solid\" type=\"text\" autocomplete=\"off\">' +\n                    kendo.ui.icon({ icon: \"search\", iconClass: \"k-input-icon\" }) +\n                '</span>' +\n            '</div>';\n\n            if (this.filterInput) {\n                this.filterInput\n                    .off(ns)\n                    .parent()\n                    .remove();\n\n                this.filterInput = null;\n            }\n\n            if (this._isFilterEnabled()) {\n                this._disableCheckChildren();\n\n                this.filterInput = $('<input class=\"k-input-inner\" type=\"text\" />')\n                    .attr({\n                        placeholder: this.element.attr(\"placeholder\"),\n                        title: this.element.attr(\"title\"),\n                        role: \"searchbox\",\n                        \"aria-haspopup\": \"tree\",\n                        \"aria-autocomplete\": \"list\"\n                    });\n\n                this.filterInput.on(\"input\" , this._filterChange.bind(this));\n\n                if (this._hasActionSheet()) {\n                    $(filterTemplate)\n                    .appendTo(this.popup.wrapper.find(\".k-actionsheet-filter\"))\n                    .find(\".k-textbox\")\n                    .append(this.filterInput);\n                } else {\n                    $(filterTemplate)\n                    .insertBefore(this.tree)\n                    .find(\".k-textbox\")\n                    .append(this.filterInput);\n                }\n            }\n        },\n\n        _filterChange: function() {\n            if (this.filterInput) {\n                this._search();\n            }\n        },\n\n        _disableCheckChildren: function() {\n            if (this._isMultipleSelection() && this.options.treeview.checkboxes && this.options.treeview.checkboxes.checkChildren) {\n                this.options.treeview.checkboxes.checkChildren = false;\n            }\n        },\n\n        _checkAll: function() {\n            if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox-label, .k-checkbox\")\n                    .off(ns);\n                this.checkAll.remove();\n\n                this.checkAll = null;\n            }\n\n            if (this._isMultipleSelection() && this.options.checkAll) {\n                var checkAllCheckbox = html.renderCheckBox(extend({}, this.options, {\n                    label: \"Check All\",\n                    rounded: \"medium\"\n                }));\n                this.checkAll = $('<div class=\"k-check-all\">' + checkAllCheckbox + '</div>').insertBefore(this.tree);\n                this.checkAll.find(\".k-checkbox-label\").html(kendo.template(this.options.checkAllTemplate)({ instance: this }));\n                this.checkAll.find(\".k-checkbox\")\n                                .on(\"change\" + ns, this._changeCheckAll.bind(this))\n                                .on(\"keydown\" + ns, this._keydownCheckAll.bind(this));\n                this._disabledCheckedItems = [];\n                this._disabledUnCheckedItems = [];\n\n                this._getAllChecked();\n\n                if (!this._allItemsAreUnchecked) {\n                    this._checkCheckAll();\n                }\n            }\n        },\n\n        _changeCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(isChecked);\n        },\n\n        _updateCheckAll: function(isChecked) {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            this._toggleCheckAllItems(isChecked);\n            checkAllCheckbox.prop('checked', isChecked);\n            if (this._disabledCheckedItems.length && this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', true);\n            } else if (this._disabledCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', !isChecked);\n            } else if (this._disabledUnCheckedItems.length) {\n                checkAllCheckbox.prop('indeterminate', isChecked);\n            } else {\n                checkAllCheckbox.prop('indeterminate', false);\n            }\n            this._disabledCheckedItems = [];\n            this._disabledUnCheckedItems = [];\n        },\n\n        _keydownCheckAll: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n\n            if ((altKey && key === keys.UP) || key === keys.ESC || key === keys.TAB) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.UP) {\n                if (this.filterInput) {\n                    this.filterInput.trigger(\"focus\");\n                } else {\n                    this.wrapper.trigger(\"focus\");\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.DOWN) {\n                if (this.tree && this.tree.is(\":visible\")) {\n                    this.tree.focus();\n                }\n\n                e.preventDefault();\n            }\n\n            if (key === keys.SPACEBAR && (browser.msie || browser.edge)) {\n                this._clickCheckAll();\n                e.preventDefault();\n            }\n        },\n\n        _clickCheckAll: function() {\n            var checkAllCheckbox = this.checkAll.find('.k-checkbox');\n            var isChecked = checkAllCheckbox.prop('checked');\n\n            this._updateCheckAll(!isChecked);\n\n            checkAllCheckbox.trigger(\"focus\");\n\n        },\n        //treeview\n        _dfs: function(items, action, prop) {\n            for (var idx = 0; idx < items.length; idx++) {\n                if (!this[action](items[idx], prop)) {\n                    break;\n                }\n                this._traverceChildren(items[idx], action, prop);\n            }\n        },\n\n        _uncheckItemByUid: function(uid) {\n            this._dfs(this.dataSource.data(), '_uncheckItemEqualsUid', uid);\n        },\n\n        _uncheckItemEqualsUid: function(item, uid) {\n            if (item.enabled !== false && item._tagUid == uid) {\n                item.set(\"checked\", false);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByText: function(text) {\n            this._dfs(this.dataSource.data(), '_itemEqualsText', text);\n        },\n\n        _itemEqualsText: function(item, text) {\n            if (item.enabled !== false && this._text(item) === text) {\n                this.treeview.select(this.treeview.findByUid(item.uid));\n                this._selectValue(item);\n                return false;\n            }\n            return true;\n        },\n\n        _selectItemByValue: function(value) {\n            this._dfs(this.dataSource.data(), '_itemEqualsValue', value);\n        },\n\n        _itemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n\n                this.treeview.select(this.treeview.findByUid(item.uid));\n\n                return false;\n            }\n            return true;\n        },\n\n        _checkItemByValue: function(value) {\n            var items = this.treeview.dataItems();\n            for (var idx = 0; idx < value.length; idx++) {\n                this._dfs(items, '_checkItemEqualsValue', value[idx]);\n            }\n        },\n\n        _checkItemEqualsValue: function(item, value) {\n            if (item.enabled !== false && this._valueComparer(item, value)) {\n                    item.set(\"checked\", true);\n                return false;\n            }\n            return true;\n        },\n\n        _valueComparer: function(item, value) {\n            var itemValue = this._value(item);\n            var itemText;\n\n            if (!this._isNullorUndefined(itemValue)) {\n                if (this._isNullorUndefined(value)) {\n                    return false;\n                }\n\n                var newValue = this._value(value);\n\n                if (newValue) {\n                    return itemValue == newValue;\n                } else {\n                    return itemValue == value;\n                }\n            }\n\n            itemText = this._text(item);\n            if (itemText) {\n                if (this._text(value)) {\n                    return itemText == this._text(value);\n                } else {\n                    return itemText == value;\n                }\n            }\n\n            return false;\n        },\n\n        _isNullorUndefined: function(value) {\n            return value === undefined$1 || value === null;\n        },\n\n        _getAllChecked: function() {\n            this._allCheckedItems = [];\n            this._allItemsAreChecked = true;\n            this._allItemsAreUnchecked = true;\n\n            this._dfs(this.dataSource.data(), '_getAllCheckedItems');\n\n            return this._allCheckedItems;\n        },\n\n        _getAllCheckedItems: function(item) {\n            if (this._allItemsAreChecked) {\n                this._allItemsAreChecked = item.checked;\n            }\n\n            if (this._allItemsAreUnchecked) {\n                this._allItemsAreUnchecked = !item.checked;\n            }\n\n            if (item.checked) {\n                this._allCheckedItems.push(item);\n            }\n            return true;\n        },\n\n        _traverceChildren: function(item, action, prop) {\n            var childrenField = (item._childrenOptions && item._childrenOptions.schema) ? item._childrenOptions.schema.data : null;\n            var subItems = item[childrenField] || item.items || item.children;\n\n            if (!subItems) {\n                return;\n            }\n\n            this._dfs(subItems, action, prop);\n        },\n\n        _toggleCheckAllItems: function(checked) {\n            this._dfs(this.dataSource.data(), '_checkAllCheckItem', checked);\n        },\n\n        _checkAllCheckItem: function(item, checked) {\n            if (item.enabled === false) {\n                if (item.checked) {\n                    this._disabledCheckedItems.push(item);\n                } else {\n                    this._disabledUnCheckedItems.push(item);\n                }\n            } else {\n                item.set(\"checked\", checked);\n            }\n            return true;\n        },\n\n        _isFilterEnabled: function() {\n            var filter = this.options.filter;\n            return filter && filter !== \"none\";\n        },\n\n        _editable: function(options) {\n            var that = this;\n            var element = that.element;\n            var disable = options.disable;\n            var readonly = options.readonly;\n            var wrapper = that.wrapper.add(that.filterInput).off(ns);\n            var dropDownWrapper = that.wrapper.off(HOVEREVENTS);\n            if (that._isMultipleSelection()) {\n                that.tagList.off(CLICK + ns);\n            }\n            if (!readonly && !disable) {\n                element.prop(DISABLED, false).prop(READONLY, false);\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED)\n                    .on(HOVEREVENTS, that._toggleHover);\n\n                that._clear.on(\"click\" + ns, that._clearClick.bind(that));\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX))\n                    .attr(ARIA_DISABLED, false)\n                    .on(\"keydown\" + ns, that._keydown.bind(that))\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n\n                that.wrapper.on(CLICK + ns, that._wrapperClick.bind(that));\n\n                if (this._isMultipleSelection()) {\n                    that.tagList.on(CLICK + ns, \"div.k-chip\", function(e) {\n                        $(e.currentTarget).addClass(FOCUSED);\n                    });\n\n                    that.tagList.on(CLICK + ns, \".k-chip-remove-action .k-icon\", function(e) {\n                        that._removeTagClick(e);\n                    });\n                }\n            } else if (disable) {\n                wrapper.removeAttr(TABINDEX);\n                dropDownWrapper\n                    .addClass(STATEDISABLED);\n            } else {\n                wrapper\n                    .attr(TABINDEX, wrapper.data(TABINDEX));\n\n                dropDownWrapper\n                    .removeClass(STATEDISABLED);\n\n                wrapper\n                    .on(\"focusin\" + ns, that._focusinHandler.bind(that))\n                    .on(\"focusout\" + ns, that._focusoutHandler.bind(that));\n            }\n\n            element.attr(DISABLED, disable)\n                   .attr(READONLY, readonly);\n\n            wrapper.attr(ARIA_DISABLED, disable);\n        },\n\n        _focusinHandler: function() {\n            this.wrapper.addClass(FOCUSED);\n            this._prevent = false;\n        },\n\n        _focusoutHandler: function() {\n            var that = this;\n\n            if (this._isMultipleSelection()) {\n                this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED);\n            }\n            if (!that._prevent) {\n                this.wrapper.removeClass(FOCUSED);\n                that._prevent = true;\n                that.element.trigger(\"blur\");\n            }\n        },\n\n        _toggle: function(open) {\n            open = open !== undefined$1 ? open : !this.popup.visible();\n\n            this[open ? OPEN : CLOSE]();\n        },\n\n        _wrapperClick: function(e) {\n            e.preventDefault();\n\n            this.popup.unbind(\"activate\", this._focusInputHandler);\n            this._focused = this.wrapper;\n            this._prevent = false;\n            this._toggle();\n        },\n\n        _toggleHover: function(e) {\n            $(e.currentTarget).toggleClass(HOVER, e.type === \"mouseenter\");\n        },\n\n        _focusInput: function() {\n            if (this.filterInput) {\n                this.filterInput.trigger(\"focus\");\n            } else if (this.checkAll) {\n                this.checkAll.find(\".k-checkbox\").trigger(\"focus\");\n            } else if (this.tree.is(\":visible\")) {\n                this.tree[0].focus({ preventScroll: true });\n                this._ie11PreventScrollOnFocus();\n            }\n        },\n\n        _ie11PreventScrollOnFocus: function() {\n            if (browser.msie && browser.version == 11) {\n                var popup = this.popup;\n                popup._toggleResize(false);\n                setTimeout(function() {\n                    popup._toggleResize(true);\n                },50);\n            }\n        },\n\n        _keydown: function(e) {\n            var key = e.keyCode;\n            var altKey = e.altKey;\n            var isFilterInputActive;\n            var isWrapperActive;\n            var focused, tagItem;\n\n            var isPopupVisible = this.popup.visible();\n\n            if (this.filterInput) {\n                isFilterInputActive = this.filterInput[0] === activeElement();\n            }\n\n            if (this.wrapper) {\n                isWrapperActive = this.wrapper[0] === activeElement();\n            }\n\n            if (isWrapperActive) {\n                if (key === keys.ESC) {\n                    this._clearTextAndValue();\n                    e.preventDefault();\n                    return;\n                }\n\n                if (this._isMultipleSelection()) {\n                    if (key === keys.LEFT) {\n                        this._focusPrevTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.RIGHT) {\n                        this._focusNextTag();\n                          e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.HOME) {\n                        this._focusFirstTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.END) {\n                        this._focusLastTag();\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.DELETE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n\n                    if (key === keys.BACKSPACE) {\n                        focused = this.tagList.find(DOT + FOCUSED).first();\n                        if (focused.length) {\n                            tagItem = this._tags[focused.index()];\n                            this._removeTag(tagItem);\n                        } else {\n                            focused = this._focusLastTag();\n                            if (focused.length) {\n                                tagItem = this._tags[focused.index()];\n                                this._removeTag(tagItem);\n                            }\n                        }\n                        e.preventDefault();\n                        return;\n                    }\n                }\n            }\n\n\n            if (isFilterInputActive) {\n                if (key === keys.ESC) {\n                    this._clearFilter();\n                }\n\n                if ((key === keys.UP) && !altKey) {\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                }\n\n                if (browser.msie && browser.version < 10) {\n                    if (key === keys.BACKSPACE || key === keys.DELETE) {\n                        this._search();\n                    }\n                }\n\n                if (key === keys.TAB) {\n                    this.close();\n                    this.wrapper.trigger(\"focus\");\n                    e.preventDefault();\n                    return;\n                }\n            }\n\n            if ((altKey && key === keys.UP) || key === keys.ESC) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.ENTER && this._typingTimeout && this.filterInput && isPopupVisible) {\n                e.preventDefault();\n                return;\n            }\n\n            if (key === keys.SPACEBAR && !isFilterInputActive) {\n                this._toggle(!isPopupVisible);\n                e.preventDefault();\n            }\n\n            if ((altKey && key === keys.DOWN) && !isPopupVisible) {\n                this.open();\n                e.preventDefault();\n            }\n\n            if ((key === keys.DOWN) && isPopupVisible) {\n                if (this.filterInput && !isFilterInputActive) {\n                    this.filterInput.trigger(\"focus\");\n                } else if (this.checkAll && this.checkAll.is(\":visible\")) {\n                    this.checkAll.find('input').trigger(\"focus\");\n                } else if (this.tree.is(\":visible\")) {\n                    this.tree[0].focus({ preventScroll: true });\n                    this._ie11PreventScrollOnFocus();\n                }\n                e.preventDefault();\n            }\n\n            if (key === keys.TAB && isPopupVisible) {\n                this.close();\n                this.wrapper.trigger(\"focus\");\n                e.preventDefault();\n            }\n        },\n\n        _focusPrevTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .prev(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusLastTag();\n            }\n        },\n\n        _focusNextTag: function() {\n            var focused = this.tagList.find(DOT + FOCUSED);\n\n            if (focused.length) {\n                var activedescendant = this._activeId;\n\n                focused.first()\n                    .removeClass(FOCUSED)\n                    .removeAttr(\"id\")\n                    .next(CHIP)\n                    .addClass(FOCUSED)\n                    .attr(\"id\", activedescendant);\n\n                this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n            } else {\n                this._focusFirstTag();\n            }\n        },\n\n        _focusFirstTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var firstTag = this.tagList.children(CHIP).first()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return firstTag;\n        },\n\n        _focusLastTag: function() {\n            var activedescendant = this._activeId;\n\n            this._clearDisabledTag();\n\n            var lastTag = this.tagList.children(CHIP).last()\n                .addClass(FOCUSED)\n                .attr(\"id\", activedescendant);\n\n            this.wrapper.attr(\"aria-activedescendant\", activedescendant);\n\n            return lastTag;\n        },\n\n        _clearDisabledTag: function() {\n            this.tagList.find(DOT + FOCUSED).removeClass(FOCUSED).removeAttr(\"id\");\n        },\n\n        _search: function() {\n            var that = this;\n            clearTimeout(that._typingTimeout);\n\n            that._typingTimeout = setTimeout(function() {\n                var value = that.filterInput.val();\n\n                if (that._prev !== value) {\n                    that._prev = value;\n                    that.search(value);\n                }\n\n                that._typingTimeout = null;\n            }, that.options.delay);\n        },\n\n        _clearFilter: function() {\n            if (this.filterInput.val().length) {\n                this.filterInput.val(\"\");\n                this._prev = \"\";\n                this._filtering = true;\n                this.treeview.dataSource.filter({});\n            }\n        },\n\n        _removeTagClick: function(e) {\n            e.stopPropagation();\n            var tagItem = this._tags[$(e.currentTarget.closest(CHIP)).index()];\n            this._removeTag(tagItem);\n        },\n\n        _removeTag: function(tagItem) {\n           if (!tagItem) {\n                return;\n           }\n\n           var uid = tagItem.uid;\n           this._uncheckItemByUid(uid);\n        }\n    });\n\n    function assign(instance, fields, value) {\n        var idx = 0,\n            lastIndex = fields.length - 1,\n            field;\n\n        for (; idx < lastIndex; ++idx) {\n            field = fields[idx];\n\n            if (!(field in instance)) {\n                instance[field] = {};\n            }\n\n            instance = instance[field];\n        }\n\n        instance[fields[lastIndex]] = value;\n    }\n\n    ui.plugin(DropDownTree);\n\n    kendo.cssProperties.registerPrefix(\"DropDownTree\", \"k-picker-\");\n\n    kendo.cssProperties.registerValues(\"DropDownTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    kendo.cssProperties.registerPrefix(\"MultiSelectTree\", \"k-input-\");\n\n    kendo.cssProperties.registerValues(\"MultiSelectTree\", [{\n        prop: \"rounded\",\n        values: kendo.cssProperties.roundedValues.concat([['full', 'full']])\n    }]);\n\n    var SingleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            this._wrapper();\n            this._span();\n        },\n\n        _preselect: function(data) {\n            var dropdowntree = this._dropdowntree;\n\n            dropdowntree._selectValue(data);\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                DOMelement = element[0],\n                wrapper;\n\n            wrapper = element.parent();\n\n            if (!wrapper.is(\"span.k-dropdowntree\")) {\n                wrapper = element.wrap(\"<span />\").parent();\n                wrapper[0].style.cssText = DOMelement.style.cssText;\n                wrapper[0].title = DOMelement.title;\n            }\n\n            dropdowntree._focused = dropdowntree.wrapper = wrapper\n                .addClass(\"k-dropdowntree k-picker\")\n                .addClass(DOMelement.className)\n                .removeClass('input-validation-error')\n                .removeClass('k-invalid')\n                .css(\"display\", \"\")\n                .attr({\n                    accesskey: element.attr(\"accesskey\"),\n                    unselectable: \"on\"\n                });\n\n            element.hide().removeAttr(\"accesskey\");\n        },\n\n        _span: function() {\n            var dropdowntree = this._dropdowntree,\n                wrapper = dropdowntree.wrapper,\n                SELECTOR = \"span.k-input-value-text\",\n                span;\n\n            span = wrapper.find(SELECTOR);\n\n            if (!span[0]) {\n                wrapper.append('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>' +\n                                html.renderButton('<button unselectable=\"on\" class=\"k-input-button\" aria-label=\"select\" tabindex=\"-1\"></button>', extend({}, dropdowntree.options, {\n                                    icon: \"caret-alt-down\",\n                                    shape: \"none\",\n                                    rounded: \"none\"\n                                })))\n                       .append(dropdowntree.element);\n\n                span = wrapper.find(SELECTOR);\n            }\n\n            dropdowntree.span = span;\n            dropdowntree._arrow = wrapper.find(\".k-input-button\");\n            dropdowntree._arrowIcon = dropdowntree._arrow.find(\".k-icon,.k-svg-icon\");\n        },\n\n        _setValue: function(value) {\n            var dropdowntree = this._dropdowntree;\n            var currentValue;\n\n            if (value === undefined$1 || value === null) {\n                currentValue = dropdowntree._values.slice()[0];\n                value = (typeof currentValue === \"object\") ? currentValue : dropdowntree._accessor() || currentValue;\n                return value === undefined$1 || value === null ? \"\" : value;\n            }\n            dropdowntree._valueMethodCalled = true;\n            if (value.length === 0) {\n                dropdowntree._clearTextAndValue();\n                dropdowntree._valueMethodCalled = false;\n                return;\n            }\n\n            dropdowntree._selectItemByValue(value);\n            dropdowntree._toggleCloseVisibility();\n            dropdowntree._refreshFloatingLabel();\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var selectedNode = dropdowntree.treeview.select();\n            var dropdowntreeHasValue = dropdowntree._values.length;\n            var triggerChange = false;\n            if (dropdowntree.treeview.dataItem(selectedNode)) {\n                dropdowntree.treeview.dataItem(selectedNode).set('selected', false);\n                triggerChange = true;\n            } else if (dropdowntreeHasValue > 0) {\n                triggerChange = true;\n            }\n\n            if (!dropdowntree._valueMethodCalled && triggerChange) {\n                return true;\n            }\n\n            return false;\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (!dropdowntree._isNullorUndefined(value) && value !== \"\") {\n                if (dropdowntree._valueComparer(tempItem, value)) {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"selected\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                } else if (tempItem.selected) {\n                    dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n                }\n\n            } else if (!value && tempItem.selected) {\n                dropdowntree.treeview.select(dropdowntree.treeview.findByUid(tempItem.uid));\n            }\n        }\n    });\n\n    var MultipleSelection = kendo.Class.extend({\n        init: function(view) {\n            this._dropdowntree = view;\n        },\n\n        _initWrapper: function() {\n            var dropdowntree = this._dropdowntree;\n\n            this._tagTemplate();\n            dropdowntree.element.attr(\"multiple\", \"multiple\").hide();\n            this._wrapper();\n            dropdowntree._tags = new ObservableArray([]);\n            dropdowntree._multipleTags = new ObservableArray([]);\n            this._tagList();\n            dropdowntree.span = $('<span unselectable=\"on\" class=\"k-input-inner\"><span class=\"k-input-value-text\"></span></span>').appendTo(dropdowntree.wrapper).find(\".k-input-value-text\");\n        },\n\n        _preselect: function(data, value) {\n            var dropdowntree = this._dropdowntree;\n            var valueToSelect = value || dropdowntree.options.value;\n\n            if (!Array.isArray(data) && !(data instanceof kendo.data.ObservableArray)) {\n                data = [data];\n            }\n\n            if ($.isPlainObject(data[0]) || data[0] instanceof kendo.data.ObservableObject || !dropdowntree.options.dataValueField) {\n                dropdowntree.dataSource.data(data);\n\n                dropdowntree.value(valueToSelect);\n            }\n        },\n\n        _tagTemplate: function() {\n            var dropdowntree = this._dropdowntree;\n            var options = dropdowntree.options;\n            var tagTemplate = options.valueTemplate;\n            var isMultiple = options.tagMode === \"multiple\";\n            var singleTag = encode(options.messages.singleTag);\n\n            tagTemplate = tagTemplate ? kendo.template(tagTemplate) : dropdowntree.valueTemplate;\n\n            dropdowntree.valueTemplate = function(data) {\n                return html.renderChip('<span ' +\n                    'class=\"' + ((data.enabled === false) ? \"k-disabled\" : \"\") + '\"' +\n                    ((data.enabled === false) ? 'aria-disabled=\"true\"' : '') +\n                    '>' +\n                    '</span>', $.extend({}, options, {\n                            fillMode: \"solid\",\n                            themeColor: \"base\",\n                            rounded: \"medium\",\n                            attr: {\n                                unselectable: \"on\",\n                                \"aria-keyshortcuts\": \"Enter Delete\",\n                                role: \"option\"\n                            },\n                            text: (isMultiple ? tagTemplate(data) : ('<span unselectable=\"on\" data-bind=\"text: tags.length\"></span>' +\n                            '<span unselectable=\"on\">&nbsp;' + singleTag + '</span>' )),\n                            removable: isMultiple,\n                            removeIcon: \"x-circle\",\n                            removableAttr: {\n                                unselectable: \"on\",\n                                \"aria-hidden\": true,\n                                \"aria-label\": dropdowntree.options.messages.deleteTag,\n                                title: dropdowntree.options.messages.deleteTag\n                            }\n                        }));\n            };\n        },\n\n        _wrapper: function() {\n            var dropdowntree = this._dropdowntree,\n                element = dropdowntree.element,\n                wrapper = element.parent(\".k-multiselecttree\");\n\n            if (!wrapper[0]) {\n                wrapper = element.wrap('<span class=\"k-multiselecttree k-input\" unselectable=\"on\" />').parent();\n                wrapper[0].style.cssText = element[0].style.cssText;\n                wrapper[0].title = element[0].title;\n            }\n\n            dropdowntree.wrapper = wrapper.addClass(element[0].className).css(\"display\", \"\");\n        },\n\n        _tagList: function() {\n            var dropdowntree = this._dropdowntree,\n                tagList = dropdowntree.wrapper.children(\"div.k-input-values\");\n\n            if (!tagList[0]) {\n                var isMultiple = dropdowntree.options.tagMode === \"multiple\";\n                var tagCollection = isMultiple ? \"tags\" : \"multipleTag\";\n\n                tagList = $(html.renderChipList('<div unselectable=\"on\" class=\"k-input-values k-selection-multiple\" data-template=\"tagTemplate\" data-bind=\"source: ' + tagCollection + '\" />', $.extend({ selectable: \"none\" }, dropdowntree.options))).appendTo(dropdowntree.wrapper);\n            }\n\n            dropdowntree.tagList = tagList;\n            dropdowntree.tagList.attr('id', kendo.guid() + \"_tagList\");\n            dropdowntree.wrapper.attr(\"aria-controls\", dropdowntree.tagList.attr('id'));\n            var viewModel = kendo.observable({\n                multipleTag: dropdowntree._multipleTags,\n                tags: dropdowntree._tags,\n                tagTemplate: dropdowntree.valueTemplate\n            });\n            kendo.bind(dropdowntree.tagList, viewModel);\n            dropdowntree.tagList.attr(\"data-stop\", true);\n        },\n\n        _refreshTagListAria: function() {\n            var that = this;\n            if (that.tagList) {\n                html.renderChipList(that.tagList, $.extend({ selectable: that.tagList.items().length === 0 ? \"none\" : \"multiple\" }, that.options));\n            }\n        },\n\n        _setValue: function(value) {\n            var that = this;\n            var dropdowntree = this._dropdowntree;\n            var oldValues = dropdowntree._values;\n            if (value === undefined$1 || value === null) {\n                return dropdowntree._values.slice();\n            }\n\n            dropdowntree.setValue(value);\n            dropdowntree._valueMethodCalled = true;\n            if (value.length) {\n                this._removeValues(oldValues, value);\n\n                dropdowntree._checkItemByValue(value);\n            } else {\n                dropdowntree._clearTextAndValue();\n            }\n\n            dropdowntree._valueMethodCalled = false;\n            dropdowntree._toggleCloseVisibility();\n            that._refreshTagListAria();\n            dropdowntree._refreshFloatingLabel();\n        },\n\n        _removeValues: function(oldValues, value) {\n            var dropdowntree = this._dropdowntree;\n            var removedValues = this._getNewValues(oldValues, value);\n\n            for (var idx = 0; idx < removedValues.length; idx++) {\n                for (var j = 0; j < dropdowntree._tags.length; j++) {\n                    if (dropdowntree._valueComparer(dropdowntree._tags[j],removedValues[idx])) {\n                        dropdowntree._uncheckItemByUid(dropdowntree._tags[j].uid);\n                    }\n                }\n            }\n        },\n\n        _getNewValues: function(oldValues, value) {\n            var removedValues = [];\n\n            for (var idx = 0; idx < oldValues.length; idx++) {\n                if (value.indexOf(oldValues[idx]) === -1) {\n                    removedValues.push(oldValues[idx]);\n                }\n            }\n\n            return removedValues;\n        },\n\n        _clearValue: function() {\n            var dropdowntree = this._dropdowntree;\n            var tagsArray = dropdowntree._tags.slice();\n\n            for (var idx = 0; idx < tagsArray.length; idx++) {\n                var uid = tagsArray[idx].uid;\n                dropdowntree._preventChangeTrigger = true;\n                dropdowntree._uncheckItemByUid(uid);\n            }\n\n            if (tagsArray.length) {\n                dropdowntree._preventChangeTrigger = false;\n                if (!dropdowntree._valueMethodCalled) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _checkLoadedItem: function(tempItem, value) {\n            var dropdowntree = this._dropdowntree;\n\n            if (dropdowntree._noInitialValue && tempItem.checked) {\n                dropdowntree._checkValue(tempItem);\n                return;\n            }\n\n            if ((value.length || this._isDataSourceSet) &&\n                (value.indexOf(dropdowntree._currentValue(tempItem)) !== -1 || value.indexOf(tempItem)) !== -1 &&\n                !this._findTag(dropdowntree._currentValue(tempItem))) {\n                if (tempItem.checked) {\n                    dropdowntree._checkValue(tempItem);\n                } else {\n                    dropdowntree._preventChangeTrigger = true;\n                    tempItem.set(\"checked\", true);\n                    dropdowntree._preventChangeTrigger = false;\n                }\n            }\n        },\n\n        _findTag: function(tempItemValue) {\n            var dropdowntree = this._dropdowntree;\n\n            return dropdowntree._tags.find(function(item) {\n                return dropdowntree._valueComparer(item, tempItemValue);\n            });\n        }\n    });\n\n    kendo.ui.DropDownTree.SingleSelection = SingleSelection;\n    kendo.ui.DropDownTree.MultipleSelection = MultipleSelection;\n\n})(window.kendo.jQuery);\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}