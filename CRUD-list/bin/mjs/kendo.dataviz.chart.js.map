{"version":3,"file":"kendo.dataviz.chart.js","names":["$","window","kendo","dataviz","Class","isNumber","datavizConstants","constants","MAX_VALUE","MIN_VALUE","VALUE","DATE","CENTER","TOP","BOTTOM","LEFT","WHITE","CIRCLE","X","Y","RIGHT","BLACK","COORD_PRECISION","END","START","DEFAULT_PRECISION","ARC","defined","getter","isArray","ChartElement","Point","Box","alignPathToPixel","setDefaultOptions","isString","inArray","isFunction","valueOrDefault","isObject","parseDate","deepExtend","last","eventElement","TextBox","getTemplate","ShapeElement","getSpacing","CurveProcessor","append","styleValue","CategoryAxis","BoxElement","Title","round","limitValue","cycleIndex","grep","elementStyles","autoTextColor","rad","bindEvents","services","unbindEvents","support","drawing","Path","Animation","AnimationFactory","Group","Circle","MultiPath","Color","geometry","GeometryPoint","GeometryCircle","transform","ChartAxis","extend","init","axis","this","_axis","options","value","point","getCategory","getValue","slot","from","to","limit","range","valueRange","findAxisByName","name","axes","idx","length","prepareUserOptions","ChartPane","pane","visual","chartsVisual","chartContainer","_pane","ChartPlotArea","plotArea","_plotArea","backgroundVisual","_bgVisual","countNumbers","values","count","i","num","Aggregates","min","Math","max","sum","sumOrNull","result","avg","first","getField","field","row","get","SeriesBinder","_valueFields","_otherFields","_nullValue","_undefinedValue","register","seriesTypes","valueFields","otherFields","this$1$1","type","_makeValue","undefined","canonicalFields","series","concat","bindPoint","pointIx","item","fields","data","pointData","Array","fieldData","slice","_bindFromArray","srcValueFields","sourceFields","srcPointFields","_bindFromObject","initialValue","array","object","srcFields","fieldName","srcFieldName","sourceFieldName","push","current","percentRegex","standardDeviationRegex","RegExp","ErrorRangeCalculator","errorValue","initGlobalRanges","deviationMatch","exec","valueGetter","createValueGetter","average","getAverage","deviation","getStandardDeviation","multiple","parseFloat","errorRange","low","high","globalRange","indexOf","standardError","getStandardError","binder","index","OBJECT","getErrorRange","pointValue","Error","percentValue","abs","sqrt","isSample","total","squareDifferenceSum","pow","browser","INITIAL_ANIMATION_DURATION","FADEIN","BORDER_BRIGHTNESS","START_SCALE","msie","ERROR_LOW_FIELD","ERROR_HIGH_FIELD","X_ERROR_LOW_FIELD","X_ERROR_HIGH_FIELD","Y_ERROR_LOW_FIELD","Y_ERROR_HIGH_FIELD","ZERO","INTERPOLATE","GAP","ABOVE","BELOW","SMOOTH","STEP","AREA","BAR","BOX_PLOT","BUBBLE","BULLET","CANDLESTICK","COLUMN","DONUT","FUNNEL","PYRAMID","HEATMAP","HORIZONTAL_WATERFALL","LINE","OHLC","PIE","POLAR_AREA","POLAR_LINE","POLAR_SCATTER","RADAR_AREA","RADAR_COLUMN","RADAR_LINE","RANGE_AREA","RANGE_BAR","RANGE_COLUMN","SCATTER","SCATTER_LINE","VERTICAL_AREA","VERTICAL_BOX_PLOT","VERTICAL_BULLET","VERTICAL_LINE","VERTICAL_RANGE_AREA","WATERFALL","EQUALLY_SPACED_SERIES","TRENDLINE_EXPONENTIAL","TRENDLINE_LINEAR","TRENDLINE_LOGARITHMIC","TRENDLINE_MOVING_AVERAGE","TRENDLINE_POLYNOMIAL","TRENDLINE_POWER","TRENDLINE_SERIES","LEGEND_ITEM_CLICK","LEGEND_ITEM_HOVER","LEGEND_ITEM_LEAVE","SERIES_CLICK","SERIES_HOVER","SERIES_OVER","SERIES_LEAVE","PLOT_AREA_CLICK","PLOT_AREA_HOVER","PLOT_AREA_LEAVE","DRAG","DRAG_END","DRAG_START","ZOOM_START","ZOOM","ZOOM_END","SELECT_START","SELECT","SELECT_END","RENDER","SHOW_TOOLTIP","HIDE_TOOLTIP","PANE_RENDER","CHART_POINT_ROLE","CHART_POINT_CLASSNAME","CHART_POINT_ROLE_DESCRIPTION","LEGEND_ITEM_ROLE","LEGEND_ITEM_CLASSNAME","LEGEND_ITEM_ARIA_ROLE_DESCRIPTION","LOGARITHMIC","CATEGORY","INSIDE_END","INSIDE_BASE","OUTSIDE_END","MOUSEWHEEL","MOUSEWHEEL_DELAY","DRILLDOWN","DRILLDOWN_FIELD","MIN_MOVING_AVERAGE_PERIOD","GLASS","TOOLTIP_OFFSET","LINE_MARKER_SIZE","MOUSEWHEEL_ZOOM_RATE","ErrorBarBase","isVertical","chart","fn","call","reflow","targetBox","linePoints","endCaps","valueBox","getAxis","getSlot","centerBox","center","capsWidth","getCapsWidth","capValue","x","y","capStart","capEnd","y1","y2","box","x1","x2","boxSize","width","height","floor","createVisual","rect","toRect","sender","getSender","color","line","createDefaultVisual","defaultVisual","lineOptions","stroke","dashType","moveTo","lineTo","animation","delay","zIndex","CategoricalErrorBar","seriesValueAxis","anyHasZIndex","elements","appendIfNotNull","element","areNumbers","segmentVisible","visible","pointVisibility","bindSegments","points","categoriesCount","seriesCount","categories","equalsIgnoreCase","a","b","toLowerCase","evalOptions","context","state","dryRun","defaults","depth","needsEval","excluded","property","hasOwnProperty","propValue","filterSeriesByType","types","currentSeries","dateCache","WeakMap","parseDateCategory","category","intlService","date","set","hasGradientOverlay","overlay","gradient","hasValue","isDateAxis","axisOptions","sampleCategory","dateCategory","Date","singleItemOrArray","AREA_REGEX","hasValue$1","convertableToNumber","findNext","ref","pointHasValue","outPoint","start","dir","getter$$1","hasItem","createOutOfRangePoints","hasMinPoint","hasMaxPoint","minPoint","maxPoint","missingValues","test","stack","seriesMissingValues","_outOfRangeMinPoint","_outOfRangeMaxPoint","CategoricalChart","chartService","categoryAxis","seriesCategoryAxis","valueAxisRanges","categoryPoints","seriesPoints","seriesOptions","_evalSeries","render","traverseDataPoints","addValue","bind","pointOptions","seriesIx","pointType","prototype","vertical","invertAxes","plotValue","isStacked100","categoryIx","otherValues","categorySum","other","otherStack","group","plotRange","startValue","isStacked","positive","prevValue","isStackedBar","defaultStack","isNonGroupStack","STRING","otherValue","valueAxis","axisCrossingValue","categoryAxisCrossingValue","stackLimits","axisName","stackName","pIx","isFinite","updateStackRange","chartSeries","limitsCache","key","limits","errorTotals","negative","sparseArrayLimits","addErrorBar","errorBars","lowValue","highValue","seriesErrorRanges","addPointErrorBar","stackedErrorRange","updateRange","errorBar","createPoint","owner","noteText","dataItem","evalPointOptions","_defaults","doEval","axisRange","namedValueAxes","categorySlots","chartPoints","categorySlot","valueSlot","pointSlot","aboveAxis","stackValue","percentage","reflowPoint","reflowCategories","clip","limitPoints","limitPoint","limitedSlot","limitSlot","equals","reverse","axisCrossingValues","axisIndex","slotX","slotY","callback","_outOfRangeCallback","seriesIx$1","currentCategory","categoryAt","seriesIx$2","outOfRangePoint","formatPointValue","format","auto","PointEventsMixin","click","e","trigger","eventArgs","hover","over","out","runningTotal","originalEvent","NoteMixin","createNote","notes","text","label","note","Note","guid","random","id","toString","LinePoint","tooltipTracking","_id","markers","_rendered","size","marker","createMarker","createLabel","labels","createLabelElement","getLabelText","align","vAlign","margin","left","right","labelTemplate","formatValue","getAriaLabelText","ariaTemplate","getAriaTemplate","markerBorder","background","border","brightness","toHex","rotation","opacity","accessibilityOptions","ariaLabel","accessibility","markerBox","_childBox","childBox","clone","reflowLabel","noteTargetBox","anchor","position","alignTo","createHighlight","highlight","defaultColor","shadow","getElement","highlightVisual","highlightVisualArgs","paddingBox","halfSize","Rect","createFocusHighlight","markerOptions","highlightOptions","padding","tooltipAnchor","clipBox","overlaps","verticalAlign","horizontalAlign","horizontal","overlapsBox","unclipElements","noclip","focusVisual","toggleFocusHighlight","clearFocusFromVisual","getIndex","HIGHLIGHT_ZINDEX","tabIndex","role","className","ariaRoleDescription","LineSegment","toGeometryPoints","customVisual","segmentVisual","fromPoints","closed","close","aliasFor","coords","parent","getNearestPoint","StepLineMixin","calculateStepPoints","justified","stepAxis","stepDir","previousPoint","toGeometryPoint","stepPoint","lintPoint","StepLineSegment","SplineSegment","segments","process","curve","apply","LineChartMixin","renderSegments","lastSegment","_segments","sortedPoints","sortPoints","pointCount","createSegment","_addSegment","children","unshift","segment","nearestPoint","target","allPoints","nearestPointDistance","pointDistance","distanceTo","ClipAnimation","setup","_setEnd","step","pos","interpolateValue","topRight","bottomRight","suspend","setX","resume","duration","ClipAnimationMixin","createAnimation","root","getRoot","transitions","clipPath","fromRect","_setChildrenAnimation","animationPoints","LineChart","style","supportsPointInactiveOpacity","AreaSegment","prevSegment","stackPoints","createFill","fill","createStroke","lineCap","strokeSegments","_strokeSegments","createStrokeSegments","segmentsFromPoints","stackSegments","createStackSegments","map","Segment","hasStackSegment","fillSegments","hasStackSegments","fillToAxes","fillPath","crossingValue","endSlot","firstPoint","lastPoint","end","StepAreaSegment","SplineAreaSegment","curveProcessor","controlOut","controlIn","AreaChart","previousSegment","_gapStackPoints","_stackPoints","stackPoint","startIdx","endIdx","pointOffset","currentSeriesIx","_previousSegmentPoint","gapStackPoint","_createGapStackPoint","segmentIx","seriesIdx","AxisGroupRangeTracker","axisRanges","update","chartAxisRanges","chartRange","reset","query","BarLabel","content","textBox","textOptions","labelBox","contentBox","top","bottom","alignToClipBox","parentBox","addAccessibilityAttributesToVisual","ariaChecked","AccessibilityAttributesMixin","Bar","rectVisual","createRect","strokeOpacity","path","getBorderColor","lineJoin","createGradientOverlay","baseColor","borderWidth","pad","_brightness","borderColor","forEach","forEachReverse","ClusterLayout","rtl","gap","spacing","slots","slotSize","child","StackWrap","positionAxis","childrenCount","currentChild","snapTo","wrap","BarChart","clusterType","stackType","stackOrDefault","labelOptions","negativeColor","cluster","getStackWrap","stackWrap","stackGroup","wraps","_stackGroup","zeroSlot","stackAxis","childrenLength","_setAnimationOptions","pointVisual","origin","Candlestick","ocSlot","open","lhSlot","realBody","mid","lines","reflowNote","_mainVisual","mainVisual","createOverlay","createBody","createLines","container","body","drawLines","lineStyle","normalColor","meanPoints","medianPoints","whiskerPoints","tooltip","CandlestickChart","splitValue","downColor","parts","BoxPlot","whiskerSlot","boxSlot","q1","q3","reflowBoxSlot","lower","upper","reflowWhiskerSlot","medianSlot","median","mean","meanSlot","calcMeanPoints","calcWhiskerPoints","calcMedianPoints","renderOutliers","outliers","outerFence","outlierValue","extremes","markersBorder","shape","reflowOutliers","move","whiskers","CROSS","VerticalBoxPlot","BoxPlotChart","filterOutliers","items","ScatterErrorBar","seriesAxes","ScatterChart","_initFields","xAxisRanges","yAxisRanges","valueErrorField","lowField","highField","createMissingValue","intl","xAxisName","xAxis","yAxisName","yAxis","xAxisRange","yAxisRange","namedXAxes","axisX","namedYAxes","axisY","ref$1","Bubble","radius","highlightGroup","createGradient","stops","offset","BubbleChart","_maxSize","negativeValues","updateBubblesSize","pointsCount","animationOptions","minR","minSize","maxR","maxSize","minArea","PI","areaRatio","area","Target","Bullet","targetValueSlot","targetSlotX","targetSlotY","targetSlot","bodyVisual","create","BulletChart","seriesItem","wrapData","bulletOptions","bullet","isNaN","BaseTooltip","getStyle","pointColor","backgroundColor","font","paddingTop","paddingBottom","paddingLeft","paddingRight","show","tooltipOptions","isDark","notify","hide","destroy","CrosshairTooltip","crosshair","formatService","initAxisName","showAt","stickyMode","formattedValue","dateFormats","baseUnit","getAnchor","ref_options","lineBox","bbox","bottomLeft","translate","topLeft","Crosshair","moveLine","lineEnd","getBox","dim","lineStart","pointCategoryIndex","axisLineBox","currentAxis","ChartContainer","shouldClip","_clipBox","chartsBox","clipRect","unclipLabels","stackRoot","charts","j","isStackRoot","Pane","ID","createTitle","titleOptions","title","buildTitle","appendAxis","appendAxisAt","splice","appendChart","empty","removeAxis","i$1","removeChart","pop","visualStyle","renderComplete","createGridLines","clipRoot","allAxes","vGridLines","hGridLines","gridLines","altAxis","refresh","clear","renderVisual","notifyRender","axisValueField","length$1","idx$1","axis$1","lineBox$1","service","getService","paneIndex","shrinkToFit","PlotAreaBase","initFields","initSeries","legend","crosshairs","originalOptions","originalSeries","_bindCache","createPanes","createCrosshairs","cached","paneDefaults","paneOptions","panes","panesLength","currentPane","crosshairOptions","currentCrosshair","removeCrosshairs","hideCrosshairs","findPane","matchingPane","findPointPane","containsPoint","axisToRemove","filteredAxes","chartToRemove","filteredCharts","addToLegend","inactiveItems","inactiveItemsLabels","seriesVisible","visibleInLegend","itemLabelOptions","markerColor","active","groupAxes","xAxes","yAxes","paneIx","paneAxes","axisIx","any","groupSeriesByPane","seriesByPane","seriesPaneName","filterVisibleSeries","unpad","reflowPanes","detachLabels","reflowAxes","reflowCharts","redraw","panesArray","cleanGradients","crossingAxes","crossingValues","valuesToAdd","defaultValue","alignAxisTo","targetAxis","targetCrossingValue","slotEdge","targetEdge","axisBox","alignAxes","xAnchor","yAnchor","xAnchorCrossings","yAnchorCrossings","leftAnchors","rightAnchors","topAnchors","bottomAnchors","paneId","paneAnchor","anchorCrossings","_overlap","_mirrored","mirror","paneYAnchor","pane$1","paneId$1","visible$1","anchor$1","anchorCrossings$1","shrinkAxisWidth","axisGroupBox","overflowX","shrink","shrinkAxisHeight","shrinked","overflowY","fitAxes","offsetX","paneBox","offsetY","currentAxis$1","reflowPaneAxes","autoRotateAxisLabels","groupedAxes","rotated","allPaneAxes","autoRotateLabels","chartPane","remainingHeight","autoHeightPanes","percents","parseInt","currentPane$1","i$2","currentPane$2","backgroundBox","axesCount","axisA","axisB","chartsBoxes","boxes","addBackgroundPaths","multipath","paths","backgroundContainsPoint","bg","appendVisual","pointsByCategoryIndex","categoryIndex","pointsBySeriesIndex","seriesIndex","filterPoints","pointsByPointIndex","pointIndex","pointsBySeriesName","findPoint","paneByPoint","detachAxisGroupLabels","labelAxisCount","labelAxis","createLabelAxis","onAxis","edge","plotBands","isTrendline","trendlineFactory","createTrendlineSeries","modifiedSeries","forSeries","seriesByName","for","trendlineSeries","INHERIT","filter","find","getFirstPoint","getPointBelow","_getNextPoint","_pointsByVertical","getPointAbove","getPointToTheRight","_pointsByHorizontal","getPointToTheLeft","getPointsFunc","increment","nextIndex","loopPoints","direction","at","basePoint","isSingleAxis","some","reduce","acc","PlotAreaEventsMixin","_dispatchEvent","SeriesAggregator","defaultAggregates","seriesFields","_seriesFields","rootAggregate","aggregate","_series","_binder","fieldAggregate","canonicalName","aggregatePoints","srcPoints","_bindPoints","firstDataItem","dataItems","srcValues","_bindField","setValue","parentObj","split","shift","DefaultAggregates","aggregates","seriesType","RangeBar","fromOptions","toOptions","labelFrom","labelTo","RangeBarChart","plotLimits","RangeLinePoint","AUTO","RangeAreaPoint","initLabelsFormat","fromPoint","toPoint","copyFields","fromBox","toBox","positionLabels","fromLabelPosition","toLabelPosition","RangeAreaSegment","toPoints","fromSegments","toPath","fromPath","SplineRangeAreaSegment","createCurveSegments","StepRangeAreaSegment","RangeAreaChart","fromSlot","toSlot","OHLCPoint","oPoints","cPoints","lhPoints","oSlot","cSlot","OHLCChart","WaterfallSegment","WaterfallChart","createSegments","totalCategories","summary","prevPoint","registry","impl","String","calculateSlope","sourceValues","slope","intercept","xy","xMin","Number","xMax","xValue","yValue","checkAllPositive","every","getTrendlineData","valueMapper","totalRange","totalRangeIndices","currentRange","currentRangeIndices","ceil","log","valueGetter$1","valueGetter$2","calculateMovingAverage","period","averagePoints","lastValue","valueGetter$3","MIN_ORDER","MAX_ORDER","calculatePolynomial","order","k","X$$1","Matrix","Y$$1","coefficients","Xt","transpose","B","multiply","inverse","linearRegression","n","valueGetter$4","valueGetter$5","seriesValues","exp","getData","categoryField","getData$1","getData$2","trendline","calculatePoints","getData$3","getData$4","getData$5","AREA_SERIES","OUT_OF_RANGE_SERIES","CategoricalPlotArea","namedCategoryAxes","valueAxisRangeTracker","_seriesPointsCache","_currentPointsCache","stack100","createCategoryAxes","aggregateCategories","createCategoryAxesLabels","createCharts","createValueAxes","filterSeries","trendlineAggregateForecast","forecast","before","after","srcSeries","aggregateSeries","paneSeries","visibleSeries","groups","groupSeriesByCategoryAxis","groupIx","createChartGroup","createAreaChart","createRangeAreaChart","createBarChart","createRangeBarChart","createBulletChart","createCandlestickChart","createBoxPlotChart","createOHLCChart","createWaterfallChart","createLineChart","processedSeries","axisPane","dataLength","_seriesMax","outOfRangePoints","clearSeriesPointsCache","seriesSourcePoints","categoriesHash","srcCategories","dateAxis","srcData","indexCategories","totalIndex","aggregator","categoryItem","categoryIdx","totalCount","categoriesToAdd","defaultPaneName","stackableChartOptions","anyStackedSeries","s","categoryAxes","unique","axisSeries","groupSeries","firstSeries","barChart","rangeColumnChart","bulletChart","lineChart","areaChart","rangeAreaChart","waterfallChart","axisRequiresRounding","categoryAxisName","categoryAxisIndex","centeredSeries","seriesAxis","aggregatedAxis","createLabels","definitions","isJustified","_forecast","DateCategoryAxis","primaryAxis","tracker","defaultRange","baseOptions","roundToMajorUnit","defaultAxisRange","LogarithmicAxis","NumericAxis","eventType","_eventCoordinates","pointPane","updateAxisOptions","_siblingsBySeriesIndex","_siblingsByPointIndex","siblings","sort","_getSeriesCompareFn","_isInStackedSeries","sortableSeries","stackableSeries","targetOptions","axesOptions","Highlight","_points","arrayPoints","toggleHighlight","hasHighlight","togglePointHighlight","toggleHandler","toggle","preventDefault","_defaultPrevented","isHighlighted","acceptKey","mouseKey","event","ctrlKey","shiftKey","altKey","toChartAxisRanges","ranges","Pannable","_active","_panAxes","pan","delta","lock","updatedAxes","limitRange","ZoomSelection","createElement","marquee","_marquee","document","marqueeColor","appendChild","removeElement","parentNode","removeChild","setStyles","styles","zoomPane","_zoomPane","_elementOffset","_zoomPaneClipBox","pageX","pageY","chartElement","elementOffset","_selectionPosition","elementOffset$$1","selectionPosition","_updateAxisRanges","zoom","pointsRange","startLocation","location","util","limitValue$1","valueOrDefault$1","MousewheelZoom","rate","updateRanges","zoomRange","LegendLayout","Layout","lineSpacing","orientation","VERTICAL","HORIZONTAL","alignItems","legendItem","clippedBBox","rectToBox","addVisual","DEFAULT_MARKER_SIZE","LegendItemMarker","cursor","markerHighlightOptions","ChartElement$1","initUserOptions","translateChildren","dx","dy","arguments$1","arguments","renderChildren","childVisual","stackVisual","visuals","sibling","insert","traverse","closest","match","matched","_highlight","focusHighlight","_focusHighlight","rootBackground","highlightColor","focusHighlightOptions","gradientOptions","Point$1","rotate","degrees","theta","cosT","cos","sinT","sin","cx","cy","onCircle","angle","radians","Box$1","wrapPoint","arrayPoint","targetCenter","dw","dh","expand","getHash","join","r1","rotatePoint","r2","r3","r4","hasSize","alignment","c1","c2","sizeFunc","WIDTH","HEIGHT","BoxElement$1","hasSetSize","reflowPaddingBox","hasBox","ShapeElement$1","halfWidth","halfHeight","TRIANGLE","ROUNDED_RECT","borderRadius","setCornerRadius","visualOptions","MarkerLineArea","LegendItemLine","centerY","createHighlightLine","createHighlightMarker","highlightLine","highlightMarker","RECT","LegendItemSquare","LegendItem","createContainer","FloatElement","markerWrap","createMarkerArea","_marker","_createMarker","_createLine","_createMarkerLine","_createSquare","_highlightOptions","_line","_markerLineArea","_square","_highlightMarkers","_toggleHighlight","_restoreMarkers","h","eventSink","_itemOverlay","widget","args","_legendItemHover","_unsetActivePoint","CUSTOM","Legend","createContainers","createLegendTitle","createItems","userAlign","hasTitle","itemsContainer","innerElement","markersOptions","itemOptions","hasItems","getItems","legendBox","containerCustomReflow","containerReflow","alignTarget","containerBox","createTitleLayout","appendTitleLayoutContent","layout","Boolean","POINTER","SQUARE","PlotAreaFactory","_registry","entry","trendlines","createDiv","classNames","closestHandle","hasClasses","Selection","observer","_dateAxis","initOptions","offsetHeight","createElements","_index","onPane","wrapper","selection","leftMask","rightMask","leftHandle","rightHandle","selectionStyles","leftHandleHeight","rightHandleHeight","borderLeftWidth","borderRightWidth","cssText","obj","mousewheel","_mousewheelHandler","_mousewheel","_domEvents","DomEventsBuilder","stopPropagation","_start","_move","_end","tap","_tap","press","_press","gesturestart","_gesturestart","gesturechange","_gesturechange","gestureend","_gestureend","clearTimeout","_mwTimeout","_state","_rangeEventArgs","_value","_pointInPane","modelCoords","_toModelCoordinates","eventCoordinates","handle","bodyRect","getBoundingClientRect","inBody","moveTarget","addClass","oldRange","span","scale","removeClass","rightClick","which","mousewheelDelta","setTimeout","touch","touches","p0","p1","_slot","leftMaskWidth","rightMaskWidth","distance","fromValue","toValue","zDir","relative","minDelta","maxDelta","Tooltip","_current","SharedTooltip","tooltipPoints","_slotAnchor","_defaultAnchor","shared","categoryText","categoryFormat","slotCenter","BarChartAnimation","fromScale","abort","scaleX","scaleY","BubbleAnimation","easing","FadeInAnimation","fadeTo","PieAnimation","ScatterLineChart","missingValue","getScatterTrendlineData","samplingInterval","diff","relativeValue","autoMajorUnit","valueGetter$6","scatterValueGetter","xValueLimits","valueGetter$7","logValueGetter","valueGetter$8","scatterRegistry","getData$6","getData$7","getData$8","getData$9","getData$10","getData$11","XYPlotArea","xAxisRangeTracker","yAxisRangeTracker","filteredSeries","createScatterChart","createScatterLineChart","createBubbleChart","createAxes","xAxisOptions","yAxisOptions","createXYAxis","inferredDate","namedAxes","isLog","typeSamples","seriesAxisName","firstPointValue","DateValueAxis","xAxesOptions","yAxesOptions","axisPane$1","xValues","yValues","currentValue","updateAxisOptions$1","PieSegment","sector","labelText","themeLabels","theme","seriesDefaults","animationDelay","labelsOptions","labelsDistance","middle","lp","labelHeight","labelWidth","startAngle","innerRadius","endAngle","createSegmentVisual","borderOptions","fallbackFill","userSpace","singleSegment","ShapeBuilder","createRing","midAndle","tooltipAlignment","RAD_30","RAD_60","sine","cosine","DEFAULT_FONT","PieChartMixin","createLegendItem","legendOptions","pointVisible","legendItems","PieChart","seriesColors","colorsCount","anglePerValue","constantAngle","currentAngle","explode","Ring","evalSegmentOptions","segmentOptions","seriesConfigs","minWidth","halfMinWidth","defaultPadding","newBox","newBoxCenter","boxCenter","leftSideLabels","rightSideLabels","seriesConfig","setRadius","labelComparator","leftLabelsReflow","rightLabelsReflow","distances","distanceBetweenLabels","distributeLabels","lr","firstBox","secondBox","remaining","_takeDistance","reflowLabels","amount","available","boxX","labelsCount","labelDistance","boxY","hAlignLabel","connectors","_connectorLines","connectorsColor","connectorLine","centerPoint","sr","crossing","intersection","pointInCircle","space","autoFit","pieCenter","bboxBottom","reverseValue","originalX","sector_center","t","a1","a2","b1","b2","uat","ub","ua","PiePlotArea","createPieChart","pieChart","DonutSegment","DonutChart","holeSize","totalSize","seriesWithoutSize","currentSeries$1","DonutPlotArea","createDonutChart","donutChart","PolarPlotAreaBase","createPolarAxis","createValueAxis","polarAxis","axisType","axisDefaultRange","valueAxisOptions","RadarLogarithmicAxis","RadarNumericAxis","valueAxisBox","heightDiff","PolarScatterChart","valueRadius","PolarLineChart","SplinePolarAreaSegment","_polarAxisCenter","PolarAreaSegment","centerSegment","PolarAreaChart","_hasMissingValuesGap","xComparer","PolarPlotArea","PolarAxis","majorGridLines","minorGridLines","scatterChart","RadarLineChart","seriesSegments","groupBySeriesIx","isFirstDataPoint","isLastDataPoint","SplineRadarAreaSegment","RadarAreaSegment","RadarAreaChart","RadarSegment","RadarClusterLayout","slotAngle","slotSector","RadarStackLayout","childSector","RadarBarChart","RadarPlotArea","RadarCategoryAxis","_hasBarCharts","_isStacked100","chartOptions","FunnelSegment","chartBox","createPath","FunnelChart","labelPadding","dynamicSlopeReflow","totalHeight","firstSegment","maxSegment","lastUpperSide","previousOffset","previousHeight","nextSegment","nextPercentage","segmentSpacing","constantSlopeReflow","decreasingWidth","neckRatio","finalNarrow","dynamicSlope","dynamicHeight","PyramidChart","FunnelPlotArea","createChart","chartType","HeatmapPoint","labelColor","isRoundRect","halfBorderWidth","HeatmapChart","setRange","minLightnessOffset","parseColor","hsl","toHSL","l","toCss","colorScale","indexX","indexY","xRange","yRange","ref$2","xIndex","yIndex","xIn","yIn","HeatmapPlotArea","bindCategories","createAxisLabels","xCategories","createHashSet","yCategories","has","add","createHeatmapChart","firstCategory","updateAxisOptions$2","normalizedOffset","axisXItems","_getPointAxisXIndex","targetXValue","compareValues","_getPointAxisYIndex","axisYItems","targetYValue","_getPointAxisIndex","findIndex","axisItem","dateEquals","COLOR","FIRST","MAX","MIN","NOTE_TEXT","errorLow","errorHigh","AXIS_NAMES","MOUSEMOVE","CONTEXTMENU","MOUSELEAVE","KEYDOWN","FOCUS","BLUR","Chart","userOptions","themeOptions","observers","addObserver","ChartService","_initElement","_originalOptions","_theme","_initTheme","_focusState","_initHandlers","_initSurface","FontLoader","preloadFonts","fontLoaded","_destroyed","_redraw","_attachEvents","_setElementClass","getAttribute","setAttribute","firstChild","seriesCopies","aliases","alias","resolveAxisAliases","applyDefaults","applySeriesColors","getSize","chartArea","offsetWidth","resize","force","currentSize","_size","_resize","_selections","_destroySelections","_setupSelection","_noTransitionsRedraw","paneName","_model","findPaneByName","findPaneByIndex","seriesName","categoryName","pointByCategoryName","togglePointsHighlight","showTooltip","_sharedTooltip","_tooltip","hideTooltip","surface","_surfaceWrap","elementSize","renderAs","_destroySurface","Surface","_surfaceMouseenterHandler","_surfaceMouseleaveHandler","model","_getModel","_destroyView","_setElementAccessibilityAttributes","_legend","draw","play","_createTooltip","_createPannable","_createZoomSelection","_createMousewheelZoom","triggerPaneRender","_navState","_cancelDomEvents","_redrawFocusHighlight","ref_focusState","legendInFocus","preserveHighlight","_focusElement","_getFocusedLegendItem","description","exportVisual","exportOptions","currentOptions","clearMissingValues","pannable","_pannable","zoomable","_zoomSelection","_mousewheelZoom","_toggleDragZoomEvents","allowDrag","requiresHandlers","allowZoom","_dragZoomEnabled","touchAction","_touchAction","_toggleDomEvents","drag","domEvents","toggleDrag","toggleZoom","_createSharedTooltip","axisDefaults","themeAxisDefaults","mapAxisOptions","axisColor","applyAxisDefaults","seriesLength","commonDefaults","themeSeriesDefaults","commonThemeDefaults","cleanupNestedSeriesDefaults","applySeriesDefaults","colors","seriesColor","_createPlotArea","RootElement","_modelOptions","subtitle","orderTitles","DEFAULT_WIDTH","DEFAULT_HEIGHT","skipSeries","selections","select","_selectStart","_select","_selectEnd","_clickHandler","_click","_keydownHandler","_keydown","_focusHandler","_focus","_blurHandler","_blur","_mousedownHandler","_mousedown","_mouseleaveHandler","_mouseleave","_mouseover","_mouseout","_mousemove","throttle","removeObserver","eventNames","_toDocumentCoordinates","_updateDrilldownPoint","_resetDrilldownPoint","_focusPoint","_startDrilldown","_focusLegendItem","isDefaultPrevented","obj$1","_shouldAttachMouseMove","_hoveredPoint","_plotAreaHovered","_hasInactiveOpacity","_activeChartInstance","_applySeriesOpacity","_updateSeriesOpacity","cancel","_stopChartHandlers","_gestureDistance","_clearFocusedElement","suspendTracking","_zooming","resumeTracking","mousewheelZoom","previousGestureDistance","scaleDelta","_drawingChartElement","leave","_startNavigation","_suppressHover","panning","ranges$1","translateRange","_endNavigation","_mousewheelZoomRate","totalDelta","scaleRange","chartEvent","_getChartElement","eventTarget","coordinates","_elementPadding","_padding","clientX","clientY","inverseTransform","elementScale","invert","drawingElement","sharedTooltip","_startHover","_trackSharedTooltip","_propagateClick","handlingTap","_isLegendBeforeChart","legendPosition","_preventInitialPointFocus","_focusFirstLegendItem","_focusFirstPoint","focusedElement","TAB","isLegendBeforeChart","_navigatePoints","_navigateLegend","ESCAPE","_hideTooltip","ENTER","focusState","moveFocus","focusedPoint","_displayTooltip","ARROW_RIGHT","ARROW_LEFT","ARROW_DOWN","ARROW_UP","itemsLength","cycleFunc","focusedLegendItemIndex","cycleUp","cycleDown","_hasFocus","ownerDocument","activeElement","_focusChart","focus","omitHighlight","_setElementActiveDescendant","_showSeriesInactiveOpacity","_showInactiveOpacity","_clearElementActiveDescendant","_pseudoFocusedElement","_createPseudoFocusedElement","ARIA_ACTIVE_DESCENDANT","remove","removeAttribute","pseudoElement","checked","_hideInactiveOpacity","activePoint","_activePoint","_updateHoveredPoint","_displayInactiveOpacity","multipleSeries","highlightPoints","chartInstance","_chartInstanceFromPoint","inactivePoints","_getInactivePoints","_getInactiveOpacityForSeries","_getAllPointsOfType","constructor","hoveredPoint","drilldown","_drilldownState","resetOpacity","currSeries","defaultOpacity","_getDefaultOpacityForSeries","inactiveOpacity","activeSeries","hasDefaultInactiveOpacity","hasInactiveOpacity","defaultInactiveOpacity","DEFAULT_SERIES_OPACITY","_mouseMoveTrackHandler","_mouseMoveTracking","seriesPoint","_trackCrosshairs","overPlotArea","_tooltipCategoryIx","_sharedHighlight","pointArgs","hoverArgs","hideElements","keepTooltipOpen","_deferRedraw","_clearRedrawTimeout","_redrawTimeout","clearInterval","autoBind","bindCategoryAxisFromSeries","uniqueCategories","Set","seriesOnAxis","hasCategoryBinding","seriesWithData","categorySamples","getTime","time","_isBindable","transitionsState","updateMouseMoveHandler","applyOptions","setOptions","setDirection","setIntlService","noTransitionsRedraw","unbind","bar","column","rangeColumn","verticalLine","pie","donut","verticalArea","scatter","scatterLine","bubble","candlestick","ohlc","boxPlot","verticalBullet","polarArea","polarLine","radarArea","radarLine","waterfall","DATA_FIELDS","fieldValue","originalValue","nullValue","jQuery","undefined$1","Widget","ui","ChartBreadcrumb","_attachChartEvents","_renderBreadcrumb","events","rootItem","icon","showIcon","breadcrumb","_onChartDrilldown","_onChartDrilldownLevelChange","deferred","resetDrilldownLevel","getKendoChart","breadcrumbElement","Breadcrumb","_onBreadcrumbClick","level","plugin","NS","outerWidth","_outerWidth","outerHeight","_outerHeight","KendoChart","DataSource","InstanceObserver","template","encode","htmlEncode","MOUSELEAVE_NS","AXIS_LABEL_CLICK","DRILLDOWN_LEVEL_CHANGE","NOTE_CLICK","NOTE_HOVER","NOTE_LEAVE","DOCUMENT_ELEMENT","documentElement","CHANGE","DATABOUND","LEAVE","Observable","UserEvents","global","multiTouch","fastTap","ChartInstanceObserver","handlerMap","legendItemClick","dataSource","_seriesVisibility","SeriesVisibilityState","_initDataSource","_showWatermarkOverlay","instance","_instance","_bindSeries","_bindCategories","dimensions","_setEvents","_getThemeOptions","_sourceSeries","setDataSource","_hasDataSource","_onDataChanged","_dataChangeHandler","_hasData","fetch","off","_destroyCrosshairTooltips","findSeries","ChartSeries","findSeriesByName","_createSeries","findSeriesByIndex","originalChartArea","_seriesOptions","on","relatedTarget","autoHide","themeName","SASS_THEMES","autoTheme","themes","_initChart","_createChart","_isRtl","_onInit","_initTooltip","tooltips","_crosshairTooltips","_getCrosshairTooltip","_showTooltip","_onRender","_copyMembers","names","_events","_tooltipleave","_onLegendItemClick","_legendItemClick","save","_onDrilldown","drilldownSeriesFactory","Promise","then","resolved","_onDrilldownData","drilldownSeries","Object","assign","_bindData","groupedSeries","view","grouped","seriesVisibility","read","applyByGroup","applyByIndex","seriesData","_groupIx","categoriesData","_bindCategoryAxis","isRtl","css","proxyMembers","createProxyMember","nameTemplate","seriesClone","legacyTemplate","groupNameTemplate","logToConsole","_groupValue","ExportMixin","PDFMixin","action","persistSeriesVisibility","saveState","geom","attr","applyStylesFromKendoAttributes","mobileScrollerSelector","_mobileScroller","downEvent","applyEventMap","_closeTooltipHandler","_closeTooltip","_clearShowTimeout","sharedTemplate","colspan","colorMarker","nameColumn","sharedTemplateIterator","_offset","_ensureElement","stop","animate","showTimeout","_measure","zoomLevel","viewport","scrollTop","pageYOffset","scrollLeft","pageXOffset","movable","_fit","fakeContainer","normalizeStyle","toggleClass","_sharedContent","_pointContent","html","forceHide","_hideElement","is","appendTo","contains","fadeOut","always","tooltipTemplate","xLow","xHigh","yLow","yHigh","viewPortSize","output","_chart","_options","_filterPoints","_clearFields","toggleVisibility","_filterData","__meta__","depends","features","kendo$1"],"sources":["kendo.dataviz.chart.js"],"mappings":"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","sourcesContent":["import './kendo.core.js';\nimport './kendo.color.js';\nimport './kendo.drawing.js';\nimport './kendo.dataviz.core.js';\nimport './kendo.breadcrumb.js';\nimport './kendo.data.js';\nimport './kendo.dataviz.themes.js';\nimport './kendo.userevents.js';\nimport './kendo.icons.js';\n\n/***********************************************************************\n * WARNING: this file is auto-generated.  If you change it directly,\n * your modifications will eventually be lost.  The source code is in\n * `kendo-charts` repository, you should make your changes there and\n * run `src-modules/sync.sh` in this repository.\n */\n\n(function($) {\n/* eslint-disable */\n\nwindow.kendo.dataviz = window.kendo.dataviz || {};\nvar dataviz = kendo.dataviz;\nvar Class = dataviz.Class;\nvar isNumber = dataviz.isNumber;\nvar datavizConstants = dataviz.constants;\nvar MAX_VALUE = datavizConstants.MAX_VALUE;\nvar MIN_VALUE = datavizConstants.MIN_VALUE;\nvar VALUE = datavizConstants.VALUE;\nvar DATE = datavizConstants.DATE;\nvar CENTER = datavizConstants.CENTER;\nvar TOP = datavizConstants.TOP;\nvar BOTTOM = datavizConstants.BOTTOM;\nvar LEFT = datavizConstants.LEFT;\nvar WHITE = datavizConstants.WHITE;\nvar CIRCLE = datavizConstants.CIRCLE;\nvar X = datavizConstants.X;\nvar Y = datavizConstants.Y;\nvar RIGHT = datavizConstants.RIGHT;\nvar BLACK = datavizConstants.BLACK;\nvar COORD_PRECISION = datavizConstants.COORD_PRECISION;\nvar END = datavizConstants.END;\nvar START = datavizConstants.START;\nvar DEFAULT_PRECISION = datavizConstants.DEFAULT_PRECISION;\nvar ARC = datavizConstants.ARC;\nvar defined = dataviz.defined;\nvar getter = dataviz.getter;\nvar isArray = dataviz.isArray;\nvar ChartElement = dataviz.ChartElement;\nvar Point = dataviz.Point;\nvar Box = dataviz.Box;\nvar alignPathToPixel = dataviz.alignPathToPixel;\nvar setDefaultOptions = dataviz.setDefaultOptions;\nvar isString = dataviz.isString;\nvar inArray = dataviz.inArray;\nvar isFunction = dataviz.isFunction;\nvar valueOrDefault = dataviz.valueOrDefault;\nvar isObject = dataviz.isObject;\nvar parseDate = dataviz.parseDate;\nvar deepExtend = dataviz.deepExtend;\nvar last = dataviz.last;\nvar eventElement = dataviz.eventElement;\nvar TextBox = dataviz.TextBox;\nvar getTemplate = dataviz.getTemplate;\nvar ShapeElement = dataviz.ShapeElement;\nvar getSpacing = dataviz.getSpacing;\nvar CurveProcessor = dataviz.CurveProcessor;\nvar append = dataviz.append;\nvar styleValue = dataviz.styleValue;\nvar CategoryAxis = dataviz.CategoryAxis;\nvar BoxElement = dataviz.BoxElement;\nvar Title = dataviz.Title;\nvar round = dataviz.round;\nvar limitValue = dataviz.limitValue;\nvar cycleIndex = dataviz.cycleIndex;\nvar grep = dataviz.grep;\nvar elementStyles = dataviz.elementStyles;\nvar autoTextColor = dataviz.autoTextColor;\nvar rad = dataviz.rad;\nvar bindEvents = dataviz.bindEvents;\nvar services = dataviz.services;\nvar unbindEvents = dataviz.unbindEvents;\nvar support = kendo.support;\nvar drawing = kendo.drawing;\nvar Path = drawing.Path;\nvar Animation = drawing.Animation;\nvar AnimationFactory = drawing.AnimationFactory;\nvar Group = drawing.Group;\nvar Circle = drawing.Circle;\nvar MultiPath = drawing.MultiPath;\nvar Color = kendo.Color;\nvar geometry = kendo.geometry;\nvar GeometryPoint = geometry.Point;\nvar GeometryCircle = geometry.Circle;\nvar transform = geometry.transform;\n\nvar ChartAxis = Class.extend({\n    init: function(axis) {\n\n        this._axis = axis;\n        this.options = axis.options;\n    },\n\n    value: function(point) {\n        var axis = this._axis;\n        var value = axis.getCategory ? axis.getCategory(point) : axis.getValue(point);\n\n        return value;\n    },\n\n    slot: function(from, to, limit) {\n        if (limit === void 0) { limit = true; }\n\n        return this._axis.slot(from, to, limit);\n    },\n\n    range: function() {\n        return this._axis.range();\n    },\n\n    valueRange: function() {\n        return this._axis.valueRange();\n    }\n});\n\nfunction findAxisByName(name, axes) {\n    for (var idx = 0; idx < axes.length; idx++) {\n        if (axes[idx].options.name === name) {\n            axes[idx].prepareUserOptions();\n            return new ChartAxis(axes[idx]);\n        }\n    }\n}\n\nvar ChartPane = kendo.Class.extend({\n    init: function(pane) {\n        this.visual = pane.visual;\n        this.chartsVisual = pane.chartContainer.visual;\n        this._pane = pane;\n    },\n\n    findAxisByName: function(name) {\n        return findAxisByName(name, this._pane.axes);\n    }\n});\n\nvar ChartPlotArea = Class.extend({\n    init: function(plotArea) {\n\n        this._plotArea = plotArea;\n        this.visual = plotArea.visual;\n        this.backgroundVisual = plotArea._bgVisual;\n    }\n});\n\nfunction countNumbers(values) {\n    var length = values.length;\n    var count = 0;\n\n    for (var i = 0; i < length; i++) {\n        var num = values[i];\n        if (isNumber(num)) {\n            count++;\n        }\n    }\n\n    return count;\n}\n\nvar Aggregates = {\n    min: function(values) {\n        var length = values.length;\n        var min = MAX_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                min = Math.min(min, value);\n            }\n        }\n\n        return min === MAX_VALUE ? values[0] : min;\n    },\n\n    max: function(values) {\n        var length = values.length;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                max = Math.max(max, value);\n            }\n        }\n\n        return max === MIN_VALUE ? values[0] : max;\n    },\n\n    sum: function(values) {\n        var length = values.length;\n        var sum = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (isNumber(value)) {\n                sum += value;\n            }\n        }\n\n        return sum;\n    },\n\n    sumOrNull: function(values) {\n        var result = null;\n\n        if (countNumbers(values)) {\n            result = Aggregates.sum(values);\n        }\n\n        return result;\n    },\n\n    count: function(values) {\n        var length = values.length;\n        var count = 0;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                count++;\n            }\n        }\n\n        return count;\n    },\n\n    avg: function(values) {\n        var count = countNumbers(values);\n        var result = values[0];\n\n        if (count > 0) {\n            result = Aggregates.sum(values) / count;\n        }\n\n        return result;\n    },\n\n    first: function(values) {\n        var length = values.length;\n\n        for (var i = 0; i < length; i++) {\n            var value = values[i];\n            if (value !== null && defined(value)) {\n                return value;\n            }\n        }\n\n        return values[0];\n    }\n};\n\nfunction getField(field, row) {\n    if (row === null) {\n        return row;\n    }\n\n    var get = getter(field, true);\n    return get(row);\n}\n\nvar SeriesBinder = Class.extend({\n    init: function() {\n\n        this._valueFields = {};\n        this._otherFields = {};\n        this._nullValue = {};\n        this._undefinedValue = {};\n    },\n\n    register: function(seriesTypes, valueFields, otherFields) {\n        var this$1$1 = this;\n        if (valueFields === void 0) { valueFields = [ VALUE ]; }\n        if (otherFields === void 0) { otherFields = {}; }\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            var type = seriesTypes[i];\n\n            this$1$1._valueFields[type] = valueFields;\n            this$1$1._otherFields[type] = otherFields;\n            this$1$1._nullValue[type] = this$1$1._makeValue(valueFields, null);\n            this$1$1._undefinedValue[type] = this$1$1._makeValue(valueFields, undefined);\n        }\n    },\n\n    canonicalFields: function(series) {\n        return this.valueFields(series).concat(this.otherFields(series));\n    },\n\n    valueFields: function(series) {\n        return this._valueFields[series.type] || [ VALUE ];\n    },\n\n    otherFields: function(series) {\n        return this._otherFields[series.type] || [ VALUE ];\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var data = series.data;\n        var pointData = defined(item) ? item : data[pointIx];\n        var result = { valueFields: { value: pointData } };\n        var valueFields = this.valueFields(series);\n        var otherFields = this._otherFields[series.type];\n        var fields, value;\n\n        if (pointData === null) {\n            value = this._nullValue[series.type];\n        } else if (!defined(pointData)) {\n            value = this._undefinedValue[series.type];\n        } else if (Array.isArray(pointData)) {\n            var fieldData = pointData.slice(valueFields.length);\n            value = this._bindFromArray(pointData, valueFields);\n            fields = this._bindFromArray(fieldData, otherFields);\n        } else if (typeof pointData === \"object\") {\n            var srcValueFields = this.sourceFields(series, valueFields);\n            var srcPointFields = this.sourceFields(series, otherFields);\n\n            value = this._bindFromObject(pointData, valueFields, srcValueFields);\n            fields = this._bindFromObject(pointData, otherFields, srcPointFields);\n        }\n\n        if (defined(value)) {\n            if (valueFields.length === 1) {\n                result.valueFields.value = value[valueFields[0]];\n            } else {\n                result.valueFields = value;\n            }\n        }\n\n        result.fields = fields || {};\n\n        return result;\n    },\n\n    _makeValue: function(fields, initialValue) {\n        var value = {};\n        var length = fields.length;\n\n        for (var i = 0; i < length; i++) {\n            var fieldName = fields[i];\n            value[fieldName] = initialValue;\n        }\n\n        return value;\n    },\n\n    _bindFromArray: function(array, fields) {\n        var value = {};\n\n        if (fields) {\n            var length = Math.min(fields.length, array.length);\n\n            for (var i = 0; i < length; i++) {\n                value[fields[i]] = array[i];\n            }\n        }\n\n        return value;\n    },\n\n    _bindFromObject: function(object, fields, srcFields) {\n        if (srcFields === void 0) { srcFields = fields; }\n\n        var value = {};\n\n        if (fields) {\n            var length = fields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = fields[i];\n                var srcFieldName = srcFields[i];\n                if (srcFieldName !== null) {\n                    value[fieldName] = getField(srcFieldName, object);\n                }\n            }\n        }\n\n        return value;\n    },\n\n    sourceFields: function(series, canonicalFields) {\n        var sourceFields = [];\n\n        if (canonicalFields) {\n            var length = canonicalFields.length;\n\n            for (var i = 0; i < length; i++) {\n                var fieldName = canonicalFields[i];\n                var sourceFieldName = fieldName === VALUE ? \"field\" : fieldName + \"Field\";\n\n                sourceFields.push(series[sourceFieldName] !== null ? (series[sourceFieldName] || fieldName) : null);\n            }\n        }\n\n        return sourceFields;\n    }\n});\n\nSeriesBinder.current = new SeriesBinder();\n\nvar STD_ERR = \"stderr\";\nvar STD_DEV = \"stddev\";\nvar percentRegex = /percent(?:\\w*)\\((\\d+)\\)/;\nvar standardDeviationRegex = new RegExp(\"^\" + STD_DEV + \"(?:\\\\((\\\\d+(?:\\\\.\\\\d+)?)\\\\))?$\");\n\nvar ErrorRangeCalculator = Class.extend({\n    init: function(errorValue, series, field) {\n\n        this.initGlobalRanges(errorValue, series, field);\n    },\n\n    initGlobalRanges: function(errorValue, series, field) {\n        var data = series.data;\n        var deviationMatch = standardDeviationRegex.exec(errorValue);\n\n        if (deviationMatch) {\n            this.valueGetter = this.createValueGetter(series, field);\n\n            var average = this.getAverage(data);\n            var deviation = this.getStandardDeviation(data, average, false);\n            var multiple = deviationMatch[1] ? parseFloat(deviationMatch[1]) : 1;\n            var errorRange = { low: average.value - deviation * multiple, high: average.value + deviation * multiple };\n\n            this.globalRange = function() {\n                return errorRange;\n            };\n        } else if (errorValue.indexOf && errorValue.indexOf(STD_ERR) >= 0) {\n            this.valueGetter = this.createValueGetter(series, field);\n            var standardError = this.getStandardError(data, this.getAverage(data));\n\n            this.globalRange = function(value) {\n                return { low: value - standardError, high: value + standardError };\n            };\n        }\n    },\n\n    createValueGetter: function(series, field) {\n        var data = series.data;\n        var binder = SeriesBinder.current;\n        var valueFields = binder.valueFields(series);\n        var item = defined(data[0]) ? data[0] : {};\n        var valueGetter;\n\n        if (isArray(item)) {\n            var index = field ? valueFields.indexOf(field) : 0;\n            valueGetter = getter(\"[\" + index + \"]\");\n        } else if (isNumber(item)) {\n            valueGetter = getter();\n        } else if (typeof item === datavizConstants.OBJECT) {\n            var srcValueFields = binder.sourceFields(series, valueFields);\n            valueGetter = getter(srcValueFields[valueFields.indexOf(field)]);\n        }\n\n        return valueGetter;\n    },\n\n    getErrorRange: function(pointValue, errorValue) {\n        var low, high, value;\n\n        if (!defined(errorValue)) {\n            return null;\n        }\n\n        if (this.globalRange) {\n            return this.globalRange(pointValue);\n        }\n\n        if (isArray(errorValue)) {\n            low = pointValue - errorValue[0];\n            high = pointValue + errorValue[1];\n        } else if (isNumber(value = parseFloat(errorValue))) {\n            low = pointValue - value;\n            high = pointValue + value;\n        } else if ((value = percentRegex.exec(errorValue))) {\n            var percentValue = pointValue * (parseFloat(value[1]) / 100);\n            low = pointValue - Math.abs(percentValue);\n            high = pointValue + Math.abs(percentValue);\n        } else {\n            throw new Error(\"Invalid ErrorBar value: \" + errorValue);\n        }\n\n        return { low: low, high: high };\n    },\n\n    getStandardError: function(data, average) {\n        return this.getStandardDeviation(data, average, true) / Math.sqrt(average.count);\n    },\n\n    getStandardDeviation: function(data, average, isSample) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var total = isSample ? average.count - 1 : average.count;\n        var squareDifferenceSum = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                squareDifferenceSum += Math.pow(value - average.value, 2);\n            }\n        }\n\n        return Math.sqrt(squareDifferenceSum / total);\n    },\n\n    getAverage: function(data) {\n        var this$1$1 = this;\n\n        var length = data.length;\n        var sum = 0;\n        var count = 0;\n\n        for (var idx = 0; idx < length; idx++) {\n            var value = this$1$1.valueGetter(data[idx]);\n            if (isNumber(value)) {\n                sum += value;\n                count++;\n            }\n        }\n\n        return {\n            value: sum / count,\n            count: count\n        };\n    }\n});\n\nvar browser = support.browser || {};\n\nvar INITIAL_ANIMATION_DURATION = 600;\nvar FADEIN = \"fadeIn\";\n\nvar GLASS = \"glass\";\nvar BORDER_BRIGHTNESS = 0.8;\nvar TOOLTIP_OFFSET = 5;\nvar START_SCALE = browser.msie ? 0.001 : 0;\nvar ERROR_LOW_FIELD = \"errorLow\";\nvar ERROR_HIGH_FIELD = \"errorHigh\";\nvar X_ERROR_LOW_FIELD = \"xErrorLow\";\nvar X_ERROR_HIGH_FIELD = \"xErrorHigh\";\nvar Y_ERROR_LOW_FIELD = \"yErrorLow\";\nvar Y_ERROR_HIGH_FIELD = \"yErrorHigh\";\nvar LINE_MARKER_SIZE = 8;\nvar ZERO = \"zero\";\nvar INTERPOLATE = \"interpolate\";\nvar GAP = \"gap\";\nvar ABOVE = \"above\";\nvar BELOW = \"below\";\n\nvar SMOOTH = \"smooth\";\nvar STEP = \"step\";\n\nvar AREA = \"area\";\nvar BAR = \"bar\";\nvar BOX_PLOT = \"boxPlot\";\nvar BUBBLE = \"bubble\";\nvar BULLET = \"bullet\";\nvar CANDLESTICK = \"candlestick\";\nvar COLUMN = \"column\";\nvar DONUT = \"donut\";\nvar FUNNEL = \"funnel\";\nvar PYRAMID = \"pyramid\";\nvar HEATMAP = \"heatmap\";\nvar HORIZONTAL_WATERFALL = \"horizontalWaterfall\";\nvar LINE = \"line\";\nvar OHLC = \"ohlc\";\nvar PIE = \"pie\";\nvar POLAR_AREA = \"polarArea\";\nvar POLAR_LINE = \"polarLine\";\nvar POLAR_SCATTER = \"polarScatter\";\nvar RADAR_AREA = \"radarArea\";\nvar RADAR_COLUMN = \"radarColumn\";\nvar RADAR_LINE = \"radarLine\";\nvar RANGE_AREA = \"rangeArea\";\nvar RANGE_BAR = \"rangeBar\";\nvar RANGE_COLUMN = \"rangeColumn\";\nvar SCATTER = \"scatter\";\nvar SCATTER_LINE = \"scatterLine\";\nvar VERTICAL_AREA = \"verticalArea\";\nvar VERTICAL_BOX_PLOT = \"verticalBoxPlot\";\nvar VERTICAL_BULLET = \"verticalBullet\";\nvar VERTICAL_LINE = \"verticalLine\";\nvar VERTICAL_RANGE_AREA = \"verticalRangeArea\";\nvar WATERFALL = \"waterfall\";\nvar EQUALLY_SPACED_SERIES = [\n    BAR, COLUMN, OHLC, CANDLESTICK, BOX_PLOT, VERTICAL_BOX_PLOT,\n    BULLET, RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL\n];\n\nvar TRENDLINE_EXPONENTIAL = 'exponentialTrendline';\nvar TRENDLINE_LINEAR = 'linearTrendline';\nvar TRENDLINE_LOGARITHMIC = 'logarithmicTrendline';\nvar TRENDLINE_MOVING_AVERAGE = 'movingAverageTrendline';\nvar TRENDLINE_POLYNOMIAL = 'polynomialTrendline';\nvar TRENDLINE_POWER = 'powerTrendline';\nvar TRENDLINE_SERIES = [\n    TRENDLINE_EXPONENTIAL,\n    TRENDLINE_LINEAR,\n    TRENDLINE_LOGARITHMIC,\n    TRENDLINE_MOVING_AVERAGE,\n    TRENDLINE_POLYNOMIAL,\n    TRENDLINE_POWER\n];\n\nvar LEGEND_ITEM_CLICK = \"legendItemClick\";\nvar LEGEND_ITEM_HOVER = \"legendItemHover\";\nvar LEGEND_ITEM_LEAVE = \"legendItemLeave\";\nvar SERIES_CLICK = \"seriesClick\";\nvar SERIES_HOVER = \"seriesHover\";\nvar SERIES_OVER = \"seriesOver\";\nvar SERIES_LEAVE = \"seriesLeave\";\nvar PLOT_AREA_CLICK = \"plotAreaClick\";\nvar PLOT_AREA_HOVER = \"plotAreaHover\";\nvar PLOT_AREA_LEAVE = \"plotAreaLeave\";\nvar DRAG = \"drag\";\nvar DRAG_END = \"dragEnd\";\nvar DRAG_START = \"dragStart\";\nvar ZOOM_START = \"zoomStart\";\nvar ZOOM = \"zoom\";\nvar ZOOM_END = \"zoomEnd\";\nvar SELECT_START = \"selectStart\";\nvar SELECT = \"select\";\nvar SELECT_END = \"selectEnd\";\nvar RENDER = \"render\";\nvar SHOW_TOOLTIP = \"showTooltip\";\nvar HIDE_TOOLTIP = \"hideTooltip\";\nvar PANE_RENDER = \"paneRender\";\n\nvar CHART_POINT_ROLE = \"graphics-symbol\";\nvar CHART_POINT_CLASSNAME = \"k-chart-point\";\nvar CHART_POINT_ROLE_DESCRIPTION = \"Point\";\nvar LEGEND_ITEM_ROLE = \"checkbox\";\nvar LEGEND_ITEM_CLASSNAME = \"k-chart-legend-item\";\nvar LEGEND_ITEM_ARIA_ROLE_DESCRIPTION = \"Legend item\";\n\nvar LOGARITHMIC = \"log\";\nvar CATEGORY = \"category\";\n\nvar INSIDE_END = \"insideEnd\";\nvar INSIDE_BASE = \"insideBase\";\nvar OUTSIDE_END = \"outsideEnd\";\n\nvar MOUSEWHEEL = \"wheel\";\nvar MOUSEWHEEL_DELAY = 150;\nvar MOUSEWHEEL_ZOOM_RATE = 0.3;\n\nvar DRILLDOWN = \"drilldown\";\nvar DRILLDOWN_FIELD = \"drilldown\";\n\nvar MIN_MOVING_AVERAGE_PERIOD = 2;\n\nvar constants = {\n\tINITIAL_ANIMATION_DURATION: INITIAL_ANIMATION_DURATION,\n\tFADEIN: FADEIN,\n\tLEGEND_ITEM_CLICK: LEGEND_ITEM_CLICK,\n\tLEGEND_ITEM_HOVER: LEGEND_ITEM_HOVER,\n\tLEGEND_ITEM_LEAVE: LEGEND_ITEM_LEAVE,\n\tSERIES_CLICK: SERIES_CLICK,\n\tSERIES_HOVER: SERIES_HOVER,\n\tSERIES_OVER: SERIES_OVER,\n\tSERIES_LEAVE: SERIES_LEAVE,\n\tGLASS: GLASS,\n\tBORDER_BRIGHTNESS: BORDER_BRIGHTNESS,\n\tTOOLTIP_OFFSET: TOOLTIP_OFFSET,\n\tSTART_SCALE: START_SCALE,\n\tERROR_LOW_FIELD: ERROR_LOW_FIELD,\n\tERROR_HIGH_FIELD: ERROR_HIGH_FIELD,\n\tX_ERROR_LOW_FIELD: X_ERROR_LOW_FIELD,\n\tX_ERROR_HIGH_FIELD: X_ERROR_HIGH_FIELD,\n\tY_ERROR_LOW_FIELD: Y_ERROR_LOW_FIELD,\n\tY_ERROR_HIGH_FIELD: Y_ERROR_HIGH_FIELD,\n\tLINE_MARKER_SIZE: LINE_MARKER_SIZE,\n\tINTERPOLATE: INTERPOLATE,\n\tZERO: ZERO,\n\tSMOOTH: SMOOTH,\n\tSTEP: STEP,\n\tCATEGORY: CATEGORY,\n\tFUNNEL: FUNNEL,\n\tPYRAMID: PYRAMID,\n\tBAR: BAR,\n\tCANDLESTICK: CANDLESTICK,\n\tPIE: PIE,\n\tCOLUMN: COLUMN,\n\tAREA: AREA,\n\tVERTICAL_BULLET: VERTICAL_BULLET,\n\tBOX_PLOT: BOX_PLOT,\n\tOHLC: OHLC,\n\tWATERFALL: WATERFALL,\n\tLINE: LINE,\n\tBULLET: BULLET,\n\tVERTICAL_LINE: VERTICAL_LINE,\n\tVERTICAL_AREA: VERTICAL_AREA,\n\tRANGE_AREA: RANGE_AREA,\n\tVERTICAL_RANGE_AREA: VERTICAL_RANGE_AREA,\n\tRANGE_COLUMN: RANGE_COLUMN,\n\tVERTICAL_BOX_PLOT: VERTICAL_BOX_PLOT,\n\tRANGE_BAR: RANGE_BAR,\n\tHORIZONTAL_WATERFALL: HORIZONTAL_WATERFALL,\n\tSCATTER: SCATTER,\n\tSCATTER_LINE: SCATTER_LINE,\n\tBUBBLE: BUBBLE,\n\tRADAR_AREA: RADAR_AREA,\n\tRADAR_LINE: RADAR_LINE,\n\tRADAR_COLUMN: RADAR_COLUMN,\n\tPOLAR_LINE: POLAR_LINE,\n\tPOLAR_AREA: POLAR_AREA,\n\tPOLAR_SCATTER: POLAR_SCATTER,\n\tRENDER: RENDER,\n\tPLOT_AREA_CLICK: PLOT_AREA_CLICK,\n\tPLOT_AREA_HOVER: PLOT_AREA_HOVER,\n\tPLOT_AREA_LEAVE: PLOT_AREA_LEAVE,\n\tLOGARITHMIC: LOGARITHMIC,\n\tDRAG: DRAG,\n\tDRAG_START: DRAG_START,\n\tDRAG_END: DRAG_END,\n\tZOOM_START: ZOOM_START,\n\tZOOM: ZOOM,\n\tZOOM_END: ZOOM_END,\n\tSELECT_START: SELECT_START,\n\tSELECT: SELECT,\n\tSELECT_END: SELECT_END,\n\tPANE_RENDER: PANE_RENDER,\n\tGAP: GAP,\n\tDONUT: DONUT,\n\tINSIDE_END: INSIDE_END,\n\tINSIDE_BASE: INSIDE_BASE,\n\tOUTSIDE_END: OUTSIDE_END,\n\tMOUSEWHEEL: MOUSEWHEEL,\n\tMOUSEWHEEL_DELAY: MOUSEWHEEL_DELAY,\n\tMOUSEWHEEL_ZOOM_RATE: MOUSEWHEEL_ZOOM_RATE,\n\tSHOW_TOOLTIP: SHOW_TOOLTIP,\n\tHIDE_TOOLTIP: HIDE_TOOLTIP,\n\tEQUALLY_SPACED_SERIES: EQUALLY_SPACED_SERIES,\n\tABOVE: ABOVE,\n\tBELOW: BELOW,\n\tHEATMAP: HEATMAP,\n\tDRILLDOWN: DRILLDOWN,\n\tDRILLDOWN_FIELD: DRILLDOWN_FIELD,\n\tMIN_MOVING_AVERAGE_PERIOD: MIN_MOVING_AVERAGE_PERIOD,\n\tTRENDLINE_SERIES: TRENDLINE_SERIES,\n\tTRENDLINE_EXPONENTIAL: TRENDLINE_EXPONENTIAL,\n\tTRENDLINE_LINEAR: TRENDLINE_LINEAR,\n\tTRENDLINE_LOGARITHMIC: TRENDLINE_LOGARITHMIC,\n\tTRENDLINE_MOVING_AVERAGE: TRENDLINE_MOVING_AVERAGE,\n\tTRENDLINE_POLYNOMIAL: TRENDLINE_POLYNOMIAL,\n\tTRENDLINE_POWER: TRENDLINE_POWER,\n\tCHART_POINT_ROLE: CHART_POINT_ROLE,\n\tCHART_POINT_CLASSNAME: CHART_POINT_CLASSNAME,\n\tCHART_POINT_ROLE_DESCRIPTION: CHART_POINT_ROLE_DESCRIPTION,\n\tLEGEND_ITEM_ROLE: LEGEND_ITEM_ROLE,\n\tLEGEND_ITEM_CLASSNAME: LEGEND_ITEM_CLASSNAME,\n\tLEGEND_ITEM_ARIA_ROLE_DESCRIPTION: LEGEND_ITEM_ARIA_ROLE_DESCRIPTION\n};\n\nvar DEFAULT_ERROR_BAR_WIDTH = 4;\n\nvar ErrorBarBase = ChartElement.extend({\n    init: function(low, high, isVertical, chart, series, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.low = low;\n        this.high = high;\n        this.isVertical = isVertical;\n        this.chart = chart;\n        this.series = series;\n    },\n\n    reflow: function(targetBox) {\n        var endCaps = this.options.endCaps;\n        var isVertical = this.isVertical;\n        var axis = this.getAxis();\n        var valueBox = axis.getSlot(this.low, this.high);\n        var centerBox = targetBox.center();\n        var capsWidth = this.getCapsWidth(targetBox, isVertical);\n        var capValue = isVertical ? centerBox.x : centerBox.y;\n        var capStart = capValue - capsWidth;\n        var capEnd = capValue + capsWidth;\n        var linePoints;\n\n        if (isVertical) {\n            linePoints = [\n                new Point(centerBox.x, valueBox.y1),\n                new Point(centerBox.x, valueBox.y2)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(capStart, valueBox.y1),\n                    new Point(capEnd, valueBox.y1),\n                    new Point(capStart, valueBox.y2),\n                    new Point(capEnd, valueBox.y2));\n            }\n            this.box = new Box(capStart, valueBox.y1, capEnd, valueBox.y2);\n        } else {\n            linePoints = [\n                new Point(valueBox.x1, centerBox.y),\n                new Point(valueBox.x2, centerBox.y)\n            ];\n            if (endCaps) {\n                linePoints.push(new Point(valueBox.x1, capStart),\n                    new Point(valueBox.x1, capEnd),\n                    new Point(valueBox.x2, capStart),\n                    new Point(valueBox.x2, capEnd));\n            }\n            this.box = new Box(valueBox.x1, capStart, valueBox.x2, capEnd);\n        }\n\n        this.linePoints = linePoints;\n    },\n\n    getCapsWidth: function(box, isVertical) {\n        var boxSize = isVertical ? box.width() : box.height();\n        var capsWidth = Math.min(Math.floor(boxSize / 2), DEFAULT_ERROR_BAR_WIDTH) || DEFAULT_ERROR_BAR_WIDTH;\n\n        return capsWidth;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual = options.visual;\n\n        if (visual) {\n            this.visual = visual({\n                low: this.low,\n                high: this.high,\n                rect: this.box.toRect(),\n                sender: this.getSender(),\n                options: {\n                    endCaps: options.endCaps,\n                    color: options.color,\n                    line: options.line\n                },\n                createVisual: function () {\n                    this$1$1.createDefaultVisual();\n                    var defaultVisual = this$1$1.visual;\n                    delete this$1$1.visual;\n                    return defaultVisual;\n                }\n            });\n        } else {\n            this.createDefaultVisual();\n        }\n    },\n\n    createDefaultVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var linePoints = ref.linePoints;\n        var lineOptions = {\n            stroke: {\n                color: options.color,\n                width: options.line.width,\n                dashType: options.line.dashType\n            }\n        };\n\n        ChartElement.fn.createVisual.call(this);\n\n        for (var idx = 0; idx < linePoints.length; idx += 2) {\n            var line = new Path(lineOptions)\n                .moveTo(linePoints[idx].x, linePoints[idx].y)\n                .lineTo(linePoints[idx + 1].x, linePoints[idx + 1].y);\n\n            alignPathToPixel(line);\n            this$1$1.visual.append(line);\n        }\n    }\n});\n\nsetDefaultOptions(ErrorBarBase, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    endCaps: true,\n    line: {\n        width: 2\n    },\n    zIndex: 1\n});\n\nvar CategoricalErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axis = this.chart.seriesValueAxis(this.series);\n\n        return axis;\n    }\n});\n\nfunction anyHasZIndex(elements) {\n    for (var idx = 0; idx < elements.length; idx++) {\n        if (defined(elements[idx].zIndex)) {\n            return true;\n        }\n    }\n}\n\nfunction appendIfNotNull(array, element) {\n    if (element !== null) {\n        array.push(element);\n    }\n}\n\nfunction areNumbers(values) {\n    return countNumbers(values) === values.length;\n}\n\nfunction segmentVisible(series, fields, index) {\n    var visible = fields.visible;\n    if (defined(visible)) {\n        return visible;\n    }\n\n    var pointVisibility = series.pointVisibility;\n    if (pointVisibility) {\n        return pointVisibility[index];\n    }\n}\n\nfunction bindSegments(series) {\n    var data = series.data;\n    var points = [];\n    var sum = 0;\n    var count = 0;\n\n    for (var idx = 0; idx < data.length; idx++) {\n        var pointData = SeriesBinder.current.bindPoint(series, idx);\n        var value = pointData.valueFields.value;\n\n        if (isString(value)) {\n            value = parseFloat(value);\n        }\n\n        if (isNumber(value)) {\n            pointData.visible = segmentVisible(series, pointData.fields, idx) !== false;\n\n            pointData.value = Math.abs(value);\n            points.push(pointData);\n\n            if (pointData.visible) {\n                sum += pointData.value;\n            }\n\n            if (value !== 0) {\n                count++;\n            }\n        } else {\n            points.push(null);\n        }\n    }\n\n    return {\n        total: sum,\n        points: points,\n        count: count\n    };\n}\n\nfunction categoriesCount(series) {\n    var seriesCount = series.length;\n    var categories = 0;\n\n    for (var i = 0; i < seriesCount; i++) {\n        categories = Math.max(categories, series[i].data.length);\n    }\n\n    return categories;\n}\n\nfunction equalsIgnoreCase(a, b) {\n    if (a && b) {\n        return a.toLowerCase() === b.toLowerCase();\n    }\n\n    return a === b;\n}\n\nvar MAX_EXPAND_DEPTH = 5;\n\nfunction evalOptions(options, context, state, dryRun) {\n    if (state === void 0) { state = {}; }\n    if (dryRun === void 0) { dryRun = false; }\n\n    var defaults = state.defaults = state.defaults || {};\n    var depth = state.depth = state.depth || 0;\n    var needsEval = false;\n\n    state.excluded = state.excluded || [];\n\n    if (depth > MAX_EXPAND_DEPTH) {\n        return null;\n    }\n\n    for (var property in options) {\n        if (!inArray(property, state.excluded) && dataviz.hasOwnProperty(options, property)) {\n            var propValue = options[property];\n            if (isFunction(propValue)) {\n                needsEval = true;\n                if (!dryRun) {\n                    options[property] = valueOrDefault(propValue(context), defaults[property]);\n                }\n            } else if (isObject(propValue)) {\n                if (!dryRun) {\n                    state.defaults = defaults[property];\n                }\n                state.depth++;\n                needsEval = evalOptions(propValue, context, state, dryRun) || needsEval;\n                state.depth--;\n            }\n        }\n    }\n\n    return needsEval;\n}\n\nfunction filterSeriesByType(series, types) {\n    var result = [];\n\n    var seriesTypes = [].concat(types);\n    for (var idx = 0; idx < series.length; idx++) {\n        var currentSeries = series[idx];\n        if (inArray(currentSeries.type, seriesTypes)) {\n            result.push(currentSeries);\n        }\n    }\n\n    return result;\n}\n\nvar dateCache = new WeakMap();\n\nfunction parseDateCategory(category, row, intlService) {\n    if (row === null || typeof row !== 'object') {\n        return parseDate(intlService, category);\n    }\n\n    var date = dateCache.get(row);\n    if (!date) {\n        date = parseDate(intlService, category);\n        dateCache.set(row, date);\n    }\n\n    return date;\n}\n\nfunction hasGradientOverlay(options) {\n    var overlay = options.overlay;\n\n    return overlay && overlay.gradient && overlay.gradient !== \"none\";\n}\n\nfunction hasValue(value) {\n    return defined(value) && value !== null;\n}\n\nfunction isDateAxis(axisOptions, sampleCategory) {\n    var type = axisOptions.type;\n    var dateCategory = sampleCategory instanceof Date;\n\n    return (!type && dateCategory) || equalsIgnoreCase(type, DATE);\n}\n\nfunction singleItemOrArray(array) {\n    return array.length === 1 ? array[0] : array;\n}\n\nvar AREA_REGEX = /area/i;\n\nfunction seriesMissingValues(series) {\n    if (series.missingValues) {\n        return series.missingValues;\n    }\n\n    return AREA_REGEX.test(series.type) || series.stack ? ZERO : INTERPOLATE;\n}\n\nfunction hasValue$1(series, item) {\n    var fields = SeriesBinder.current.bindPoint(series, null, item);\n    var valueFields = fields.valueFields;\n\n    for (var field in valueFields) {\n        if (dataviz.convertableToNumber(valueFields[field])) {\n            return true;\n        }\n    }\n}\n\nfunction findNext(ref) {\n    var start = ref.start;\n    var dir = ref.dir;\n    var min = ref.min;\n    var max = ref.max;\n    var getter$$1 = ref.getter;\n    var hasItem = ref.hasItem;\n    var series = ref.series;\n\n    var pointHasValue, outPoint;\n    var idx = start;\n    do {\n        idx += dir;\n        //aggregating and binding the item takes too much time for large number of categories\n        //will assume that if the aggregation does not create value for a missing item for one it will not create for others\n        if (hasItem(idx)) {\n            outPoint = getter$$1(idx);\n            pointHasValue = hasValue$1(series, outPoint.item);\n        }\n    } while (min <= idx && idx <= max && !pointHasValue);\n\n    if (pointHasValue) {\n        return outPoint;\n    }\n}\n\nfunction createOutOfRangePoints(series, range, count, getter$$1, hasItem) {\n    var min = range.min;\n    var max = range.max;\n    var hasMinPoint = min > 0 && min < count;\n    var hasMaxPoint = max + 1 < count;\n\n    if (hasMinPoint || hasMaxPoint) {\n        var missingValues = seriesMissingValues(series);\n        var minPoint, maxPoint;\n        if (missingValues !== INTERPOLATE) {\n            if (hasMinPoint) {\n                minPoint = getter$$1(min - 1);\n            }\n\n            if (hasMaxPoint) {\n                maxPoint = getter$$1(max + 1);\n            }\n        } else {\n            var outPoint, pointHasValue;\n            if (hasMinPoint) {\n                outPoint = getter$$1(min - 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    minPoint = findNext({\n                        start: min,\n                        dir: -1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    minPoint = outPoint;\n                }\n            }\n\n            if (hasMaxPoint) {\n                outPoint = getter$$1(max + 1);\n                pointHasValue = hasValue$1(series, outPoint.item);\n                if (!pointHasValue) {\n                    maxPoint = findNext({\n                        start: max,\n                        dir: 1,\n                        min: 0,\n                        max: count - 1,\n                        getter: getter$$1,\n                        hasItem: hasItem,\n                        series: series\n                    });\n                } else {\n                    maxPoint = outPoint;\n                }\n            }\n        }\n\n        if (minPoint) {\n            series._outOfRangeMinPoint = minPoint;\n        }\n\n        if (maxPoint) {\n            series._outOfRangeMaxPoint = maxPoint;\n        }\n    }\n}\n\nvar CategoricalChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.categoryAxis = plotArea.seriesCategoryAxis(options.series[0]);\n\n        // Value axis ranges grouped by axis name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.valueAxisRanges = {};\n\n        this.points = [];\n        this.categoryPoints = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({ }, defaults, {\n                vertical: !this.options.invertAxes\n            }, series);\n        }\n\n        return options;\n    },\n\n    plotValue: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        if (this.options.isStacked100 && isNumber(point.value)) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n            var otherValues = [];\n            var categorySum = 0;\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n                if (other) {\n                    var stack = point.series.stack;\n                    var otherStack = other.series.stack;\n\n                    if ((stack && otherStack) && stack.group !== otherStack.group) {\n                        continue;\n                    }\n\n                    if (isNumber(other.value)) {\n                        categorySum += Math.abs(other.value);\n                        otherValues.push(Math.abs(other.value));\n                    }\n                }\n            }\n\n            if (categorySum > 0) {\n                return point.value / categorySum;\n            }\n        }\n\n        return point.value;\n    },\n\n    plotRange: function(point, startValue) {\n        var this$1$1 = this;\n        if (startValue === void 0) { startValue = 0; }\n\n        var categoryPoints = this.categoryPoints[point.categoryIx];\n\n        if (this.options.isStacked) {\n            var plotValue = this.plotValue(point);\n            var positive = plotValue >= 0;\n            var prevValue = startValue;\n            var isStackedBar = false;\n            var stack = defined(point.series.stack) ? point.series.stack : this.options.defaultStack;\n            var isNonGroupStack = function (stack) { return stack === true || typeof stack === datavizConstants.OBJECT && !stack.group; };\n\n            if (stack) {\n                for (var i = 0; i < categoryPoints.length; i++) {\n                    var other = categoryPoints[i];\n\n                    if (point === other) {\n                        break;\n                    }\n\n                    var otherStack = defined(other.series.stack) ? other.series.stack : this$1$1.options.defaultStack;\n\n                    if (!otherStack) {\n                        continue;\n                    }\n\n                    if (typeof stack === datavizConstants.STRING && stack !== otherStack) {\n                        continue;\n                    }\n\n                    if (isNonGroupStack(stack) && !isNonGroupStack(otherStack)) {\n                        continue;\n                    }\n\n                    if (stack.group && stack.group !== otherStack.group) {\n                        continue;\n                    }\n\n                    var otherValue = this$1$1.plotValue(other);\n                    if ((otherValue >= 0 && positive) ||\n                        (otherValue < 0 && !positive)) {\n                        // zero values should be skipped for log axis (startValue !== 0)\n                        if (startValue === 0 || otherValue !== 0) {\n                            prevValue += otherValue;\n                            plotValue += otherValue;\n                            isStackedBar = true;\n\n                            if (this$1$1.options.isStacked100) {\n                                plotValue = Math.min(plotValue, 1);\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (isStackedBar) {\n                prevValue -= startValue;\n            }\n\n            return [ prevValue, plotValue ];\n        }\n\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, dataviz.convertableToNumber(point.value) ? point.value : axisCrossingValue ];\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var this$1$1 = this;\n\n        var min = MAX_VALUE;\n        var max = MIN_VALUE;\n\n        for (var i = 0; i < this.categoryPoints.length; i++) {\n            var categoryPoints = this$1$1.categoryPoints[i];\n            if (!categoryPoints) {\n                continue;\n            }\n\n            for (var pIx = 0; pIx < categoryPoints.length; pIx++) {\n                var point = categoryPoints[pIx];\n                if (point) {\n                    if (point.series.stack === stackName || point.series.axis === axisName) {\n                        var to = this$1$1.plotRange(point, 0)[1];\n                        if (defined(to) && isFinite(to)) {\n                            max = Math.max(max, to);\n                            min = Math.min(min, to);\n                        }\n                    }\n                }\n            }\n        }\n\n        return { min: min, max: max };\n    },\n\n    updateStackRange: function() {\n        var this$1$1 = this;\n\n        var ref = this.options;\n        var isStacked = ref.isStacked;\n        var chartSeries = ref.series;\n        var limitsCache = {};\n\n        if (isStacked) {\n            for (var i = 0; i < chartSeries.length; i++) {\n                var series = chartSeries[i];\n                var axisName = series.axis;\n                var key = axisName + series.stack;\n\n                var limits = limitsCache[key];\n                if (!limits) {\n                    limits = this$1$1.stackLimits(axisName, series.stack);\n\n                    var errorTotals = this$1$1.errorTotals;\n                    if (errorTotals) {\n                        if (errorTotals.negative.length) {\n                            limits.min = Math.min(limits.min, dataviz.sparseArrayLimits(errorTotals.negative).min);\n                        }\n                        if (errorTotals.positive.length) {\n                            limits.max = Math.max(limits.max, dataviz.sparseArrayLimits(errorTotals.positive).max);\n                        }\n                    }\n\n                    if (limits.min !== MAX_VALUE || limits.max !== MIN_VALUE) {\n                        limitsCache[key] = limits;\n                    } else {\n                        limits = null;\n                    }\n                }\n\n                if (limits) {\n                    this$1$1.valueAxisRanges[axisName] = limits;\n                }\n            }\n        }\n    },\n\n    addErrorBar: function(point, data, categoryIx) {\n        var value = point.value;\n        var series = point.series;\n        var seriesIx = point.seriesIx;\n        var errorBars = point.options.errorBars;\n        var lowValue = data.fields[ERROR_LOW_FIELD];\n        var highValue = data.fields[ERROR_HIGH_FIELD];\n        var errorRange;\n\n        if (isNumber(lowValue) && isNumber(highValue)) {\n            errorRange = { low: lowValue, high: highValue };\n        } else if (errorBars && defined(errorBars.value)) {\n            this.seriesErrorRanges = this.seriesErrorRanges || [];\n            this.seriesErrorRanges[seriesIx] = this.seriesErrorRanges[seriesIx] ||\n                new ErrorRangeCalculator(errorBars.value, series, VALUE);\n\n            errorRange = this.seriesErrorRanges[seriesIx].getErrorRange(value, errorBars.value);\n        }\n\n        if (errorRange) {\n            point.low = errorRange.low;\n            point.high = errorRange.high;\n            this.addPointErrorBar(point, categoryIx);\n        }\n    },\n\n    addPointErrorBar: function(point, categoryIx) {\n        var isVertical = !this.options.invertAxes;\n        var options = point.options.errorBars;\n        var series = point.series;\n        var low = point.low;\n        var high = point.high;\n\n        if (this.options.isStacked) {\n            var stackedErrorRange = this.stackedErrorRange(point, categoryIx);\n            low = stackedErrorRange.low;\n            high = stackedErrorRange.high;\n        } else {\n            var fields = { categoryIx: categoryIx, series: series };\n            this.updateRange({ value: low }, fields);\n            this.updateRange({ value: high }, fields);\n        }\n\n        var errorBar = new CategoricalErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars = [ errorBar ];\n        point.append(errorBar);\n    },\n\n    stackedErrorRange: function(point, categoryIx) {\n        var plotValue = this.plotRange(point, 0)[1] - point.value;\n        var low = point.low + plotValue;\n        var high = point.high + plotValue;\n\n        this.errorTotals = this.errorTotals || { positive: [], negative: [] };\n\n        if (low < 0) {\n            this.errorTotals.negative[categoryIx] = Math.min(this.errorTotals.negative[categoryIx] || 0, low);\n        }\n\n        if (high > 0) {\n            this.errorTotals.positive[categoryIx] = Math.max(this.errorTotals.positive[categoryIx] || 0, high);\n        }\n\n        return { low: low, high: high };\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n\n        var categoryPoints = this.categoryPoints[categoryIx];\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        var seriesPoints = this.seriesPoints[seriesIx];\n        if (!seriesPoints) {\n            this.seriesPoints[seriesIx] = seriesPoints = [];\n        }\n\n        var point = this.createPoint(data, fields);\n        if (point) {\n            $.extend(point, fields);\n\n            point.owner = this;\n            point.noteText = data.fields.noteText;\n            if (!defined(point.dataItem)) {\n                point.dataItem = series.data[categoryIx];\n            }\n            this.addErrorBar(point, data, categoryIx);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n        categoryPoints.push(point);\n\n        this.updateRange(data.valueFields, fields);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"aggregate\", \"_events\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\", \"ariaTemplate\", \"ariaContent\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, pointOptions);\n            evalOptions(pointOptions, {\n                value: value,\n                category: category,\n                index: categoryIx,\n                series: series,\n                dataItem: series.data[categoryIx]\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    updateRange: function(data, fields) {\n        var axisName = fields.series.axis;\n        var value = data.value;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (isFinite(value) && value !== null) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, value);\n            axisRange.max = Math.max(axisRange.max, value);\n        }\n    },\n\n    seriesValueAxis: function(series) {\n        var plotArea = this.plotArea;\n        var axisName = series.axis;\n        var axis = axisName ? plotArea.namedValueAxes[axisName] : plotArea.valueAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate value axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var categorySlots = this.categorySlots = [];\n        var chartPoints = this.points;\n        var categoryAxis = this.categoryAxis;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (data, fields) {\n            var categoryIx = fields.categoryIx;\n            var currentSeries = fields.series;\n\n            var valueAxis = this$1$1.seriesValueAxis(currentSeries);\n            var point = chartPoints[pointIx++];\n\n            var categorySlot = categorySlots[categoryIx];\n            if (!categorySlot) {\n                categorySlots[categoryIx] = categorySlot =\n                    this$1$1.categorySlot(categoryAxis, categoryIx, valueAxis);\n            }\n\n            if (point) {\n                var plotRange = this$1$1.plotRange(point, valueAxis.startValue());\n                var valueSlot = this$1$1.valueSlot(valueAxis, plotRange);\n                if (valueSlot) {\n                    var pointSlot = this$1$1.pointSlot(categorySlot, valueSlot);\n\n                    point.aboveAxis = this$1$1.aboveAxis(point, valueAxis);\n                    point.stackValue = plotRange[1];\n\n                    if (this$1$1.options.isStacked100) {\n                        point.percentage = this$1$1.plotValue(point);\n                    }\n\n                    this$1$1.reflowPoint(point, pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.reflowCategories(categorySlots);\n        if (!this.options.clip && this.options.limitPoints && this.points.length) {\n            this.limitPoints();\n        }\n\n        this.box = targetBox;\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        return valueAxis.getSlot(plotRange[0], plotRange[1], !this.options.clip);\n    },\n\n    limitPoints: function() {\n        var this$1$1 = this;\n\n        var categoryPoints = this.categoryPoints;\n        var points = categoryPoints[0].concat(last(categoryPoints));\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx]) {\n                this$1$1.limitPoint(points[idx]);\n            }\n        }\n    },\n\n    limitPoint: function(point) {\n        var limitedSlot = this.categoryAxis.limitSlot(point.box);\n        if (!limitedSlot.equals(point.box)) {\n            point.reflow(limitedSlot);\n        }\n    },\n\n    aboveAxis: function(point, valueAxis) {\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n        var value = point.value;\n\n        return valueAxis.options.reverse ?\n            value < axisCrossingValue : value >= axisCrossingValue;\n    },\n\n    categoryAxisCrossingValue: function(valueAxis) {\n        var categoryAxis = this.categoryAxis;\n        var options = valueAxis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n\n        return crossingValues[categoryAxis.axisIndex || 0] || 0;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.reflow(pointSlot);\n    },\n\n    reflowCategories: function() { },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var options = this.options;\n        var invertAxes = options.invertAxes;\n        var slotX = invertAxes ? valueSlot : categorySlot;\n        var slotY = invertAxes ? categorySlot : valueSlot;\n\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var count = categoriesCount(series);\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            this$1$1._outOfRangeCallback(series[seriesIx], \"_outOfRangeMinPoint\", seriesIx, callback);\n        }\n\n        for (var categoryIx = 0; categoryIx < count; categoryIx++) {\n            for (var seriesIx$1 = 0; seriesIx$1 < seriesCount; seriesIx$1++) {\n                var currentSeries = series[seriesIx$1];\n                var currentCategory = this$1$1.categoryAxis.categoryAt(categoryIx);\n                var pointData = this$1$1.plotArea.bindPoint(currentSeries, categoryIx);\n\n                callback(pointData, {\n                    category: currentCategory,\n                    categoryIx: categoryIx,\n                    categoriesCount: count,\n                    series: currentSeries,\n                    seriesIx: seriesIx$1\n                });\n            }\n        }\n\n        for (var seriesIx$2 = 0; seriesIx$2 < seriesCount; seriesIx$2++) {\n            this$1$1._outOfRangeCallback(series[seriesIx$2], \"_outOfRangeMaxPoint\", seriesIx$2, callback);\n        }\n    },\n\n    _outOfRangeCallback: function(series, field, seriesIx, callback) {\n        var outOfRangePoint = series[field];\n        if (outOfRangePoint) {\n            var categoryIx = outOfRangePoint.categoryIx;\n            var pointData = this.plotArea.bindPoint(series, categoryIx, outOfRangePoint.item);\n\n            callback(pointData, {\n                category: outOfRangePoint.category,\n                categoryIx: categoryIx,\n                series: series,\n                seriesIx: seriesIx,\n                dataItem: outOfRangePoint.item\n            });\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.value;\n    }\n});\n\nsetDefaultOptions(CategoricalChart, {\n    series: [],\n    invertAxes: false,\n    isStacked: false,\n    clip: true,\n    limitPoints: true\n});\n\nvar PointEventsMixin = {\n    click: function(chart, e) {\n        return chart.trigger(\n            SERIES_CLICK,\n            this.eventArgs(e)\n        );\n    },\n\n    hover: function(chart, e) {\n        return chart.trigger(\n            SERIES_HOVER,\n            this.eventArgs(e)\n        );\n    },\n\n    over: function(chart, e) {\n        return chart.trigger(\n            SERIES_OVER,\n            this.eventArgs(e)\n        );\n    },\n\n    out: function(chart, e) {\n        return chart.trigger(\n            SERIES_LEAVE,\n            this.eventArgs(e)\n        );\n    },\n\n    eventArgs: function(e) {\n        return {\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            category: this.category,\n            series: this.series,\n            dataItem: this.dataItem,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            element: eventElement(e),\n            originalEvent: e,\n            point: this\n        };\n    }\n};\n\nvar NoteMixin = {\n    createNote: function() {\n        var options = this.options.notes;\n        var text = this.noteText || options.label.text;\n\n        if (options.visible !== false && defined(text) && text !== null) {\n            this.note = new dataviz.Note({\n                value: this.value,\n                text: text,\n                dataItem: this.dataItem,\n                category: this.category,\n                series: this.series\n            }, this.options.notes, this.owner.chartService);\n\n            this.append(this.note);\n        }\n    }\n};\n\nfunction guid() {\n    var id = \"\";\n    var i;\n    var random;\n\n    for (i = 0; i < 32; i++) {\n        random = Math.random() * 16 | 0;\n\n        if (i === 8 || i === 12 || i === 16 || i === 20) {\n            id += \"-\";\n        }\n\n        id += (i === 12 ? 4 : (i === 16 ? (random & 3 | 8) : random)).toString(16); // eslint-disable-line no-nested-ternary\n    }\n\n    return id;\n}\n\nvar LinePoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n        this._id = guid();\n    },\n\n    render: function() {\n        var ref = this.options;\n        var markers = ref.markers;\n\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        if (markers.visible && markers.size) {\n            this.marker = this.createMarker();\n            this.append(this.marker);\n        }\n\n        this.createLabel();\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            this.label = this.createLabelElement(labels);\n            this.append(this.label);\n        }\n    },\n\n    createLabelElement: function(options) {\n        return new TextBox(this.getLabelText(options),\n            deepExtend({\n                align: CENTER,\n                vAlign: CENTER,\n                margin: {\n                    left: 5,\n                    right: 5\n                },\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n            }, options),\n            this.pointData()\n        );\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        } else if (options.format) {\n            return this.formatValue(options.format);\n        }\n\n        return this.value;\n    },\n\n    getAriaLabelText: function() {\n        var labels = this.options.labels;\n        var ariaTemplate = dataviz.getAriaTemplate(labels);\n\n        if (ariaTemplate) {\n            return ariaTemplate(this.pointData());\n        }\n\n        return this.getLabelText(labels);\n    },\n\n    markerBorder: function() {\n        var options = this.options.markers;\n        var background = options.background;\n        var border = deepExtend({ color: this.color }, options.border);\n\n        if (!defined(border.color)) {\n            border.color = new Color(background).brightness(BORDER_BRIGHTNESS).toHex();\n        }\n\n        return border;\n    },\n\n    createVisual: function() {},\n\n    createMarker: function() {\n        var options = this.options.markers;\n        var marker = new ShapeElement({\n            type: options.type,\n            width: options.size,\n            height: options.size,\n            rotation: options.rotation,\n            background: options.background,\n            border: this.markerBorder(),\n            opacity: options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual,\n            accessibilityOptions: deepExtend({\n                ariaLabel: this.getAriaLabelText(this.options.labels)\n            }, this.options.accessibility)\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        return marker;\n    },\n\n    markerBox: function() {\n        if (!this.marker) {\n            this.marker = this.createMarker();\n            this.marker.reflow(this._childBox);\n        }\n\n        return this.marker.box;\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var aboveAxis = ref.aboveAxis;\n        var vertical = options.vertical;\n\n        this.render();\n\n        this.box = targetBox;\n        var childBox = targetBox.clone();\n\n        if (vertical) {\n            if (aboveAxis) {\n                childBox.y1 -= childBox.height();\n            } else {\n                childBox.y2 += childBox.height();\n            }\n        } else {\n            if (aboveAxis) {\n                childBox.x1 += childBox.width();\n            } else {\n                childBox.x2 -= childBox.width();\n            }\n        }\n\n        this._childBox = childBox;\n        if (this.marker) {\n            this.marker.reflow(childBox);\n        }\n\n        this.reflowLabel(childBox);\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(childBox);\n            }\n        }\n\n        if (this.note) {\n            var noteTargetBox = this.markerBox();\n\n            if (!(options.markers.visible && options.markers.size)) {\n                var center = noteTargetBox.center();\n                noteTargetBox = new Box(center.x, center.y, center.x, center.y);\n            }\n\n            this.note.reflow(noteTargetBox);\n        }\n    },\n\n    reflowLabel: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var label = ref.label;\n        var anchor = options.labels.position;\n\n        if (label) {\n            anchor = anchor === ABOVE ? TOP : anchor;\n            anchor = anchor === BELOW ? BOTTOM : anchor;\n\n            label.reflow(box);\n            label.box.alignTo(this.markerBox(), anchor);\n            label.reflow(label.box);\n        }\n    },\n\n    createHighlight: function() {\n        var markers = this.options.highlight.markers;\n        var defaultColor = this.markerBorder().color;\n        var options = this.options.markers;\n        var size = options.size + (options.border.width || 0) + (markers.border.width || 0);\n\n        var shadow = new ShapeElement({\n            type: options.type,\n            width: size,\n            height: size,\n            rotation: options.rotation,\n            background: markers.color || defaultColor,\n            border: {\n                color: markers.border.color,\n                width: markers.border.width,\n                opacity: valueOrDefault(markers.border.opacity, 1)\n            },\n            opacity: valueOrDefault(markers.opacity, 1)\n        });\n        shadow.reflow(this._childBox);\n\n        return shadow.getElement();\n    },\n\n    highlightVisual: function() {\n        return (this.marker || {}).visual;\n    },\n\n    highlightVisualArgs: function() {\n        var marker = this.marker;\n        var visual, rect;\n\n        if (marker) {\n            rect = marker.paddingBox.toRect();\n            visual = marker.visual;\n        } else {\n            var size = this.options.markers.size;\n            var halfSize = size / 2;\n            var center = this.box.center();\n            rect = new geometry.Rect([ center.x - halfSize, center.y - halfSize ], [ size, size ]);\n        }\n\n        return {\n            options: this.options,\n            rect: rect,\n            visual: visual\n        };\n    },\n\n    createFocusHighlight: function() {\n        var markerOptions = this.options.markers;\n        var highlightOptions = this.options.accessibility.highlight;\n        var size = markerOptions.size + (markerOptions.border.width || 0);\n\n        var highlight = new ShapeElement({\n            type: markerOptions.type,\n            width: size,\n            height: size,\n            rotation: markerOptions.rotation,\n            background: highlightOptions.color,\n            border: highlightOptions.border,\n            opacity: highlightOptions.opacity,\n            padding: highlightOptions.border.width / 2,\n            zIndex: highlightOptions.zIndex\n        });\n\n        highlight.reflow(this._childBox);\n\n        return highlight.getElement();\n    },\n\n    tooltipAnchor: function() {\n        var markerBox = this.markerBox();\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(markerBox);\n\n        if (showTooltip) {\n            var x = markerBox.x2 + TOOLTIP_OFFSET;\n            var horizontalAlign = LEFT;\n            var y, verticalAlign;\n\n            if (this.aboveAxis) {\n                y = markerBox.y1;\n                verticalAlign = BOTTOM;\n            } else {\n                y = markerBox.y2;\n                verticalAlign = TOP;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        var markerBox = this.markerBox();\n        return markerBox.overlaps(box);\n    },\n\n    unclipElements: function() {\n        if (this.label) {\n            this.label.options.noclip = true;\n        }\n\n        if (this.note) {\n            this.note.options.noclip = true;\n        }\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    },\n\n    focusVisual: function() {\n        if (this.marker) {\n            if (this.marker.visual) {\n                this.marker.visual.options.set(\"id\", this._id);\n            }\n\n            this.toggleFocusHighlight(true);\n        }\n    },\n\n    clearFocusFromVisual: function() {\n        if (this.marker) {\n            if (this.marker.visual) {\n                this.marker.visual.options.set(\"id\", \"\");\n            }\n\n            this.toggleFocusHighlight(false);\n        }\n    },\n\n    getIndex: function() {\n        return defined(this.categoryIx) ? this.categoryIx : this.pointIx;\n    }\n});\n\nLinePoint.prototype.defaults = {\n    vertical: true,\n    markers: {\n        visible: true,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        position: ABOVE,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        }\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: \"#fff\",\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    errorBars: {\n        line: {\n            width: 1\n        }\n    },\n    accessibility: {\n        tabIndex: 0,\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n};\n\ndeepExtend(LinePoint.prototype, PointEventsMixin);\ndeepExtend(LinePoint.prototype, NoteMixin);\n\nvar LineSegment = ChartElement.extend({\n    init: function(linePoints, series, seriesIx) {\n        ChartElement.fn.init.call(this);\n\n        this.linePoints = linePoints;\n        this.series = series;\n        this.seriesIx = seriesIx;\n    },\n\n    points: function() {\n        return this.toGeometryPoints(this.linePoints);\n    },\n\n    toGeometryPoints: function(points) {\n        var result = [];\n        for (var i = 0, length = points.length; i < length; i++) {\n            if (points[i] && points[i].visible !== false) {\n                result.push(points[i]._childBox.toRect().center());\n            }\n        }\n\n        return result;\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.series.visual;\n        if (customVisual) {\n            this.visual = customVisual({\n                points: this.toGeometryPoints(this.linePoints),\n                series: this.series,\n                sender: this.getSender(),\n                createVisual: function () {\n                    this$1$1.segmentVisual();\n\n                    return this$1$1.visual;\n                }\n            });\n            if (this.visual && !defined(this.visual.options.zIndex)) {\n                this.visual.options.zIndex = this.series.zIndex;\n            }\n        } else {\n            this.segmentVisual();\n        }\n    },\n\n    segmentVisual: function() {\n        var ref = this;\n        var options = ref.options;\n        var series = ref.series;\n        var color = series.color;\n        var defaults = series._defaults;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var line = Path.fromPoints(this.points(), {\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        if (options.closed) {\n            line.close();\n        }\n\n        this.visual = line;\n    },\n\n    aliasFor: function(e, coords) {\n        return this.parent.getNearestPoint(coords.x, coords.y, this.seriesIx);\n    }\n});\n\nsetDefaultOptions(LineSegment, {\n    closed: false\n});\n\nvar StepLineMixin = {\n    calculateStepPoints: function(points) {\n        var categoryAxis = this.parent.plotArea.seriesCategoryAxis(this.series);\n        var ref = categoryAxis.options;\n        var justified = ref.justified;\n        var vertical = ref.vertical;\n        var reverse = ref.reverse;\n\n        var stepAxis = vertical ? X : Y;\n        var axis = vertical ? Y : X;\n        var stepDir = reverse ? 2 : 1;\n        var dir = stepDir;\n\n        var previousPoint = toGeometryPoint(points[0], stepAxis, stepDir, axis, dir);\n        var result = [ previousPoint ];\n\n        for (var idx = 1; idx < points.length; idx++) {\n            var point = toGeometryPoint(points[idx], stepAxis, stepDir, axis, dir);\n\n            if (previousPoint[stepAxis] !== point[stepAxis]) {\n                var stepPoint = new GeometryPoint();\n                stepPoint[stepAxis] = previousPoint[stepAxis];\n                stepPoint[axis] = point[axis];\n\n                result.push(stepPoint, point);\n            }\n\n            previousPoint = point;\n        }\n\n        if (!justified) {\n            result.push(toGeometryPoint(last(points), stepAxis, stepDir, axis, reverse ? 1 : 2));\n        } else if (previousPoint !== last(result)) {\n            result.push(previousPoint);\n        }\n\n        return result;\n\n    }\n};\n\nfunction toGeometryPoint(lintPoint, stepAxis, stepDir, axis, dir) {\n    var box = lintPoint.box;\n    var result = new GeometryPoint();\n\n    result[stepAxis] = box[stepAxis + stepDir];\n    result[axis] = box[axis + dir];\n\n    return result;\n}\n\nvar StepLineSegment = LineSegment.extend({\n    points: function() {\n        return this.calculateStepPoints(this.linePoints);\n    }\n});\n\ndeepExtend(StepLineSegment.prototype, StepLineMixin);\n\nvar SplineSegment = LineSegment.extend({\n    segmentVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var segments = curveProcessor.process(this.points());\n        var curve = new Path({\n            stroke: {\n                color: color,\n                width: series.width,\n                opacity: series.opacity,\n                dashType: series.dashType\n            },\n            zIndex: series.zIndex\n        });\n\n        curve.segments.push.apply(curve.segments, segments);\n\n        this.visual = curve;\n    }\n});\n\nvar LineChartMixin = {\n    renderSegments: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesPoints = ref.seriesPoints;\n        var series = options.series;\n        var seriesCount = seriesPoints.length;\n        var lastSegment;\n\n        this._segments = [];\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var sortedPoints = this$1$1.sortPoints(seriesPoints[seriesIx]);\n            var pointCount = sortedPoints.length;\n            var linePoints = [];\n\n            for (var pointIx = 0; pointIx < pointCount; pointIx++) {\n                var point = sortedPoints[pointIx];\n                if (point) {\n                    linePoints.push(point);\n                } else if (this$1$1.seriesMissingValues(currentSeries) !== INTERPOLATE) {\n                    if (linePoints.length > 1) {\n                        lastSegment = this$1$1.createSegment(\n                            linePoints, currentSeries, seriesIx, lastSegment\n                        );\n                        this$1$1._addSegment(lastSegment);\n                    }\n                    linePoints = [];\n                }\n            }\n\n            if (linePoints.length > 1) {\n                lastSegment = this$1$1.createSegment(\n                    linePoints, currentSeries, seriesIx, lastSegment\n                );\n                this$1$1._addSegment(lastSegment);\n            }\n        }\n\n        this.children.unshift.apply(this.children, this._segments);\n    },\n\n    _addSegment: function(segment) {\n        this._segments.push(segment);\n        segment.parent = this;\n    },\n\n    sortPoints: function(points) {\n        return points;\n    },\n\n    seriesMissingValues: function(series) {\n        var missingValues = series.missingValues;\n        var assumeZero = !missingValues && this.options.isStacked;\n\n        return assumeZero ? ZERO : missingValues || INTERPOLATE;\n    },\n\n    getNearestPoint: function(x, y, seriesIx) {\n        var target = new Point(x, y);\n        var allPoints = this.seriesPoints[seriesIx];\n        var nearestPointDistance = MAX_VALUE;\n        var nearestPoint;\n\n        for (var i = 0; i < allPoints.length; i++) {\n            var point = allPoints[i];\n\n            if (point && defined(point.value) && point.value !== null && point.visible !== false) {\n                var pointBox = point.box;\n                var pointDistance = pointBox.center().distanceTo(target);\n\n                if (pointDistance < nearestPointDistance) {\n                    nearestPoint = point;\n                    nearestPointDistance = pointDistance;\n                }\n            }\n        }\n\n        return nearestPoint;\n    }\n};\n\nvar ClipAnimation = Animation.extend({\n    setup: function() {\n        this._setEnd(this.options.box.x1);\n    },\n\n    step: function(pos) {\n        var box = this.options.box;\n        this._setEnd(dataviz.interpolateValue(box.x1, box.x2, pos));\n    },\n\n    _setEnd: function(x) {\n        var element = this.element;\n        var segments = element.segments;\n        var topRight = segments[1].anchor();\n        var bottomRight = segments[2].anchor();\n\n        element.suspend();\n        topRight.setX(x);\n        element.resume();\n        bottomRight.setX(x);\n    }\n});\n\nsetDefaultOptions(ClipAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(\"clip\", ClipAnimation);\n\nvar ClipAnimationMixin = {\n    createAnimation: function() {\n        var root = this.getRoot();\n        if (root && (root.options || {}).transitions !== false) {\n            var box = root.size();\n            var clipPath = Path.fromRect(box.toRect());\n            this.visual.clip(clipPath);\n            this.animation = new ClipAnimation(clipPath, {\n                box: box\n            });\n            if (anyHasZIndex(this.options.series)) {\n                this._setChildrenAnimation(clipPath);\n            }\n        }\n    },\n\n    _setChildrenAnimation: function(clipPath) {\n        var points = this.animationPoints();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point && point.visual && defined(point.visual.options.zIndex)) {\n                point.visual.clip(clipPath);\n            }\n        }\n    }\n};\n\nvar LineChart = CategoricalChart.extend({\n    render: function() {\n\n        CategoricalChart.fn.render.call(this);\n\n        this.updateStackRange();\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var missingValues = this.seriesMissingValues(series);\n        var value = data.valueFields.value;\n\n        if (!defined(value) || value === null) {\n            if (missingValues === ZERO) {\n                value = 0;\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    plotRange: function(point) {\n        var this$1$1 = this;\n\n        var plotValue = this.plotValue(point);\n\n        if (this.options.isStacked) {\n            var categoryIx = point.categoryIx;\n            var categoryPoints = this.categoryPoints[categoryIx];\n\n            for (var i = 0; i < categoryPoints.length; i++) {\n                var other = categoryPoints[i];\n\n                if (point === other) {\n                    break;\n                }\n\n                plotValue += this$1$1.plotValue(other);\n\n                if (this$1$1.options.isStacked100) {\n                    plotValue = Math.min(plotValue, 1);\n                }\n            }\n\n        }\n\n        return [ plotValue, plotValue ];\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === STEP) {\n            pointType = StepLineSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result.concat(this._segments);\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\ndeepExtend(LineChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar AreaSegment = LineSegment.extend({\n    init: function(linePoints, currentSeries, seriesIx, prevSegment, stackPoints) {\n        LineSegment.fn.init.call(this, linePoints, currentSeries, seriesIx);\n\n        this.prevSegment = prevSegment;\n        this.stackPoints = stackPoints;\n    },\n\n    createVisual: function() {\n        var series = this.series;\n        var defaults = series._defaults;\n        var lineOptions = series.line || {};\n        var color = series.color;\n\n        if (isFunction(color) && defaults) {\n            color = defaults.color;\n        }\n\n        this.visual = new Group({\n            zIndex: series.zIndex\n        });\n\n        this.createFill({\n            fill: {\n                color: color,\n                opacity: series.opacity\n            },\n            stroke: null\n        });\n\n        if (lineOptions.width > 0 && lineOptions.visible !== false) {\n            this.createStroke({\n                stroke: deepExtend({\n                    color: color,\n                    opacity: series.opacity,\n                    lineCap: \"butt\"\n                }, lineOptions)\n            });\n        }\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            segments = this._strokeSegments = this.createStrokeSegments();\n        }\n\n        return segments;\n    },\n\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.points());\n    },\n\n    stackSegments: function() {\n        if (this.prevSegment) {\n            return this.prevSegment.createStackSegments(this.stackPoints);\n        }\n\n        return this.createStackSegments(this.stackPoints);\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.toGeometryPoints(stackPoints)).reverse();\n    },\n\n    segmentsFromPoints: function(points) {\n        return points.map(function (point) { return new geometry.Segment(point); });\n    },\n\n    createStroke: function(style) {\n        var stroke = new Path(style);\n        stroke.segments.push.apply(stroke.segments, this.strokeSegments());\n\n        this.visual.append(stroke);\n    },\n\n    hasStackSegment: function() {\n        return this.prevSegment || (this.stackPoints && this.stackPoints.length);\n    },\n\n    createFill: function(style) {\n        var strokeSegments = this.strokeSegments();\n        var fillSegments = strokeSegments.slice(0);\n        var hasStackSegments = this.hasStackSegment();\n\n        if (hasStackSegments) {\n            var stackSegments = this.stackSegments();\n\n            append(fillSegments, stackSegments);\n        }\n\n        var fill = new Path(style);\n        fill.segments.push.apply(fill.segments, fillSegments);\n\n        if (!hasStackSegments && strokeSegments.length > 1) {\n            this.fillToAxes(fill);\n        }\n\n        this.visual.append(fill);\n    },\n\n    fillToAxes: function(fillPath) {\n        var chart = this.parent;\n        var invertAxes = chart.options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.series);\n        var crossingValue = chart.categoryAxisCrossingValue(valueAxis);\n        var endSlot = valueAxis.getSlot(crossingValue, crossingValue, true);\n        var segments = this.strokeSegments();\n        var firstPoint = segments[0].anchor();\n        var lastPoint = last(segments).anchor();\n        var end = invertAxes ? endSlot.x1 : endSlot.y1;\n\n        if (invertAxes) {\n            fillPath.lineTo(end, lastPoint.y)\n                .lineTo(end, firstPoint.y);\n        } else {\n            fillPath.lineTo(lastPoint.x, end)\n                .lineTo(firstPoint.x, end);\n        }\n    }\n});\n\nvar StepAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.linePoints));\n    },\n\n    createStackSegments: function(stackPoints) {\n        return this.segmentsFromPoints(this.calculateStepPoints(stackPoints)).reverse();\n    }\n});\n\ndeepExtend(StepAreaSegment.prototype, StepLineMixin);\n\nvar SplineAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        var curveProcessor = new CurveProcessor(this.options.closed);\n        var linePoints = this.points();\n\n        return curveProcessor.process(linePoints);\n    },\n\n    createStackSegments: function() {\n        var strokeSegments = this.strokeSegments();\n        var stackSegments = [];\n        for (var idx = strokeSegments.length - 1; idx >= 0; idx--) {\n            var segment = strokeSegments[idx];\n            stackSegments.push(new geometry.Segment(\n                segment.anchor(),\n                segment.controlOut(),\n                segment.controlIn()\n            ));\n        }\n\n        return stackSegments;\n    }\n});\n\nvar AreaChart = LineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n\n        var stackPoints;\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            var missingValues = this.seriesMissingValues(currentSeries);\n            if (missingValues !== \"gap\") {\n                stackPoints = prevSegment.linePoints;\n                previousSegment = prevSegment;\n            } else {\n                stackPoints = this._gapStackPoints(linePoints, seriesIx, style);\n            }\n        }\n\n        var pointType;\n        if (style === STEP) {\n            pointType = StepAreaSegment;\n        } else if (style === SMOOTH) {\n            pointType = SplineAreaSegment;\n        } else {\n            pointType = AreaSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        LineChart.fn.reflow.call(this, targetBox);\n\n        var stackPoints = this._stackPoints;\n        if (stackPoints) {\n            for (var idx = 0; idx < stackPoints.length; idx++) {\n                var stackPoint = stackPoints[idx];\n                var pointSlot = this$1$1.categoryAxis.getSlot(stackPoint.categoryIx);\n                stackPoint.reflow(pointSlot);\n            }\n        }\n    },\n\n    _gapStackPoints: function(linePoints, seriesIx, style) {\n        var this$1$1 = this;\n\n        var seriesPoints = this.seriesPoints;\n        var startIdx = linePoints[0].categoryIx;\n        var length = linePoints.length;\n        if (startIdx < 0) {\n            startIdx = 0;\n            length--;\n        }\n\n        var endIdx = startIdx + length;\n        var pointOffset = this.seriesOptions[0]._outOfRangeMinPoint ? 1 : 0;\n        var stackPoints = [];\n\n        this._stackPoints = this._stackPoints || [];\n        for (var categoryIx = startIdx; categoryIx < endIdx; categoryIx++) {\n            var pointIx = categoryIx + pointOffset;\n            var currentSeriesIx = seriesIx;\n            var point = (void 0);\n\n            do {\n                currentSeriesIx--;\n                point = seriesPoints[currentSeriesIx][pointIx];\n            } while (currentSeriesIx > 0 && !point);\n\n            if (point) {\n                if (style !== STEP && categoryIx > startIdx && !seriesPoints[currentSeriesIx][pointIx - 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx - 1, currentSeriesIx));\n                }\n\n                stackPoints.push(point);\n\n                if (style !== STEP && categoryIx + 1 < endIdx && !seriesPoints[currentSeriesIx][pointIx + 1]) {\n                    stackPoints.push(this$1$1._previousSegmentPoint(categoryIx, pointIx, pointIx + 1, currentSeriesIx));\n                }\n            } else {\n                var gapStackPoint = this$1$1._createGapStackPoint(categoryIx);\n                this$1$1._stackPoints.push(gapStackPoint);\n                stackPoints.push(gapStackPoint);\n            }\n        }\n\n        return stackPoints;\n    },\n\n    _previousSegmentPoint: function(categoryIx, pointIx, segmentIx, seriesIdx) {\n        var seriesPoints = this.seriesPoints;\n        var index = seriesIdx;\n        var point;\n\n        while (index > 0 && !point) {\n            index--;\n            point = seriesPoints[index][segmentIx];\n        }\n\n        if (!point) {\n            point = this._createGapStackPoint(categoryIx);\n            this._stackPoints.push(point);\n        } else {\n            point = seriesPoints[index][pointIx];\n        }\n\n        return point;\n    },\n\n    _createGapStackPoint: function(categoryIx) {\n        var options = this.pointOptions({}, 0);\n        var point = new LinePoint(0, options);\n        point.categoryIx = categoryIx;\n        point.series = {};\n\n        return point;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar AxisGroupRangeTracker = Class.extend({\n    init: function() {\n\n        this.axisRanges = {};\n    },\n\n    update: function(chartAxisRanges) {\n        var axisRanges = this.axisRanges;\n\n        for (var axisName in chartAxisRanges) {\n            var chartRange = chartAxisRanges[axisName];\n            var range = axisRanges[axisName];\n            axisRanges[axisName] = range = range || { min: MAX_VALUE, max: MIN_VALUE };\n\n            range.min = Math.min(range.min, chartRange.min);\n            range.max = Math.max(range.max, chartRange.max);\n        }\n    },\n\n    reset: function(axisName) {\n        this.axisRanges[axisName] = undefined;\n    },\n\n    query: function(axisName) {\n        return this.axisRanges[axisName];\n    }\n});\n\nvar BarLabel = ChartElement.extend({\n    init: function(content, options, pointData) {\n        ChartElement.fn.init.call(this, options);\n\n        this.textBox = new TextBox(content, this.options, pointData);\n        this.append(this.textBox);\n    },\n\n    createVisual: function() {\n        this.textBox.options.noclip = this.options.noclip;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var vertical = options.vertical;\n        var aboveAxis = options.aboveAxis;\n        var text = this.children[0];\n        var textOptions = text.options;\n        var box = text.box;\n        var padding = text.options.padding;\n        var labelBox = targetBox;\n\n        textOptions.align = vertical ? CENTER : LEFT;\n        textOptions.vAlign = vertical ? TOP : CENTER;\n\n        if (options.position === INSIDE_END) {\n            if (vertical) {\n                textOptions.vAlign = TOP;\n\n                if (!aboveAxis && box.height() < targetBox.height()) {\n                    textOptions.vAlign = BOTTOM;\n                }\n            } else {\n                textOptions.align = aboveAxis ? RIGHT : LEFT;\n            }\n        } else if (options.position === CENTER) {\n            textOptions.vAlign = CENTER;\n            textOptions.align = CENTER;\n        } else if (options.position === INSIDE_BASE) {\n            if (vertical) {\n                textOptions.vAlign = aboveAxis ? BOTTOM : TOP;\n            } else {\n                textOptions.align = aboveAxis ? LEFT : RIGHT;\n            }\n        } else if (options.position === OUTSIDE_END) {\n            if (vertical) {\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y1 - box.height(),\n                        targetBox.x2, targetBox.y1\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1, targetBox.y2,\n                        targetBox.x2, targetBox.y2 + box.height()\n                    );\n                }\n            } else {\n                textOptions.align = CENTER;\n                if (aboveAxis) {\n                    labelBox = new Box(\n                        targetBox.x2, targetBox.y1,\n                        targetBox.x2 + box.width(), targetBox.y2\n                    );\n                } else {\n                    labelBox = new Box(\n                        targetBox.x1 - box.width(), targetBox.y1,\n                        targetBox.x1, targetBox.y2\n                    );\n                }\n            }\n        }\n\n        if (!options.rotation) {\n            if (vertical) {\n                padding.left = padding.right =\n                    (labelBox.width() - text.contentBox.width()) / 2;\n            } else {\n                padding.top = padding.bottom =\n                    (labelBox.height() - text.contentBox.height()) / 2;\n            }\n        }\n\n        text.reflow(labelBox);\n    },\n\n    alignToClipBox: function(clipBox) {\n        var vertical = this.options.vertical;\n        var field = vertical ? Y : X;\n        var start = field + \"1\";\n        var end = field + \"2\";\n        var text = this.children[0];\n        var parentBox = this.parent.box;\n\n        if (parentBox[start] < clipBox[start] || clipBox[end] < parentBox[end]) {\n            var targetBox = text.paddingBox.clone();\n            targetBox[start] = Math.max(parentBox[start], clipBox[start]);\n            targetBox[end] = Math.min(parentBox[end], clipBox[end]);\n\n            this.reflow(targetBox);\n        }\n    }\n});\n\nsetDefaultOptions(BarLabel, {\n    position: OUTSIDE_END,\n    margin: getSpacing(3),\n    padding: getSpacing(4),\n    color: BLACK,\n    background: \"\",\n    border: {\n        width: 1,\n        color: \"\"\n    },\n    aboveAxis: true,\n    vertical: false,\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    },\n    zIndex: 2\n});\n\nfunction addAccessibilityAttributesToVisual(visual, accessibilityOptions) {\n    if (accessibilityOptions) {\n        visual.options.className = accessibilityOptions.className;\n        visual.options.role = accessibilityOptions.role;\n        visual.options.ariaLabel = accessibilityOptions.ariaLabel;\n        visual.options.ariaRoleDescription = accessibilityOptions.ariaRoleDescription;\n        visual.options.ariaChecked = accessibilityOptions.ariaChecked;\n    }\n}\n\nvar AccessibilityAttributesMixin = {\n    addAccessibilityAttributesToVisual: function() {\n        this._id = this._id || guid();\n\n        var accessibilityOptions = deepExtend({\n            ariaLabel: this.getAriaLabelText()\n        }, this.options.accessibility);\n\n        addAccessibilityAttributesToVisual(this.visual, accessibilityOptions);\n    },\n\n    getAriaLabelText: function getAriaLabelText() {\n        var labels = this.options.labels;\n        var ariaTemplate = dataviz.getAriaTemplate(labels);\n\n        if (ariaTemplate) {\n            return ariaTemplate(this.pointData());\n        }\n\n        return this.getLabelText(labels);\n    },\n\n    focusVisual: function focusVisual() {\n        this.visual.options.set(\"id\", this._id);\n        this.toggleFocusHighlight(true);\n    },\n\n    clearFocusFromVisual: function clearFocusFromVisual() {\n        this.visual.options.set(\"id\", \"\");\n        this.toggleFocusHighlight(false);\n    }\n};\n\nvar BAR_ALIGN_MIN_WIDTH = 6;\n\nvar Bar = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createLabel();\n        this.createNote();\n\n        if (this.errorBar) {\n            this.append(this.errorBar);\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            this.label = this.createLabelElement(labels);\n            this.append(this.label);\n        }\n    },\n\n    createLabelElement: function(options) {\n        return new BarLabel(this.getLabelText(options),\n            deepExtend({\n                vertical: this.options.vertical\n            },\n            options\n            ), this.pointData());\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        }\n\n        return this.formatValue(options.format);\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        if (this.errorBars) {\n            for (var i = 0; i < this.errorBars.length; i++) {\n                this$1$1.errorBars[i].reflow(targetBox);\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var box = ref.box;\n        var options = ref.options;\n        var customVisual = options.visual;\n\n        if (this.visible !== false) {\n            ChartElement.fn.createVisual.call(this);\n\n            this.addAccessibilityAttributesToVisual();\n\n            if (customVisual) {\n                var visual = this.rectVisual = customVisual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    sender: this.getSender(),\n                    series: this.series,\n                    percentage: this.percentage,\n                    stackValue: this.stackValue,\n                    runningTotal: this.runningTotal,\n                    total: this.total,\n                    rect: box.toRect(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createRect(group);\n                        return group;\n                    },\n                    options: options\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else if (box.width() > 0 && box.height() > 0) {\n                this.createRect(this.visual);\n            }\n        }\n    },\n\n    createRect: function(visual) {\n        var options = this.options;\n        var border = options.border;\n        var strokeOpacity = defined(border.opacity) ? border.opacity : options.opacity;\n        var rect = this.box.toRect();\n\n        rect.size.width = Math.round(rect.size.width);\n\n        var path = this.rectVisual = Path.fromRect(rect, {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: this.getBorderColor(),\n                width: border.width,\n                opacity: strokeOpacity,\n                dashType: border.dashType\n            }\n        });\n\n        var width = this.box.width();\n        var height = this.box.height();\n\n        var size = options.vertical ? width : height;\n\n        if (size > BAR_ALIGN_MIN_WIDTH) {\n            alignPathToPixel(path);\n\n            // Fixes lineJoin issue in firefox when the joined lines are parallel\n            if (width < 1 || height < 1) {\n                path.options.stroke.lineJoin = \"round\";\n            }\n        }\n\n        visual.append(path);\n\n        if (hasGradientOverlay(options)) {\n            var overlay = this.createGradientOverlay(path, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay));\n\n            visual.append(overlay);\n        }\n    },\n\n    createHighlight: function(style) {\n        var highlight = Path.fromRect(this.box.toRect(), style);\n\n        return alignPathToPixel(highlight);\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    createFocusHighlight: function(style) {\n        var borderWidth = this.options.accessibility.highlight.border.width;\n        var highlight = Path.fromRect(this.box.pad(borderWidth / 2).toRect(), style);\n\n        return alignPathToPixel(highlight);\n    },\n\n    getBorderColor: function() {\n        var color = this.color;\n        var border = this.options.border;\n        var brightness = border._brightness || BORDER_BRIGHTNESS;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(color).brightness(brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    tooltipAnchor: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.box;\n        var aboveAxis = ref.aboveAxis;\n        var clipBox = this.owner.pane.clipBox() || box;\n        var horizontalAlign = LEFT;\n        var verticalAlign = TOP;\n        var x, y;\n\n        if (options.vertical) {\n            x = Math.min(box.x2, clipBox.x2) + TOOLTIP_OFFSET;\n            if (aboveAxis) {\n                y = Math.max(box.y1, clipBox.y1);\n            } else {\n                y = Math.min(box.y2, clipBox.y2);\n                verticalAlign = BOTTOM;\n            }\n        } else {\n            var x1 = Math.max(box.x1, clipBox.x1);\n            var x2 = Math.min(box.x2, clipBox.x2);\n\n            if (options.isStacked) {\n                verticalAlign = BOTTOM;\n                if (aboveAxis) {\n                    horizontalAlign = RIGHT;\n                    x = x2;\n                } else {\n                    x = x1;\n                }\n                y = Math.max(box.y1, clipBox.y1) - TOOLTIP_OFFSET;\n            } else {\n                if (aboveAxis) {\n                    x = x2 + TOOLTIP_OFFSET;\n                } else {\n                    x = x1 - TOOLTIP_OFFSET;\n                    horizontalAlign = RIGHT;\n                }\n                y = Math.max(box.y1, clipBox.y1);\n            }\n        }\n\n        return {\n            point: new Point(x, y),\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            percentage: this.percentage,\n            stackValue: this.stackValue,\n            runningTotal: this.runningTotal,\n            total: this.total,\n            series: this.series\n        };\n    },\n\n    getIndex: function() {\n        return this.categoryIx;\n    }\n});\n\ndeepExtend(Bar.prototype, PointEventsMixin);\ndeepExtend(Bar.prototype, NoteMixin);\ndeepExtend(Bar.prototype, AccessibilityAttributesMixin);\n\nBar.prototype.defaults = {\n    border: {\n        width: 1\n    },\n    vertical: true,\n    overlay: {\n        gradient: \"glass\"\n    },\n    labels: {\n        visible: false,\n        format: \"{0}\"\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n};\n\nfunction forEach(elements, callback) {\n    elements.forEach(callback);\n}\n\nfunction forEachReverse(elements, callback) {\n    var length = elements.length;\n\n    for (var idx = length - 1; idx >= 0; idx--) {\n        callback(elements[idx], idx - length - 1);\n    }\n}\n\nvar ClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(box) {\n        var ref = this.options;\n        var vertical = ref.vertical;\n        var gap = ref.gap;\n        var spacing = ref.spacing;\n        var children = this.children;\n        var count = children.length;\n        var axis = vertical ? Y : X;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotSize = (vertical ? box.height() : box.width()) / slots;\n        var position = box[axis + 1] + slotSize * (gap / 2);\n\n        this.forEach(children, function (child, idx) {\n            var childBox = (child.box || box).clone();\n\n            childBox[axis + 1] = position;\n            childBox[axis + 2] = position + slotSize;\n\n            child.reflow(childBox);\n            if (idx < count - 1) {\n                position += (slotSize * spacing);\n            }\n\n            position += slotSize;\n        });\n    }\n});\n\nsetDefaultOptions(ClusterLayout, {\n    vertical: false,\n    gap: 0,\n    spacing: 0\n});\n\nvar StackWrap = ChartElement.extend({\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var positionAxis = this.options.vertical ? X : Y;\n        var children = this.children;\n        var childrenCount = children.length;\n        var box = this.box = new Box();\n\n        for (var i = 0; i < childrenCount; i++) {\n            var currentChild = children[i];\n\n            if (currentChild.visible !== false) {\n                var childBox = currentChild.box.clone();\n                childBox.snapTo(targetBox, positionAxis);\n\n                if (i === 0) {\n                    box = this$1$1.box = childBox.clone();\n                }\n\n                currentChild.reflow(childBox);\n                box.wrap(childBox);\n            }\n        }\n    }\n});\n\nsetDefaultOptions(StackWrap, {\n    vertical: true\n});\n\nvar BarChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n        this.updateStackRange();\n    },\n\n    pointType: function() {\n        return Bar;\n    },\n\n    clusterType: function() {\n        return ClusterLayout;\n    },\n\n    stackType: function() {\n        return StackWrap;\n    },\n\n    stackLimits: function(axisName, stackName) {\n        var limits = CategoricalChart.fn.stackLimits.call(this, axisName, stackName);\n\n        return limits;\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var stackOrDefault = defined(series.stack) ? series.stack : options.defaultStack;\n        var value = this.pointValue(data);\n        var pointOptions = this.pointOptions(series, seriesIx);\n\n        var labelOptions = pointOptions.labels;\n        if (stackOrDefault) {\n            if (labelOptions.position === OUTSIDE_END) {\n                labelOptions.position = INSIDE_END;\n            }\n        }\n\n        pointOptions.isStacked = stackOrDefault;\n\n        var color = data.fields.color || series.color;\n        if (value < 0 && pointOptions.negativeColor) {\n            color = pointOptions.negativeColor;\n        }\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var pointType = this.pointType();\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            var clusterType = this.clusterType();\n            cluster = new clusterType({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (options.isStacked) {\n            var stackWrap = this.getStackWrap(stackOrDefault, cluster);\n            stackWrap.append(point);\n        } else {\n            cluster.append(point);\n        }\n\n        return point;\n    },\n\n    getStackWrap: function(stack, cluster) {\n        var stackGroup = (typeof stack === datavizConstants.OBJECT) ? (stack.group || true) : stack;\n        var wraps = cluster.children;\n        var stackWrap;\n\n        if (typeof stackGroup === datavizConstants.STRING || stackGroup === true) {\n            for (var i = 0; i < wraps.length; i++) {\n                if (wraps[i]._stackGroup === stackGroup) {\n                    stackWrap = wraps[i];\n                    break;\n                }\n            }\n        }\n\n        if (!stackWrap) {\n            var stackType = this.stackType();\n            stackWrap = new stackType({\n                vertical: !this.options.invertAxes\n            });\n            stackWrap._stackGroup = stackGroup;\n            cluster.append(stackWrap);\n        }\n\n        return stackWrap;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx, valueAxis) {\n        var options = this.options;\n        var categorySlot = categoryAxis.getSlot(categoryIx);\n        var startValue = valueAxis.startValue();\n\n        if (options.isStacked) {\n            var zeroSlot = valueAxis.getSlot(startValue, startValue, true);\n            var stackAxis = options.invertAxes ? X : Y;\n            categorySlot[stackAxis + 1] = categorySlot[stackAxis + 2] = zeroSlot[stackAxis + 1];\n        }\n\n        return categorySlot;\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    createAnimation: function() {\n        this._setAnimationOptions();\n        CategoricalChart.fn.createAnimation.call(this);\n\n        if (anyHasZIndex(this.options.series)) {\n            this._setChildrenAnimation();\n        }\n    },\n\n    _setChildrenAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            var pointVisual = point.visual;\n            if (pointVisual && defined(pointVisual.options.zIndex)) {\n                point.options.animation = this$1$1.options.animation;\n                point.createAnimation();\n            }\n        }\n    },\n\n    _setAnimationOptions: function() {\n        var options = this.options;\n        var animation = options.animation || {};\n        var origin;\n\n        if (options.isStacked) {\n            var valueAxis = this.seriesValueAxis(options.series[0]);\n            origin = valueAxis.getSlot(valueAxis.startValue());\n        } else {\n            origin = this.categoryAxis.getSlot(0);\n        }\n\n        animation.origin = new GeometryPoint(origin.x1, origin.y1);\n        animation.vertical = !options.invertAxes;\n    }\n});\n\nsetDefaultOptions(BarChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nvar Candlestick = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n        this.value = value;\n    },\n\n    getLabelText: function(options) {\n        return this.formatValue(options.format);\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var ocSlot = valueAxis.getSlot(value.open, value.close);\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n\n        ocSlot.x1 = lhSlot.x1 = box.x1;\n        ocSlot.x2 = lhSlot.x2 = box.x2;\n\n        this.realBody = ocSlot;\n\n        var mid = lhSlot.center().x;\n        var points = [];\n\n        points.push([ [ mid, lhSlot.y1 ], [ mid, ocSlot.y1 ] ]);\n        points.push([ [ mid, ocSlot.y2 ], [ mid, lhSlot.y2 ] ]);\n\n        this.lines = points;\n\n        this.box = lhSlot.clone().wrap(ocSlot);\n\n        if (!this._rendered) {\n            this._rendered = true;\n            this.createNote();\n        }\n\n        this.reflowNote();\n    },\n\n    reflowNote: function() {\n        if (this.note) {\n            this.note.reflow(this.box);\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.addAccessibilityAttributesToVisual();\n\n        this._mainVisual = this.mainVisual(this.options);\n        this.visual.append(\n            this._mainVisual\n        );\n\n        this.createOverlay();\n    },\n\n    mainVisual: function(options) {\n        var group = new Group();\n\n        this.createBody(group, options);\n        this.createLines(group, options);\n\n        return group;\n    },\n\n    createBody: function(container, options) {\n        var body = Path.fromRect(this.realBody.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: this.getBorderColor(),\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        alignPathToPixel(body);\n        container.append(body);\n\n        if (hasGradientOverlay(options)) {\n            container.append(this.createGradientOverlay(body, { baseColor: this.color }, deepExtend({\n                end: !options.vertical ? [ 0, 1 ] : undefined\n            }, options.overlay)));\n        }\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.lines, options.line);\n    },\n\n    drawLines: function(container, options, lines, lineOptions) {\n        if (!lines) {\n            return;\n        }\n\n        var lineStyle = {\n            stroke: {\n                color: lineOptions.color || this.color,\n                opacity: valueOrDefault(lineOptions.opacity, options.opacity),\n                width: lineOptions.width,\n                dashType: lineOptions.dashType,\n                lineCap: \"butt\"\n            }\n        };\n\n        for (var i = 0; i < lines.length; i++) {\n            var line = Path.fromPoints(lines[i], lineStyle);\n            alignPathToPixel(line);\n            container.append(line);\n        }\n    },\n\n    getBorderColor: function() {\n        var border = this.options.border;\n        var borderColor = border.color;\n\n        if (!defined(borderColor)) {\n            borderColor = new Color(this.color).brightness(border._brightness).toHex();\n        }\n\n        return borderColor;\n    },\n\n    createOverlay: function() {\n        var overlay = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null\n        });\n\n        this.visual.append(overlay);\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var normalColor = this.color;\n\n        this.color = highlight.color || this.color;\n        var overlay = this.mainVisual(\n            deepExtend({}, this.options, {\n                line: {\n                    color: this.getBorderColor()\n                }\n            }, highlight)\n        );\n        this.color = normalColor;\n\n        return overlay;\n    },\n\n    highlightVisual: function() {\n        return this._mainVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this._mainVisual\n        };\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        var clipBox = this.owner.pane.clipBox() || box;\n\n        return {\n            point: new Point(box.x2 + TOOLTIP_OFFSET, Math.max(box.y1, clipBox.y1) + TOOLTIP_OFFSET),\n            align: {\n                horizontal: LEFT,\n                vertical: TOP\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            value: this.value,\n            meanPoints: this.meanPoints,\n            medianPoints: this.medianPoints,\n            whiskerPoints: this.whiskerPoints,\n            stackValue: this.stackValue,\n            series: this.series\n        };\n    },\n\n    getIndex: function() {\n        return this.categoryIx;\n    }\n});\n\nCandlestick.prototype.createFocusHighlight = Bar.prototype.createFocusHighlight;\n\nsetDefaultOptions(Candlestick, {\n    vertical: true,\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{4:d}</th></tr>\" +\n                    \"<tr><td>Open:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>High:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Low:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Close:</td><td>{3:C}</td></tr>\" +\n                \"</table>\"\n    },\n    labels: {\n        format: \"\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n});\n\ndeepExtend(Candlestick.prototype, PointEventsMixin);\ndeepExtend(Candlestick.prototype, NoteMixin);\ndeepExtend(Candlestick.prototype, AccessibilityAttributesMixin);\n\nvar CandlestickChart = CategoricalChart.extend({\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n            point.noteText = data.fields.noteText;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        return Candlestick;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var pointType = this.pointType();\n        var value = data.valueFields;\n        var pointOptions = deepExtend({}, series);\n        var color = data.fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (series.type === CANDLESTICK || series.type === OHLC) {\n            if (value.open > value.close) {\n                color = data.fields.downColor || series.downColor || series.color;\n            }\n        }\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.vertical = !this.options.invertAxes;\n\n        var point = new pointType(value, pointOptions);\n        point.color = color;\n\n        return point;\n    },\n\n    splitValue: function(value) {\n        return [ value.low, value.open, value.close, value.high ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var parts = this.splitValue(value);\n        var axisRange = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n\n        this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.open, value.high,\n            value.low, value.close, point.category\n        );\n    },\n\n    animationPoints: function() {\n        return this.points;\n    }\n});\n\ndeepExtend(CandlestickChart.prototype, ClipAnimationMixin);\n\nvar BoxPlot = Candlestick.extend({\n    init: function(value, options) {\n        Candlestick.fn.init.call(this, value, options);\n\n        this.createNote();\n    },\n\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var whiskerSlot, boxSlot;\n\n        this.boxSlot = boxSlot = valueAxis.getSlot(value.q1, value.q3);\n        this.realBody = boxSlot;\n        this.reflowBoxSlot(box);\n\n        this.whiskerSlot = whiskerSlot = valueAxis.getSlot(value.lower, value.upper);\n        this.reflowWhiskerSlot(box);\n\n        var medianSlot = valueAxis.getSlot(value.median);\n\n        if (value.mean) {\n            var meanSlot = valueAxis.getSlot(value.mean);\n            this.meanPoints = this.calcMeanPoints(box, meanSlot);\n        }\n\n        this.whiskerPoints = this.calcWhiskerPoints(boxSlot, whiskerSlot);\n        this.medianPoints = this.calcMedianPoints(box, medianSlot);\n\n        this.box = whiskerSlot.clone().wrap(boxSlot);\n        this.reflowNote();\n    },\n\n    reflowBoxSlot: function(box) {\n        this.boxSlot.x1 = box.x1;\n        this.boxSlot.x2 = box.x2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.x1 = box.x1;\n        this.whiskerSlot.x2 = box.x2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ box.x1, meanSlot.y1 ], [ box.x2, meanSlot.y1 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().x;\n        return [ [\n            [ mid - 5, whiskerSlot.y1 ], [ mid + 5, whiskerSlot.y1 ],\n            [ mid, whiskerSlot.y1 ], [ mid, boxSlot.y1 ]\n        ], [\n            [ mid - 5, whiskerSlot.y2 ], [ mid + 5, whiskerSlot.y2 ],\n            [ mid, whiskerSlot.y2 ], [ mid, boxSlot.y2 ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ box.x1, medianSlot.y1 ], [ box.x2, medianSlot.y1 ] ]\n        ];\n    },\n\n    renderOutliers: function(options) {\n        var this$1$1 = this;\n\n        var value = this.value;\n        var outliers = value.outliers || [];\n        var outerFence = Math.abs(value.q3 - value.q1) * 3;\n        var elements = [];\n        var markers = options.markers || {};\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i];\n            if (outlierValue < value.q3 + outerFence && outlierValue > value.q1 - outerFence) {\n                markers = options.outliers;\n            } else {\n                markers = options.extremes;\n            }\n            var markersBorder = deepExtend({}, markers.border);\n\n            if (!defined(markersBorder.color)) {\n                if (defined(this$1$1.color)) {\n                    markersBorder.color = this$1$1.color;\n                } else {\n                    markersBorder.color =\n                        new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex();\n                }\n            }\n\n            var shape = new ShapeElement({\n                type: markers.type,\n                width: markers.size,\n                height: markers.size,\n                rotation: markers.rotation,\n                background: markers.background,\n                border: markersBorder,\n                opacity: markers.opacity\n            });\n\n            shape.value = outlierValue;\n\n            elements.push(shape);\n        }\n\n        this.reflowOutliers(elements);\n        return elements;\n    },\n\n    reflowOutliers: function(outliers) {\n        var this$1$1 = this;\n\n        var valueAxis = this.owner.seriesValueAxis(this.options);\n        var center = this.box.center();\n\n        for (var i = 0; i < outliers.length; i++) {\n            var outlierValue = outliers[i].value;\n            var markerBox = valueAxis.getSlot(outlierValue);\n\n            if (this$1$1.options.vertical) {\n                markerBox.move(center.x);\n            } else {\n                markerBox.move(undefined, center.y);\n            }\n\n            this$1$1.box = this$1$1.box.wrap(markerBox);\n            outliers[i].reflow(markerBox);\n        }\n    },\n\n    mainVisual: function(options) {\n        var group = Candlestick.fn.mainVisual.call(this, options);\n        var outliers = this.renderOutliers(options);\n\n        for (var i = 0; i < outliers.length; i++) {\n            var element = outliers[i].getElement();\n            if (element) {\n                group.append(element);\n            }\n        }\n\n        return group;\n    },\n\n    createLines: function(container, options) {\n        this.drawLines(container, options, this.whiskerPoints, options.whiskers);\n        this.drawLines(container, options, this.medianPoints, options.median);\n        this.drawLines(container, options, this.meanPoints, options.mean);\n    },\n\n    getBorderColor: function() {\n        if ((this.options.border || {}).color) {\n            return this.options.border.color;\n        }\n\n        if (this.color) {\n            return this.color;\n        }\n\n        return Candlestick.fn.getBorderColor.call(this);\n    }\n});\n\nsetDefaultOptions(BoxPlot, {\n    border: {\n        _brightness: 0.8\n    },\n    line: {\n        width: 2\n    },\n    median: {\n        color: \"#f6f6f6\"\n    },\n    mean: {\n        width: 2,\n        dashType: \"dash\",\n        color: \"#f6f6f6\"\n    },\n    overlay: {\n        gradient: \"glass\"\n    },\n    tooltip: {\n        format: \"<table>\" +\n                    \"<tr><th colspan='2'>{6:d}</th></tr>\" +\n                    \"<tr><td>Lower:</td><td>{0:C}</td></tr>\" +\n                    \"<tr><td>Q1:</td><td>{1:C}</td></tr>\" +\n                    \"<tr><td>Median:</td><td>{2:C}</td></tr>\" +\n                    \"<tr><td>Mean:</td><td>{5:C}</td></tr>\" +\n                    \"<tr><td>Q3:</td><td>{3:C}</td></tr>\" +\n                    \"<tr><td>Upper:</td><td>{4:C}</td></tr>\" +\n                \"</table>\"\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            width: 1,\n            opacity: 1\n        },\n        line: {\n            width: 1,\n            opacity: 1\n        }\n    },\n    notes: {\n        visible: true,\n        label: {}\n    },\n    outliers: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: datavizConstants.CROSS,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    },\n    extremes: {\n        visible: true,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        background: WHITE,\n        border: {\n            width: 2,\n            opacity: 1\n        },\n        opacity: 0\n    }\n});\n\ndeepExtend(BoxPlot.prototype, PointEventsMixin);\n\nvar VerticalBoxPlot = BoxPlot.extend({\n    reflowBoxSlot: function(box) {\n        this.boxSlot.y1 = box.y1;\n        this.boxSlot.y2 = box.y2;\n    },\n\n    reflowWhiskerSlot: function(box) {\n        this.whiskerSlot.y1 = box.y1;\n        this.whiskerSlot.y2 = box.y2;\n    },\n\n    calcMeanPoints: function(box, meanSlot) {\n        return [\n            [ [ meanSlot.x1, box.y1 ], [ meanSlot.x1, box.y2 ] ]\n        ];\n    },\n\n    calcWhiskerPoints: function(boxSlot, whiskerSlot) {\n        var mid = whiskerSlot.center().y;\n        return [ [\n            [ whiskerSlot.x1, mid - 5 ], [ whiskerSlot.x1, mid + 5 ],\n            [ whiskerSlot.x1, mid ], [ boxSlot.x1, mid ]\n        ], [\n            [ whiskerSlot.x2, mid - 5 ], [ whiskerSlot.x2, mid + 5 ],\n            [ whiskerSlot.x2, mid ], [ boxSlot.x2, mid ]\n        ] ];\n    },\n\n    calcMedianPoints: function(box, medianSlot) {\n        return [\n            [ [ medianSlot.x1, box.y1 ], [ medianSlot.x1, box.y2 ] ]\n        ];\n    }\n});\n\nvar BoxPlotChart = CandlestickChart.extend({\n    addValue: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var category = fields.category;\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var value = data.valueFields;\n        var valueParts = this.splitValue(value);\n        var hasValue = areNumbers(valueParts);\n        var dataItem = series.data[categoryIx];\n        var categoryPoints = this.categoryPoints[categoryIx];\n        var point;\n\n        if (!categoryPoints) {\n            this.categoryPoints[categoryIx] = categoryPoints = [];\n        }\n\n        if (hasValue) {\n            point = this.createPoint(data, fields);\n        }\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        if (point) {\n            this.updateRange(value, fields);\n\n            cluster.append(point);\n\n            point.categoryIx = categoryIx;\n            point.category = category;\n            point.series = series;\n            point.seriesIx = seriesIx;\n            point.owner = this;\n            point.dataItem = dataItem;\n        }\n\n        this.points.push(point);\n        categoryPoints.push(point);\n    },\n\n    pointType: function() {\n        if (this.options.invertAxes) {\n            return VerticalBoxPlot;\n        }\n\n        return BoxPlot;\n    },\n\n    splitValue: function(value) {\n        return [\n            value.lower, value.q1, value.median,\n            value.q3, value.upper\n        ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var parts = this.splitValue(value).concat(this.filterOutliers(value.outliers));\n\n        if (defined(value.mean)) {\n            parts = parts.concat(value.mean);\n        }\n\n        var axisRange = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n\n        this.valueAxisRanges[axisName] = {\n            min: Math.min.apply(Math, parts.concat([ axisRange.min ])),\n            max: Math.max.apply(Math, parts.concat([ axisRange.max ]))\n        };\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format,\n            value.lower, value.q1, value.median,\n            value.q3, value.upper, value.mean, point.category\n        );\n    },\n\n    filterOutliers: function(items) {\n        var length = (items || []).length;\n        var result = [];\n\n        for (var i = 0; i < length; i++) {\n            var item = items[i];\n            if (defined(item) && item !== null) {\n                result.push(item);\n            }\n        }\n\n        return result;\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return false;\n    }\n});\n\nvar ScatterErrorBar = ErrorBarBase.extend({\n    getAxis: function() {\n        var axes = this.chart.seriesAxes(this.series);\n        var axis = this.isVertical ? axes.y : axes.x;\n\n        return axis;\n    }\n});\n\nvar ScatterChart = ChartElement.extend({\n    init: function(plotArea, options) {\n\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        // X and Y axis ranges grouped by name, e.g.:\n        // primary: { min: 0, max: 1 }\n        this.xAxisRanges = {};\n        this.yAxisRanges = {};\n\n        this.points = [];\n        this.seriesPoints = [];\n        this.seriesOptions = [];\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    addErrorBar: function(point, field, fields) {\n        var value = point.value[field];\n        var valueErrorField = field + \"Value\";\n        var lowField = field + \"ErrorLow\";\n        var highField = field + \"ErrorHigh\";\n        var seriesIx = fields.seriesIx;\n        var series = fields.series;\n        var errorBars = point.options.errorBars;\n        var lowValue = fields[lowField];\n        var highValue = fields[highField];\n\n        if (isNumber(value)) {\n            var errorRange;\n            if (isNumber(lowValue) && isNumber(highValue)) {\n                errorRange = { low: lowValue, high: highValue };\n            }\n\n            if (errorBars && defined(errorBars[valueErrorField])) {\n                this.seriesErrorRanges = this.seriesErrorRanges || { x: [], y: [] };\n                this.seriesErrorRanges[field][seriesIx] = this.seriesErrorRanges[field][seriesIx] ||\n                    new ErrorRangeCalculator(errorBars[valueErrorField], series, field);\n\n                errorRange = this.seriesErrorRanges[field][seriesIx].getErrorRange(value, errorBars[valueErrorField]);\n            }\n\n            if (errorRange) {\n                this.addPointErrorBar(errorRange, point, field);\n            }\n        }\n    },\n\n    addPointErrorBar: function(errorRange, point, field) {\n        var low = errorRange.low;\n        var high = errorRange.high;\n        var series = point.series;\n        var options = point.options.errorBars;\n        var isVertical = field === Y;\n        var item = {};\n\n        point[field + \"Low\"] = low;\n        point[field + \"High\"] = high;\n\n        point.errorBars = point.errorBars || [];\n        var errorBar = new ScatterErrorBar(low, high, isVertical, this, series, options);\n        point.errorBars.push(errorBar);\n        point.append(errorBar);\n\n        item[field] = low;\n        this.updateRange(item, series);\n        item[field] = high;\n        this.updateRange(item, series);\n    },\n\n    addValue: function(value, fields) {\n        var x = value.x;\n        var y = value.y;\n        var seriesIx = fields.seriesIx;\n        var series = this.options.series[seriesIx];\n        var missingValues = this.seriesMissingValues(series);\n        var seriesPoints = this.seriesPoints[seriesIx];\n\n        var pointValue = value;\n        if (!(hasValue(x) && hasValue(y))) {\n            pointValue = this.createMissingValue(pointValue, missingValues);\n        }\n\n        var point;\n        if (pointValue) {\n            point = this.createPoint(pointValue, fields);\n            if (point) {\n                $.extend(point, fields);\n                this.addErrorBar(point, X, fields);\n                this.addErrorBar(point, Y, fields);\n            }\n            this.updateRange(pointValue, fields.series);\n        }\n\n        this.points.push(point);\n        seriesPoints.push(point);\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues;\n    },\n\n    createMissingValue: function() {},\n\n    updateRange: function(value, series) {\n        var intlService = this.chartService.intl;\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var x = value.x;\n        var y = value.y;\n        var xAxisRange = this.xAxisRanges[xAxisName];\n        var yAxisRange = this.yAxisRanges[yAxisName];\n\n        if (hasValue(x)) {\n            xAxisRange = this.xAxisRanges[xAxisName] =\n                xAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(x)) {\n                x = parseDate(intlService, x);\n            }\n\n            xAxisRange.min = Math.min(xAxisRange.min, x);\n            xAxisRange.max = Math.max(xAxisRange.max, x);\n        }\n\n        if (hasValue(y)) {\n            yAxisRange = this.yAxisRanges[yAxisName] =\n                yAxisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            if (isString(y)) {\n                y = parseDate(intlService, y);\n            }\n\n            yAxisRange.min = Math.min(yAxisRange.min, y);\n            yAxisRange.max = Math.max(yAxisRange.max, y);\n        }\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\", \"visual\", \"toggle\",\n                \"_outOfRangeMinPoint\", \"_outOfRangeMaxPoint\",\n                \"drilldownSeriesFactory\", \"ariaTemplate\", \"ariaContent\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return LinePoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new LinePoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return {\n            x: xAxis,\n            y: yAxis\n        };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var seriesAxes = this$1$1.seriesAxes(fields.series);\n            var slotX = seriesAxes.x.getSlot(value.x, value.x, limit);\n            var slotY = seriesAxes.y.getSlot(value.y, value.y, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var seriesPoints = ref.seriesPoints;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var currentSeriesPoints = seriesPoints[seriesIx];\n            if (!currentSeriesPoints) {\n                seriesPoints[seriesIx] = [];\n            }\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var value = ref$1.valueFields;\n                var fields = ref$1.fields;\n\n                callback(value, deepExtend({\n                    pointIx: pointIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: currentSeries.data[pointIx],\n                    owner: this$1$1\n                }, fields));\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(ScatterChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}\"\n    },\n    labels: {\n        format: \"{0}, {1}\"\n    },\n    clip: true\n});\ndeepExtend(ScatterChart.prototype, ClipAnimationMixin);\n\nvar Bubble = LinePoint.extend({\n    init: function(value, options) {\n        LinePoint.fn.init.call(this, value, options);\n\n        this.category = value.category;\n    },\n\n    createHighlight: function() {\n        var highlight = this.options.highlight;\n        var border = highlight.border;\n        var markers = this.options.markers;\n        var center = this.box.center();\n        var radius = (markers.size + markers.border.width + border.width) / 2;\n        var highlightGroup = new Group();\n        var shadow = new Circle(new GeometryCircle([ center.x, center.y + radius / 5 + border.width / 2 ], radius + border.width / 2), {\n            stroke: {\n                color: 'none'\n            },\n            fill: this.createGradient({\n                gradient: 'bubbleShadow',\n                color: markers.background,\n                stops: [ {\n                    offset: 0,\n                    color: markers.background,\n                    opacity: 0.3\n                }, {\n                    offset: 1,\n                    color: markers.background,\n                    opacity: 0\n                } ]\n            })\n        });\n        var overlay = new Circle(new GeometryCircle([ center.x, center.y ], radius), {\n            stroke: {\n                color: border.color ||\n                    new Color(markers.background).brightness(BORDER_BRIGHTNESS).toHex(),\n                width: border.width,\n                opacity: border.opacity\n            },\n            fill: {\n                color: markers.background,\n                opacity: highlight.opacity\n            }\n        });\n\n        highlightGroup.append(shadow, overlay);\n\n        return highlightGroup;\n    },\n\n    createFocusHighlight: function(style) {\n        var highlightOptions = this.options.accessibility.highlight;\n        var markers = this.options.markers;\n        var center = this.box.center();\n        var radius = (markers.size + markers.border.width) / 2 + highlightOptions.border.width / 2;\n        var highlight = new Circle(new GeometryCircle([ center.x, center.y ], radius), style);\n\n        return highlight;\n    }\n});\n\nBubble.prototype.defaults = deepExtend({}, Bubble.prototype.defaults, {\n    labels: {\n        position: CENTER\n    },\n    highlight: {\n        opacity: 1,\n        border: {\n            color: \"#fff\",\n            width: 2,\n            opacity: 1\n        }\n    }\n});\n\nBubble.prototype.defaults.highlight.zIndex = undefined;\n\nvar BubbleChart = ScatterChart.extend({\n    _initFields: function() {\n        this._maxSize = MIN_VALUE;\n        ScatterChart.fn._initFields.call(this);\n    },\n\n    addValue: function(value, fields) {\n        if (value.size !== null && (value.size > 0 || (value.size < 0 && fields.series.negativeValues.visible))) {\n            this._maxSize = Math.max(this._maxSize, Math.abs(value.size));\n            ScatterChart.fn.addValue.call(this, value, fields);\n        } else {\n            this.points.push(null);\n            this.seriesPoints[fields.seriesIx].push(null);\n        }\n    },\n\n    reflow: function(box) {\n        this.updateBubblesSize(box);\n        ScatterChart.fn.reflow.call(this, box);\n    },\n\n    pointType: function() {\n        return Bubble;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointsCount = series.data.length;\n        var delay = fields.pointIx * (INITIAL_ANIMATION_DURATION / pointsCount);\n        var animationOptions = {\n            delay: delay,\n            duration: INITIAL_ANIMATION_DURATION - delay,\n            type: BUBBLE\n        };\n\n        var color = fields.color || series.color;\n        if (value.size < 0 && series.negativeValues.visible) {\n            color = valueOrDefault(\n                series.negativeValues.color, color\n            );\n        }\n\n        var pointOptions = deepExtend({\n            labels: {\n                animation: {\n                    delay: delay,\n                    duration: INITIAL_ANIMATION_DURATION - delay\n                }\n            }\n        }, this.pointOptions(series, fields.seriesIx), {\n            markers: {\n                type: CIRCLE,\n                border: series.border,\n                opacity: series.opacity,\n                animation: animationOptions\n            }\n        });\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        pointOptions.markers.background = color;\n\n        var point = new Bubble(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    updateBubblesSize: function(box) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n        var boxSize = Math.min(box.width(), box.height());\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesPoints = this$1$1.seriesPoints[seriesIx];\n            var minSize = currentSeries.minSize || Math.max(boxSize * 0.02, 10);\n            var maxSize = currentSeries.maxSize || boxSize * 0.2;\n            var minR = minSize / 2;\n            var maxR = maxSize / 2;\n            var minArea = Math.PI * minR * minR;\n            var maxArea = Math.PI * maxR * maxR;\n            var areaRange = maxArea - minArea;\n            var areaRatio = areaRange / this$1$1._maxSize;\n\n            for (var pointIx = 0; pointIx < seriesPoints.length; pointIx++) {\n                var point = seriesPoints[pointIx];\n                if (point) {\n                    var area = Math.abs(point.value.size) * areaRatio;\n                    var radius = Math.sqrt((minArea + area) / Math.PI);\n                    var baseZIndex = valueOrDefault(point.options.zIndex, 0);\n                    var zIndex = baseZIndex + (1 - radius / maxR);\n\n                    deepExtend(point.options, {\n                        zIndex: zIndex,\n                        markers: {\n                            size: radius * 2,\n                            zIndex: zIndex\n                        },\n                        labels: {\n                            zIndex: zIndex + 1\n                        }\n                    });\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.size, point.category);\n    },\n\n    createAnimation: function() {},\n\n    createVisual: function() {}\n});\n\nsetDefaultOptions(BubbleChart, {\n    tooltip: {\n        format: \"{3}\"\n    },\n    labels: {\n        format: \"{3}\"\n    }\n});\n\nvar Target = ShapeElement.extend({\n\n});\n\ndeepExtend(Target.prototype, PointEventsMixin);\n\nvar Bullet = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.aboveAxis = this.options.aboveAxis;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        var options = this.options;\n\n        if (!this._rendered) {\n            this._rendered = true;\n\n            if (defined(this.value.target)) {\n                this.target = new Target({\n                    type: options.target.shape,\n                    background: options.target.color || this.color,\n                    opacity: options.opacity,\n                    zIndex: options.zIndex,\n                    border: options.target.border,\n                    vAlign: TOP,\n                    align: RIGHT\n                });\n\n                this.target.value = this.value;\n                this.target.dataItem = this.dataItem;\n                this.target.series = this.series;\n\n                this.append(this.target);\n            }\n\n            this.createLabel();\n            this.createNote();\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            this.label = this.createLabelElement(labels);\n            this.append(this.label);\n        }\n    },\n\n    createLabelElement: function(options) {\n        return new BarLabel(this.getLabelText(options),\n            options,\n            this.pointData());\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        }\n\n        return this.formatValue(options.format);\n    },\n\n    reflow: function(box) {\n        this.render();\n\n        var ref = this;\n        var options = ref.options;\n        var target = ref.target;\n        var chart = ref.owner;\n        var invertAxes = options.invertAxes;\n        var valueAxis = chart.seriesValueAxis(this.options);\n        var categorySlot = chart.categorySlot(chart.categoryAxis, options.categoryIx, valueAxis);\n        var targetValueSlot = valueAxis.getSlot(this.value.target);\n        var targetSlotX = invertAxes ? targetValueSlot : categorySlot;\n        var targetSlotY = invertAxes ? categorySlot : targetValueSlot;\n\n        if (target) {\n            var targetSlot = new Box(\n                targetSlotX.x1, targetSlotY.y1,\n                targetSlotX.x2, targetSlotY.y2\n            );\n            target.options.height = invertAxes ? targetSlot.height() : options.target.line.width;\n            target.options.width = invertAxes ? options.target.line.width : targetSlot.width();\n            target.reflow(targetSlot);\n        }\n\n        var label = this.label;\n        if (label) {\n            label.options.aboveAxis = this.aboveAxis;\n            label.reflow(box);\n        }\n\n        if (this.note) {\n            this.note.reflow(box);\n        }\n\n        this.box = box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.addAccessibilityAttributesToVisual();\n\n        var options = this.options;\n        var body = Path.fromRect(this.box.toRect(), {\n            fill: {\n                color: this.color,\n                opacity: options.opacity\n            },\n            stroke: null\n        });\n\n        if (options.border.width > 0) {\n            body.options.set(\"stroke\", {\n                color: options.border.color || this.color,\n                width: options.border.width,\n                dashType: options.border.dashType,\n                opacity: valueOrDefault(options.border.opacity, options.opacity)\n            });\n        }\n\n        this.bodyVisual = body;\n\n        alignPathToPixel(body);\n        this.visual.append(body);\n    },\n\n    createAnimation: function() {\n        if (this.bodyVisual) {\n            this.animation = Animation.create(\n                this.bodyVisual, this.options.animation\n            );\n        }\n    },\n\n    createHighlight: function(style) {\n        return Path.fromRect(this.box.toRect(), style);\n    },\n\n    highlightVisual: function() {\n        return this.bodyVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            rect: this.box.toRect(),\n            visual: this.bodyVisual,\n            options: this.options\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    getIndex: function() {\n        return this.categoryIx;\n    }\n});\n\nBullet.prototype.tooltipAnchor = Bar.prototype.tooltipAnchor;\nBullet.prototype.createFocusHighlight = Bar.prototype.createFocusHighlight;\n\nsetDefaultOptions(Bullet, {\n    border: {\n        width: 1\n    },\n    vertical: false,\n    opacity: 1,\n    target: {\n        shape: \"\",\n        border: {\n            width: 0,\n            color: \"green\"\n        },\n        line: {\n            width: 2\n        }\n    },\n    labels: {\n        visible: false\n    },\n    tooltip: {\n        format: \"Current: {0}<br />Target: {1}\"\n    },\n    notes: {\n        label: {}\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n});\n\ndeepExtend(Bullet.prototype, PointEventsMixin);\ndeepExtend(Bullet.prototype, NoteMixin);\ndeepExtend(Bullet.prototype, AccessibilityAttributesMixin);\n\nvar BulletChart = CategoricalChart.extend({\n    init: function(plotArea, options) {\n\n        wrapData(options);\n\n        CategoricalChart.fn.init.call(this, plotArea, options);\n    },\n\n    reflowCategories: function(categorySlots) {\n        var children = this.children;\n        var childrenLength = children.length;\n\n        for (var i = 0; i < childrenLength; i++) {\n            children[i].reflow(categorySlots[i]);\n        }\n    },\n\n    plotRange: function(point) {\n        var series = point.series;\n        var valueAxis = this.seriesValueAxis(series);\n        var axisCrossingValue = this.categoryAxisCrossingValue(valueAxis);\n\n        return [ axisCrossingValue, point.value.current || axisCrossingValue ];\n    },\n\n    createPoint: function(data, fields) {\n        var categoryIx = fields.categoryIx;\n        var series = fields.series;\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var value = data.valueFields;\n\n        var bulletOptions = deepExtend({\n            vertical: !options.invertAxes,\n            overlay: series.overlay,\n            categoryIx: categoryIx,\n            invertAxes: options.invertAxes\n        }, series);\n\n        var color = data.fields.color || series.color;\n        bulletOptions = this.evalPointOptions(bulletOptions, value, fields);\n        if (isFunction(series.color)) {\n            color = bulletOptions.color;\n        }\n\n        var bullet = new Bullet(value, bulletOptions);\n        bullet.color = color;\n\n        var cluster = children[categoryIx];\n        if (!cluster) {\n            cluster = new ClusterLayout({\n                vertical: options.invertAxes,\n                gap: options.gap,\n                spacing: options.spacing,\n                rtl: !options.invertAxes && (this.chartService || {}).rtl\n            });\n            this.append(cluster);\n        }\n\n        cluster.append(bullet);\n\n        return bullet;\n    },\n\n    updateRange: function(value, fields) {\n        var current = value.current;\n        var target = value.target;\n        var axisName = fields.series.axis;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (defined(current) && !isNaN(current) && defined(target && !isNaN(target))) {\n            axisRange = this.valueAxisRanges[axisName] =\n                axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, current, target);\n            axisRange.max = Math.max(axisRange.max, current, target);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value.current, point.value.target);\n    },\n\n    pointValue: function(data) {\n        return data.valueFields.current;\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value.current;\n\n        return value > 0;\n    },\n\n    createAnimation: function() {\n        var this$1$1 = this;\n\n        var points = this.points;\n\n        this._setAnimationOptions();\n\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            point.options.animation = this$1$1.options.animation;\n            point.createAnimation();\n        }\n    }\n});\n\nBulletChart.prototype._setAnimationOptions = BarChart.prototype._setAnimationOptions;\n\nsetDefaultOptions(BulletChart, {\n    animation: {\n        type: BAR\n    }\n});\n\nfunction wrapData(options) {\n    var series = options.series;\n\n    for (var i = 0; i < series.length; i++) {\n        var seriesItem = series[i];\n        var data = seriesItem.data;\n        if (data && !isArray(data[0]) && !isObject(data[0])) {\n            seriesItem.data = [ data ];\n        }\n    }\n}\n\nvar BaseTooltip = Class.extend({\n    init: function(chartService, options) {\n\n        this.chartService = chartService;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    getStyle: function(options, point) {\n        var background = options.background;\n        var border = options.border.color;\n\n        if (point) {\n            var pointColor = point.color || point.options.color;\n            background = valueOrDefault(background, pointColor);\n            border = valueOrDefault(border, pointColor);\n        }\n\n        var padding = getSpacing(options.padding || {}, \"auto\");\n\n        return {\n            backgroundColor: background,\n            borderColor: border,\n            font: options.font,\n            color: options.color,\n            opacity: options.opacity,\n            borderWidth: styleValue(options.border.width),\n            paddingTop: styleValue(padding.top),\n            paddingBottom: styleValue(padding.bottom),\n            paddingLeft: styleValue(padding.left),\n            paddingRight: styleValue(padding.right)\n        };\n    },\n\n    show: function(options, tooltipOptions, point) {\n        options.format = tooltipOptions.format;\n\n        var style = this.getStyle(tooltipOptions, point);\n        options.style = style;\n\n        var background = new Color(style.backgroundColor);\n        if (!defined(tooltipOptions.color) && !background.isDark()) {\n            options.className = \"k-chart-tooltip-inverse\";\n        }\n\n        this.chartService.notify(SHOW_TOOLTIP, options);\n\n        this.visible = true;\n    },\n\n    hide: function() {\n        if (this.chartService) {\n            this.chartService.notify(HIDE_TOOLTIP);\n        }\n\n        this.visible = false;\n    },\n\n    destroy: function() {\n        delete this.chartService;\n    }\n});\n\nsetDefaultOptions(BaseTooltip, {\n    border: {\n        width: 1\n    },\n    opacity: 1\n});\n\nvar CrosshairTooltip = BaseTooltip.extend({\n    init: function(chartService, crosshair, options) {\n        BaseTooltip.fn.init.call(this, chartService, options);\n\n        this.crosshair = crosshair;\n        this.formatService = chartService.format;\n        this.initAxisName();\n    },\n\n    initAxisName: function() {\n        var axis = this.crosshair.axis;\n        var plotArea = axis.plotArea;\n        var name;\n        if (plotArea.categoryAxis) {\n            name = axis.getCategory ? \"categoryAxis\" : \"valueAxis\";\n        } else {\n            name = axis.options.vertical ? \"yAxis\" : \"xAxis\";\n        }\n        this.axisName = name;\n    },\n\n    showAt: function(point) {\n        var ref = this;\n        var axis = ref.crosshair.axis;\n        var options = ref.options;\n        var value = axis[options.stickyMode ? \"getCategory\" : \"getValue\"](point);\n        var formattedValue = value;\n\n        if (options.format) {\n            formattedValue = this.formatService.auto(options.format, value);\n        } else if (axis.options.type === DATE) {\n            formattedValue = this.formatService.auto(axis.options.labels.dateFormats[axis.options.baseUnit], value);\n        }\n\n        this.show({\n            point: point,\n            anchor: this.getAnchor(),\n            crosshair: this.crosshair,\n            value: formattedValue,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        }, this.options);\n    },\n\n    hide: function() {\n        this.chartService.notify(HIDE_TOOLTIP, {\n            crosshair: this.crosshair,\n            axisName: this.axisName,\n            axisIndex: this.crosshair.axis.axisIndex\n        });\n    },\n\n    getAnchor: function() {\n        var ref = this;\n        var crosshair = ref.crosshair;\n        var ref_options = ref.options;\n        var position = ref_options.position;\n        var padding = ref_options.padding;\n        var vertical = !crosshair.axis.options.vertical;\n        var lineBox = crosshair.line.bbox();\n        var horizontalAlign, verticalAlign, point;\n\n        if (vertical) {\n            horizontalAlign = CENTER;\n            if (position === BOTTOM) {\n                verticalAlign = TOP;\n                point = lineBox.bottomLeft().translate(0, padding);\n            } else {\n                verticalAlign = BOTTOM;\n                point = lineBox.topLeft().translate(0, -padding);\n            }\n        } else {\n            verticalAlign = CENTER;\n            if (position === LEFT) {\n                horizontalAlign = RIGHT;\n                point = lineBox.topLeft().translate(-padding, 0);\n            } else {\n                horizontalAlign = LEFT;\n                point = lineBox.topRight().translate(padding, 0);\n            }\n        }\n\n        return {\n            point: point,\n            align: {\n                horizontal: horizontalAlign,\n                vertical: verticalAlign\n            }\n        };\n    }\n});\n\nsetDefaultOptions(CrosshairTooltip, {\n    padding: 10\n});\n\nvar Crosshair = ChartElement.extend({\n    init: function(chartService, axis, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.axis = axis;\n        this.stickyMode = axis instanceof CategoryAxis;\n\n        var tooltipOptions = this.options.tooltip;\n\n        if (tooltipOptions.visible) {\n            this.tooltip = new CrosshairTooltip(chartService, this,\n                deepExtend({}, tooltipOptions, { stickyMode: this.stickyMode })\n            );\n        }\n    },\n\n    showAt: function(point) {\n        this.point = point;\n        this.moveLine();\n        this.line.visible(true);\n\n        if (this.tooltip) {\n            this.tooltip.showAt(point);\n        }\n    },\n\n    hide: function() {\n        this.line.visible(false);\n\n        if (this.tooltip) {\n            this.tooltip.hide();\n        }\n    },\n\n    moveLine: function() {\n        var ref = this;\n        var axis = ref.axis;\n        var point = ref.point;\n        var vertical = axis.options.vertical;\n        var box = this.getBox();\n        var dim = vertical ? Y : X;\n        var lineStart = new GeometryPoint(box.x1, box.y1);\n        var lineEnd;\n\n        if (vertical) {\n            lineEnd = new GeometryPoint(box.x2, box.y1);\n        } else {\n            lineEnd = new GeometryPoint(box.x1, box.y2);\n        }\n\n        if (point) {\n            if (this.stickyMode) {\n                var slot = axis.getSlot(axis.pointCategoryIndex(point));\n                lineStart[dim] = lineEnd[dim] = slot.center()[dim];\n            } else {\n                lineStart[dim] = lineEnd[dim] = point[dim];\n            }\n        }\n\n        this.box = box;\n\n        this.line.moveTo(lineStart).lineTo(lineEnd);\n    },\n\n    getBox: function() {\n        var axis = this.axis;\n        var axes = axis.pane.axes;\n        var length = axes.length;\n        var vertical = axis.options.vertical;\n        var box = axis.lineBox().clone();\n        var dim = vertical ? X : Y;\n        var axisLineBox;\n\n        for (var i = 0; i < length; i++) {\n            var currentAxis = axes[i];\n            if (currentAxis.options.vertical !== vertical) {\n                if (!axisLineBox) {\n                    axisLineBox = currentAxis.lineBox().clone();\n                } else {\n                    axisLineBox.wrap(currentAxis.lineBox());\n                }\n            }\n        }\n\n        box[dim + 1] = axisLineBox[dim + 1];\n        box[dim + 2] = axisLineBox[dim + 2];\n\n        return box;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options;\n        this.line = new Path({\n            stroke: {\n                color: options.color,\n                width: options.width,\n                opacity: options.opacity,\n                dashType: options.dashType\n            },\n            visible: false\n        });\n\n        this.moveLine();\n        this.visual.append(this.line);\n    },\n\n    destroy: function() {\n        if (this.tooltip) {\n            this.tooltip.destroy();\n        }\n\n        ChartElement.fn.destroy.call(this);\n    }\n});\n\nsetDefaultOptions(Crosshair, {\n    color: BLACK,\n    width: 2,\n    zIndex: -1,\n    tooltip: {\n        visible: false\n    }\n});\n\nvar ChartContainer = ChartElement.extend({\n    init: function(options, pane) {\n        ChartElement.fn.init.call(this, options);\n        this.pane = pane;\n    },\n\n    shouldClip: function() {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            if (children[i].options.clip === true) {\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _clipBox: function() {\n        return this.pane.chartsBox();\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: 0\n        });\n\n        if (this.shouldClip()) {\n            var clipBox = this.clipBox = this._clipBox();\n            var clipRect = clipBox.toRect();\n            var clipPath = Path.fromRect(clipRect);\n            alignPathToPixel(clipPath);\n\n            this.visual.clip(clipPath);\n            this.unclipLabels();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    unclipLabels: function() {\n        var ref = this;\n        var charts = ref.children;\n        var clipBox = ref.clipBox;\n\n        for (var i = 0; i < charts.length; i++) {\n            var points = charts[i].points || {};\n            var length = points.length;\n\n            for (var j = 0; j < length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && point.overlapsBox && point.overlapsBox(clipBox)) {\n                    if (point.unclipElements) {\n                        point.unclipElements();\n                    } else {\n                        var label = point.label;\n                        var note = point.note;\n\n                        if (label && label.options.visible) {\n                            if (label.alignToClipBox) {\n                                label.alignToClipBox(clipBox);\n                            }\n                            label.options.noclip = true;\n                        }\n\n                        if (note && note.options.visible) {\n                            note.options.noclip = true;\n                        }\n                    }\n                }\n            }\n        }\n    },\n\n    destroy: function() {\n        ChartElement.fn.destroy.call(this);\n\n        delete this.parent;\n    }\n});\n\nChartContainer.prototype.isStackRoot = true;\n\nvar Pane = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.id = paneID();\n\n        this.createTitle();\n\n        this.content = new ChartElement();\n\n        this.chartContainer = new ChartContainer({}, this);\n        this.append(this.content);\n\n        this.axes = [];\n        this.charts = [];\n    },\n\n    createTitle: function() {\n        var titleOptions = this.options.title;\n        if (isObject(titleOptions)) {\n            titleOptions = deepExtend({}, titleOptions, {\n                align: titleOptions.position,\n                position: TOP\n            });\n        }\n\n        this.title = Title.buildTitle(titleOptions, Pane.prototype.options.title);\n        if (this.title) {\n            this.append(this.title);\n        }\n    },\n\n    appendAxis: function(axis) {\n        this.content.append(axis);\n        this.axes.push(axis);\n        axis.pane = this;\n    },\n\n    appendAxisAt: function(axis, pos) {\n        this.content.append(axis);\n        this.axes.splice(pos, 0, axis);\n        axis.pane = this;\n    },\n\n    appendChart: function(chart) {\n        if (this.chartContainer.parent !== this.content) {\n            this.content.append(this.chartContainer);\n        }\n\n        this.charts.push(chart);\n        this.chartContainer.append(chart);\n        chart.pane = this;\n    },\n\n    empty: function() {\n        var this$1$1 = this;\n\n        var plotArea = this.parent;\n\n        if (plotArea) {\n            for (var i = 0; i < this.axes.length; i++) {\n                plotArea.removeAxis(this$1$1.axes[i]);\n            }\n\n            for (var i$1 = 0; i$1 < this.charts.length; i$1++) {\n                plotArea.removeChart(this$1$1.charts[i$1]);\n            }\n        }\n\n        this.axes = [];\n        this.charts = [];\n\n        this.content.destroy();\n        this.content.children = [];\n        this.chartContainer.children = [];\n    },\n\n    reflow: function(targetBox) {\n        // Content (such as charts) is rendered, but excluded from reflows\n        var content;\n        if (last(this.children) === this.content) {\n            content = this.children.pop();\n        }\n\n        BoxElement.fn.reflow.call(this, targetBox);\n\n        if (content) {\n            this.children.push(content);\n        }\n\n        if (this.title) {\n            this.contentBox.y1 += this.title.box.height();\n        }\n    },\n\n    visualStyle: function() {\n        var style = BoxElement.fn.visualStyle.call(this);\n        style.zIndex = -10;\n\n        return style;\n    },\n\n    renderComplete: function() {\n        if (this.options.visible) {\n            this.createGridLines();\n        }\n    },\n\n    stackRoot: function() {\n        return this;\n    },\n\n    clipRoot: function() {\n        return this;\n    },\n\n    createGridLines: function() {\n        var axes = this.axes;\n        var allAxes = axes.concat(this.parent.axes);\n        var vGridLines = [];\n        var hGridLines = [];\n\n        // TODO\n        // Is full combination really necessary?\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var vertical = axis.options.vertical;\n            var gridLines = vertical ? vGridLines : hGridLines;\n            for (var j = 0; j < allAxes.length; j++) {\n                if (gridLines.length === 0) {\n                    var altAxis = allAxes[j];\n                    if (vertical !== altAxis.options.vertical) {\n                        append(gridLines, axis.createGridLines(altAxis));\n                    }\n                }\n            }\n        }\n    },\n\n    refresh: function() {\n        this.visual.clear();\n\n        this.content.parent = null;\n        this.content.createGradient = this.createGradient.bind(this);\n        this.content.renderVisual();\n        this.content.parent = this;\n\n        if (this.title) {\n            this.visual.append(this.title.visual);\n        }\n\n        this.visual.append(this.content.visual);\n\n        this.renderComplete();\n        this.notifyRender();\n    },\n\n    chartsBox: function() {\n        var axes = this.axes;\n        var length = axes.length;\n        var chartsBox = new Box();\n\n        for (var idx = 0; idx < length; idx++) {\n            var axis = axes[idx];\n            var axisValueField = axis.options.vertical ? Y : X;\n            var lineBox = axis.lineBox();\n            chartsBox[axisValueField + 1] = lineBox[axisValueField + 1];\n            chartsBox[axisValueField + 2] = lineBox[axisValueField + 2];\n        }\n\n        if (chartsBox.x2 === 0) {\n            var allAxes = this.parent.axes;\n            var length$1 = allAxes.length;\n\n            for (var idx$1 = 0; idx$1 < length$1; idx$1++) {\n                var axis$1 = allAxes[idx$1];\n                if (!axis$1.options.vertical) {\n                    var lineBox$1 = axis$1.lineBox();\n                    chartsBox.x1 = lineBox$1.x1;\n                    chartsBox.x2 = lineBox$1.x2;\n                }\n            }\n        }\n        return chartsBox;\n    },\n\n    clipBox: function() {\n        return this.chartContainer.clipBox;\n    },\n\n    notifyRender: function() {\n        var service = this.getService();\n        if (service) {\n            service.notify(PANE_RENDER, {\n                pane: new ChartPane(this),\n                index: this.paneIndex,\n                name: this.options.name\n            });\n        }\n    }\n});\n\nvar ID = 1;\n\nfunction paneID() {\n    return \"pane\" + ID++;\n}\n\nPane.prototype.isStackRoot = true;\n\nsetDefaultOptions(Pane, {\n    zIndex: -1,\n    shrinkToFit: true,\n    title: {\n        align: LEFT\n    },\n    visible: true\n});\n\nvar PlotAreaBase = ChartElement.extend({\n    init: function(series, options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.initFields(series, options);\n        this.series = series;\n        this.initSeries();\n        this.charts = [];\n        this.options.legend = this.options.legend || {};\n        this.options.legend.data = [];\n        this.axes = [];\n        this.crosshairs = [];\n        this.chartService = chartService;\n        this.originalOptions = options;\n        this.originalSeries = series;\n        this._bindCache = new WeakMap();\n\n        this.createPanes();\n        this.render();\n        this.createCrosshairs();\n    },\n\n    initFields: function() { },\n\n    initSeries: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            series[i].index = i;\n        }\n    },\n\n    bindPoint: function(series, pointIx, item) {\n        var cached = this._bindCache.get(series);\n        if (!cached) {\n            cached = [];\n            this._bindCache.set(series, cached);\n        }\n\n        var data = cached[pointIx];\n        if (!data) {\n            data = cached[pointIx] = SeriesBinder.current.bindPoint(series, pointIx, item);\n        }\n\n        return data;\n    },\n\n    createPanes: function() {\n        var this$1$1 = this;\n\n        var titleOptions = this.options.title || {};\n        var paneDefaults = this.options.paneDefaults;\n        var paneOptions = this.options.panes || [];\n        var panesLength = Math.max(paneOptions.length, 1);\n        var panes = [];\n\n        var defaults = deepExtend({\n            title: {\n                color: titleOptions.color\n            }\n        }, paneDefaults);\n\n        for (var i = 0; i < panesLength; i++) {\n            var options = deepExtend({}, defaults, paneOptions[i]);\n            if (isString(options.title)) {\n                options.title = deepExtend({ text: options.title }, defaults.title);\n            }\n\n            var currentPane = new Pane(options);\n            currentPane.paneIndex = i;\n\n            panes.push(currentPane);\n            this$1$1.append(currentPane);\n        }\n\n        this.panes = panes;\n    },\n\n    crosshairOptions: function(axis) {\n        return axis.options.crosshair;\n    },\n\n    createCrosshairs: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            for (var j = 0; j < pane.axes.length; j++) {\n                var axis = pane.axes[j];\n                var options = this$1$1.crosshairOptions(axis);\n                if (options && options.visible) {\n                    var currentCrosshair = new Crosshair(this$1$1.chartService, axis, options);\n\n                    this$1$1.crosshairs.push(currentCrosshair);\n                    pane.content.append(currentCrosshair);\n                }\n            }\n        }\n    },\n\n    removeCrosshairs: function(pane) {\n        var crosshairs = this.crosshairs;\n        var axes = pane.axes;\n\n        for (var i = crosshairs.length - 1; i >= 0; i--) {\n            for (var j = 0; j < axes.length; j++) {\n                if (crosshairs[i].axis === axes[j]) {\n                    crosshairs.splice(i, 1);\n                    break;\n                }\n            }\n        }\n    },\n\n    hideCrosshairs: function() {\n        var crosshairs = this.crosshairs;\n        for (var idx = 0; idx < crosshairs.length; idx++) {\n            crosshairs[idx].hide();\n        }\n    },\n\n    findPane: function(name) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].options.name === name) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane || panes[0];\n    },\n\n    findPointPane: function(point) {\n        var panes = this.panes;\n        var matchingPane;\n\n        for (var i = 0; i < panes.length; i++) {\n            if (panes[i].box.containsPoint(point)) {\n                matchingPane = panes[i];\n                break;\n            }\n        }\n\n        return matchingPane;\n    },\n\n    appendAxis: function(axis) {\n        var pane = this.findPane(axis.options.pane);\n\n        pane.appendAxis(axis);\n        this.axes.push(axis);\n        axis.plotArea = this;\n    },\n\n    removeAxis: function(axisToRemove) {\n        var this$1$1 = this;\n\n        var filteredAxes = [];\n\n        for (var i = 0; i < this.axes.length; i++) {\n            var axis = this$1$1.axes[i];\n            if (axisToRemove !== axis) {\n                filteredAxes.push(axis);\n            } else {\n                axis.destroy();\n            }\n        }\n\n        this.axes = filteredAxes;\n    },\n\n    appendChart: function(chart, pane) {\n        this.charts.push(chart);\n        if (pane) {\n            pane.appendChart(chart);\n        } else {\n            this.append(chart);\n        }\n    },\n\n    removeChart: function(chartToRemove) {\n        var this$1$1 = this;\n\n        var filteredCharts = [];\n\n        for (var i = 0; i < this.charts.length; i++) {\n            var chart = this$1$1.charts[i];\n            if (chart !== chartToRemove) {\n                filteredCharts.push(chart);\n            } else {\n                chart.destroy();\n            }\n        }\n\n        this.charts = filteredCharts;\n    },\n\n    addToLegend: function(series) {\n        var count = series.length;\n        var legend = this.options.legend;\n        var labels = legend.labels || {};\n        var inactiveItems = legend.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n        var data = [];\n\n        for (var i = 0; i < count; i++) {\n            var currentSeries = series[i];\n            var seriesVisible = currentSeries.visible !== false;\n            if (currentSeries.visibleInLegend === false) {\n                continue;\n            }\n\n            var text = currentSeries.name;\n            var labelTemplate = seriesVisible ? getTemplate(labels) : getTemplate(inactiveItemsLabels) || getTemplate(labels);\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: hasValue(text) ? text : \"\",\n                    series: currentSeries\n                });\n            }\n\n            var defaults = currentSeries._defaults;\n            var color = currentSeries.color;\n            if (isFunction(color) && defaults) {\n                color = defaults.color;\n            }\n\n            var itemLabelOptions = (void 0), markerColor = (void 0);\n            if (seriesVisible) {\n                itemLabelOptions = {};\n                markerColor = color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = inactiveItems.markers.color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                data.push({\n                    text: text,\n                    labels: itemLabelOptions,\n                    markerColor: markerColor,\n                    series: currentSeries,\n                    active: seriesVisible\n                });\n            }\n        }\n\n        append(legend.data, data);\n    },\n\n    groupAxes: function(panes) {\n        var xAxes = [];\n        var yAxes = [];\n\n        for (var paneIx = 0; paneIx < panes.length; paneIx++) {\n            var paneAxes = panes[paneIx].axes;\n            for (var axisIx = 0; axisIx < paneAxes.length; axisIx++) {\n                var axis = paneAxes[axisIx];\n                if (axis.options.vertical) {\n                    yAxes.push(axis);\n                } else {\n                    xAxes.push(axis);\n                }\n            }\n        }\n\n        return { x: xAxes, y: yAxes, any: xAxes.concat(yAxes) };\n    },\n\n    groupSeriesByPane: function() {\n        var this$1$1 = this;\n\n        var series = this.series;\n        var seriesByPane = {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var pane = this$1$1.seriesPaneName(currentSeries);\n\n            if (seriesByPane[pane]) {\n                seriesByPane[pane].push(currentSeries);\n            } else {\n                seriesByPane[pane] = [ currentSeries ];\n            }\n        }\n\n        return seriesByPane;\n    },\n\n    filterVisibleSeries: function(series) {\n        var result = [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (currentSeries.visible !== false) {\n                result.push(currentSeries);\n            }\n        }\n\n        return result;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options.plotArea;\n        var panes = this.panes;\n        var margin = getSpacing(options.margin);\n\n        this.box = targetBox.clone().unpad(margin);\n        this.reflowPanes();\n\n        this.detachLabels();\n        this.reflowAxes(panes);\n        this.reflowCharts(panes);\n    },\n\n    redraw: function(panes) {\n        var this$1$1 = this;\n\n        var panesArray = [].concat(panes);\n        this.initSeries();\n\n        //prevents leak during partial redraws. the cached gradients observers retain reference to the destroyed elements.\n        var root = this.getRoot();\n        if (root) {\n            root.cleanGradients();\n        }\n\n        for (var i = 0; i < panesArray.length; i++) {\n            this$1$1.removeCrosshairs(panesArray[i]);\n            panesArray[i].empty();\n        }\n\n        this._bindCache = new WeakMap();\n\n        this.render(panesArray);\n        this.detachLabels();\n        this.reflowAxes(this.panes);\n        this.reflowCharts(panesArray);\n\n        this.createCrosshairs(panesArray);\n\n        for (var i$1 = 0; i$1 < panesArray.length; i$1++) {\n            panesArray[i$1].refresh();\n        }\n    },\n\n    axisCrossingValues: function(axis, crossingAxes) {\n        var options = axis.options;\n        var crossingValues = [].concat(\n            options.axisCrossingValues || options.axisCrossingValue\n        );\n        var valuesToAdd = crossingAxes.length - crossingValues.length;\n        var defaultValue = crossingValues[0] || 0;\n\n        for (var i = 0; i < valuesToAdd; i++) {\n            crossingValues.push(defaultValue);\n        }\n\n        return crossingValues;\n    },\n\n    alignAxisTo: function(axis, targetAxis, crossingValue, targetCrossingValue) {\n        var slot = axis.getSlot(crossingValue, crossingValue, true);\n        var slotEdge = axis.options.reverse ? 2 : 1;\n        var targetSlot = targetAxis.getSlot(targetCrossingValue, targetCrossingValue, true);\n        var targetEdge = targetAxis.options.reverse ? 2 : 1;\n        var axisBox = axis.box.translate(\n            targetSlot[X + targetEdge] - slot[X + slotEdge],\n            targetSlot[Y + targetEdge] - slot[Y + slotEdge]\n        );\n\n        if (axis.pane !== targetAxis.pane) {\n            axisBox.translate(0, axis.pane.box.y1 - targetAxis.pane.box.y1);\n        }\n\n        axis.reflow(axisBox);\n    },\n\n    alignAxes: function(xAxes, yAxes) {\n        var this$1$1 = this;\n\n        var xAnchor = xAxes[0];\n        var yAnchor = yAxes[0];\n        var xAnchorCrossings = this.axisCrossingValues(xAnchor, yAxes);\n        var yAnchorCrossings = this.axisCrossingValues(yAnchor, xAxes);\n        var leftAnchors = {};\n        var rightAnchors = {};\n        var topAnchors = {};\n        var bottomAnchors = {};\n\n        for (var i = 0; i < yAxes.length; i++) {\n            var axis = yAxes[i];\n            var pane = axis.pane;\n            var paneId = pane.id;\n            var visible = axis.options.visible !== false;\n\n            // Locate pane anchor, if any, and use its axisCrossingValues\n            var anchor = paneAnchor(xAxes, pane) || xAnchor;\n            var anchorCrossings = xAnchorCrossings;\n\n            if (anchor !== xAnchor) {\n                anchorCrossings = this$1$1.axisCrossingValues(anchor, yAxes);\n            }\n\n            this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n            if (axis.options._overlap) {\n                continue;\n            }\n\n            if (round(axis.lineBox().x1) === round(anchor.lineBox().x1)) {\n                // Push the axis to the left the previous y-axis so they don't overlap\n                if (leftAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(leftAnchors[paneId].box, LEFT)\n                        .translate(-axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    leftAnchors[paneId] = axis;\n                }\n            }\n\n            if (round(axis.lineBox().x2) === round(anchor.lineBox().x2)) {\n                // Flip the labels on the right if we're at the right end of the pane\n                if (!axis._mirrored) {\n                    axis.options.labels.mirror = !axis.options.labels.mirror;\n                    axis._mirrored = true;\n                }\n\n                this$1$1.alignAxisTo(axis, anchor, yAnchorCrossings[i], anchorCrossings[i]);\n\n                // Push the axis to the right the previous y-axis so they don't overlap\n                if (rightAnchors[paneId]) {\n                    axis.reflow(axis.box\n                        .alignTo(rightAnchors[paneId].box, RIGHT)\n                        .translate(axis.options.margin, 0)\n                    );\n                }\n\n                if (visible) {\n                    rightAnchors[paneId] = axis;\n                }\n            }\n\n            // Locate pane anchor, if any, and align the axis to it\n            var paneYAnchor = paneAnchor(yAxes, pane) || yAnchor;\n            if (paneYAnchor !== axis) {\n                axis.alignTo(paneYAnchor);\n                axis.reflow(axis.box);\n            }\n        }\n\n        for (var i$1 = 0; i$1 < xAxes.length; i$1++) {\n            var axis$1 = xAxes[i$1];\n            var pane$1 = axis$1.pane;\n            var paneId$1 = pane$1.id;\n            var visible$1 = axis$1.options.visible !== false;\n\n            // Locate pane anchor and use its axisCrossingValues\n            var anchor$1 = paneAnchor(yAxes, pane$1) || yAnchor;\n            var anchorCrossings$1 = yAnchorCrossings;\n            if (anchor$1 !== yAnchor) {\n                anchorCrossings$1 = this$1$1.axisCrossingValues(anchor$1, xAxes);\n            }\n\n            this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n            if (axis$1.options._overlap) {\n                continue;\n            }\n\n            if (round(axis$1.lineBox().y1) === round(anchor$1.lineBox().y1)) {\n                // Flip the labels on top if we're at the top of the pane\n                if (!axis$1._mirrored) {\n                    axis$1.options.labels.mirror = !axis$1.options.labels.mirror;\n                    axis$1._mirrored = true;\n                }\n                this$1$1.alignAxisTo(axis$1, anchor$1, xAnchorCrossings[i$1], anchorCrossings$1[i$1]);\n\n                // Push the axis above the previous x-axis so they don't overlap\n                if (topAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(topAnchors[paneId$1].box, TOP)\n                        .translate(0, -axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    topAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (round(axis$1.lineBox().y2, COORD_PRECISION) === round(anchor$1.lineBox().y2, COORD_PRECISION)) {\n                // Push the axis below the previous x-axis so they don't overlap\n                if (bottomAnchors[paneId$1]) {\n                    axis$1.reflow(axis$1.box\n                        .alignTo(bottomAnchors[paneId$1].box, BOTTOM)\n                        .translate(0, axis$1.options.margin)\n                    );\n                }\n\n                if (visible$1) {\n                    bottomAnchors[paneId$1] = axis$1;\n                }\n            }\n\n            if (i$1 !== 0) {\n                axis$1.alignTo(xAnchor);\n                axis$1.reflow(axis$1.box);\n            }\n        }\n    },\n\n    shrinkAxisWidth: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var axisBox = axisGroupBox(axes);\n        var overflowX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n\n            if (currentPane.axes.length > 0) {\n                overflowX = Math.max(\n                    overflowX,\n                    axisBox.width() - currentPane.contentBox.width()\n                );\n            }\n        }\n\n        if (overflowX !== 0) {\n            for (var i$1 = 0; i$1 < axes.length; i$1++) {\n                var currentAxis = axes[i$1];\n\n                if (!currentAxis.options.vertical) {\n                    currentAxis.reflow(currentAxis.box.shrink(overflowX, 0));\n                }\n            }\n        }\n    },\n\n    shrinkAxisHeight: function(panes) {\n        var shrinked;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var axes = currentPane.axes;\n            var overflowY = Math.max(0, axisGroupBox(axes).height() - currentPane.contentBox.height());\n\n            if (overflowY !== 0) {\n                for (var j = 0; j < axes.length; j++) {\n                    var currentAxis = axes[j];\n\n                    if (currentAxis.options.vertical) {\n                        currentAxis.reflow(\n                            currentAxis.box.shrink(0, overflowY)\n                        );\n                    }\n                }\n                shrinked = true;\n            }\n        }\n\n        return shrinked;\n    },\n\n    fitAxes: function(panes) {\n        var axes = this.groupAxes(panes).any;\n        var offsetX = 0;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            var paneAxes = currentPane.axes;\n            var paneBox = currentPane.contentBox;\n\n            if (paneAxes.length > 0) {\n                var axisBox = axisGroupBox(paneAxes);\n                // OffsetY is calculated and applied per pane\n                var offsetY = Math.max(paneBox.y1 - axisBox.y1, paneBox.y2 - axisBox.y2);\n\n                // OffsetX is calculated and applied globally\n                offsetX = Math.max(offsetX, paneBox.x1 - axisBox.x1);\n\n                for (var j = 0; j < paneAxes.length; j++) {\n                    var currentAxis = paneAxes[j];\n\n                    currentAxis.reflow(\n                        currentAxis.box.translate(0, offsetY)\n                    );\n                }\n            }\n        }\n\n        for (var i$1 = 0; i$1 < axes.length; i$1++) {\n            var currentAxis$1 = axes[i$1];\n\n            currentAxis$1.reflow(\n                currentAxis$1.box.translate(offsetX, 0)\n            );\n        }\n    },\n\n    reflowAxes: function(panes) {\n        var this$1$1 = this;\n\n        var axes = this.groupAxes(panes);\n\n        for (var i = 0; i < panes.length; i++) {\n            this$1$1.reflowPaneAxes(panes[i]);\n        }\n\n        if (axes.x.length > 0 && axes.y.length > 0) {\n            this.alignAxes(axes.x, axes.y);\n            this.shrinkAxisWidth(panes);\n\n            this.autoRotateAxisLabels(axes);\n\n            this.alignAxes(axes.x, axes.y);\n            if (this.shrinkAxisWidth(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.shrinkAxisHeight(panes);\n            this.alignAxes(axes.x, axes.y);\n\n            if (this.shrinkAxisHeight(panes)) {\n                this.alignAxes(axes.x, axes.y);\n            }\n\n            this.fitAxes(panes);\n        }\n    },\n\n    autoRotateAxisLabels: function(groupedAxes) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var panes = ref.panes;\n        var axes = allPaneAxes(panes);\n        var rotated;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            if (axis.autoRotateLabels()) {\n                rotated = true;\n            }\n        }\n\n        if (rotated) {\n            for (var idx$1 = 0; idx$1 < panes.length; idx$1++) {\n                this$1$1.reflowPaneAxes(panes[idx$1]);\n            }\n\n            if (groupedAxes.x.length > 0 && groupedAxes.y.length > 0) {\n                this.alignAxes(groupedAxes.x, groupedAxes.y);\n                this.shrinkAxisWidth(panes);\n            }\n        }\n    },\n\n    reflowPaneAxes: function(pane) {\n        var axes = pane.axes;\n        var length = axes.length;\n\n        if (length > 0) {\n            for (var i = 0; i < length; i++) {\n                axes[i].reflow(pane.contentBox);\n            }\n        }\n    },\n\n    reflowCharts: function(panes) {\n        var charts = this.charts;\n        var count = charts.length;\n        var box = this.box;\n\n        for (var i = 0; i < count; i++) {\n            var chartPane = charts[i].pane;\n            if (!chartPane || inArray(chartPane, panes)) {\n                charts[i].reflow(box);\n            }\n        }\n    },\n\n    reflowPanes: function() {\n        var ref = this;\n        var box = ref.box;\n        var panes = ref.panes;\n        var panesLength = panes.length;\n        var remainingHeight = box.height();\n        var autoHeightPanes = 0;\n        var top = box.y1;\n\n        for (var i = 0; i < panesLength; i++) {\n            var currentPane = panes[i];\n            var height = currentPane.options.height;\n\n            currentPane.options.width = box.width();\n\n            if (!currentPane.options.height) {\n                autoHeightPanes++;\n            } else {\n                if (height.indexOf && height.indexOf(\"%\")) {\n                    var percents = parseInt(height, 10) / 100;\n                    currentPane.options.height = percents * box.height();\n                }\n\n                currentPane.reflow(box.clone());\n\n                remainingHeight -= currentPane.options.height;\n            }\n        }\n\n        for (var i$1 = 0; i$1 < panesLength; i$1++) {\n            var currentPane$1 = panes[i$1];\n\n            if (!currentPane$1.options.height) {\n                currentPane$1.options.height = remainingHeight / autoHeightPanes;\n            }\n        }\n\n        for (var i$2 = 0; i$2 < panesLength; i$2++) {\n            var currentPane$2 = panes[i$2];\n            var paneBox = box\n                .clone()\n                .move(box.x1, top);\n\n            currentPane$2.reflow(paneBox);\n\n            top += currentPane$2.options.height;\n        }\n    },\n\n    backgroundBox: function() {\n        var axes = this.axes;\n        var axesCount = axes.length;\n        var box;\n\n        for (var i = 0; i < axesCount; i++) {\n            var axisA = axes[i];\n\n            for (var j = 0; j < axesCount; j++) {\n                var axisB = axes[j];\n\n                if (axisA.options.vertical !== axisB.options.vertical) {\n                    var lineBox = axisA.lineBox().clone().wrap(axisB.lineBox());\n\n                    if (!box) {\n                        box = lineBox;\n                    } else {\n                        box = box.wrap(lineBox);\n                    }\n                }\n            }\n        }\n\n        return box || this.box;\n    },\n\n    chartsBoxes: function() {\n        var panes = this.panes;\n        var boxes = [];\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            boxes.push(panes[idx].chartsBox());\n        }\n\n        return boxes;\n    },\n\n    addBackgroundPaths: function(multipath) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            multipath.paths.push(Path.fromRect(boxes[idx].toRect()));\n        }\n    },\n\n    backgroundContainsPoint: function(point) {\n        var boxes = this.chartsBoxes();\n        for (var idx = 0; idx < boxes.length; idx++) {\n            if (boxes[idx].containsPoint(point)) {\n                return true;\n            }\n        }\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var options = this.options.plotArea;\n        var opacity = options.opacity;\n        var background = options.background;\n        var border = options.border; if (border === void 0) { border = {}; }\n        if (isTransparent(background)) {\n            background = WHITE;\n            opacity = 0;\n        }\n\n        var bg = this._bgVisual = new MultiPath({\n            fill: {\n                color: background,\n                opacity: opacity\n            },\n            stroke: {\n                color: border.width ? border.color : \"\",\n                width: border.width,\n                dashType: border.dashType\n            },\n            zIndex: -1\n        });\n\n        this.addBackgroundPaths(bg);\n\n        this.appendVisual(bg);\n    },\n\n    pointsByCategoryIndex: function(categoryIndex) {\n        var charts = this.charts;\n        var result = [];\n\n        if (categoryIndex !== null) {\n            for (var i = 0; i < charts.length; i++) {\n                var chart = charts[i];\n\n                if (chart.pane.options.name === \"_navigator\") {\n                    continue;\n                }\n\n                var points = charts[i].categoryPoints[categoryIndex];\n                if (points && points.length) {\n                    for (var j = 0; j < points.length; j++) {\n                        var point = points[j];\n                        if (point && defined(point.value) && point.value !== null) {\n                            result.push(point);\n                        }\n                    }\n                }\n            }\n        }\n\n        return result;\n    },\n\n    pointsBySeriesIndex: function(seriesIndex) {\n        return this.filterPoints(function(point) {\n            return point.series.index === seriesIndex;\n        });\n    },\n\n    pointsByPointIndex: function(pointIndex) {\n        return this.filterPoints(function(point) {\n            return point.getIndex() === pointIndex;\n        });\n    },\n\n    pointsBySeriesName: function(name) {\n        return this.filterPoints(function(point) {\n            return point.series.name === name;\n        });\n    },\n\n    filterPoints: function(callback) {\n        var charts = this.charts;\n        var result = [];\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    result.push(point);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    findPoint: function(callback) {\n        var charts = this.charts;\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n            var points = chart.points;\n            for (var j = 0; j < points.length; j++) {\n                var point = points[j];\n                if (point && point.visible !== false && callback(point)) {\n                    return point;\n                }\n            }\n        }\n    },\n\n    paneByPoint: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            if (pane.box.containsPoint(point)) {\n                return pane;\n            }\n        }\n    },\n\n    detachLabels: function() {\n        var axes = this.groupAxes(this.panes);\n        var xAxes = axes.x;\n        var yAxes = axes.y;\n\n        this.detachAxisGroupLabels(yAxes, xAxes);\n        this.detachAxisGroupLabels(xAxes, yAxes);\n    },\n\n    detachAxisGroupLabels: function(axes, crossingAxes) {\n        var this$1$1 = this;\n\n        var labelAxisCount = 0;\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var pane = axis.pane;\n            var anchor = paneAnchor(crossingAxes, pane) || crossingAxes[0];\n            var axisIndex = i + labelAxisCount;\n            var labelAxis = this$1$1.createLabelAxis(axis, axisIndex, anchor);\n\n            if (labelAxis) {\n                labelAxisCount++;\n\n                var pos = pane.axes.indexOf(axis) + labelAxisCount;\n                pane.appendAxisAt(labelAxis, pos);\n            }\n        }\n    },\n\n    createLabelAxis: function(axis, axisIndex, anchor) {\n        var labelOptions = axis.options.labels;\n        var position = labelOptions.position;\n        var onAxis = position !== END && position !== START;\n        var visible = labelOptions.visible;\n\n        if (onAxis || visible === false) {\n            return null;\n        }\n\n        var allAxes = this.groupAxes(this.panes);\n        var crossingAxes = anchor.options.vertical ? allAxes.x : allAxes.y;\n        var anchorCrossings = this.axisCrossingValues(anchor, crossingAxes);\n        var end = position === END;\n        var range = anchor.range();\n        var edge = end ? range.max : range.min;\n        var crossingValue = limitValue(anchorCrossings[axisIndex], range.min, range.max);\n\n        if (crossingValue - edge === 0) {\n            return null;\n        }\n\n        anchorCrossings.splice(axisIndex + 1, 0, edge);\n        anchor.options.axisCrossingValues = anchorCrossings;\n\n        var labelAxis = axis.clone();\n        axis.clear();\n\n        labelAxis.options.name = undefined;\n        labelAxis.options.line.visible = false;\n\n        labelAxis.options.crosshair = undefined;\n        labelAxis.options.notes = undefined;\n        labelAxis.options.plotBands = undefined;\n\n        return labelAxis;\n    },\n\n    isTrendline: function(series) {\n        return series && inArray(series.type, TRENDLINE_SERIES);\n    },\n\n    trendlineFactory: function() { /* abstract */ },\n\n    createTrendlineSeries: function() {\n        var this$1$1 = this;\n\n        var modifiedSeries = [];\n\n        this.series = this.series.map(function (series) {\n            if (!this$1$1.isTrendline(series)) {\n                return series;\n            }\n\n            var forSeries = this$1$1.seriesByName(series.for);\n            if (!forSeries) {\n                throw new Error('Invalid Configuration: Unable to locate linked series ' +\n                    \"\\\"\" + (series.for) + \"\\\" for trendline \\\"\" + (series.name) + \"\\\".\");\n            }\n\n            var valueFields = SeriesBinder.current.valueFields(forSeries);\n            var field = last(valueFields); // Use the last field for multi-field series\n\n            var trendlineSeries = this$1$1.trendlineFactory($.extend({}, {field: field}, series), forSeries);\n            if (trendlineSeries) {\n                if (forSeries.visible === false) {\n                    trendlineSeries.visible = false;\n                }\n\n                if (trendlineSeries.color === datavizConstants.INHERIT) {\n                    trendlineSeries.color = forSeries.color;\n                }\n\n                modifiedSeries.push(trendlineSeries);\n            }\n\n            return trendlineSeries;\n        }).filter(function (series) { return series !== null; });\n\n        return modifiedSeries;\n    },\n\n    seriesByName: function(name) {\n        return this.series.find(function (series) { return series.name === name; });\n    },\n\n    getFirstPoint: function() {\n        return this.pointsBySeriesIndex(0)[0];\n    },\n\n    getPointBelow: function(point) {\n        return this._getNextPoint(point, this._pointsByVertical, 1);\n    },\n\n    getPointAbove: function(point) {\n        return this._getNextPoint(point, this._pointsByVertical, -1);\n    },\n\n    getPointToTheRight: function(point) {\n        return this._getNextPoint(point, this._pointsByHorizontal, 1);\n    },\n\n    getPointToTheLeft: function(point) {\n        return this._getNextPoint(point, this._pointsByHorizontal, -1);\n    },\n\n    _getNextPoint: function(point, getPointsFunc, increment) {\n        var this$1$1 = this;\n\n        var points = getPointsFunc.call(this, point);\n        var pointIndex = points.indexOf(point);\n        var nextIndex = pointIndex + increment;\n        var loopPoints = function (direction) {\n            // loop over to last non-empty collection\n            var result;\n            var offset = 0;\n            do {\n                offset += direction;\n                result = getPointsFunc.call(this$1$1, point, offset);\n            } while (result.length === 0);\n\n            return result;\n        };\n\n        if (nextIndex < 0) {\n            points = loopPoints(-1);\n\n            return points.at(-1);\n        } else if (nextIndex >= points.length) {\n            points = loopPoints(1);\n\n            return points.at(0);\n        }\n\n        return points[nextIndex];\n    },\n\n    _pointsByVertical: function(basePoint) {\n        return this.pointsByPointIndex(basePoint.getIndex());\n    },\n\n    _pointsByHorizontal: function(basePoint, offset) {\n        if (offset === void 0) { offset = 0; }\n\n        var index = cycleIndex(basePoint.series.index + offset, this.series.length);\n        return this.pointsBySeriesIndex(index);\n    }\n});\n\nfunction isSingleAxis(axis) {\n    return !axis.pane.axes.some(function (a) { return a.options.vertical === axis.options.vertical && a !== axis && a.options.visible !== false; }\n    );\n}\n\nfunction axisGroupBox(axes) {\n    var length = axes.length;\n    var box;\n\n    for (var i = 0; i < length; i++) {\n        var axis = axes[i];\n        var visible = axis.options.visible !== false;\n        if (visible || isSingleAxis(axis)) {\n            var axisBox = visible ? axis.contentBox() : axis.lineBox();\n\n            if (!box) {\n                box = axisBox.clone();\n            } else {\n                box.wrap(axisBox);\n            }\n        }\n    }\n\n    return box || new Box();\n}\n\nfunction paneAnchor(axes, pane) {\n    for (var i = 0; i < axes.length; i++) {\n        var anchor = axes[i];\n        if (anchor && anchor.pane === pane) {\n            return anchor;\n        }\n    }\n}\n\nfunction isTransparent(color) {\n    return color === \"\" || color === null || color === \"none\" || color === \"transparent\" || !defined(color);\n}\n\nvar allPaneAxes = function (panes) { return panes.reduce(function (acc, pane) { return acc.concat(pane.axes); }, []); };\n\nsetDefaultOptions(PlotAreaBase, {\n    series: [],\n    plotArea: {\n        margin: {}\n    },\n    background: \"\",\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    paneDefaults: {\n        title: {}\n    },\n    legend: {\n        inactiveItems: {\n            labels: {\n                color: \"#919191\"\n            },\n            markers: {\n                color: \"#919191\"\n            }\n        }\n    }\n});\n\nvar PlotAreaEventsMixin = {\n    hover: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_HOVER);\n    },\n\n    click: function(chart, e) {\n        this._dispatchEvent(chart, e, PLOT_AREA_CLICK);\n    }\n};\n\nvar SeriesAggregator = Class.extend({\n    init: function(series, binder, defaultAggregates) {\n\n        var canonicalFields = binder.canonicalFields(series);\n        var valueFields = binder.valueFields(series);\n        var sourceFields = binder.sourceFields(series, canonicalFields);\n        var seriesFields = this._seriesFields = [];\n        var defaults = defaultAggregates.query(series.type);\n        var rootAggregate = series.aggregate || defaults;\n\n        this._series = series;\n        this._binder = binder;\n\n        for (var i = 0; i < canonicalFields.length; i++) {\n            var field = canonicalFields[i];\n            var fieldAggregate = (void 0);\n\n            if (isObject(rootAggregate)) {\n                fieldAggregate = rootAggregate[field];\n            } else if (i === 0 || inArray(field, valueFields)) {\n                fieldAggregate = rootAggregate;\n            } else {\n                break;\n            }\n\n            if (fieldAggregate) {\n                seriesFields.push({\n                    canonicalName: field,\n                    name: sourceFields[i],\n                    transform: isFunction(fieldAggregate) ? fieldAggregate : Aggregates[fieldAggregate]\n                });\n            }\n        }\n    },\n\n    aggregatePoints: function(srcPoints, group) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref._series;\n        var seriesFields = ref._seriesFields;\n        var data = this._bindPoints(srcPoints || []);\n        var firstDataItem = data.dataItems[0];\n        var result = {};\n\n        if (firstDataItem && !isNumber(firstDataItem) && !isArray(firstDataItem)) {\n            var fn = function() {};\n            fn.prototype = firstDataItem;\n            result = new fn();\n        }\n\n        for (var i = 0; i < seriesFields.length; i++) {\n            var field = seriesFields[i];\n            var srcValues = this$1$1._bindField(data.values, field.canonicalName);\n            var value = field.transform(srcValues, series, data.dataItems, group);\n\n            if (value !== null && isObject(value) && !defined(value.length) && !(value instanceof Date)) {\n                result = value;\n                break;\n            } else {\n                if (defined(value)) {\n                    setValue(field.name, result, value);\n                }\n            }\n        }\n\n        return result;\n    },\n\n    _bindPoints: function(points) {\n        var ref = this;\n        var binder = ref._binder;\n        var series = ref._series;\n        var values = [];\n        var dataItems = [];\n\n        for (var i = 0; i < points.length; i++) {\n            var pointIx = points[i];\n\n            values.push(binder.bindPoint(series, pointIx));\n            dataItems.push(series.data[pointIx]);\n        }\n\n        return {\n            values: values,\n            dataItems: dataItems\n        };\n    },\n\n    _bindField: function(data, field) {\n        var values = [];\n        var count = data.length;\n\n        for (var i = 0; i < count; i++) {\n            var item = data[i];\n            var valueFields = item.valueFields;\n            var value = (void 0);\n\n            if (defined(valueFields[field])) {\n                value = valueFields[field];\n            } else {\n                value = item.fields[field];\n            }\n\n            values.push(value);\n        }\n\n        return values;\n    }\n});\n\nfunction setValue(fieldName, target, value) {\n    var parentObj = target;\n    var field = fieldName;\n\n    if (fieldName.indexOf(\".\") > -1) {\n        var parts = fieldName.split(\".\");\n\n        while (parts.length > 1) {\n            field = parts.shift();\n            if (!defined(parentObj[field])) {\n                parentObj[field] = {};\n            }\n            parentObj = parentObj[field];\n        }\n        field = parts.shift();\n    }\n\n    parentObj[field] = value;\n}\n\nvar DefaultAggregates = Class.extend({\n    init: function() {\n\n        this._defaults = {};\n    },\n\n    register: function(seriesTypes, aggregates) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < seriesTypes.length; i++) {\n            this$1$1._defaults[seriesTypes[i]] = aggregates;\n        }\n    },\n\n    query: function(seriesType) {\n        return this._defaults[seriesType];\n    }\n});\n\nDefaultAggregates.current = new DefaultAggregates();\n\nvar RangeBar = Bar.extend({\n    createLabel: function() {\n        var labels = this.options.labels;\n        var fromOptions = deepExtend({}, labels, labels.from);\n        var toOptions = deepExtend({}, labels, labels.to);\n\n        if (fromOptions.visible) {\n            this.labelFrom = this.createLabelElement(fromOptions);\n            this.append(this.labelFrom);\n        }\n\n        if (toOptions.visible) {\n            this.labelTo = this.createLabelElement(toOptions);\n            this.append(this.labelTo);\n        }\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var ref = this;\n        var labelFrom = ref.labelFrom;\n        var labelTo = ref.labelTo;\n        var value = ref.value;\n\n        this.box = targetBox;\n\n        if (labelFrom) {\n            labelFrom.options.aboveAxis = value.from > value.to;\n            labelFrom.reflow(targetBox);\n        }\n\n        if (labelTo) {\n            labelTo.options.aboveAxis = value.to > value.from;\n            labelTo.reflow(targetBox);\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n    }\n});\n\nRangeBar.prototype.defaults = deepExtend({}, RangeBar.prototype.defaults, {\n    labels: {\n        format: \"{0} - {1}\"\n    },\n    tooltip: {\n        format: \"{1}\"\n    }\n});\n\nvar RangeBarChart = BarChart.extend({\n    pointType: function() {\n        return RangeBar;\n    },\n\n    pointValue: function(data) {\n        return data.valueFields;\n    },\n\n    formatPointValue: function(point, format) {\n        if (point.value.from === null && point.value.to === null) {\n            return \"\";\n        }\n\n        return this.chartService.format.auto(format, point.value.from, point.value.to);\n    },\n\n    plotRange: function(point) {\n        if (!point) {\n            return 0;\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    updateRange: function(value, fields) {\n        var axisName = fields.series.axis;\n        var from = value.from;\n        var to = value.to;\n        var axisRange = this.valueAxisRanges[axisName];\n\n        if (value !== null && isNumber(from) && isNumber(to)) {\n            axisRange = this.valueAxisRanges[axisName] = axisRange || { min: MAX_VALUE, max: MIN_VALUE };\n\n            axisRange.min = Math.min(axisRange.min, from);\n            axisRange.max = Math.max(axisRange.max, from);\n\n            axisRange.min = Math.min(axisRange.min, to);\n            axisRange.max = Math.max(axisRange.max, to);\n        }\n    },\n\n    aboveAxis: function(point) {\n        var value = point.value;\n        return value.from < value.to;\n    }\n});\n\nRangeBarChart.prototype.plotLimits = CategoricalChart.prototype.plotLimits;\n\nvar RangeLinePoint = LinePoint.extend({\n    aliasFor: function() {\n        return this.parent;\n    }\n});\n\nvar AUTO = 'auto';\nvar DEFAULT_FROM_FORMAT = '{0}';\nvar DEFAULT_TO_FORMAT = '{1}';\n\nvar RangeAreaPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.value = value;\n        this.options = options;\n        this.aboveAxis = valueOrDefault(this.options.aboveAxis, true);\n        this.tooltipTracking = true;\n        this._id = guid();\n        this.initLabelsFormat();\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        var ref = this.options;\n        var markers = ref.markers;\n        var labels = ref.labels;\n        var value = this.value;\n\n        var fromPoint = this.fromPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.from,\n            markers: markers.from\n        }));\n\n        var toPoint = this.toPoint = new RangeLinePoint(value, deepExtend({}, this.options, {\n            labels: labels.to,\n            markers: markers.to\n        }));\n\n        this.copyFields(fromPoint);\n        this.copyFields(toPoint);\n\n        this.append(fromPoint);\n        this.append(toPoint);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var fromBox = targetBox.from;\n        var toBox = targetBox.to;\n\n        this.positionLabels(fromBox, toBox);\n\n        this.fromPoint.reflow(fromBox);\n        this.toPoint.reflow(toBox);\n\n        this.box = this.fromPoint.markerBox().clone().wrap(this.toPoint.markerBox());\n    },\n\n    createHighlight: function() {\n        var group = new Group();\n        group.append(this.fromPoint.createHighlight());\n        group.append(this.toPoint.createHighlight());\n\n        return group;\n    },\n\n    highlightVisual: function() {\n        return this.visual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            from: this.fromPoint.highlightVisualArgs(),\n            to: this.toPoint.highlightVisualArgs()\n        };\n    },\n\n    createFocusHighlight: function() {\n        var group = new Group();\n        group.append(this.fromPoint.createFocusHighlight());\n        group.append(this.toPoint.createFocusHighlight());\n\n        return group;\n    },\n\n    tooltipAnchor: function() {\n        var clipBox = this.owner.pane.clipBox();\n        var showTooltip = !clipBox || clipBox.overlaps(this.box);\n\n        if (showTooltip) {\n            var box = this.box;\n            var center = box.center();\n            var horizontalAlign = LEFT;\n            var x, y, verticalAlign;\n\n            if (this.options.vertical) {\n                x = center.x;\n                y = box.y1 - TOOLTIP_OFFSET;\n                verticalAlign = BOTTOM;\n            } else {\n                x = box.x2 + TOOLTIP_OFFSET;\n                y = center.y;\n                verticalAlign = CENTER;\n            }\n\n            return {\n                point: new Point(x, y),\n                align: {\n                    horizontal: horizontalAlign,\n                    vertical: verticalAlign\n                }\n            };\n        }\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        this.fromPoint.unclipElements();\n        this.toPoint.unclipElements();\n    },\n\n    initLabelsFormat: function() {\n        var labels = this.options.labels;\n        if (!labels.format) {\n            if (!labels.from || !labels.from.format) {\n                labels.from = $.extend({}, labels.from, {\n                    format: DEFAULT_FROM_FORMAT\n                });\n            }\n\n            if (!labels.to || !labels.to.format) {\n                labels.to = $.extend({}, labels.to, {\n                    format: DEFAULT_TO_FORMAT\n                });\n            }\n        }\n    },\n\n    positionLabels: function(fromBox, toBox) {\n        var ref = this.options;\n        var labels = ref.labels;\n        var vertical = ref.vertical;\n\n        if (labels.position === AUTO) {\n            var fromLabelPosition, toLabelPosition;\n            if (vertical) {\n                if (toBox.y1 <= fromBox.y1) {\n                    toLabelPosition = ABOVE;\n                    fromLabelPosition = BELOW;\n                } else {\n                    toLabelPosition = BELOW;\n                    fromLabelPosition = ABOVE;\n                }\n            } else {\n                if (toBox.x1 <= fromBox.x1) {\n                    toLabelPosition = LEFT;\n                    fromLabelPosition = RIGHT;\n                } else {\n                    toLabelPosition = RIGHT;\n                    fromLabelPosition = LEFT;\n                }\n            }\n\n            if (!labels.from || !labels.from.position) {\n                this.fromPoint.options.labels.position = fromLabelPosition;\n            }\n\n            if (!labels.to || !labels.to.position) {\n                this.toPoint.options.labels.position = toLabelPosition;\n            }\n        }\n    },\n\n    copyFields: function(point) {\n        point.dataItem = this.dataItem;\n        point.category = this.category;\n        point.series = this.series;\n        point.color = this.color;\n        point.owner = this.owner;\n    },\n\n    focusVisual: function() {\n        this.fromPoint.focusVisual();\n    },\n\n    clearFocusFromVisual: function() {\n        this.toPoint.clearFocusFromVisual();\n    },\n\n    getIndex: function() {\n        return this.categoryIx;\n    }\n});\n\ndeepExtend(RangeAreaPoint.prototype, PointEventsMixin);\ndeepExtend(RangeAreaPoint.prototype, NoteMixin);\n\nRangeAreaPoint.prototype.defaults = {\n    markers: {\n        visible: false,\n        background: WHITE,\n        size: LINE_MARKER_SIZE,\n        type: CIRCLE,\n        border: {\n            width: 2\n        },\n        opacity: 1\n    },\n    labels: {\n        visible: false,\n        margin: getSpacing(3),\n        padding: getSpacing(4),\n        animation: {\n            type: FADEIN,\n            delay: INITIAL_ANIMATION_DURATION\n        },\n        position: AUTO\n    },\n    notes: {\n        label: {}\n    },\n    highlight: {\n        markers: {\n            border: {\n                color: WHITE,\n                width: 2\n            }\n        },\n        zIndex: datavizConstants.HIGHLIGHT_ZINDEX\n    },\n    tooltip: {\n        format: '{0} - {1}'\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n};\n\nvar RangeAreaSegment = AreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.toGeometryPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.toGeometryPoints(this.fromPoints().reverse()));\n        }\n\n        return fromSegments;\n    },\n\n    createStroke: function(style) {\n        var toPath = new Path(style);\n        var fromPath = new Path(style);\n\n        toPath.segments.push.apply(toPath.segments, this.strokeSegments());\n        fromPath.segments.push.apply(fromPath.segments, this.stackSegments());\n\n        this.visual.append(toPath);\n        this.visual.append(fromPath);\n    },\n\n    hasStackSegment: function() {\n        return true;\n    },\n\n    fromPoints: function() {\n        return this.linePoints.map(function (point) { return point.fromPoint; });\n    },\n\n    toPoints: function() {\n        return this.linePoints.map(function (point) { return point.toPoint; });\n    }\n});\n\nvar SplineRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.createCurveSegments(this.toPoints());\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.createCurveSegments(this.fromPoints().reverse());\n        }\n\n        return fromSegments;\n    },\n\n    createCurveSegments: function(points) {\n        var curveProcessor = new CurveProcessor();\n\n        return curveProcessor.process(this.toGeometryPoints(points));\n    }\n});\n\nvar StepRangeAreaSegment = RangeAreaSegment.extend({\n    createStrokeSegments: function() {\n        return this.segmentsFromPoints(this.calculateStepPoints(this.toPoints()));\n    },\n\n    stackSegments: function() {\n        var fromSegments = this.fromSegments;\n        if (!this.fromSegments) {\n            fromSegments = this.fromSegments = this.segmentsFromPoints(this.calculateStepPoints(this.fromPoints()));\n            fromSegments.reverse();\n        }\n\n        return fromSegments;\n    }\n});\n\ndeepExtend(StepRangeAreaSegment.prototype, StepLineMixin);\n\nvar RangeAreaChart = CategoricalChart.extend({\n    render: function() {\n        CategoricalChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    pointType: function() {\n        return RangeAreaPoint;\n    },\n\n    createPoint: function(data, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var value = data.valueFields;\n\n        if (!hasValue(value.from) && !hasValue(value.to)) {\n            if (this.seriesMissingValues(series) === ZERO) {\n                value = {\n                    from: 0,\n                    to: 0\n                };\n            } else {\n                return null;\n            }\n        }\n\n        var pointOptions = this.pointOptions(series, seriesIx);\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        var color = data.fields.color || series.color;\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        }\n\n        var point = new RangeAreaPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segmentType;\n        if (style === \"smooth\") {\n            segmentType = SplineRangeAreaSegment;\n        } else if (style === \"step\") {\n            segmentType = StepRangeAreaSegment;\n        } else {\n            segmentType = RangeAreaSegment;\n        }\n\n        return new segmentType(linePoints, currentSeries, seriesIx);\n    },\n\n    plotRange: function(point, startValue) {\n        if (!point) {\n            return [ startValue, startValue ];\n        }\n\n        return [ point.value.from, point.value.to ];\n    },\n\n    valueSlot: function(valueAxis, plotRange) {\n        var fromSlot = valueAxis.getSlot(plotRange[0], plotRange[0], !this.options.clip);\n        var toSlot = valueAxis.getSlot(plotRange[1], plotRange[1], !this.options.clip);\n        if (fromSlot && toSlot) {\n            return {\n                from: fromSlot,\n                to: toSlot\n            };\n        }\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var from = valueSlot.from;\n        var to = valueSlot.to;\n        var fromSlot, toSlot;\n\n        if (this.options.invertAxes) {\n            fromSlot = new Box(from.x1, categorySlot.y1, from.x2, categorySlot.y2);\n            toSlot = new Box(to.x1, categorySlot.y1, to.x2, categorySlot.y2);\n        } else {\n            fromSlot = new Box(categorySlot.x1, from.y1, categorySlot.x2, from.y2);\n            toSlot = new Box(categorySlot.x1, to.y1, categorySlot.x2, to.y2);\n        }\n\n        return {\n            from: fromSlot,\n            to: toSlot\n        };\n    },\n\n    addValue: function(data, fields) {\n        var valueFields = data.valueFields;\n        if (!isNumber(valueFields.from)) {\n            valueFields.from = valueFields.to;\n        }\n\n        if (!isNumber(valueFields.to)) {\n            valueFields.to = valueFields.from;\n        }\n\n        CategoricalChart.fn.addValue.call(this, data, fields);\n    },\n\n    updateRange: function(value, fields) {\n        if (value !== null && isNumber(value.from) && isNumber(value.to)) {\n            var axisName = fields.series.axis;\n            var axisRange = this.valueAxisRanges[axisName] = this.valueAxisRanges[axisName] || { min: MAX_VALUE, max: MIN_VALUE };\n            var from = value.from;\n            var to = value.to;\n\n            axisRange.min = Math.min(axisRange.min, from, to);\n            axisRange.max = Math.max(axisRange.max, from, to);\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n\n        return this.chartService.format.auto(format, value.from, value.to);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            var point = points[idx];\n            if (point) {\n                result.push((point.fromPoint || {}).marker);\n                result.push((point.toPoint || {}).marker);\n            }\n        }\n\n        return result.concat(this._segments);\n    }\n});\n\ndeepExtend(RangeAreaChart.prototype, LineChartMixin, ClipAnimationMixin);\n\nvar OHLCPoint = Candlestick.extend({\n    reflow: function(box) {\n        var ref = this;\n        var options = ref.options;\n        var value = ref.value;\n        var chart = ref.owner;\n        var valueAxis = chart.seriesValueAxis(options);\n        var oPoints = [];\n        var cPoints = [];\n        var lhPoints = [];\n\n        var lhSlot = valueAxis.getSlot(value.low, value.high);\n        var oSlot = valueAxis.getSlot(value.open, value.open);\n        var cSlot = valueAxis.getSlot(value.close, value.close);\n\n        oSlot.x1 = cSlot.x1 = lhSlot.x1 = box.x1;\n        oSlot.x2 = cSlot.x2 = lhSlot.x2 = box.x2;\n\n        var mid = lhSlot.center().x;\n\n        oPoints.push([ oSlot.x1, oSlot.y1 ]);\n        oPoints.push([ mid, oSlot.y1 ]);\n        cPoints.push([ mid, cSlot.y1 ]);\n        cPoints.push([ cSlot.x2, cSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y1 ]);\n        lhPoints.push([ mid, lhSlot.y2 ]);\n\n        this.lines = [\n            oPoints, cPoints, lhPoints\n        ];\n\n        this.box = lhSlot.clone().wrap(oSlot.clone().wrap(cSlot));\n\n        this.reflowNote();\n    },\n\n    createBody: function() {}\n});\n\nvar OHLCChart = CandlestickChart.extend({\n    pointType: function() {\n        return OHLCPoint;\n    }\n});\n\nvar WaterfallSegment = ChartElement.extend({\n    init: function(from, to, series) {\n        ChartElement.fn.init.call(this);\n\n        this.from = from;\n        this.to = to;\n        this.series = series;\n    },\n\n    linePoints: function() {\n        var from = this.from;\n        var ref = this;\n        var fromBox = ref.from.box;\n        var toBox = ref.to.box;\n        var points = [];\n\n        if (from.isVertical) {\n            var y = from.aboveAxis ? fromBox.y1 : fromBox.y2;\n            points.push(\n                [ fromBox.x1, y ],\n                [ toBox.x2, y ]\n            );\n        } else {\n            var x = from.aboveAxis ? fromBox.x2 : fromBox.x1;\n            points.push(\n                [ x, fromBox.y1 ],\n                [ x, toBox.y2 ]\n            );\n        }\n\n        return points;\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        var line = this.series.line || {};\n\n        var path = Path.fromPoints(this.linePoints(), {\n            stroke: {\n                color: line.color,\n                width: line.width,\n                opacity: line.opacity,\n                dashType: line.dashType\n            }\n        });\n\n        alignPathToPixel(path);\n        this.visual.append(path);\n    }\n});\n\nsetDefaultOptions(WaterfallSegment, {\n    animation: {\n        type: FADEIN,\n        delay: INITIAL_ANIMATION_DURATION\n    }\n});\n\nvar WaterfallChart = BarChart.extend({\n    render: function() {\n        BarChart.fn.render.call(this);\n        this.createSegments();\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var totalCategories = categoriesCount(series);\n        var isVertical = !this.options.invertAxes;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var total = 0;\n            var runningTotal = 0;\n\n            for (var categoryIx = 0; categoryIx < totalCategories; categoryIx++) {\n                var data = SeriesBinder.current.bindPoint(currentSeries, categoryIx);\n                var value = data.valueFields.value;\n                var summary = data.fields.summary;\n                var from = total;\n                var to = (void 0);\n\n                if (summary) {\n                    if (summary.toLowerCase() === \"total\") {\n                        data.valueFields.value = total;\n                        from = 0;\n                        to = total;\n                    } else {\n                        data.valueFields.value = runningTotal;\n                        to = from - runningTotal;\n                        runningTotal = 0;\n                    }\n                } else if (isNumber(value)) {\n                    runningTotal += value;\n                    total += value;\n                    to = total;\n                }\n\n                callback(data, {\n                    category: this$1$1.categoryAxis.categoryAt(categoryIx),\n                    categoryIx: categoryIx,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    total: total,\n                    runningTotal: runningTotal,\n                    from: from,\n                    to: to,\n                    isVertical: isVertical\n                });\n            }\n        }\n    },\n\n    updateRange: function(value, fields) {\n        BarChart.fn.updateRange.call(this, { value: fields.to }, fields);\n    },\n\n    aboveAxis: function(point) {\n        return point.value >= 0;\n    },\n\n    plotRange: function(point) {\n        return [ point.from, point.to ];\n    },\n\n    createSegments: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n        var seriesPoints = this.seriesPoints;\n        var segments = this.segments = [];\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var points = seriesPoints[seriesIx];\n\n            if (points) {\n                var prevPoint = (void 0);\n                for (var pointIx = 0; pointIx < points.length; pointIx++) {\n                    var point = points[pointIx];\n\n                    if (point && prevPoint) {\n                        var segment = new WaterfallSegment(prevPoint, point, currentSeries);\n                        segments.push(segment);\n                        this$1$1.append(segment);\n                    }\n\n                    prevPoint = point;\n                }\n            }\n        }\n    }\n});\n\nfunction trendlineFactory(registry, type, context) {\n    var impl = registry[String(type)];\n    if (impl) {\n        return impl(context);\n    }\n\n    return null;\n}\n\n// Optimized version of calculatePolynomial for order = 1\nfunction calculateSlope(sourceValues, valueGetter) {\n    var x = 0;\n    var y = 0;\n    var x2 = 0;\n    var xy = 0;\n    var count = 0;\n    var slope, intercept;\n    var xMin = Number.MAX_VALUE;\n    var xMax = Number.MIN_VALUE;\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(xValue) && xValue !== null && isFinite(yValue) && yValue !== null) {\n            xMin = Math.min(xValue, xMin);\n            xMax = Math.max(xValue, xMax);\n\n            count++;\n            x += xValue;\n            y += yValue;\n            x2 += Math.pow(xValue, 2);\n            xy += xValue * yValue;\n        }\n    }\n\n    if (count > 0) {\n        slope = (count * xy - x * y) / (count * x2 - Math.pow(x, 2));\n        intercept = (y - slope * x) / count;\n    }\n\n    return { slope: slope, intercept: intercept, count: count, xMin: xMin, xMax: xMax };\n}\n\nvar checkAllPositive = function (sourceValues, fieldName) { return sourceValues.every(function (ref) {\n        var valueFields = ref.valueFields;\n\n        return !hasValue(valueFields[fieldName]) || valueFields[fieldName] > 0;\n        }); };\n\nfunction getTrendlineData(valueMapper, categoryAxis) {\n    var data = [];\n    var totalRange = categoryAxis.totalRangeIndices();\n    var currentRange = categoryAxis.currentRangeIndices();\n    var range = {\n        min: Math.floor(Math.max(currentRange.min - 1, totalRange.min)),\n        max: Math.ceil(Math.min(currentRange.max + 2, totalRange.max))\n    };\n\n    for (var i = range.min; i < range.max; i++) {\n        var x = (i + 1);\n        data[i] = {\n            category: categoryAxis.categoryAt(i, true),\n            value: valueMapper(x)\n        };\n    }\n\n    return data;\n}\n\nfunction exponentialTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var data = getData({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx + 1, yValue: Math.log(valueFields[fieldName]) });\n }    };\n\nfunction getData(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var sourceValues = seriesValues();\n    if (!checkAllPositive(sourceValues, options.field)) {\n        return null;\n    }\n\n    var ref$1 = calculateSlope(sourceValues, valueGetter(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    if (count > 0) {\n        // Exponential trendline equation:\n        // y = a * e ^ (b * x)\n        var a = Math.exp(intercept);\n        var b = slope;\n\n        return getTrendlineData(function (x) { return a * Math.exp(b * x); }, categoryAxis);\n    }\n\n    return null;\n}\n\nfunction linearTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$1({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$1 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx + 1, yValue: valueFields[fieldName] });\n }    };\n\nfunction getData$1(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var ref$1 = calculateSlope(seriesValues(), valueGetter$1(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n\n    if (count > 0) {\n        return getTrendlineData(function (x) { return slope * x + intercept; }, categoryAxis);\n    }\n\n    return null;\n}\n\nfunction logarithmicTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$2({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$2 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: Math.log(categoryIx + 1), yValue: valueFields[fieldName] });\n }    };\n\nfunction getData$2(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var ref$1 = calculateSlope(seriesValues(), valueGetter$2(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    if (count > 0) {\n        // Logarithmic trendline equation:\n        // y = a * ln (x) + b\n        var a = slope;\n        var b = intercept;\n        return getTrendlineData(function (x) { return a * Math.log(x) + b; }, categoryAxis);\n    }\n\n    return null;\n}\n\nfunction calculateMovingAverage(sourceValues, valueGetter, period) {\n    var averagePoints = [];\n    var values = [];\n    var start = Math.max(MIN_MOVING_AVERAGE_PERIOD, period) - 1;\n\n    var end = 0;\n    var sum = 0;\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(yValue) && yValue !== null) {\n            values.push(yValue);\n            sum += yValue;\n            end = Math.max(i, end);\n        } else {\n            values.push(null);\n        }\n\n        if (i >= start) {\n            var count = values.filter(function (value) { return value !== null; }).length;\n            var lastValue = values.shift() || 0;\n\n            if (count > 0) {\n                var average = sum / count;\n                averagePoints.push([xValue, average]);\n\n                sum -= lastValue;\n                continue;\n            }\n        }\n\n        averagePoints.push([xValue, null]);\n    }\n\n    return averagePoints.slice(0, end + 1);\n}\n\nfunction movingAverageTrendline(context) {\n    var options = context.options;\n\n    var data = getData$3(context);\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$3 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx, yValue: valueFields[fieldName] });\n }    };\n\nfunction calculatePoints(ref) {\n    var options = ref.options;\n    var categoryAxis = ref.categoryAxis;\n    var seriesValues = ref.seriesValues;\n\n    var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n    var totalRange = categoryAxis.totalRangeIndices();\n    var currentRange = categoryAxis.currentRangeIndices();\n    var range = {\n        min: Math.floor(Math.max(currentRange.min - period, totalRange.min)),\n        max: Math.ceil(Math.min(currentRange.max + period + 2, totalRange.max))\n    };\n\n    return calculateMovingAverage(seriesValues(range), valueGetter$3(options.field), period);\n}\n\nfunction getData$3(context) {\n    var categoryAxis = context.categoryAxis;\n    var points = calculatePoints(context);\n    var data = [];\n    points.forEach(function (ref) {\n        var categoryIx = ref[0];\n        var value = ref[1];\n\n        data[categoryIx] = {\n            category: categoryAxis.categoryAt(categoryIx, true),\n            value: value\n        };\n    });\n\n    if (data.length > 0) {\n        return data;\n    }\n\n    return null;\n}\n\nvar MIN_ORDER = 1;\nvar MAX_ORDER = 6;\n\nfunction calculatePolynomial(sourceValues, valueGetter, order) {\n    var k = Math.min(Math.max(order || MIN_ORDER, MIN_ORDER), MAX_ORDER) + 1;\n    var X$$1 = new dataviz.Matrix();\n    var Y$$1 = new dataviz.Matrix();\n    var count = 0;\n    var xMin = Number.MAX_VALUE;\n    var xMax = Number.MIN_VALUE;\n    var valueMapper = function (x) { return x; };\n    var coefficients = [];\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(xValue) && xValue !== null && isFinite(yValue) && yValue !== null) {\n            xMin = Math.min(xValue, xMin);\n            xMax = Math.max(xValue, xMax);\n            count++;\n\n            // Set Y value in matrix\n            Y$$1.set(i, 0, yValue);\n\n            // Set indicator column to 1 for valid values\n            X$$1.set(i, 0, 1);\n            X$$1.set(i, 1, xValue);\n            for (var pow = 2; pow <= k; pow++) {\n                X$$1.set(i, pow, Math.pow(X$$1.get(i, 1), pow));\n            }\n        } else {\n            // Set indicator column to 0 for missing values\n            X$$1.set(i, 0, 0);\n        }\n    }\n\n    // Limit order to number of values.\n    X$$1.width = Math.min(k, count);\n\n    if (count > 0) {\n        // Polynomial trendline equation:\n        // y = aN * x^N + ... + a2 * x^2 + a1 * x + a0\n        coefficients = linearRegression(X$$1, Y$$1);\n        valueMapper = function (x) { return coefficients.reduce(function (y, a, n) { return y + a * Math.pow(x, n); }, 0); };\n    }\n\n    return {\n        coefficients: coefficients,\n        count: count,\n        valueMapper: valueMapper,\n        xMin: xMin,\n        xMax: xMax\n    };\n}\n\nfunction linearRegression(X$$1, Y$$1) {\n    var Xt = X$$1.transpose();\n    var B = Xt.multiply(X$$1).inverse().multiply(Xt).multiply(Y$$1); // the last square estimate of the coefficients\n\n    var coefficients = [];\n    for (var i = 0; i < B.height; i++) {\n        coefficients.push(B.get(i, 0));\n    }\n\n    // y_intercept and regression coefficients ('slopes')\n    return coefficients;\n\n    // It's possible to calculate statistics for the regression based on\n    // the LINEST function implementation in kendo-spreadsheet-common/src/calc.js\n    //\n    // * The standard errors (of coefficients and y-intercept)\n    // * The coefficient of determination (R^2)\n    // * The standard error for the y estimate\n    // * The F statistic\n    // * The degrees of freedom\n    // * The regression sum of squares (SSR)\n    // * The residual sum of squares (SSE)\n}\n\nfunction polynomialTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$4({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$4 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: categoryIx + 1, yValue: valueFields[fieldName] });\n }    };\n\nfunction getData$4(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var order = (options.trendline || {}).order;\n    var ref$1 = calculatePolynomial(seriesValues(), valueGetter$4(options.field), order);\n    var count = ref$1.count;\n    var valueMapper = ref$1.valueMapper;\n\n    if (count > 0) {\n        // Polynomial trendline equation:\n        // y = aN * x^N + ... + a2 * x^2 + a1 * x + a0\n\n        return getTrendlineData(function (x) { return valueMapper(x); }, categoryAxis);\n    }\n\n    return null;\n}\n\nfunction powerTrendline(context) {\n    var options = context.options;\n    var categoryAxis = context.categoryAxis;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$5({ seriesValues: seriesValues, categoryAxis: categoryAxis, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'line',\n            data: data,\n            categoryField: 'category',\n            field: 'value'});\n    }\n\n    return null;\n}\n\nvar valueGetter$5 = function (fieldName) { return function (ref) {\n        var categoryIx = ref.categoryIx;\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: Math.log(categoryIx + 1), yValue: Math.log(valueFields[fieldName]) });\n }    };\n\nfunction getData$5(ref) {\n    var seriesValues = ref.seriesValues;\n    var categoryAxis = ref.categoryAxis;\n    var options = ref.options;\n\n    var sourceValues = seriesValues();\n    if (!checkAllPositive(sourceValues, options.field)) {\n        return null;\n    }\n\n    var ref$1 = calculateSlope(sourceValues, valueGetter$5(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    if (count > 0) {\n        // Power trendline equation:\n        // y = a * x ^ b\n        var a = Math.exp(intercept);\n        var b = slope;\n\n        return getTrendlineData(function (x) { return a * Math.pow(x, b); }, categoryAxis);\n    }\n\n    return null;\n}\n\nvar registry = {};\nregistry[TRENDLINE_EXPONENTIAL] = exponentialTrendline;\nregistry[TRENDLINE_LINEAR] = linearTrendline;\nregistry[TRENDLINE_LOGARITHMIC] = logarithmicTrendline;\nregistry[TRENDLINE_MOVING_AVERAGE] = movingAverageTrendline;\nregistry[TRENDLINE_POLYNOMIAL] = polynomialTrendline;\nregistry[TRENDLINE_POWER] = powerTrendline;\n\nvar AREA_SERIES = [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA ];\nvar OUT_OF_RANGE_SERIES = [ LINE, VERTICAL_LINE ].concat(AREA_SERIES);\n\nvar CategoricalPlotArea = PlotAreaBase.extend({\n    initFields: function(series) {\n        var this$1$1 = this;\n\n        this.namedCategoryAxes = {};\n        this.namedValueAxes = {};\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n        this._seriesPointsCache = {};\n        this._currentPointsCache = {};\n\n        if (series.length > 0) {\n            this.invertAxes = inArray(\n                series[0].type, [ BAR, BULLET, VERTICAL_LINE, VERTICAL_AREA, VERTICAL_RANGE_AREA,\n                    RANGE_BAR, HORIZONTAL_WATERFALL, VERTICAL_BOX_PLOT ]\n            );\n\n            for (var i = 0; i < series.length; i++) {\n                var stack = series[i].stack;\n                if (stack && stack.type === \"100%\") {\n                    this$1$1.stack100 = true;\n                    break;\n                }\n            }\n        }\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.series = [].concat( this.originalSeries );\n        this.createCategoryAxes(panes);\n\n        this.aggregateCategories(panes);\n        this.createTrendlineSeries(panes);\n\n        this.createCategoryAxesLabels(panes);\n        this.createCharts(panes);\n        this.createValueAxes(panes);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis instanceof CategoryAxis) {\n            delete this.namedCategoryAxes[axisName];\n        } else {\n            this.valueAxisRangeTracker.reset(axisName);\n            delete this.namedValueAxes[axisName];\n        }\n\n        if (axis === this.categoryAxis) {\n            delete this.categoryAxis;\n        }\n\n        if (axis === this.valueAxis) {\n            delete this.valueAxis;\n        }\n    },\n\n    trendlineFactory: function(options, series) {\n        var categoryAxis = this.seriesCategoryAxis(options);\n        var seriesValues = this.seriesValues.bind(this, series.index);\n\n        var trendline = trendlineFactory(registry, options.type, {\n            options: options,\n            categoryAxis: categoryAxis,\n            seriesValues: seriesValues\n        });\n\n        if (trendline) {\n            // Inherit settings\n            trendline.categoryAxis = series.categoryAxis;\n            trendline.valueAxis = series.valueAxis;\n\n            return this.filterSeries(trendline, categoryAxis);\n        }\n\n        return trendline;\n    },\n\n    trendlineAggregateForecast: function() {\n        return this.series\n            .map(function (series) { return (series.trendline || {}).forecast; })\n            .filter(function (forecast) { return forecast !== undefined; })\n            .reduce(function (result, forecast) { return ({\n                before: Math.max(result.before, forecast.before || 0),\n                after: Math.max(result.after, forecast.after || 0)\n            }); }, { before: 0, after: 0 });\n    },\n\n    seriesValues: function(seriesIx, range) {\n        var this$1$1 = this;\n\n        var result = [];\n\n        var series = this.srcSeries[seriesIx];\n        var categoryAxis = this.seriesCategoryAxis(series);\n        var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n        if (dateAxis) {\n            this._seriesPointsCache = {};\n            this._currentPointsCache = {};\n            categoryAxis.options.dataItems = [];\n            series = this.aggregateSeries(series, categoryAxis, categoryAxis.totalRangeIndices());\n        }\n\n        var min = range ? range.min : 0;\n        var max = range ? range.max : series.data.length;\n        for (var categoryIx = min; categoryIx < max; categoryIx++) {\n            var data = this$1$1.bindPoint(series, categoryIx);\n            result.push({ categoryIx: categoryIx, category: data.fields.category, valueFields: data.valueFields });\n        }\n\n        return result;\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n\n            var visibleSeries = this$1$1.filterVisibleSeries(paneSeries);\n            if (!visibleSeries) {\n                continue;\n            }\n\n            var groups = this$1$1.groupSeriesByCategoryAxis(visibleSeries);\n            for (var groupIx = 0; groupIx < groups.length; groupIx++) {\n                this$1$1.createChartGroup(groups[groupIx], pane);\n            }\n        }\n    },\n\n    createChartGroup: function(series, pane) {\n        this.createAreaChart(\n            filterSeriesByType(series, [ AREA, VERTICAL_AREA ]), pane\n        );\n\n        this.createRangeAreaChart(\n            filterSeriesByType(series, [ RANGE_AREA, VERTICAL_RANGE_AREA ]), pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ COLUMN, BAR ]), pane\n        );\n\n        this.createRangeBarChart(\n            filterSeriesByType(series, [ RANGE_COLUMN, RANGE_BAR ]), pane\n        );\n\n        this.createBulletChart(\n            filterSeriesByType(series, [ BULLET, VERTICAL_BULLET ]), pane\n        );\n\n        this.createCandlestickChart(\n            filterSeriesByType(series, CANDLESTICK), pane\n        );\n\n        this.createBoxPlotChart(\n            filterSeriesByType(series, [ BOX_PLOT, VERTICAL_BOX_PLOT ]), pane\n        );\n\n        this.createOHLCChart(\n            filterSeriesByType(series, OHLC), pane\n        );\n\n        this.createWaterfallChart(\n            filterSeriesByType(series, [ WATERFALL, HORIZONTAL_WATERFALL ]), pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ LINE, VERTICAL_LINE ]), pane\n        );\n    },\n\n    aggregateCategories: function(panes) {\n        var this$1$1 = this;\n\n        var series = [].concat( this.series );\n        var processedSeries = [];\n        this._currentPointsCache = {};\n        this._seriesPointsCache = this._seriesPointsCache || {};\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n\n            if (!this$1$1.isTrendline(currentSeries)) {\n                var categoryAxis = this$1$1.seriesCategoryAxis(currentSeries);\n                var axisPane = this$1$1.findPane(categoryAxis.options.pane);\n                var dateAxis = equalsIgnoreCase(categoryAxis.options.type, DATE);\n\n                if ((dateAxis || currentSeries.categoryField) && inArray(axisPane, panes)) {\n                    currentSeries = this$1$1.aggregateSeries(currentSeries, categoryAxis, categoryAxis.currentRangeIndices());\n                } else {\n                    currentSeries = this$1$1.filterSeries(currentSeries, categoryAxis);\n                }\n            }\n\n            processedSeries.push(currentSeries);\n        }\n\n        this._seriesPointsCache = this._currentPointsCache;\n        this._currentPointsCache = null;\n\n        this.srcSeries = series;\n        this.series = processedSeries;\n    },\n\n    filterSeries: function(series, categoryAxis) {\n        var dataLength = (series.data || {}).length;\n        categoryAxis._seriesMax = Math.max(categoryAxis._seriesMax || 0, dataLength);\n\n        if (!(defined(categoryAxis.options.min) || defined(categoryAxis.options.max))) {\n            return series;\n        }\n\n        var range = categoryAxis.currentRangeIndices();\n        var outOfRangePoints = inArray(series.type, OUT_OF_RANGE_SERIES);\n        var currentSeries = deepExtend({}, series);\n\n        currentSeries.data = (currentSeries.data || []).slice(range.min, range.max + 1);\n\n        if (outOfRangePoints) {\n            createOutOfRangePoints(currentSeries, range, dataLength, function (idx) { return ({\n                item: series.data[idx],\n                category: categoryAxis.categoryAt(idx, true),\n                categoryIx: idx - range.min\n            }); }, function (idx) { return defined(series.data[idx]); });\n        }\n\n        return currentSeries;\n    },\n\n    clearSeriesPointsCache: function() {\n        this._seriesPointsCache = {};\n    },\n\n    seriesSourcePoints: function(series, categoryAxis) {\n        var this$1$1 = this;\n\n        var key = (series.index) + \";\" + (categoryAxis.categoriesHash());\n        if (this._seriesPointsCache && this._seriesPointsCache[key]) {\n            this._currentPointsCache[key] = this._seriesPointsCache[key];\n            return this._seriesPointsCache[key];\n        }\n\n        var axisOptions = categoryAxis.options;\n        var srcCategories = axisOptions.srcCategories;\n        var dateAxis = equalsIgnoreCase(axisOptions.type, DATE);\n        var srcData = series.data;\n        var result = [];\n        if (!dateAxis) {\n            categoryAxis.indexCategories();\n        }\n\n        for (var idx = 0; idx < srcData.length; idx++) {\n            var category = SeriesBinder.current.bindPoint(series, idx).fields.category;\n            if (dateAxis) {\n                category = parseDateCategory(category, srcData[idx], this$1$1.chartService.intl);\n            }\n\n            if (!defined(category)) {\n                category = srcCategories[idx];\n            }\n\n            if (defined(category) && category !== null) {\n                var categoryIx = categoryAxis.totalIndex(category);\n                result[categoryIx] = result[categoryIx] || { items: [], category: category };\n                result[categoryIx].items.push(idx);\n            }\n        }\n\n        this._currentPointsCache[key] = result;\n\n        return result;\n    },\n\n    aggregateSeries: function(series, categoryAxis, range) {\n        var srcData = series.data;\n        if (!srcData.length) {\n            return series;\n        }\n\n        var srcPoints = this.seriesSourcePoints(series, categoryAxis);\n        var result = deepExtend({}, series);\n        var aggregator = new SeriesAggregator(deepExtend({}, series), SeriesBinder.current, DefaultAggregates.current);\n        var data = result.data = [];\n\n        var dataItems = categoryAxis.options.dataItems || [];\n\n        var categoryItem = function (idx) {\n            var categoryIdx = idx - range.min;\n            var point = srcPoints[idx];\n            if (!point) {\n                point = srcPoints[idx] = {};\n            }\n\n            point.categoryIx = categoryIdx;\n\n            if (!point.item) {\n                var category = categoryAxis.categoryAt(idx, true);\n                point.category = category;\n                point.item = aggregator.aggregatePoints(point.items, category);\n            }\n\n            return point;\n        };\n\n        for (var idx = range.min; idx <= range.max; idx++) {\n            var point = categoryItem(idx);\n            data[point.categoryIx] = point.item;\n\n            if (point.items && point.items.length) {\n                dataItems[point.categoryIx] = point.item;\n            }\n        }\n\n        if (inArray(result.type, OUT_OF_RANGE_SERIES)) {\n            createOutOfRangePoints(result, range, categoryAxis.totalCount(), categoryItem, function (idx) { return srcPoints[idx]; });\n        }\n\n        categoryAxis.options.dataItems = dataItems;\n\n        return result;\n    },\n\n    appendChart: function(chart, pane) {\n        var series = chart.options.series;\n        var categoryAxis = this.seriesCategoryAxis(series[0]);\n        var categories = categoryAxis.options.categories;\n        var categoriesToAdd = Math.max(0, categoriesCount(series) - categories.length);\n\n        if (categoriesToAdd > 0) {//consider setting an option to axis instead of adding fake categories\n            categories = categoryAxis.options.categories = categoryAxis.options.categories.slice(0);\n            while (categoriesToAdd--) {\n                categories.push(\"\");\n            }\n        }\n\n        this.valueAxisRangeTracker.update(chart.valueAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var axisName = series.axis;\n        var axisOptions = [].concat(options.valueAxis);\n        var axis = grep(axisOptions, function(a) { return a.name === axisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = (panes[0] || {}).name || \"default\";\n        var paneName = (axis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesCategoryAxis: function(series) {\n        var axisName = series.categoryAxis;\n        var axis = axisName ? this.namedCategoryAxes[axisName] : this.categoryAxis;\n\n        if (!axis) {\n            throw new Error(\"Unable to locate category axis with name \" + axisName);\n        }\n\n        return axis;\n    },\n\n    stackableChartOptions: function(series, pane) {\n        var anyStackedSeries = series.some(function (s) { return s.stack; });\n        var isStacked100 = series.some(function (s) { return s.stack && s.stack.type === \"100%\"; });\n        var clip = pane.options.clip;\n\n        return {\n            defaultStack: series[0].stack,\n            isStacked: anyStackedSeries,\n            isStacked100: isStacked100,\n            clip: clip\n        };\n    },\n\n    groupSeriesByCategoryAxis: function(series) {\n        var categoryAxes = [];\n        var unique = {};\n        for (var idx = 0; idx < series.length; idx++) {\n            var name = series[idx].categoryAxis || \"$$default$$\";\n            if (!dataviz.hasOwnProperty(unique, name)) {\n                unique[name] = true;\n                categoryAxes.push(name);\n            }\n        }\n\n        var groups = [];\n        for (var axisIx = 0; axisIx < categoryAxes.length; axisIx++) {\n            var axis = categoryAxes[axisIx];\n            var axisSeries = groupSeries(series, axis, axisIx);\n            if (axisSeries.length === 0) {\n                continue;\n            }\n\n            groups.push(axisSeries);\n        }\n\n        return groups;\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var barChart = new BarChart(this, $.extend({\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        }, this.stackableChartOptions(series, pane)));\n\n        this.appendChart(barChart, pane);\n    },\n\n    createRangeBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var rangeColumnChart = new RangeBarChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(rangeColumnChart, pane);\n    },\n\n    createBulletChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var bulletChart = new BulletChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(bulletChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new LineChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(series, pane)));\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new AreaChart(this, $.extend({\n            invertAxes: this.invertAxes,\n            series: series\n        }, this.stackableChartOptions(series, pane)));\n\n        this.appendChart(areaChart, pane);\n    },\n\n    createRangeAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var rangeAreaChart = new RangeAreaChart(this, {\n            invertAxes: this.invertAxes,\n            series: series,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(rangeAreaChart, pane);\n    },\n\n    createOHLCChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new OHLCChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createCandlestickChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new CandlestickChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createBoxPlotChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var chart = new BoxPlotChart(this, {\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            series: series,\n            spacing: firstSeries.spacing,\n            clip: pane.options.clip\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    createWaterfallChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var waterfallChart = new WaterfallChart(this, {\n            series: series,\n            invertAxes: this.invertAxes,\n            gap: firstSeries.gap,\n            spacing: firstSeries.spacing\n        });\n\n        this.appendChart(waterfallChart, pane);\n    },\n\n    axisRequiresRounding: function(categoryAxisName, categoryAxisIndex) {\n        var this$1$1 = this;\n\n        var centeredSeries = filterSeriesByType(this.series, EQUALLY_SPACED_SERIES);\n\n        for (var seriesIx = 0; seriesIx < this.series.length; seriesIx++) {\n            var currentSeries = this$1$1.series[seriesIx];\n            if (inArray(currentSeries.type, AREA_SERIES)) {\n                var line = currentSeries.line;\n                if (line && line.style === STEP) {\n                    centeredSeries.push(currentSeries);\n                }\n            }\n        }\n\n        for (var seriesIx$1 = 0; seriesIx$1 < centeredSeries.length; seriesIx$1++) {\n            var seriesAxis = centeredSeries[seriesIx$1].categoryAxis || \"\";\n            if (seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) {\n                return true;\n            }\n        }\n    },\n\n    aggregatedAxis: function(categoryAxisName, categoryAxisIndex) {\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var seriesAxis = series[seriesIx].categoryAxis || \"\";\n            if ((seriesAxis === categoryAxisName || (!seriesAxis && categoryAxisIndex === 0)) && series[seriesIx].categoryField) {\n                return true;\n            }\n        }\n    },\n\n    createCategoryAxesLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            if (axes[i] instanceof CategoryAxis) {\n                axes[i].createLabels();\n            }\n        }\n    },\n\n    createCategoryAxes: function(panes) {\n        var this$1$1 = this;\n\n        var invertAxes = this.invertAxes;\n        var definitions = [].concat(this.options.categoryAxis);\n        var axes = [];\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var categories = axisOptions.categories; if (categories === void 0) { categories = []; }\n                axisOptions = deepExtend({\n                    vertical: invertAxes,\n                    reverse: !invertAxes && this$1$1.chartService.rtl,\n                    axisCrossingValue: invertAxes ? MAX_VALUE : 0\n                }, axisOptions);\n\n                if (!defined(axisOptions.justified)) {\n                    axisOptions.justified = this$1$1.isJustified();\n                }\n\n                if (this$1$1.axisRequiresRounding(name, i)) {\n                    axisOptions.justified = false;\n                }\n\n                var categoryAxis = (void 0);\n\n                if (isDateAxis(axisOptions, categories[0])) {\n                    axisOptions._forecast = this$1$1.trendlineAggregateForecast();\n                    categoryAxis = new dataviz.DateCategoryAxis(axisOptions, this$1$1.chartService);\n                } else {\n                    categoryAxis = new CategoryAxis(axisOptions, this$1$1.chartService);\n                }\n\n                definitions[i].categories = categoryAxis.options.srcCategories;\n\n                if (name) {\n                    if (this$1$1.namedCategoryAxes[name]) {\n                        throw new Error((\"Category axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedCategoryAxes[name] = categoryAxis;\n                }\n\n                categoryAxis.axisIndex = i;\n                axes.push(categoryAxis);\n                this$1$1.appendAxis(categoryAxis);\n            }\n        }\n\n        var primaryAxis = this.categoryAxis || axes[0];\n        this.categoryAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisY = primaryAxis;\n        } else {\n            this.axisX = primaryAxis;\n        }\n    },\n\n    isJustified: function() {\n        var series = this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            if (!inArray(currentSeries.type, AREA_SERIES)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    createValueAxes: function(panes) {\n        var this$1$1 = this;\n\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var definitions = [].concat(this.options.valueAxis);\n        var invertAxes = this.invertAxes;\n        var baseOptions = { vertical: !invertAxes, reverse: invertAxes && this.chartService.rtl };\n        var axes = [];\n\n        if (this.stack100) {\n            baseOptions.roundToMajorUnit = false;\n            baseOptions.labels = { format: \"P0\" };\n        }\n\n        for (var i = 0; i < definitions.length; i++) {\n            var axisOptions = definitions[i];\n            var axisPane = this$1$1.findPane(axisOptions.pane);\n\n            if (inArray(axisPane, panes)) {\n                var name = axisOptions.name;\n                var defaultAxisRange = equalsIgnoreCase(axisOptions.type, LOGARITHMIC) ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n                var range = tracker.query(name) || defaultRange || defaultAxisRange;\n\n                if (i === 0 && range && defaultRange) {\n                    range.min = Math.min(range.min, defaultRange.min);\n                    range.max = Math.max(range.max, defaultRange.max);\n                }\n\n                var axisType = (void 0);\n                if (equalsIgnoreCase(axisOptions.type, LOGARITHMIC)) {\n                    axisType = dataviz.LogarithmicAxis;\n                } else {\n                    axisType = dataviz.NumericAxis;\n                }\n\n                var valueAxis = new axisType(range.min, range.max,\n                    deepExtend({}, baseOptions, axisOptions),\n                    this$1$1.chartService\n                );\n\n                if (name) {\n                    if (this$1$1.namedValueAxes[name]) {\n                        throw new Error((\"Value axis with name \" + name + \" is already defined\"));\n                    }\n                    this$1$1.namedValueAxes[name] = valueAxis;\n                }\n                valueAxis.axisIndex = i;\n\n                axes.push(valueAxis);\n                this$1$1.appendAxis(valueAxis);\n            }\n        }\n\n        var primaryAxis = this.valueAxis || axes[0];\n        this.valueAxis = primaryAxis;\n\n        if (invertAxes) {\n            this.axisX = primaryAxis;\n        } else {\n            this.axisY = primaryAxis;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var pane = this.pointPane(point);\n        var categories = [];\n        var values = [];\n\n        if (!pane) {\n            return;\n        }\n\n        var allAxes = pane.axes;\n        for (var i = 0; i < allAxes.length; i++) {\n            var axis = allAxes[i];\n            if (axis.getValue) {\n                appendIfNotNull(values, axis.getValue(point));\n            } else {\n                appendIfNotNull(categories, axis.getCategory(point));\n            }\n        }\n\n        if (categories.length === 0) {\n            appendIfNotNull(categories, this.categoryAxis.getCategory(point));\n        }\n\n        if (categories.length > 0 && values.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                category: singleItemOrArray(categories),\n                value: singleItemOrArray(values)\n            });\n        }\n    },\n\n    pointPane: function(point) {\n        var panes = this.panes;\n\n        for (var i = 0; i < panes.length; i++) {\n            var currentPane = panes[i];\n            if (currentPane.contentBox.containsPoint(point)) {\n                return currentPane;\n            }\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        updateAxisOptions(this.options, axis, options);\n        updateAxisOptions(this.originalOptions, axis, options);\n    },\n\n    _pointsByVertical: function(basePoint, offset) {\n        if (offset === void 0) { offset = 0; }\n\n        if (this.invertAxes) {\n            return this._siblingsBySeriesIndex(basePoint.series.index, offset);\n        }\n\n        return this._siblingsByPointIndex(basePoint.getIndex());\n    },\n\n    _pointsByHorizontal: function(basePoint, offset) {\n        if (offset === void 0) { offset = 0; }\n\n        if (this.invertAxes) {\n            return this._siblingsByPointIndex(basePoint.getIndex());\n        }\n\n        var siblings = this._siblingsBySeriesIndex(basePoint.series.index, offset);\n\n        if (this.chartService.rtl) {\n            return siblings.reverse();\n        }\n\n        return siblings;\n    },\n\n    _siblingsByPointIndex: function(pointIndex) {\n        var this$1$1 = this;\n\n        var charts = this.charts;\n        var result = [];\n\n        for (var i = 0; i < charts.length; i++) {\n            var chart = charts[i];\n\n            if (chart.pane && chart.pane.options.name === \"_navigator\") {\n                continue;\n            }\n\n            var chartPoints = chart.points\n                .filter(function (point) { return point && point.visible !== false && point.getIndex() === pointIndex; }\n                );\n\n            result.push.apply(result, chartPoints.sort(this$1$1._getSeriesCompareFn(chartPoints[0])));\n        }\n\n        return result;\n    },\n\n    _siblingsBySeriesIndex: function(seriesIndex, offset) {\n        var index = cycleIndex(seriesIndex + offset, this.series.length);\n\n        return this.pointsBySeriesIndex(index);\n    },\n\n    _getSeriesCompareFn: function(point) {\n        var isStacked = this._isInStackedSeries(point);\n\n        if (isStacked && this.invertAxes || !isStacked && !this.invertAxes) {\n            return function (a, b) { return a.box.center().x - b.box.center().x; };\n        }\n\n        return function (a, b) { return a.box.center().y - b.box.center().y; };\n    },\n\n    _isInStackedSeries: function(point) {\n        var sortableSeries = inArray(point.series.type,\n            [ AREA, VERTICAL_AREA, RANGE_AREA, VERTICAL_RANGE_AREA, LINE, VERTICAL_LINE, RADAR_LINE, RADAR_AREA]);\n\n        var stackableSeries = inArray(point.series.type, [ COLUMN, BAR]);\n\n        return sortableSeries || stackableSeries && point.options.isStacked;\n    }\n});\n\nfunction updateAxisOptions(targetOptions, axis, options) {\n    var axesOptions = axis instanceof CategoryAxis ? [].concat(targetOptions.categoryAxis) : [].concat(targetOptions.valueAxis);\n    deepExtend(axesOptions[axis.axisIndex], options);\n}\n\nfunction groupSeries(series, axis, axisIx) {\n    return grep(series, function(s) {\n        return (axisIx === 0 && !s.categoryAxis) || (s.categoryAxis === axis);\n    });\n}\n\nsetDefaultOptions(CategoricalPlotArea, {\n    categoryAxis: {},\n    valueAxis: {}\n});\n\ndeepExtend(CategoricalPlotArea.prototype, PlotAreaEventsMixin);\n\nvar Highlight = Class.extend({\n    init: function() {\n\n        this._points = [];\n    },\n\n    destroy: function() {\n        this._points = [];\n    },\n\n    show: function(points, opacity) {\n        var this$1$1 = this;\n\n        var arrayPoints = [].concat(points);\n        this.hide();\n\n        for (var i = 0; i < arrayPoints.length; i++) {\n            var point = arrayPoints[i];\n            if (point && point.toggleHighlight && point.hasHighlight()) {\n                this$1$1.togglePointHighlight(point, true, opacity);\n                this$1$1._points.push(point);\n            }\n        }\n    },\n\n    togglePointHighlight: function(point, show, opacity) {\n        var toggleHandler = (point.options.highlight || {}).toggle;\n        if (toggleHandler) {\n            var eventArgs = {\n                category: point.category,\n                series: point.series,\n                dataItem: point.dataItem,\n                value: point.value,\n                stackValue: point.stackValue,\n                preventDefault: preventDefault,\n                visual: point.highlightVisual(),\n                show: show\n            };\n            toggleHandler(eventArgs);\n            if (!eventArgs._defaultPrevented) {\n                point.toggleHighlight(show, opacity);\n            }\n        } else {\n            point.toggleHighlight(show, opacity);\n        }\n    },\n\n    hide: function() {\n        var this$1$1 = this;\n\n        var points = this._points;\n        while (points.length) {\n            this$1$1.togglePointHighlight(points.pop(), false);\n        }\n    },\n\n    isHighlighted: function(element) {\n        var points = this._points;\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            if (element === point) {\n                return true;\n            }\n        }\n\n        return false;\n    }\n});\n\nfunction preventDefault() {\n    this._defaultPrevented = true;\n}\n\nfunction acceptKey(e, mouseKey) {\n    var key = (mouseKey || \"\").toLowerCase();\n    var event = e.event;\n    var accept = (key === \"none\" && !(event.ctrlKey || event.shiftKey || event.altKey)) || event[key + \"Key\"];\n\n    return accept;\n}\n\nfunction toChartAxisRanges(axisRanges) {\n    var ranges = {};\n    for (var idx = 0; idx < axisRanges.length; idx++) {\n        var axisRange = axisRanges[idx];\n        if (axisRange.axis.options.name) {\n            ranges[axisRange.axis.options.name] = {\n                min: axisRange.range.min,\n                max: axisRange.range.max\n            };\n        }\n    }\n    return ranges;\n}\n\nvar Pannable = Class.extend({\n    init: function(plotArea, options) {\n\n        this.plotArea = plotArea;\n        this.options = deepExtend({}, this.options, options);\n    },\n\n    start: function(e) {\n        this._active = acceptKey(e, this.options.key);\n        return this._active;\n    },\n\n    move: function(e) {\n        if (this._active) {\n            var axisRanges = this.axisRanges = this._panAxes(e, X).concat(this._panAxes(e, Y));\n            if (axisRanges.length) {\n                this.axisRanges = axisRanges;\n                return toChartAxisRanges(axisRanges);\n            }\n        }\n    },\n\n    end: function() {\n        var active = this._active;\n        this._active = false;\n\n        return active;\n    },\n\n    pan: function() {\n        var ref = this;\n        var plotArea = ref.plotArea;\n        var axisRanges = ref.axisRanges;\n        if (axisRanges.length) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var range = axisRanges[idx];\n                plotArea.updateAxisOptions(range.axis, range.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.plotArea;\n    },\n\n    _panAxes: function(e, position) {\n        var plotArea = this.plotArea;\n        var delta = -e[position].delta;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var updatedAxes = [];\n\n        if (delta !== 0 && (lock || \"\").toLowerCase() !== position) {\n            var axes = plotArea.axes;\n            for (var idx = 0; idx < axes.length; idx++) {\n                var axis = axes[idx];\n\n                if (position === X && !axis.options.vertical || position === Y && axis.options.vertical) {\n                    var range = axis.pan(delta);\n\n                    if (range) {\n                        range.limitRange = true;\n                        updatedAxes.push({\n                            axis: axis,\n                            range: range\n                        });\n                    }\n                }\n            }\n        }\n\n        return updatedAxes;\n    }\n});\n\nPannable.prototype.options = {\n    key: \"none\",\n    lock: \"none\"\n};\n\nvar ZoomSelection = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({}, this.options, options);\n        this.createElement();\n    },\n\n    createElement: function() {\n        var marquee = this._marquee = document.createElement(\"div\");\n        marquee.className = \"k-marquee\";\n        var marqueeColor = document.createElement(\"div\");\n        marqueeColor.className = \"k-marquee-color\";\n        marquee.appendChild(marqueeColor);\n    },\n\n    removeElement: function() {\n        if (this._marquee.parentNode) {\n            this._marquee.parentNode.removeChild(this._marquee);\n        }\n    },\n\n    setStyles: function(styles) {\n        elementStyles(this._marquee, styles);\n    },\n\n    start: function(e) {\n        if (acceptKey(e, this.options.key)) {\n            var chart = this.chart;\n            var point = chart._eventCoordinates(e);\n            var zoomPane = this._zoomPane = chart._plotArea.paneByPoint(point);\n            var clipBox = zoomPane ? zoomPane.chartsBox().clone() : null;\n\n            if (zoomPane && clipBox) {\n                var offset = this._elementOffset();\n\n                clipBox.translate(offset.left, offset.top);\n                this._zoomPaneClipBox = clipBox;\n\n                document.body.appendChild(this._marquee);\n                this.setStyles({\n                    left: e.pageX + 1,\n                    top: e.pageY + 1,\n                    width: 0,\n                    height: 0\n                });\n\n                return true;\n            }\n        }\n        return false;\n    },\n\n    _elementOffset: function() {\n        var chartElement = this.chart.element;\n        var ref = elementStyles(chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref.paddingLeft;\n        var paddingTop = ref.paddingTop;\n        var offset = dataviz.elementOffset(chartElement);\n\n        return {\n            left: paddingLeft + offset.left,\n            top: paddingTop + offset.top\n        };\n    },\n\n    move: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            this.setStyles(this._selectionPosition(e));\n        }\n    },\n\n    end: function(e) {\n        var zoomPane = this._zoomPane;\n        if (zoomPane) {\n            var elementOffset$$1 = this._elementOffset();\n            var selectionPosition = this._selectionPosition(e);\n            selectionPosition.left -= elementOffset$$1.left;\n            selectionPosition.top -= elementOffset$$1.top;\n\n            var start = { x: selectionPosition.left, y: selectionPosition.top };\n            var end = { x: selectionPosition.left + selectionPosition.width, y: selectionPosition.top + selectionPosition.height };\n            this._updateAxisRanges(start, end);\n\n            this.removeElement();\n            delete this._zoomPane;\n\n            return toChartAxisRanges(this.axisRanges);\n        }\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        if (axisRanges && axisRanges.length) {\n            var plotArea = this.chart._plotArea;\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        this.removeElement();\n        delete this._marquee;\n        delete this.chart;\n    },\n\n    _updateAxisRanges: function(start, end) {\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n\n        var axes = this._zoomPane.axes;\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && defined(axis.axisIndex)) {\n                var range = axis.pointsRange(start, end);\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n    },\n\n    _selectionPosition: function(e) {\n        var clipBox = this._zoomPaneClipBox;\n        var startLocation = {\n            x: e.x.startLocation,\n            y: e.y.startLocation\n        };\n        var pageX = e.x.location;\n        var pageY = e.y.location;\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var left = Math.min(startLocation.x, pageX);\n        var top = Math.min(startLocation.y, pageY);\n        var width = Math.abs(startLocation.x - pageX);\n        var height = Math.abs(startLocation.y - pageY);\n\n        if (lock === X) {\n            left = clipBox.x1;\n            width = clipBox.width();\n        }\n        if (lock === Y) {\n            top = clipBox.y1;\n            height = clipBox.height();\n        }\n\n        if (pageX > clipBox.x2) {\n            width = clipBox.x2 - startLocation.x;\n        }\n\n        if (pageX < clipBox.x1) {\n            width = startLocation.x - clipBox.x1;\n        }\n\n        if (pageY > clipBox.y2) {\n            height = clipBox.y2 - startLocation.y;\n        }\n\n        if (pageY < clipBox.y1) {\n            height = startLocation.y - clipBox.y1;\n        }\n\n        return {\n            left: Math.max(left, clipBox.x1),\n            top: Math.max(top, clipBox.y1),\n            width: width,\n            height: height\n        };\n    }\n});\n\nZoomSelection.prototype.options = {\n    key: \"shift\",\n    lock: \"none\"\n};\n\nvar ref = drawing.util;\nvar limitValue$1 = ref.limitValue;\nvar valueOrDefault$1 = ref.valueOrDefault;\n\n// Limit the zoom rate between 1% and 90% per mousewheel event.\n// At zoom rates close to 100% the axis range quickly becomes 0.\nvar MIN_RATE = 0.01;\nvar MAX_RATE = 0.9;\nvar DEFAULT_RATE = 0.3;\n\nvar MousewheelZoom = Class.extend({\n    init: function(chart, options) {\n\n        this.chart = chart;\n        this.options = deepExtend({\n            rate: DEFAULT_RATE\n        }, this.options, options);\n    },\n\n    updateRanges: function(delta, coords) {\n        var this$1$1 = this;\n\n        var lock = (this.options.lock || \"\").toLowerCase();\n        var axisRanges = [];\n        var axes = this.chart._plotArea.axes;\n\n        for (var idx = 0; idx < axes.length; idx++) {\n            var axis = axes[idx];\n            var vertical = axis.options.vertical;\n\n            if (!(lock === X && !vertical) && !(lock === Y && vertical) && axis.zoomRange) {\n                var rate = limitValue$1(this$1$1.options.rate, MIN_RATE, MAX_RATE);\n                var range = axis.zoomRange(-delta * rate, coords);\n\n                if (range) {\n                    axisRanges.push({\n                        axis: axis,\n                        range: range\n                    });\n                }\n            }\n        }\n\n        this.axisRanges = axisRanges;\n        return toChartAxisRanges(axisRanges);\n    },\n\n    zoom: function() {\n        var axisRanges = this.axisRanges;\n        var plotArea = this.chart._plotArea;\n\n        if (axisRanges && axisRanges.length && plotArea.updateAxisOptions) {\n            for (var idx = 0; idx < axisRanges.length; idx++) {\n                var axisRange = axisRanges[idx];\n                plotArea.updateAxisOptions(axisRange.axis, axisRange.range);\n            }\n            plotArea.redraw(plotArea.panes);\n        }\n    },\n\n    destroy: function() {\n        delete this.chart;\n    }\n});\n\nvar LegendLayout = ChartElement.extend({\n    init: function(options, chartService) {\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n    },\n\n    render: function() {\n        var ref = this;\n        var children = ref.children;\n        var options = ref.options;\n        var vertical = options.vertical;\n\n        this.visual = new drawing.Layout(null, {\n            spacing: vertical ? 0 : options.spacing,\n            lineSpacing: vertical ? options.spacing : 0,\n            orientation: vertical ? datavizConstants.VERTICAL : datavizConstants.HORIZONTAL,\n            reverse: options.rtl,\n            alignItems: vertical ? START : CENTER\n        });\n\n        for (var idx = 0; idx < children.length; idx++) {\n            var legendItem = children[idx];\n            legendItem.reflow(new Box());\n            legendItem.renderVisual();\n        }\n    },\n\n    reflow: function(box) {\n        this.visual.rect(box.toRect());\n        this.visual.reflow();\n        var bbox = this.visual.clippedBBox();\n\n        if (bbox) {\n            this.box = dataviz.rectToBox(bbox);\n        } else {\n            this.box = new Box();\n        }\n    },\n\n    renderVisual: function() {\n        this.addVisual();\n    },\n\n    createVisual: function() {}\n});\n\nvar DEFAULT_MARKER_SIZE = 10;\nvar DEFAULT_MARKER_BORDER_WIDTH = 2;\n\nvar LegendItemMarker = ShapeElement.extend({\n    visualStyle: function() {\n        var options = this.markerOptions();\n        var border = options.border;\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault$1(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    },\n\n    markerOptions: function() {\n        return this.options;\n    },\n\n    markerHighlightOptions: function() {\n        var options = this.markerOptions();\n        var borderWidth = options.highlight.border.width;\n\n        return deepExtend(\n            {},\n            options,\n            { background: options.border.color },\n            options.highlight,\n            options.type === datavizConstants.CROSS ? {\n                background: options.highlight.border.color,\n                border: { color: options.highlight.background, width: borderWidth / 2 },\n                width: options.width,\n                height: options.height,\n                margin: { top: 0, left: 0 }\n            } : {}\n        );\n    },\n\n    createHighlight: function() {\n        var highlight = new ShapeElement(this.markerHighlightOptions());\n        var box = this.paddingBox.clone();\n        highlight.reflow(box.pad(highlight.options.border.width));\n        this.highlight = [ highlight.getElement() ];\n\n        return this.highlight;\n    }\n});\n\nsetDefaultOptions(LegendItemMarker, {\n    border: {\n        width: DEFAULT_MARKER_BORDER_WIDTH\n    },\n    width: DEFAULT_MARKER_SIZE - DEFAULT_MARKER_BORDER_WIDTH,\n    height: DEFAULT_MARKER_SIZE - DEFAULT_MARKER_BORDER_WIDTH,\n    background: WHITE,\n    margin: {\n        top: -1,\n        left: -1\n    },\n    vAlign: TOP,\n    align: LEFT,\n    highlight: {\n        width: DEFAULT_MARKER_SIZE,\n        height: DEFAULT_MARKER_SIZE,\n        border: {\n            color: WHITE,\n            width: DEFAULT_MARKER_BORDER_WIDTH\n        }\n    }\n});\n\nvar ChartElement$1 = Class.extend({\n    init: function(options) {\n\n        this.children = [];\n\n        this.options = deepExtend({}, this.options, this.initUserOptions(options));\n    },\n\n    initUserOptions: function(options) {\n        return options;\n    },\n\n    reflow: function(targetBox) {\n        var children = this.children;\n        var box;\n\n        for (var i = 0; i < children.length; i++) {\n            var currentChild = children[i];\n            currentChild.reflow(targetBox);\n\n            box = box ? box.wrap(currentChild.box) : currentChild.box.clone();\n        }\n\n        this.box = box || targetBox;\n    },\n\n    destroy: function() {\n        var children = this.children;\n\n        if (this.animation) {\n            this.animation.destroy();\n        }\n\n        for (var i = 0; i < children.length; i++) {\n            children[i].destroy();\n        }\n    },\n\n    getRoot: function() {\n        var parent = this.parent;\n\n        return parent ? parent.getRoot() : null;\n    },\n\n    getSender: function() {\n        var service = this.getService();\n        if (service) {\n            return service.sender;\n        }\n    },\n\n    getService: function() {\n        var element = this;\n        while (element) {\n            if (element.chartService) {\n                return element.chartService;\n            }\n            element = element.parent;\n        }\n    },\n\n    translateChildren: function(dx, dy) {\n        var children = this.children;\n        var childrenCount = children.length;\n\n        for (var i = 0; i < childrenCount; i++) {\n            children[i].box.translate(dx, dy);\n        }\n    },\n\n    append: function() {\n        var arguments$1 = arguments;\n        var this$1$1 = this;\n\n        for (var i = 0; i < arguments.length; i++) {\n            var item = arguments$1[i];\n            this$1$1.children.push(item);\n            item.parent = this$1$1;\n        }\n    },\n\n    renderVisual: function() {\n        if (this.options.visible === false) {\n            return;\n        }\n\n        this.createVisual();\n\n        this.addVisual();\n\n        this.renderChildren();\n\n        this.createAnimation();\n        this.renderComplete();\n    },\n\n    addVisual: function() {\n        if (this.visual) {\n            this.visual.chartElement = this;\n\n            if (this.parent) {\n                this.parent.appendVisual(this.visual);\n            }\n        }\n    },\n\n    renderChildren: function() {\n        var children = this.children;\n        var length = children.length;\n        for (var i = 0; i < length; i++) {\n            children[i].renderVisual();\n        }\n    },\n\n    createVisual: function() {\n        this.visual = new Group({\n            zIndex: this.options.zIndex,\n            visible: valueOrDefault(this.options.visible, true)\n        });\n    },\n\n    createAnimation: function() {\n        if (this.visual && this.options.animation) {\n            this.animation = Animation.create(\n                this.visual, this.options.animation\n            );\n        }\n    },\n\n    appendVisual: function(childVisual) {\n        if (!childVisual.chartElement) {\n            childVisual.chartElement = this;\n        }\n\n        if (childVisual.options.noclip) {\n            this.clipRoot().visual.append(childVisual);\n        } else if (defined(childVisual.options.zIndex)) {\n            this.stackRoot().stackVisual(childVisual);\n        } else if (this.isStackRoot) {\n            this.stackVisual(childVisual);\n        } else if (this.visual) {\n            this.visual.append(childVisual);\n        } else {\n            // Allow chart elements without visuals to\n            // pass through child visuals\n            this.parent.appendVisual(childVisual);\n        }\n    },\n\n    clipRoot: function() {\n        if (this.parent) {\n            return this.parent.clipRoot();\n        }\n\n        return this;\n    },\n\n    stackRoot: function() {\n        if (this.parent) {\n            return this.parent.stackRoot();\n        }\n\n        return this;\n    },\n\n    stackVisual: function(childVisual) {\n        var zIndex = childVisual.options.zIndex || 0;\n        var visuals = this.visual.children;\n        var length = visuals.length;\n        var pos;\n\n        for (pos = 0; pos < length; pos++) {\n            var sibling = visuals[pos];\n            var here = valueOrDefault(sibling.options.zIndex, 0);\n            if (here > zIndex) {\n                break;\n            }\n        }\n\n        this.visual.insert(pos, childVisual);\n    },\n\n    traverse: function(callback) {\n        var children = this.children;\n        var length = children.length;\n\n        for (var i = 0; i < length; i++) {\n            var child = children[i];\n\n            callback(child);\n            if (child.traverse) {\n                child.traverse(callback);\n            }\n        }\n    },\n\n    closest: function(match) {\n        var element = this;\n        var matched = false;\n\n        while (element && !matched) {\n            matched = match(element);\n\n            if (!matched) {\n                element = element.parent;\n            }\n        }\n\n        if (matched) {\n            return element;\n        }\n    },\n\n    renderComplete: function() {},\n\n    hasHighlight: function() {\n        var options = (this.options || {}).highlight;\n        return !(!this.createHighlight || (options && options.visible === false) || this.visible === false);\n    },\n\n    toggleHighlight: function(show, opacity) {\n        var this$1$1 = this;\n\n        var options = (this.options || {}).highlight || {};\n        var customVisual = options.visual;\n        var highlight = this._highlight;\n\n        if (!highlight) {\n            var highlightOptions = {\n                fill: {\n                    color: WHITE,\n                    opacity: opacity || 0.2\n                },\n                stroke: {\n                    color: WHITE,\n                    width: 1,\n                    opacity: opacity || 0.2\n                }\n            };\n\n            if (customVisual) {\n                highlight = this._highlight = customVisual(\n                    $.extend(this.highlightVisualArgs(), {\n                        createVisual: function () { return this$1$1.createHighlight(highlightOptions); },\n                        sender: this.getSender(),\n                        series: this.series,\n                        dataItem: this.dataItem,\n                        category: this.category,\n                        value: this.value,\n                        percentage: this.percentage,\n                        runningTotal: this.runningTotal,\n                        total: this.total\n                    })\n                );\n\n                if (!highlight) {\n                    return;\n                }\n            } else {\n                highlight = this._highlight = this.createHighlight(highlightOptions);\n            }\n\n            if (!defined(highlight.options.zIndex)) {\n                highlight.options.zIndex = valueOrDefault(options.zIndex, this.options.zIndex);\n            }\n\n            this.appendVisual(highlight);\n        }\n\n        highlight.visible(show);\n    },\n\n    toggleFocusHighlight: function(show) {\n        var options = ((this.options || {}).accessibility || {}).highlight || {};\n        var focusHighlight = this._focusHighlight;\n\n        if (!show && !focusHighlight) {\n            return;\n        }\n\n        if (!focusHighlight) {\n            var rootBackground = this.getRoot().options.background;\n            var highlightColor = autoTextColor(rootBackground);\n            var focusHighlightOptions = {\n                fill: {\n                    opacity: options.opacity,\n                    color: options.color\n                },\n                stroke: $.extend({}, {color: highlightColor}, options.border),\n                zIndex: options.zIndex\n            };\n\n            focusHighlight = this._focusHighlight = this.createFocusHighlight(focusHighlightOptions);\n\n            this.appendVisual(focusHighlight);\n        }\n\n        focusHighlight.visible(show);\n    },\n\n    createGradientOverlay: function(element, options, gradientOptions) {\n        var overlay = new Path($.extend({\n            stroke: {\n                color: \"none\"\n            },\n            fill: this.createGradient(gradientOptions),\n            closed: element.options.closed\n        }, options));\n\n        overlay.segments.elements(element.segments.elements());\n\n        return overlay;\n    },\n\n    createGradient: function(options) {\n        if (this.parent) {\n            return this.parent.createGradient(options);\n        }\n    },\n\n    supportsPointInactiveOpacity: function() {\n        return true;\n    }\n});\n\nChartElement$1.prototype.options = { };\n\nvar Point$1 = Class.extend({\n    init: function(x, y) {\n\n        this.x = x || 0;\n        this.y = y || 0;\n    },\n\n    clone: function() {\n        return new Point$1(this.x, this.y);\n    },\n\n    equals: function(point) {\n        return point && this.x === point.x && this.y === point.y;\n    },\n\n    rotate: function(center, degrees) {\n        var theta = rad(degrees);\n        var cosT = Math.cos(theta);\n        var sinT = Math.sin(theta);\n        var cx = center.x;\n        var cy = center.y;\n        var ref = this;\n        var x = ref.x;\n        var y = ref.y;\n\n        this.x = round(\n            cx + (x - cx) * cosT + (y - cy) * sinT,\n            COORD_PRECISION\n        );\n\n        this.y = round(\n            cy + (y - cy) * cosT - (x - cx) * sinT,\n            COORD_PRECISION\n        );\n\n        return this;\n    },\n\n    multiply: function(a) {\n\n        this.x *= a;\n        this.y *= a;\n\n        return this;\n    },\n\n    distanceTo: function(point) {\n        var dx = this.x - point.x;\n        var dy = this.y - point.y;\n\n        return Math.sqrt(dx * dx + dy * dy);\n    }\n});\n\nPoint$1.onCircle = function(center, angle, radius) {\n    var radians = rad(angle);\n\n    return new Point$1(\n        center.x - radius * Math.cos(radians),\n        center.y - radius * Math.sin(radians)\n    );\n};\n\nvar Box$1 = Class.extend({\n    init: function(x1, y1, x2, y2) {\n\n        this.x1 = x1 || 0;\n        this.y1 = y1 || 0;\n        this.x2 = x2 || 0;\n        this.y2 = y2 || 0;\n    },\n\n    equals: function(box) {\n        return this.x1 === box.x1 && this.x2 === box.x2 &&\n            this.y1 === box.y1 && this.y2 === box.y2;\n    },\n\n    width: function() {\n        return this.x2 - this.x1;\n    },\n\n    height: function() {\n        return this.y2 - this.y1;\n    },\n\n    translate: function(dx, dy) {\n        this.x1 += dx;\n        this.x2 += dx;\n        this.y1 += dy;\n        this.y2 += dy;\n\n        return this;\n    },\n\n    move: function(x, y) {\n        var height = this.height();\n        var width = this.width();\n\n        if (defined(x)) {\n            this.x1 = x;\n            this.x2 = this.x1 + width;\n        }\n\n        if (defined(y)) {\n            this.y1 = y;\n            this.y2 = this.y1 + height;\n        }\n\n        return this;\n    },\n\n    wrap: function(targetBox) {\n        this.x1 = Math.min(this.x1, targetBox.x1);\n        this.y1 = Math.min(this.y1, targetBox.y1);\n        this.x2 = Math.max(this.x2, targetBox.x2);\n        this.y2 = Math.max(this.y2, targetBox.y2);\n\n        return this;\n    },\n\n    wrapPoint: function(point) {\n        var arrayPoint = isArray(point);\n        var x = arrayPoint ? point[0] : point.x;\n        var y = arrayPoint ? point[1] : point.y;\n        this.wrap(new Box$1(x, y, x, y));\n\n        return this;\n    },\n\n    snapTo: function(targetBox, axis) {\n\n        if (axis === X || !axis) {\n            this.x1 = targetBox.x1;\n            this.x2 = targetBox.x2;\n        }\n\n        if (axis === Y || !axis) {\n            this.y1 = targetBox.y1;\n            this.y2 = targetBox.y2;\n        }\n\n        return this;\n    },\n\n    alignTo: function(targetBox, anchor) {\n        var height = this.height();\n        var width = this.width();\n        var axis = anchor === TOP || anchor === BOTTOM ? Y : X;\n        var offset = axis === Y ? height : width;\n\n        if (anchor === CENTER) {\n            var targetCenter = targetBox.center();\n            var center = this.center();\n\n            this.x1 += targetCenter.x - center.x;\n            this.y1 += targetCenter.y - center.y;\n        } else if (anchor === TOP || anchor === LEFT) {\n            this[axis + 1] = targetBox[axis + 1] - offset;\n        } else {\n            this[axis + 1] = targetBox[axis + 2];\n        }\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    shrink: function(dw, dh) {\n\n        this.x2 -= dw;\n        this.y2 -= dh;\n\n        return this;\n    },\n\n    expand: function(dw, dh) {\n        this.shrink(-dw, -dh);\n        return this;\n    },\n\n    pad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        this.x1 -= spacing.left;\n        this.x2 += spacing.right;\n        this.y1 -= spacing.top;\n        this.y2 += spacing.bottom;\n\n        return this;\n    },\n\n    unpad: function(padding) {\n        var spacing = getSpacing(padding);\n\n        spacing.left = -spacing.left;\n        spacing.top = -spacing.top;\n        spacing.right = -spacing.right;\n        spacing.bottom = -spacing.bottom;\n\n        return this.pad(spacing);\n    },\n\n    clone: function() {\n        return new Box$1(this.x1, this.y1, this.x2, this.y2);\n    },\n\n    center: function() {\n        return new Point$1(\n            this.x1 + this.width() / 2,\n            this.y1 + this.height() / 2\n        );\n    },\n\n    containsPoint: function(point) {\n\n        return point.x >= this.x1 && point.x <= this.x2 &&\n               point.y >= this.y1 && point.y <= this.y2;\n    },\n\n    points: function() {\n        return [\n            new Point$1(this.x1, this.y1),\n            new Point$1(this.x2, this.y1),\n            new Point$1(this.x2, this.y2),\n            new Point$1(this.x1, this.y2)\n        ];\n    },\n\n    getHash: function() {\n        return [ this.x1, this.y1, this.x2, this.y2 ].join(\",\");\n    },\n\n    overlaps: function(box) {\n        return !(box.y2 < this.y1 || this.y2 < box.y1 || box.x2 < this.x1 || this.x2 < box.x1);\n    },\n\n    rotate: function(rotation) {\n        var width = this.width();\n        var height = this.height();\n        var ref = this.center();\n        var cx = ref.x;\n        var cy = ref.y;\n\n        var r1 = rotatePoint(0, 0, cx, cy, rotation);\n        var r2 = rotatePoint(width, 0, cx, cy, rotation);\n        var r3 = rotatePoint(width, height, cx, cy, rotation);\n        var r4 = rotatePoint(0, height, cx, cy, rotation);\n\n        width = Math.max(r1.x, r2.x, r3.x, r4.x) - Math.min(r1.x, r2.x, r3.x, r4.x);\n        height = Math.max(r1.y, r2.y, r3.y, r4.y) - Math.min(r1.y, r2.y, r3.y, r4.y);\n\n        this.x2 = this.x1 + width;\n        this.y2 = this.y1 + height;\n\n        return this;\n    },\n\n    toRect: function() {\n        return new geometry.Rect([ this.x1, this.y1 ], [ this.width(), this.height() ]);\n    },\n\n    hasSize: function() {\n        return this.width() !== 0 && this.height() !== 0;\n    },\n\n    align: function(targetBox, axis, alignment) {\n        var c1 = axis + 1;\n        var c2 = axis + 2;\n        var sizeFunc = axis === X ? datavizConstants.WIDTH : datavizConstants.HEIGHT;\n        var size = this[sizeFunc]();\n\n        if (inArray(alignment, [ LEFT, TOP ])) {\n            this[c1] = targetBox[c1];\n            this[c2] = this[c1] + size;\n        } else if (inArray(alignment, [ RIGHT, BOTTOM ])) {\n            this[c2] = targetBox[c2];\n            this[c1] = this[c2] - size;\n        } else if (alignment === CENTER) {\n            this[c1] = targetBox[c1] + (targetBox[sizeFunc]() - size) / 2;\n            this[c2] = this[c1] + size;\n        }\n    }\n});\n\nfunction rotatePoint(x, y, cx, cy, angle) {\n    var theta = rad(angle);\n\n    return new Point$1(\n        cx + (x - cx) * Math.cos(theta) + (y - cy) * Math.sin(theta),\n        cy - (x - cx) * Math.sin(theta) + (y - cy) * Math.cos(theta)\n    );\n}\n\nvar BoxElement$1 = ChartElement$1.extend({\n    init: function(options) {\n        ChartElement$1.fn.init.call(this, options);\n\n        this.options.margin = getSpacing(this.options.margin);\n        this.options.padding = getSpacing(this.options.padding);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var width = options.width;\n        var height = options.height;\n        var shrinkToFit = options.shrinkToFit;\n        var hasSetSize = width && height;\n        var margin = options.margin;\n        var padding = options.padding;\n        var borderWidth = options.border.width;\n        var box;\n\n        var reflowPaddingBox = function () {\n            this$1$1.align(targetBox, X, options.align);\n            this$1$1.align(targetBox, Y, options.vAlign);\n            this$1$1.paddingBox = box.clone().unpad(margin).unpad(borderWidth);\n        };\n\n        var contentBox = targetBox.clone();\n        if (hasSetSize) {\n            contentBox.x2 = contentBox.x1 + width;\n            contentBox.y2 = contentBox.y1 + height;\n        }\n\n        if (shrinkToFit) {\n            contentBox.unpad(margin).unpad(borderWidth).unpad(padding);\n        }\n\n        ChartElement$1.fn.reflow.call(this, contentBox);\n\n        if (hasSetSize) {\n            box = this.box = new Box$1(0, 0, width, height);\n        } else {\n            box = this.box;\n        }\n\n        if (shrinkToFit && hasSetSize) {\n            reflowPaddingBox();\n            contentBox = this.contentBox = this.paddingBox.clone().unpad(padding);\n        } else {\n            contentBox = this.contentBox = box.clone();\n            box.pad(padding).pad(borderWidth).pad(margin);\n            reflowPaddingBox();\n        }\n\n        this.translateChildren(\n            box.x1 - contentBox.x1 + margin.left + borderWidth + padding.left,\n            box.y1 - contentBox.y1 + margin.top + borderWidth + padding.top\n        );\n\n        var children = this.children;\n        for (var i = 0; i < children.length; i++) {\n            var item = children[i];\n            item.reflow(item.box);\n        }\n    },\n\n    align: function(targetBox, axis, alignment) {\n        this.box.align(targetBox, axis, alignment);\n    },\n\n    hasBox: function() {\n        var options = this.options;\n        return options.border.width || options.background;\n    },\n\n    createVisual: function() {\n        ChartElement$1.fn.createVisual.call(this);\n\n        var options = this.options;\n        if (options.visible && this.hasBox()) {\n            this.visual.append(Path.fromRect(\n                this.paddingBox.toRect(),\n                this.visualStyle()\n            ));\n        }\n    },\n\n    visualStyle: function() {\n        var options = this.options;\n        var border = options.border || {};\n\n        return {\n            stroke: {\n                width: border.width,\n                color: border.color,\n                opacity: valueOrDefault(border.opacity, options.opacity),\n                dashType: border.dashType\n            },\n            fill: {\n                color: options.background,\n                opacity: options.opacity\n            },\n            cursor: options.cursor\n        };\n    }\n});\n\nsetDefaultOptions(BoxElement$1, {\n    align: LEFT,\n    vAlign: TOP,\n    margin: {},\n    padding: {},\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    background: \"\",\n    shrinkToFit: false,\n    width: 0,\n    height: 0,\n    visible: true\n});\n\nvar ShapeElement$1 = BoxElement$1.extend({\n    init: function(options, pointData) {\n        BoxElement$1.fn.init.call(this, options);\n\n        this.pointData = pointData;\n    },\n\n    getElement: function() {\n        var ref = this;\n        var options = ref.options;\n        var box = ref.paddingBox;\n        var type = options.type;\n        var rotation = options.rotation;\n        var center = box.center();\n        var halfWidth = box.width() / 2;\n        var halfHeight = box.height() / 2;\n\n        if (!options.visible || !this.hasBox()) {\n            return null;\n        }\n\n        var style = this.visualStyle();\n        var element;\n\n        if (type === CIRCLE) {\n            element = new Circle(\n                new GeometryCircle([\n                    round(box.x1 + halfWidth, COORD_PRECISION),\n                    round(box.y1 + halfHeight, COORD_PRECISION)\n                ], Math.min(halfWidth, halfHeight)),\n                style\n            );\n        } else if (type === datavizConstants.TRIANGLE) {\n            element = Path.fromPoints([\n                [ box.x1 + halfWidth, box.y1 ],\n                [ box.x1, box.y2 ],\n                [ box.x2, box.y2 ]\n            ], style).close();\n        } else if (type === datavizConstants.CROSS) {\n            element = new MultiPath(style);\n\n            element.moveTo(box.x1, box.y1).lineTo(box.x2, box.y2);\n            element.moveTo(box.x1, box.y2).lineTo(box.x2, box.y1);\n        } else {\n            var rect = box.toRect();\n            if (type === datavizConstants.ROUNDED_RECT) {\n                var borderRadius = valueOrDefault$1(options.borderRadius, rect.width() / 5);\n                rect.setCornerRadius(borderRadius);\n            }\n\n            element = Path.fromRect(rect, style);\n        }\n\n        if (rotation) {\n            element.transform(transform()\n                .rotate(-rotation, [ center.x, center.y ])\n            );\n        }\n\n        element.options.zIndex = options.zIndex;\n\n        return element;\n    },\n\n    createElement: function() {\n        var this$1$1 = this;\n\n        var customVisual = this.options.visual;\n        var pointData = this.pointData || {};\n        var visual;\n\n        if (customVisual) {\n            visual = customVisual({\n                value: pointData.value,\n                dataItem: pointData.dataItem,\n                sender: this.getSender(),\n                series: pointData.series,\n                category: pointData.category,\n                rect: this.paddingBox.toRect(),\n                options: this.visualOptions(),\n                createVisual: function () { return this$1$1.getElement(); }\n            });\n        } else {\n            visual = this.getElement();\n        }\n\n        return visual;\n    },\n\n    visualOptions: function() {\n        var options = this.options;\n        return {\n            background: options.background,\n            border: options.border,\n            margin: options.margin,\n            padding: options.padding,\n            type: options.type,\n            size: options.width,\n            visible: options.visible\n        };\n    },\n\n    createVisual: function() {\n        this.visual = this.createElement();\n\n        addAccessibilityAttributesToVisual(this.visual, this.options.accessibilityOptions);\n    }\n});\n\nsetDefaultOptions(ShapeElement$1, {\n    type: CIRCLE,\n    align: CENTER,\n    vAlign: CENTER\n});\n\nvar MarkerLineArea = ShapeElement$1.extend({\n    getElement: function() {\n        var group = new Group();\n        var element = new MultiPath(this.visualStyle());\n        var ref = this;\n        var box = ref.paddingBox;\n        var halfHeight = box.height() / 2;\n\n        element\n            .moveTo(box.x1, box.y1 + halfHeight)\n            .lineTo(box.x1, box.y2)\n            .lineTo(box.x2, box.y2);\n\n        group.append(element);\n\n        return group;\n    }\n});\n\nsetDefaultOptions(MarkerLineArea, {\n    width: 15,\n    height: 15,\n    align: RIGHT,\n    vAlign: BOTTOM,\n    margin: {\n        right: -2,\n        bottom: 2\n    }\n});\n\nvar LegendItemLine = ShapeElement$1.extend({\n    getElement: function() {\n        var group = new Group();\n        var element = new MultiPath({\n            stroke: {\n                color: this.options.border.color,\n                opacity: this.options.opacity,\n                width: this.options.height,\n                dashType: this.options.dashType\n            }\n        });\n        var box = this.paddingBox;\n        var centerY = box.center().y;\n\n        element\n            .moveTo(box.x1, centerY)\n            .lineTo(box.x2, centerY);\n\n        group.append(element);\n\n        return group;\n    },\n\n    createHighlight: function() {\n        this.highlight = [ this.createHighlightLine(), this.createHighlightMarker() ];\n        return this.highlight;\n    },\n\n    createHighlightLine: function() {\n        var options = deepExtend({}, {\n            border: {\n                color: this.options.border.color,\n                opacity: this.options.border.opacity,\n                dashType: this.options.border.dashType\n            }\n        }, this.options.highlight);\n        var highlightLine = new MarkerLineArea(options);\n        highlightLine.reflow(this.parent.paddingBox.clone());\n\n        this.highlightLine = highlightLine.getElement();\n\n        return this.highlightLine;\n    },\n\n    createHighlightMarker: function() {\n        var options = deepExtend({}, {\n            background: this.options.background,\n        }, this.options.highlight.markers);\n        var highlightMarker = new ShapeElement$1(options);\n        var paddingBox = this.parent.paddingBox;\n        var borderWidth = options.border.width;\n        var box = this.parent.box.clone();\n\n        box.pad({\n            left: borderWidth - paddingBox.x1,\n            top: borderWidth - paddingBox.y1\n        });\n\n        highlightMarker.reflow(box);\n        this.highlightMarker = highlightMarker.getElement();\n\n        return this.highlightMarker;\n    }\n});\n\nsetDefaultOptions(LegendItemLine, {\n    border: {\n        width: 0\n    },\n    type: datavizConstants.RECT,\n    align: LEFT,\n    vAlign: CENTER,\n    highlight: {\n        border: {\n            width: DEFAULT_MARKER_BORDER_WIDTH\n        },\n        markers: {\n            type: CIRCLE,\n            width: DEFAULT_MARKER_SIZE,\n            height: DEFAULT_MARKER_SIZE,\n            border: {\n                width: DEFAULT_MARKER_BORDER_WIDTH,\n                color: WHITE\n            },\n            align: LEFT,\n            vAlign: TOP\n        }\n    }\n});\n\nvar LegendItemSquare = ShapeElement$1.extend({\n    createHighlight: function() {\n        var options = deepExtend({}, {\n            background: this.options.background,\n        }, this.options.highlight.markers);\n        var highlight = new ShapeElement$1(options);\n\n        var box = this.paddingBox.clone();\n        var targetBox = this.parent.box.clone();\n        box.align(targetBox, X, LEFT);\n        box.align(targetBox, Y, TOP);\n        highlight.reflow(box);\n\n        this.highlight = [ highlight.getElement() ];\n\n        return this.highlight;\n    }\n});\n\nsetDefaultOptions(LegendItemSquare, {\n    highlight: {\n        markers: {\n            type: CIRCLE,\n            width: DEFAULT_MARKER_SIZE,\n            height: DEFAULT_MARKER_SIZE,\n            border: {\n                width: DEFAULT_MARKER_BORDER_WIDTH,\n                color: WHITE\n            },\n            margin: {\n                top: -3,\n                left: -3\n            }\n        }\n    }\n});\n\nvar LegendItem = BoxElement.extend({\n    init: function(options) {\n        BoxElement.fn.init.call(this, options);\n\n        this.createContainer();\n        if (!options.rtl) {\n            this.createMarker();\n            this.createLabel();\n        } else {\n            this.createLabel();\n            this.createMarker();\n        }\n\n        this._id = guid();\n        this.options.accessibility.ariaChecked = options.active;\n    },\n\n    createContainer: function() {\n        this.container = new dataviz.FloatElement({ vertical: false, wrap: false, align: CENTER, spacing: this.options.spacing });\n        this.append(this.container);\n    },\n\n    createMarker: function() {\n        this.markerWrap = new BoxElement({ vertical: false, shrinkToFit: true, wrap: false, margin: 1, width: 22, height: 22 });\n        this.container.append(this.markerWrap);\n\n        this.createMarkerArea();\n\n        if (this.options.markers.visible) {\n            this._marker = this._createMarker();\n            this.markerWrap.append(this._marker);\n        }\n    },\n\n    createMarkerArea: function() {\n        var options = this.options;\n        var markerColor = options.markerColor;\n        var line = options.line; if (line === void 0) { line = {}; }\n        var lineOptions = {\n            border: {\n                color: line.color || markerColor,\n                opacity: line.opacity,\n                dashType: line.dashType\n            }\n        };\n        return this._createLine(lineOptions) ||\n            this._createMarkerLine(lineOptions, line) ||\n            this._createSquare();\n    },\n\n    markerOptions: function() {\n        var options = this.options;\n        var markers = options.markers; if (markers === void 0) { markers = {}; }\n        var markerColor = options.markerColor;\n        var border = markers.border; if (border === void 0) { border = {}; }\n        markers.zIndex = undefined;\n\n        return deepExtend({}, markers, {\n            border: { color: border.color || markerColor },\n            highlight: options.highlight.markers\n        });\n    },\n\n    _highlightOptions: function() {\n        var options = this.options;\n        return deepExtend(\n            { markers: { type: options.markers.type } },\n            options.highlight\n        );\n    },\n\n    _createLine: function(lineOptions) {\n        var options = this.options;\n        if (options.type === LINE && !options.markers.visible) {\n            this._line = new LegendItemLine(deepExtend({}, {\n                background: options.markerColor,\n                highlight: this._highlightOptions(),\n            }, lineOptions, options.line));\n\n            this.markerWrap.append(this._line);\n        }\n        return this._line;\n    },\n\n    _createMarkerLine: function(lineOptions, line) {\n        var options = this.options;\n        if (options.type === LINE) {\n            this._markerLineArea = new MarkerLineArea(deepExtend({}, {\n                border: {\n                    width: line.height\n                }\n            }, lineOptions));\n\n            this.markerWrap.append(this._markerLineArea);\n        }\n\n        return this._markerLineArea;\n    },\n\n    _createSquare: function() {\n        var options = this.options;\n        if (options.type === AREA) {\n            this._square = new LegendItemSquare($.extend({}, {border: options.border,\n                vAlign: options.markers.visible ? BOTTOM : CENTER,\n                highlight: this._highlightOptions(),\n                visual: options.visual},\n                options.area,\n                {background: options.area.background || options.markerColor}));\n            this.markerWrap.append(this._square);\n        }\n        return this._square;\n    },\n\n    _createMarker: function() {\n        return new LegendItemMarker(this.markerOptions());\n    },\n\n    _highlightMarkers: function() {\n        if (this.options.active) {\n            this._toggleHighlight(true);\n        }\n    },\n\n    _restoreMarkers: function() {\n        this._toggleHighlight(false);\n    },\n\n    _toggleHighlight: function(show) {\n        var this$1$1 = this;\n\n        if (!this.options.highlight.visible) {\n            return;\n        }\n\n        var element = this._marker || this._square || this._line;\n\n        if (element && element === this._line) {\n            this._line.visual.visible(!show);\n        }\n\n        if (element) {\n            var highlight = element.highlight;\n\n            if (!highlight) {\n                highlight = element.createHighlight();\n                highlight.forEach(function (h) { return h && this$1$1.markerWrap.appendVisual(h); });\n            }\n\n            highlight.forEach(function (h) { return h && h.visible(show); });\n        }\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labelOptions = deepExtend({}, options.labels);\n\n        this.container.append(new TextBox(options.text, labelOptions));\n    },\n\n    getAriaLabelText: function() {\n        return this.options.text;\n    },\n\n    focusVisual: function() {\n        this.visual.options.set(\"id\", this._id);\n        this.toggleFocusHighlight(true);\n        this._highlightMarkers();\n    },\n\n    clearFocusFromVisual: function() {\n        this.visual.options.set(\"id\", \"\");\n        this.toggleFocusHighlight(false);\n        this._restoreMarkers();\n    },\n\n    renderComplete: function() {\n        BoxElement.fn.renderComplete.call(this);\n\n        var cursor = this.options.cursor || {};\n        var eventSink = this._itemOverlay = Path.fromRect(this.container.box.toRect(), {\n            fill: {\n                color: WHITE,\n                opacity: 0\n            },\n            stroke: null,\n            cursor: cursor.style || cursor\n        });\n\n        this.appendVisual(eventSink);\n    },\n\n    click: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_CLICK, args) && e && e.type === 'contextmenu') {\n            e.preventDefault();\n        }\n    },\n\n    over: function(widget, e) {\n        var args = this.eventArgs(e);\n\n        if (!widget.trigger(LEGEND_ITEM_HOVER, args)) {\n            widget._legendItemHover(args.seriesIndex, args.pointIndex);\n            this._highlightMarkers();\n        }\n\n        // Don't trigger point hover for legend items\n        return true;\n    },\n\n    out: function(widget, e) {\n        widget._unsetActivePoint();\n        this._restoreMarkers();\n\n        widget.trigger(LEGEND_ITEM_LEAVE, this.eventArgs(e));\n    },\n\n    eventArgs: function(e) {\n        var options = this.options;\n\n        return {\n            element: eventElement(e),\n            text: options.text,\n            series: options.series,\n            seriesIndex: options.series.index,\n            pointIndex: options.pointIndex\n        };\n    },\n\n    createVisual: function() {\n        BoxElement.fn.createVisual.call(this);\n        var options = this.options;\n\n        if (this.options.visible) {\n            var accessibilityOptions = deepExtend({\n                ariaLabel: options.text\n            }, options.accessibility);\n\n            addAccessibilityAttributesToVisual(this.visual, accessibilityOptions);\n        }\n    },\n\n    renderVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var customVisual = options.visual;\n\n        if (customVisual) {\n            this.visual = customVisual({\n                active: options.active,\n                series: options.series,\n                sender: this.getSender(),\n                pointIndex: options.pointIndex,\n                options: {\n                    type: options.type,\n                    // Passing the markerColor as a background option for backwards compatibility.\n                    // Example in jq docs - https://docs.telerik.com/kendo-ui/api/javascript/dataviz/ui/chart/configuration/legend.item#legenditemvisual\n                    markers: deepExtend({ background: this.options.markerColor }, this.markerOptions()),\n                    labels: options.labels\n                },\n                createVisual: function () {\n                    this$1$1.createVisual();\n                    this$1$1.renderChildren();\n                    this$1$1.renderComplete();\n\n                    var defaultVisual = this$1$1.visual;\n\n                    delete this$1$1.visual;\n\n                    return defaultVisual;\n                }\n            });\n            this._marker = this._markerLineArea = this._square = this._line = null;\n            this.addVisual();\n        } else {\n            BoxElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createFocusHighlight: function(style) {\n        var borderWidth = style.stroke.width;\n        return Path.fromRect(this.container.box.pad(borderWidth / 2).toRect(), style);\n    }\n});\n\nsetDefaultOptions(LegendItem, {\n    accessibility: {\n        role: LEGEND_ITEM_ROLE,\n        className: LEGEND_ITEM_CLASSNAME,\n        ariaRoleDescription: LEGEND_ITEM_ARIA_ROLE_DESCRIPTION\n    },\n    markers: {},\n    highlight: {\n        visible: true,\n        markers: {}\n    }\n});\n\nvar CUSTOM = \"custom\";\n\nvar Legend = ChartElement.extend({\n    init: function(options, chartService) {\n        if (chartService === void 0) { chartService = {}; }\n\n        ChartElement.fn.init.call(this, options);\n\n        this.chartService = chartService;\n\n        if (!inArray(this.options.position, [ TOP, RIGHT, BOTTOM, LEFT, CUSTOM ])) {\n            this.options.position = RIGHT;\n        }\n\n        this.createContainers();\n\n        this.createLegendTitle(options.title);\n\n        this.createItems();\n    },\n\n    createContainers: function() {\n        var options = this.options;\n        var position = options.position;\n        var userAlign = options.align;\n        var align = position;\n        var vAlign = CENTER;\n\n        if (position === CUSTOM) {\n            align = LEFT;\n        } else if (inArray(position, [ TOP, BOTTOM ])) {\n            if (userAlign === START) {\n                align = LEFT;\n            } else if (userAlign === END) {\n                align = RIGHT;\n            } else {\n                align = CENTER;\n            }\n            vAlign = position;\n        } else if (userAlign) {\n            if (userAlign === START) {\n                vAlign = TOP;\n            } else if (userAlign === END) {\n                vAlign = BOTTOM;\n            }\n        }\n\n        this.container = new BoxElement({\n            margin: options.margin,\n            padding: options.padding,\n            background: options.background,\n            border: options.border,\n            vAlign: vAlign,\n            align: align,\n            zIndex: options.zIndex,\n            shrinkToFit: true\n        });\n\n        if (this.hasTitle()) {\n            this.itemsContainer = new BoxElement({\n                vAlign: vAlign,\n                align: align,\n                zIndex: options.zIndex,\n                shrinkToFit: true\n            });\n        } else {\n            this.itemsContainer = this.container;\n        }\n\n        this.append(this.container);\n    },\n\n    createItems: function() {\n        var chartService = this.getService();\n        var options = this.options;\n        var vertical = this.isVertical();\n        var innerElement = new LegendLayout({\n            vertical: vertical,\n            spacing: options.spacing,\n            rtl: chartService.rtl\n        }, chartService);\n        var data = options.data;\n\n        if (options.reverse) {\n            data = data.slice(0).reverse();\n        }\n\n        var count = data.length;\n\n        for (var i = 0; i < count; i++) {\n            var dataItem = data[i];\n            var ref = dataItem.series || {};\n            var markers = ref.markers; if (markers === void 0) { markers = {}; }\n            var dashType = ref.dashType;\n            var legendItem = ref.legendItem;\n            var opacity = ref.opacity;\n            var markersOptions = deepExtend({ visible: markers.visible !== false, type: CIRCLE }, markers);\n            delete markersOptions.size;\n\n            var itemOptions = deepExtend({},\n                {\n                    markers: markersOptions,\n                    labels: options.labels,\n                    rtl: chartService.rtl,\n                    line: $.extend({}, {dashType: dashType},\n                        options.line),\n                    area: $.extend({}, {opacity: opacity},\n                        options.area),\n                    opacity: opacity,\n                    accessibility: options.accessibility\n                },\n                options.item,\n                legendItem,\n                dataItem,\n                { markers: options.markers }\n            );\n\n            innerElement.append(new LegendItem(itemOptions));\n        }\n\n        innerElement.render();\n        this.itemsContainer.append(innerElement);\n    },\n\n    isVertical: function() {\n        var ref = this.options;\n        var orientation = ref.orientation;\n        var position = ref.position;\n        var vertical = (position === CUSTOM && orientation !== datavizConstants.HORIZONTAL) ||\n               (defined(orientation) ? orientation !== datavizConstants.HORIZONTAL : inArray(position, [ LEFT, RIGHT ]));\n\n        return vertical;\n    },\n\n    hasItems: function() {\n        return this.container.children[0].children.length > 0;\n    },\n\n    getItems: function() {\n        return this.itemsContainer.children[0].children;\n    },\n\n    reflow: function(targetBox) {\n        var options = this.options;\n        var legendBox = targetBox.clone();\n\n        if (!this.hasItems()) {\n            this.box = legendBox;\n            return;\n        }\n\n        if (options.position === CUSTOM) {\n            this.containerCustomReflow(legendBox);\n            this.box = legendBox;\n        } else {\n            this.containerReflow(legendBox);\n        }\n\n        if (this.hasTitle()) {\n            this.title.reflow(new Box(this.container.box.x1, this.title.box.y1, this.container.box.x2, this.title.box.y2));\n        }\n    },\n\n    containerReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var position = options.position;\n        var width = options.width;\n        var height = options.height;\n        var pos = position === TOP || position === BOTTOM ? X : Y;\n        var vertical = this.isVertical();\n        var alignTarget = targetBox.clone();\n        var containerBox = targetBox.clone();\n\n        if (position === LEFT || position === RIGHT) {\n            containerBox.y1 = alignTarget.y1 = 0;\n        }\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n            containerBox.align(alignTarget, Y, container.options.vAlign);\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n            containerBox.align(alignTarget, X, container.options.align);\n        }\n\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        var box = containerBox.clone();\n\n        if (options.offsetX || options.offsetY) {\n            containerBox.translate(options.offsetX, options.offsetY);\n            container.reflow(containerBox);\n        }\n\n        box[pos + 1] = targetBox[pos + 1];\n        box[pos + 2] = targetBox[pos + 2];\n\n        this.box = box;\n    },\n\n    containerCustomReflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var container = ref.container;\n        var offsetX = options.offsetX;\n        var offsetY = options.offsetY;\n        var width = options.width;\n        var height = options.height;\n        var vertical = this.isVertical();\n        var containerBox = targetBox.clone();\n\n        if (vertical && height) {\n            containerBox.y2 = containerBox.y1 + height;\n        } else if (!vertical && width) {\n            containerBox.x2 = containerBox.x1 + width;\n        }\n        container.reflow(containerBox);\n        containerBox = container.box;\n\n        container.reflow(new Box(\n            offsetX, offsetY,\n            offsetX + containerBox.width(), offsetY + containerBox.height()\n        ));\n    },\n\n    renderVisual: function() {\n        if (this.hasItems()) {\n            ChartElement.fn.renderVisual.call(this);\n        }\n    },\n\n    createLegendTitle: function(title) {\n        var titleOptions = deepExtend({}, {\n            color: BLACK,\n            position: TOP,\n            align: CENTER\n        }, title);\n        var text = titleOptions.text;\n\n        if (!title || title.visible === false || !title.text) {\n            return;\n        }\n\n        if (defined(titleOptions) && titleOptions.visible) {\n            var labelTemplate = getTemplate(titleOptions);\n            if (labelTemplate) {\n                text = labelTemplate({ text: text });\n            } else if (titleOptions.format) {\n                text = this.chartService.format.auto(titleOptions.format, text);\n            }\n        }\n\n        this.title = new TextBox(text, titleOptions);\n\n        this.createTitleLayout();\n\n        this.appendTitleLayoutContent();\n    },\n\n    createTitleLayout: function() {\n        this.layout = new dataviz.FloatElement({\n            vertical: true,\n            wrap: false\n        });\n\n        this.container.append(this.layout);\n    },\n\n    hasTitle: function() {\n        return Boolean(this.options.title && this.options.title.visible !== false && this.options.title.text);\n    },\n\n    appendTitleLayoutContent: function() {\n        var options = this.options;\n\n        if (options.title.position === BOTTOM) {\n            this.layout.append(this.itemsContainer);\n            this.layout.append(this.title);\n        } else {\n            this.layout.append(this.title);\n            this.layout.append(this.itemsContainer);\n        }\n    }\n});\n\nsetDefaultOptions(Legend, {\n    position: RIGHT,\n    data: [],\n    offsetX: 0,\n    offsetY: 0,\n    margin: getSpacing(2),\n    padding: getSpacing(5),\n    border: {\n        color: BLACK,\n        width: 0\n    },\n    item: {\n        cursor: datavizConstants.POINTER,\n        spacing: 6\n    },\n    spacing: 6,\n    background: \"\",\n    zIndex: 1,\n    markers: {},\n    line: {\n        width: 20,\n        height: 2,\n        cursor: datavizConstants.POINTER,\n        opacity: 1\n    },\n    area: {\n        type: datavizConstants.SQUARE,\n        align: RIGHT,\n        width: 15,\n        height: 15,\n    }\n});\n\nvar PlotAreaFactory = Class.extend({\n    init: function() {\n\n        this._registry = [];\n    },\n\n    register: function(type, seriesTypes) {\n        this._registry.push({\n            type: type,\n            seriesTypes: seriesTypes\n        });\n    },\n\n    create: function(srcSeries, options, chartService) {\n        var registry = this._registry;\n        var match = registry[0];\n        var series;\n\n        for (var idx = 0; idx < registry.length; idx++) {\n            var entry = registry[idx];\n            series = filterSeriesByType(srcSeries, entry.seriesTypes);\n            var trendlines = filterSeriesByType(srcSeries, TRENDLINE_SERIES);\n\n            if ((series.length - trendlines.length) > 0) {\n                match = entry;\n                break;\n            }\n        }\n\n        return new match.type(series, options, chartService);\n    }\n});\n\nPlotAreaFactory.current = new PlotAreaFactory();\n\nvar ZOOM_ACCELERATION = 3;\nvar SELECTOR_HEIGHT_ADJUST = 0.1;\n\nfunction createDiv(classNames) {\n    var element = document.createElement(\"div\");\n    if (classNames) {\n        element.className = classNames;\n    }\n\n    return element;\n}\n\nfunction closestHandle(element) {\n    var current = element;\n    while (current && !dataviz.hasClasses(current, \"k-handle\")) {\n        current = current.parentNode;\n    }\n\n    return current;\n}\n\nvar Selection = Class.extend({\n    init: function(chart, categoryAxis, options, observer) {\n\n        var chartElement = chart.element;\n\n        this.options = deepExtend({}, this.options, options);\n        this.chart = chart;\n        this.observer = observer;\n        this.chartElement = chartElement;\n        this.categoryAxis = categoryAxis;\n        this._dateAxis = this.categoryAxis instanceof dataviz.DateCategoryAxis;\n\n        this.initOptions();\n\n        this.visible = this.options.visible && chartElement.offsetHeight;\n\n        if (this.visible) {\n            this.createElements();\n\n            this.set(this._index(this.options.from), this._index(this.options.to));\n\n            this.bindEvents();\n        }\n    },\n\n    onPane: function(pane) {\n        return this.categoryAxis.pane === pane;\n    },\n\n    createElements: function() {\n        var options = this.options;\n        var wrapper = this.wrapper = createDiv(\"k-selector k-pointer-events-none\");\n        elementStyles(wrapper, {\n            top: options.offset.top,\n            left: options.offset.left,\n            width: options.width,\n            height: options.height,\n            direction: 'ltr'\n        });\n\n        var selection = this.selection = createDiv(\"k-selection k-pointer-events-none\");\n\n        this.leftMask = createDiv(\"k-mask k-pointer-events-none\");\n        this.rightMask = createDiv(\"k-mask k-pointer-events-none\");\n\n        wrapper.appendChild(this.leftMask);\n        wrapper.appendChild(this.rightMask);\n        wrapper.appendChild(selection);\n\n        var body = this.body = createDiv(\"k-selection-bg k-pointer-events-none\");\n        selection.appendChild(body);\n\n        var leftHandle = this.leftHandle = createDiv(\"k-handle k-left-handle k-pointer-events-auto\");\n        var rightHandle = this.rightHandle = createDiv(\"k-handle k-right-handle k-pointer-events-auto\");\n        leftHandle.appendChild(createDiv());\n        rightHandle.appendChild(createDiv());\n\n        selection.appendChild(leftHandle);\n        selection.appendChild(rightHandle);\n\n        this.chartElement.appendChild(wrapper);\n        var selectionStyles = elementStyles(selection, [ \"borderLeftWidth\", \"borderRightWidth\", \"height\" ]);\n        var leftHandleHeight = elementStyles(leftHandle, \"height\").height;\n        var rightHandleHeight = elementStyles(rightHandle, \"height\").height;\n\n        options.selection = {\n            border: {\n                left: selectionStyles.borderLeftWidth,\n                right: selectionStyles.borderRightWidth\n            }\n        };\n\n        elementStyles(leftHandle, {\n            top: (selectionStyles.height - leftHandleHeight) / 2\n        });\n\n        elementStyles(rightHandle, {\n            top: (selectionStyles.height - rightHandleHeight) / 2\n        });\n\n        /* eslint no-self-assign: \"off\" */\n        wrapper.style.cssText = wrapper.style.cssText;\n    },\n\n    bindEvents: function() {\n        if (this.options.mousewheel !== false) {\n            this._mousewheelHandler = this._mousewheel.bind(this);\n            var obj;\n            bindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n        }\n\n        this._domEvents = services.DomEventsBuilder.create(this.chartElement, {\n            stopPropagation: true, // applicable for the jQuery UserEvents\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            press: this._press.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n    },\n\n    initOptions: function() {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var box = categoryAxis.pane.chartsBox();\n        var intlService = this.chart.chartService.intl;\n\n        if (this._dateAxis) {\n            deepExtend(options, {\n                min: parseDate(intlService, options.min),\n                max: parseDate(intlService, options.max),\n                from: parseDate(intlService, options.from),\n                to: parseDate(intlService, options.to)\n            });\n        }\n\n        var ref$1 = elementStyles(this.chartElement, [ \"paddingLeft\", \"paddingTop\" ]);\n        var paddingLeft = ref$1.paddingLeft;\n        var paddingTop = ref$1.paddingTop;\n\n        this.options = deepExtend({}, {\n            width: box.width(),\n            height: box.height() + SELECTOR_HEIGHT_ADJUST, //workaround for sub-pixel hover on the paths in chrome\n            padding: {\n                left: paddingLeft,\n                top: paddingTop\n            },\n            offset: {\n                left: box.x1 + paddingLeft,\n                top: box.y1 + paddingTop\n            },\n            from: options.min,\n            to: options.max\n        }, options);\n    },\n\n    destroy: function() {\n        if (this._domEvents) {\n            this._domEvents.destroy();\n            delete this._domEvents;\n        }\n\n        clearTimeout(this._mwTimeout);\n        this._state = null;\n\n        if (this.wrapper) {\n            if (this._mousewheelHandler) {\n                var obj;\n                unbindEvents(this.chartElement, ( obj = {}, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj ));\n                this._mousewheelHandler = null;\n            }\n\n            this.chartElement.removeChild(this.wrapper);\n            this.wrapper = null;\n        }\n    },\n\n    _rangeEventArgs: function(range) {\n\n        return {\n            axis: this.categoryAxis.options,\n            from: this._value(range.from),\n            to: this._value(range.to)\n        };\n    },\n\n    _pointInPane: function(x, y) {\n        var paneBox = this.categoryAxis.pane.box;\n        var modelCoords = this.chart._toModelCoordinates(x, y);\n        return paneBox.containsPoint(modelCoords);\n    },\n\n    _start: function(e) {\n        var options = this.options;\n        var target = eventElement(e);\n        if (this._state || !target) {\n            return;\n        }\n\n        var coords = dataviz.eventCoordinates(e);\n        var inPane = this._pointInPane(coords.x, coords.y);\n        if (!inPane) {\n            return;\n        }\n\n        var handle = closestHandle(target);\n        var bodyRect = this.body.getBoundingClientRect();\n        var inBody = !handle && coords.x >= bodyRect.x && coords.x <= bodyRect.x + bodyRect.width &&\n                       coords.y >= bodyRect.y && coords.y <= bodyRect.y + bodyRect.height;\n\n        this.chart._unsetActivePoint();\n        this._state = {\n            moveTarget: handle,\n            startLocation: e.x ? e.x.location : 0,\n            inBody: inBody,\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n\n        var args = this._rangeEventArgs({\n            from: this._index(options.from),\n            to: this._index(options.to)\n        });\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        }\n    },\n\n    _press: function(e) {\n        var handle;\n        if (this._state) {\n            handle = this._state.moveTarget;\n        } else {\n            handle = closestHandle(eventElement(e));\n        }\n        if (handle) {\n            dataviz.addClass(handle, \"k-handle-active\");\n        }\n    },\n\n    _move: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var target = state.moveTarget;\n        var reverse = categoryAxis.options.reverse;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var delta = state.startLocation - e.x.location;\n        var oldRange = { from: range.from, to: range.to };\n        var span = range.to - range.from;\n        var scale = elementStyles(this.wrapper, \"width\").width / (categoryAxis.categoriesCount() - 1);\n        var offset = Math.round(delta / scale) * (reverse ? -1 : 1);\n\n        if (!target && !state.inBody) {\n            return;\n        }\n\n        var leftHandle = target && dataviz.hasClasses(target, \"k-left-handle\");\n        var rightHandle = target && dataviz.hasClasses(target, \"k-right-handle\");\n\n        if (state.inBody) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - span\n            );\n            range.to = Math.min(\n                range.from + span,\n                max\n            );\n        } else if ((leftHandle && !reverse) || (rightHandle && reverse)) {\n            range.from = Math.min(\n                Math.max(min, from - offset),\n                max - 1\n            );\n            range.to = Math.max(range.from + 1, range.to);\n        } else if ((leftHandle && reverse) || (rightHandle && !reverse)) {\n            range.to = Math.min(\n                Math.max(min + 1, to - offset),\n                max\n            );\n            range.from = Math.min(range.to - 1, range.from);\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.move(range.from, range.to);\n            this.trigger(SELECT, this._rangeEventArgs(range));\n        }\n    },\n\n    _end: function() {\n        if (this._state) {\n            var moveTarget = this._state.moveTarget;\n            if (moveTarget) {\n                dataviz.removeClass(moveTarget, \"k-handle-active\");\n            }\n\n            var range = this._state.range;\n            this.set(range.from, range.to);\n            this.trigger(SELECT_END, this._rangeEventArgs(range));\n\n            delete this._state;\n        }\n    },\n\n    _tap: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var coords = this.chart._eventCoordinates(e);\n        var categoryIx = categoryAxis.pointCategoryIndex(new Point(coords.x, categoryAxis.box.y1));\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var span = to - from;\n        var mid = from + span / 2;\n        var range = {};\n        var rightClick = e.event.which === 3;\n        var offset = Math.round(mid - categoryIx);\n\n        if (this._state || rightClick) {\n            return;\n        }\n\n        this.chart._unsetActivePoint();\n\n        if (!categoryAxis.options.justified) {\n            offset--;\n        }\n\n        range.from = Math.min(\n            Math.max(min, from - offset),\n            max - span\n        );\n\n        range.to = Math.min(range.from + span, max);\n\n        this._start(e);\n\n        if (this._state) {\n            this._state.range = range;\n            this.trigger(SELECT, this._rangeEventArgs(range));\n            this._end();\n        }\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n\n        this._start(e);\n\n        if (this._state) {\n            var range = this._state.range;\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            if (Math.abs(delta) > 1) {\n                delta *= ZOOM_ACCELERATION;\n            }\n\n            if (this.options.mousewheel.reverse) {\n                delta *= -1;\n            }\n\n            if (this.expand(delta)) {\n                this.trigger(SELECT, {\n                    axis: this.categoryAxis.options,\n                    delta: delta,\n                    originalEvent: e,\n                    from: this._value(range.from),\n                    to: this._value(range.to)\n                });\n            }\n\n            if (this._mwTimeout) {\n                clearTimeout(this._mwTimeout);\n            }\n\n            this._mwTimeout = setTimeout(function () {\n                this$1$1._end();\n            }, MOUSEWHEEL_DELAY);\n        }\n    },\n\n    _gesturestart: function(e) {\n        var options = this.options;\n        var touch = e.touches[0];\n        var inPane = this._pointInPane(touch.pageX, touch.pageY);\n\n        if (!inPane) {\n            return;\n        }\n\n        this._state = {\n            range: {\n                from: this._index(options.from),\n                to: this._index(options.to)\n            }\n        };\n        var args = this._rangeEventArgs(this._state.range);\n\n        if (this.trigger(SELECT_START, args)) {\n            this._state = null;\n        } else {\n            e.preventDefault();\n        }\n    },\n\n    _gestureend: function() {\n        if (this._state) {\n            this.trigger(SELECT_END, this._rangeEventArgs(this._state.range));\n            delete this._state;\n        }\n    },\n\n    _gesturechange: function(e) {\n        if (!this._state) {\n            return;\n        }\n\n        var ref = this;\n        var chart = ref.chart;\n        var state = ref._state;\n        var options = ref.options;\n        var categoryAxis = ref.categoryAxis;\n        var range = state.range;\n        var p0 = chart._toModelCoordinates(e.touches[0].x.location).x;\n        var p1 = chart._toModelCoordinates(e.touches[1].x.location).x;\n        var left = Math.min(p0, p1);\n        var right = Math.max(p0, p1);\n\n        e.preventDefault();\n\n        range.from = categoryAxis.pointCategoryIndex(new Point(left)) || options.min;\n\n        range.to = categoryAxis.pointCategoryIndex(new Point(right)) || options.max;\n\n        this.move(range.from, range.to);\n\n        this.trigger(SELECT, this._rangeEventArgs(range));\n    },\n\n    _index: function(value) {\n        var index = value;\n\n        if (value instanceof Date) {\n            index = this.categoryAxis.categoryIndex(value);\n        }\n\n        return index;\n    },\n\n    _value: function(index) {\n        var value = index;\n        if (this._dateAxis) {\n            value = this.categoryAxis.categoryAt(index);\n            if (value > this.options.max) {\n                value = this.options.max;\n            }\n        }\n\n        return value;\n    },\n\n    _slot: function(value) {\n        var categoryAxis = this.categoryAxis;\n        var index = this._index(value);\n\n        return categoryAxis.getSlot(index, index, true);\n    },\n\n    move: function(from, to) {\n        var options = this.options;\n        var reverse = this.categoryAxis.options.reverse;\n        var offset = options.offset;\n        var padding = options.padding;\n        var border = options.selection.border;\n        var left = reverse ? to : from;\n        var right = reverse ? from : to;\n        var edge = 'x' + (reverse ? 2 : 1);\n\n        var box = this._slot(left);\n        var leftMaskWidth = round(box[edge] - offset.left + padding.left);\n\n        elementStyles(this.leftMask, {\n            width: leftMaskWidth\n        });\n        elementStyles(this.selection, {\n            left: leftMaskWidth\n        });\n\n        box = this._slot(right);\n\n        var rightMaskWidth = round(options.width - (box[edge] - offset.left + padding.left));\n        elementStyles(this.rightMask, {\n            width: rightMaskWidth\n        });\n\n        var distance = options.width - rightMaskWidth;\n        if (distance !== options.width) {\n            distance += border.right;\n        }\n\n        elementStyles(this.rightMask, {\n            left: distance\n        });\n        elementStyles(this.selection, {\n            width: Math.max(options.width - (leftMaskWidth + rightMaskWidth) - border.right, 0)\n        });\n    },\n\n    set: function(from, to) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var fromValue = limitValue(this._index(from), min, max);\n        var toValue = limitValue(this._index(to), fromValue + 1, max);\n\n        if (options.visible) {\n            this.move(fromValue, toValue);\n        }\n\n        options.from = this._value(fromValue);\n        options.to = this._value(toValue);\n    },\n\n    expand: function(delta) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var zDir = options.mousewheel.zoom;\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        if (zDir !== RIGHT) {\n            range.from = limitValue(\n                limitValue(from - delta, 0, to - 1),\n                min, max\n            );\n        }\n\n        if (zDir !== LEFT) {\n            range.to = limitValue(\n                limitValue(to + delta, range.from + 1, max),\n                min,\n                max\n            );\n        }\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    zoom: function(delta, coords) {\n        var options = this.options;\n        var min = this._index(options.min);\n        var max = this._index(options.max);\n        var from = this._index(options.from);\n        var to = this._index(options.to);\n        var range = { from: from, to: to };\n        var oldRange = deepExtend({}, range);\n\n        var ref = this.categoryAxis.options;\n        var reverse = ref.reverse;\n        var origin = X + (reverse ? '2' : '1');\n        var lineBox = this.categoryAxis.lineBox();\n        var relative = Math.abs(lineBox[origin] - coords[X]);\n        var size = lineBox.width();\n        var position = round(relative / size, 2);\n        var minDelta = round(position * delta);\n        var maxDelta = round((1 - position) * delta);\n\n        if (this._state) {\n            range = this._state.range;\n        }\n\n        range.from = limitValue(\n            limitValue(from - minDelta, 0, to - 1),\n            min, max\n        );\n\n        range.to = limitValue(\n            limitValue(to + maxDelta, range.from + 1, max),\n            min,\n            max\n        );\n\n        if (range.from !== oldRange.from || range.to !== oldRange.to) {\n            this.set(range.from, range.to);\n            return true;\n        }\n    },\n\n    trigger: function(name, args) {\n        return (this.observer || this.chart).trigger(name, args);\n    }\n});\n\nsetDefaultOptions(Selection, {\n    visible: true,\n    mousewheel: {\n        zoom: \"both\"\n    },\n    min: MIN_VALUE,\n    max: MAX_VALUE\n});\n\nvar Tooltip = BaseTooltip.extend({\n    show: function(point) {\n        if (!point || !point.tooltipAnchor || (this._current && this._current === point)) {\n            return;\n        }\n\n        var options = deepExtend({}, this.options, point.options.tooltip);\n        var anchor = point.tooltipAnchor();\n\n        if (anchor) {\n            this._current = point;\n            BaseTooltip.fn.show.call(this, {\n                point: point,\n                anchor: anchor\n            }, options, point);\n        } else {\n            this.hide();\n        }\n    },\n\n    hide: function() {\n        delete this._current;\n        BaseTooltip.fn.hide.call(this);\n    }\n});\n\nvar SharedTooltip = BaseTooltip.extend({\n    init: function(plotArea, options) {\n        BaseTooltip.fn.init.call(this, plotArea.chartService, options);\n\n        this.plotArea = plotArea;\n        this.formatService = plotArea.chartService.format;\n    },\n\n    showAt: function(points, coords) {\n        var tooltipPoints = grep(points, function(point) {\n            var tooltip = point.series.tooltip;\n            var excluded = tooltip && tooltip.visible === false;\n\n            return !excluded;\n        });\n\n        if (tooltipPoints.length > 0) {\n            var point = tooltipPoints[0];\n            var slot = this.plotArea.categoryAxis.getSlot(point.categoryIx);\n\n            var anchor = coords ? this._slotAnchor(coords, slot) : this._defaultAnchor(point, slot);\n\n            this.show({\n                anchor: anchor,\n                shared: true,\n                points: points,\n                category: point.category,\n                categoryText: this.formatService.auto(this.options.categoryFormat, point.category),\n                series: this.plotArea.series\n            }, this.options);\n        }\n    },\n\n    _slotAnchor: function(point, slot) {\n        var axis = this.plotArea.categoryAxis;\n        var align = {\n            horizontal: \"left\",\n            vertical: \"center\"\n        };\n\n        if (!axis.options.vertical) {\n            point.x = slot.center().x;\n        }\n\n        return {\n            point: point,\n            align: align\n        };\n    },\n\n    _defaultAnchor: function(point, slot) {\n        var box = point.owner.pane.chartsBox();\n        var vertical = this.plotArea.categoryAxis.options.vertical;\n        var center = box.center();\n        var slotCenter = slot.center();\n        var align = {\n            horizontal: \"center\",\n            vertical: \"center\"\n        };\n\n        var centerPoint;\n        if (vertical) {\n            centerPoint = new Point(center.x, slotCenter.y);\n        } else {\n            centerPoint = new Point(slotCenter.x, center.y);\n        }\n\n        return {\n            point: centerPoint,\n            align: align\n        };\n    }\n});\n\nsetDefaultOptions(SharedTooltip, {\n    categoryFormat: '{0:d}'\n});\n\nvar BarChartAnimation = Animation.extend({\n    setup: function() {\n        var ref = this;\n        var element = ref.element;\n        var options = ref.options;\n        var bbox = element.bbox();\n\n        if (bbox) {\n            this.origin = options.origin;\n            var axis = options.vertical ? Y : X;\n\n            var fromScale = this.fromScale = new GeometryPoint(1, 1);\n            fromScale[axis] = START_SCALE;\n\n            element.transform(transform()\n                .scale(fromScale.x, fromScale.y)\n            );\n        } else {\n            this.abort();\n        }\n    },\n\n    step: function(pos) {\n        var scaleX = dataviz.interpolateValue(this.fromScale.x, 1, pos);\n        var scaleY = dataviz.interpolateValue(this.fromScale.y, 1, pos);\n\n        this.element.transform(transform()\n            .scale(scaleX, scaleY, this.origin)\n        );\n    },\n\n    abort: function() {\n        Animation.fn.abort.call(this);\n        this.element.transform(null);\n    }\n});\n\nsetDefaultOptions(BarChartAnimation, {\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(BAR, BarChartAnimation);\n\nvar BubbleAnimation = Animation.extend({\n    setup: function() {\n        var center = this.center = this.element.bbox().center();\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.center)\n        );\n    }\n});\n\nsetDefaultOptions(BubbleAnimation, {\n    easing: \"easeOutElastic\"\n});\n\nAnimationFactory.current.register(BUBBLE, BubbleAnimation);\n\nvar FadeInAnimation = Animation.extend({\n    setup: function() {\n        this.fadeTo = this.element.opacity();\n        this.element.opacity(0);\n    },\n\n    step: function(pos) {\n        this.element.opacity(pos * this.fadeTo);\n    }\n});\n\nsetDefaultOptions(FadeInAnimation, {\n    duration: 200,\n    easing: \"linear\"\n});\n\nAnimationFactory.current.register(FADEIN, FadeInAnimation);\n\nvar PieAnimation = Animation.extend({\n    setup: function() {\n        this.element.transform(transform()\n            .scale(START_SCALE, START_SCALE, this.options.center)\n        );\n    },\n\n    step: function(pos) {\n        this.element.transform(transform()\n            .scale(pos, pos, this.options.center)\n        );\n    }\n});\n\nsetDefaultOptions(PieAnimation, {\n    easing: \"easeOutElastic\",\n    duration: INITIAL_ANIMATION_DURATION\n});\n\nAnimationFactory.current.register(PIE, PieAnimation);\n\nvar ScatterLineChart = ScatterChart.extend({\n    render: function() {\n        ScatterChart.fn.render.call(this);\n\n        this.renderSegments();\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        return new pointType(linePoints, currentSeries, seriesIx);\n    },\n\n    animationPoints: function() {\n        var points = ScatterChart.fn.animationPoints.call(this);\n        return points.concat(this._segments);\n    },\n\n    createMissingValue: function(value, missingValues) {\n        if (missingValues === ZERO) {\n            var missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (!hasValue(missingValue.x)) {\n                missingValue.x = 0;\n            }\n            if (!hasValue(missingValue.y)) {\n                missingValue.y = 0;\n            }\n            return missingValue;\n        }\n    }\n});\n\ndeepExtend(ScatterLineChart.prototype, LineChartMixin);\n\nfunction autoMajorUnit(min, max) {\n    var diff = round(max - min, DEFAULT_PRECISION - 1);\n\n    if (diff === 0) {\n        if (max === 0) {\n            return 0.1;\n        }\n\n        diff = Math.abs(max);\n    }\n\n    var scale = Math.pow(10, Math.floor(Math.log(diff) / Math.log(10)));\n    var relativeValue = round((diff / scale), DEFAULT_PRECISION);\n    var scaleMultiplier = 1;\n\n    if (relativeValue < 1.904762) {\n        scaleMultiplier = 0.2;\n    } else if (relativeValue < 4.761904) {\n        scaleMultiplier = 0.5;\n    } else if (relativeValue < 9.523809) {\n        scaleMultiplier = 1;\n    } else {\n        scaleMultiplier = 2;\n    }\n\n    return round(scale * scaleMultiplier, DEFAULT_PRECISION);\n}\n\nfunction getScatterTrendlineData(valueMapper, range, options) {\n    var data = [];\n    var xMin = range.xMin;\n    var xMax = range.xMax;\n\n    var forecast = (options || {}).forecast;\n    if (forecast) {\n        if (forecast.before > 0) {\n            xMin -= forecast.before;\n        }\n\n        if (forecast.after > 0) {\n            xMax += forecast.after;\n        }\n    }\n\n    var samplingInterval = (options || {}).samplingInterval;\n    var delta = valueOrDefault(samplingInterval,  autoMajorUnit(xMin, xMax) / 10);\n    if (samplingInterval <= 0) {\n        delta = xMax - xMin;\n    }\n\n    for (var x = xMin; x <= xMax; x += delta) {\n        data.push([\n            x,\n            valueMapper(x)\n        ]);\n    }\n\n    return data;\n}\n\nfunction scatterExponentialTrendline(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$6({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nvar valueGetter$6 = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: valueFields.x, yValue: Math.log(valueFields[fieldName]) });\n }    };\n\nfunction getData$6(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var sourceValues = seriesValues();\n    if (!checkAllPositive(sourceValues, options.field)) {\n        return null;\n    }\n\n    var ref$1 = calculateSlope(sourceValues, valueGetter$6(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    var xMin = ref$1.xMin;\n    var xMax = ref$1.xMax;\n    var range = { xMin: xMin, xMax: xMax };\n\n    if (count > 0) {\n        // Exponential trendline equation:\n        // y = a * e ^ (b * x)\n        var a = Math.exp(intercept);\n        var b = slope;\n\n        return getScatterTrendlineData(function (x) { return a * Math.exp(b * x); }, range, options.trendline);\n    }\n\n    return null;\n}\n\nvar scatterValueGetter = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: valueFields.x, yValue: valueFields[fieldName] });\n }    };\n\nfunction scatterLinearTrendline(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$7({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nfunction getData$7(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var ref$1 = calculateSlope(seriesValues(), scatterValueGetter(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    var xMin = ref$1.xMin;\n    var xMax = ref$1.xMax;\n    var range = { xMin: xMin, xMax: xMax };\n\n    if (count > 0) {\n        return getScatterTrendlineData(function (x) { return slope * x + intercept; }, range, options.trendline);\n    }\n\n    return null;\n}\n\nfunction xValueLimits(sourceValues, valueGetter) {\n    var xMin = Number.MAX_VALUE;\n    var xMax = Number.MIN_VALUE;\n\n    for (var i = 0; i < sourceValues.length; i++) {\n        var value = sourceValues[i];\n        var ref = valueGetter(value);\n        var xValue = ref.xValue;\n        var yValue = ref.yValue;\n\n        if (isFinite(xValue) && xValue !== null && isFinite(yValue) && yValue !== null) {\n            xMin = Math.min(xValue, xMin);\n            xMax = Math.max(xValue, xMax);\n        }\n    }\n\n    return { xMin: xMin, xMax: xMax };\n}\n\nfunction scatterLogarithmicTrendline(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$8({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nvar valueGetter$7 = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: valueFields.x, yValue: valueFields[fieldName] });\n }    };\n\nvar logValueGetter = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: Math.log(valueFields.x), yValue: valueFields[fieldName] });\n }    };\n\nfunction getData$8(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var sourceValues = seriesValues();\n    if (!checkAllPositive(sourceValues, 'x')) {\n        return null;\n    }\n\n    var ref$1 = calculateSlope(sourceValues, logValueGetter(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    var range = xValueLimits(sourceValues, valueGetter$7(options.field));\n\n    if (count > 0) {\n        // Logarithmic trendline equation:\n        // y = a * ln (x) + b\n        var a = slope;\n        var b = intercept;\n\n        return getScatterTrendlineData(function (x) { return a * Math.log(x) + b; }, range, options.trendline);\n    }\n\n    return null;\n}\n\nfunction scatterMovingAverageTrendline(context) {\n    var options = context.options;\n\n    var data = getData$9(context);\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nfunction getData$9(ref) {\n    var options = ref.options;\n    var seriesValues = ref.seriesValues;\n\n    var period = (options.trendline || {}).period || MIN_MOVING_AVERAGE_PERIOD;\n    var range = { before: period, after: period };\n    var data = calculateMovingAverage(seriesValues(range), scatterValueGetter(options.field), period);\n\n    if (data.length > 0) {\n        return data;\n    }\n\n    return null;\n}\n\nfunction scatterPolynomialTrendline(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$10({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nfunction getData$10(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var order = (options.trendline || {}).order;\n    var valueGetter = scatterValueGetter(options.field);\n    var ref$1 = calculatePolynomial(seriesValues(), valueGetter, order);\n    var count = ref$1.count;\n    var valueMapper = ref$1.valueMapper;\n    var xMin = ref$1.xMin;\n    var xMax = ref$1.xMax;\n    var range = { xMin: xMin, xMax: xMax };\n\n    if (count > 0) {\n        // Polynomial trendline equation:\n        // y = aN * x^N + ... + a2 * x^2 + a1 * x + a0\n        return getScatterTrendlineData(valueMapper, range, options.trendline);\n    }\n\n    return null;\n}\n\nfunction scatterPowerTrendline(context) {\n    var options = context.options;\n    var seriesValues = context.seriesValues;\n\n    var data = getData$11({ seriesValues: seriesValues, options: options });\n    if (data) {\n        return $.extend({}, options,\n\n            {type: 'scatterLine',\n            data: data});\n    }\n\n    return null;\n}\n\nvar valueGetter$8 = function (fieldName) { return function (ref) {\n        var valueFields = ref.valueFields;\n\n        return ({ xValue: Math.log(valueFields.x), yValue: Math.log(valueFields[fieldName]) });\n }    };\n\nfunction getData$11(ref) {\n    var seriesValues = ref.seriesValues;\n    var options = ref.options;\n\n    var sourceValues = seriesValues();\n    if (!checkAllPositive(sourceValues, 'x')) {\n        return null;\n    }\n\n    var ref$1 = calculateSlope(sourceValues, valueGetter$8(options.field));\n    var slope = ref$1.slope;\n    var intercept = ref$1.intercept;\n    var count = ref$1.count;\n    var range = xValueLimits(sourceValues, scatterValueGetter(options.field));\n\n    if (count > 0) {\n        // Power trendline equation:\n        // y = a * x ^ b\n        var a = Math.exp(intercept);\n        var b = slope;\n        return getScatterTrendlineData(function (x) { return a * Math.pow(x, b); }, range, options.trendline);\n    }\n\n    return null;\n}\n\nvar scatterRegistry = {};\nscatterRegistry[TRENDLINE_EXPONENTIAL] = scatterExponentialTrendline;\nscatterRegistry[TRENDLINE_LINEAR] = scatterLinearTrendline;\nscatterRegistry[TRENDLINE_LOGARITHMIC] = scatterLogarithmicTrendline;\nscatterRegistry[TRENDLINE_MOVING_AVERAGE] = scatterMovingAverageTrendline;\nscatterRegistry[TRENDLINE_POLYNOMIAL] = scatterPolynomialTrendline;\nscatterRegistry[TRENDLINE_POWER] = scatterPowerTrendline;\n\nvar XYPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n\n        this.xAxisRangeTracker = new AxisGroupRangeTracker();\n        this.yAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function(panes) {\n        var this$1$1 = this;\n        if (panes === void 0) { panes = this.panes; }\n\n        this.series = [].concat( this.originalSeries );\n        this.createTrendlineSeries();\n\n        var seriesByPane = this.groupSeriesByPane();\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createScatterChart(\n                filterSeriesByType(filteredSeries, SCATTER),\n                pane\n            );\n\n            this$1$1.createScatterLineChart(\n                filterSeriesByType(filteredSeries, SCATTER_LINE),\n                pane\n            );\n\n            this$1$1.createBubbleChart(\n                filterSeriesByType(filteredSeries, BUBBLE),\n                pane\n            );\n        }\n\n        this.createAxes(panes);\n    },\n\n    appendChart: function(chart, pane) {\n        this.xAxisRangeTracker.update(chart.xAxisRanges);\n        this.yAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            this.yAxisRangeTracker.reset(axisName);\n            delete this.namedYAxes[axisName];\n        } else {\n            this.xAxisRangeTracker.reset(axisName);\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createScatterLineChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new ScatterLineChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createBubbleChart: function(series, pane) {\n        if (series.length > 0) {\n            this.appendChart(\n                new BubbleChart(this, { series: series, clip: pane.options.clip }),\n                pane\n            );\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var tracker = vertical ? this.yAxisRangeTracker : this.xAxisRangeTracker;\n        var axisOptions = deepExtend({ reverse: !vertical && this.chartService.rtl }, options, { vertical: vertical });\n        var isLog = equalsIgnoreCase(axisOptions.type, LOGARITHMIC);\n        var defaultRange = tracker.query();\n        var defaultAxisRange = isLog ? { min: 0.1, max: 1 } : { min: 0, max: 1 };\n        var range = tracker.query(axisName) || defaultRange || defaultAxisRange;\n        var typeSamples = [ axisOptions.min, axisOptions.max ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        if (axisIndex === 0 && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateValueAxis;\n        } else if (isLog) {\n            axisType = dataviz.LogarithmicAxis;\n        } else {\n            axisType = dataviz.NumericAxis;\n        }\n\n        var axis = new axisType(range.min, range.max, axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            var currentValue = axis.getValue(point);\n            if (currentValue !== null) {\n                values.push(currentValue);\n            }\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$1(this.options, index, vertical, options);\n        updateAxisOptions$1(this.originalOptions, index, vertical, options);\n    },\n\n    trendlineFactory: function(options, series) {\n        var seriesValues = this.seriesValues.bind(this, series.index);\n\n        var trendline = trendlineFactory(scatterRegistry, options.type, {\n            options: options,\n            seriesValues: seriesValues\n        });\n\n        if (trendline) {\n            // Inherit settings\n            trendline.xAxis = series.xAxis;\n            trendline.yAxis = series.yAxis;\n        }\n\n        return trendline;\n    },\n\n    seriesValues: function(seriesIx) {\n        var this$1$1 = this;\n\n        var result = [];\n        var currentSeries = this.series[seriesIx];\n\n        for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n            var data = this$1$1.bindPoint(currentSeries, pointIx);\n            result.push({ pointIx: pointIx, valueFields: data.valueFields });\n        }\n\n        return result;\n    }\n});\n\nfunction updateAxisOptions$1(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(XYPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(XYPlotArea.prototype, PlotAreaEventsMixin);\n\nvar PieSegment = ChartElement.extend({\n    init: function(value, sector, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.sector = sector;\n    },\n\n    render: function() {\n        if (this._rendered || this.visible === false) {\n            return;\n        }\n        this._rendered = true;\n\n        this.createLabel();\n    },\n\n    createLabel: function() {\n        var labels = this.options.labels;\n        var chartService = this.owner.chartService;\n        var labelText = this.getLabelText(labels);\n\n        if (labels.visible && (labelText || labelText === 0)) {\n            if (labels.position === CENTER || labels.position === INSIDE_END) {\n                if (!labels.color) {\n                    labels.color = autoTextColor(this.options.color);\n                }\n                if (!labels.background) {\n                    labels.background = this.options.color;\n                }\n            } else {\n                var themeLabels = chartService.theme.seriesDefaults.labels;\n                labels.color = labels.color || themeLabels.color;\n                labels.background = labels.background || themeLabels.background;\n            }\n\n            this.label = new TextBox(labelText, deepExtend({}, labels, {\n                align: CENTER,\n                vAlign: \"\",\n                animation: {\n                    type: FADEIN,\n                    delay: this.animationDelay\n                }\n            }), this.pointData());\n\n            this.append(this.label);\n        }\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        }\n\n        return this.owner.chartService.format.auto(options.format, this.value);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n        this.box = targetBox;\n        this.reflowLabel();\n    },\n\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var labelsDistance = labelsOptions.distance;\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            var labelWidth = label.box.width();\n            var lp;\n\n            if (labelsOptions.position === CENTER) {\n                sector.radius = Math.abs((sector.radius - labelHeight) / 2) + labelHeight;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else if (labelsOptions.position === INSIDE_END) {\n                sector.radius = sector.radius - labelHeight / 2;\n                lp = sector.point(angle);\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                var x1;\n                lp = sector.clone().expand(labelsDistance).point(angle);\n                if (lp.x >= sector.center.x) {\n                    x1 = lp.x + labelWidth;\n                    label.orientation = RIGHT;\n                } else {\n                    x1 = lp.x - labelWidth;\n                    label.orientation = LEFT;\n                }\n                label.reflow(new Box(x1, lp.y - labelHeight, lp.x, lp.y));\n            }\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this.addAccessibilityAttributesToVisual();\n\n        if (this.value) {\n            if (options.visual) {\n                var startAngle = (sector.startAngle + 180) % 360;\n                var visual = options.visual({\n                    category: this.category,\n                    dataItem: this.dataItem,\n                    value: this.value,\n                    series: this.series,\n                    percentage: this.percentage,\n                    center: new GeometryPoint(sector.center.x, sector.center.y),\n                    radius: sector.radius,\n                    innerRadius: sector.innerRadius,\n                    startAngle: startAngle,\n                    endAngle: startAngle + sector.angle,\n                    options: options,\n                    sender: this.getSender(),\n                    createVisual: function () {\n                        var group = new Group();\n                        this$1$1.createSegmentVisual(group);\n\n                        return group;\n                    }\n                });\n\n                if (visual) {\n                    this.visual.append(visual);\n                }\n            } else {\n                this.createSegmentVisual(this.visual);\n            }\n        }\n    },\n\n    createSegmentVisual: function(group) {\n        var ref = this;\n        var sector = ref.sector;\n        var options = ref.options;\n        var borderOptions = options.border || {};\n        var border = borderOptions.width > 0 ? {\n            stroke: {\n                color: borderOptions.color,\n                width: borderOptions.width,\n                opacity: borderOptions.opacity,\n                dashType: borderOptions.dashType\n            }\n        } : {};\n        var color = options.color;\n        var fill = {\n            color: color,\n            opacity: options.opacity\n        };\n        var visual = this.createSegment(sector, deepExtend({\n            fill: fill,\n            stroke: {\n                opacity: options.opacity\n            },\n            zIndex: options.zIndex\n        }, border));\n\n        group.append(visual);\n\n        if (hasGradientOverlay(options)) {\n            group.append(this.createGradientOverlay(visual, {\n                baseColor: color,\n                fallbackFill: fill\n            }, deepExtend({\n                center: [ sector.center.x, sector.center.y ],\n                innerRadius: sector.innerRadius,\n                radius: sector.radius,\n                userSpace: true\n            }, options.overlay)));\n        }\n    },\n\n    createSegment: function(sector, options) {\n        if (options.singleSegment) {\n            return new Circle(new GeometryCircle(new GeometryPoint(sector.center.x, sector.center.y), sector.radius), options);\n        }\n\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    },\n\n    createAnimation: function() {\n        var ref = this;\n        var options = ref.options;\n        var center = ref.sector.center;\n\n        deepExtend(options, {\n            animation: {\n                center: [ center.x, center.y ],\n                delay: this.animationDelay\n            }\n        });\n\n        ChartElement.fn.createAnimation.call(this);\n    },\n\n    createHighlight: function(options) {\n        var highlight = this.options.highlight || {};\n        var border = highlight.border || {};\n\n        return this.createSegment(this.sector, deepExtend({}, options, {\n            fill: {\n                color: highlight.color,\n                opacity: highlight.opacity\n            },\n            stroke: {\n                opacity: border.opacity,\n                width: border.width,\n                color: border.color\n            }\n        }));\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var sector = this.sector;\n\n        return {\n            options: this.options,\n            radius: sector.radius,\n            innerRadius: sector.innerRadius,\n            center: new GeometryPoint(sector.center.x, sector.center.y),\n            startAngle: sector.startAngle,\n            endAngle: sector.angle + sector.startAngle,\n            visual: this.visual\n        };\n    },\n\n    createFocusHighlight: function(style) {\n        var borderWidth = this.options.accessibility.highlight.border.width;\n        var result = this.createSegment(this.sector, deepExtend({}, style, {\n            stroke: {\n                width: borderWidth * 2\n            }\n        }));\n\n        var clipPath = new MultiPath();\n\n        clipPath.paths.push(Path.fromRect(result.bbox()));\n        clipPath.paths.push(this.createSegment(this.sector, {}));\n\n        result.clip(clipPath);\n\n        return result;\n    },\n\n    tooltipAnchor: function() {\n        var sector = this.sector.clone().expand(TOOLTIP_OFFSET);\n        var midAndle = sector.middle();\n        var midPoint = sector.point(midAndle);\n\n        return {\n            point: midPoint,\n            align: tooltipAlignment(midAndle + 180)\n        };\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series,\n            percentage: this.percentage\n        };\n    },\n\n    getIndex: function() {\n        return this.index;\n    }\n});\n\nvar RAD_30 = round(rad(30), DEFAULT_PRECISION);\nvar RAD_60 = round(rad(60), DEFAULT_PRECISION);\n\nfunction tooltipAlignment(angle) {\n    var radians = rad(angle);\n    var sine = round(Math.sin(radians), DEFAULT_PRECISION);\n    var cosine = round(Math.cos(radians), DEFAULT_PRECISION);\n\n    var horizontal;\n    if (Math.abs(sine) > RAD_60) {\n        horizontal = CENTER;\n    } else if (cosine < 0) {\n        horizontal = RIGHT;\n    } else {\n        horizontal = LEFT;\n    }\n\n    var vertical;\n    if (Math.abs(sine) < RAD_30) {\n        vertical = CENTER;\n    } else if (sine < 0) {\n        vertical = BOTTOM;\n    } else {\n        vertical = TOP;\n    }\n\n    return {\n        horizontal: horizontal,\n        vertical: vertical\n    };\n}\n\nsetDefaultOptions(PieSegment, {\n    color: WHITE,\n    overlay: {\n        gradient: \"roundedBevel\"\n    },\n    border: {\n        width: 0.5\n    },\n    labels: {\n        visible: false,\n        distance: 35,\n        font: datavizConstants.DEFAULT_FONT,\n        margin: getSpacing(0.5),\n        align: CIRCLE,\n        zIndex: 1,\n        position: OUTSIDE_END\n    },\n    animation: {\n        type: PIE\n    },\n    highlight: {\n        visible: true,\n        border: {\n            width: 1\n        }\n    },\n    visible: true,\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n});\n\ndeepExtend(PieSegment.prototype, PointEventsMixin);\ndeepExtend(PieSegment.prototype, AccessibilityAttributesMixin);\n\nvar PieChartMixin = {\n    createLegendItem: function(value, point, options) {\n        var legendOptions = this.options.legend || {};\n        var labelsOptions = legendOptions.labels || {};\n        var inactiveItems = legendOptions.inactiveItems || {};\n        var inactiveItemsLabels = inactiveItems.labels || {};\n\n        if (options && options.visibleInLegend !== false) {\n            var pointVisible = options.visible !== false;\n            var labelTemplate = pointVisible ? getTemplate(labelsOptions) :\n                getTemplate(inactiveItemsLabels) || getTemplate(labelsOptions);\n            var text = options.category;\n\n            if (labelTemplate) {\n                text = labelTemplate({\n                    text: text,\n                    series: options.series,\n                    dataItem: options.dataItem,\n                    percentage: options.percentage,\n                    value: value\n                });\n            }\n\n            var itemLabelOptions, markerColor;\n            if (pointVisible) {\n                itemLabelOptions = {};\n                markerColor = point.color;\n            } else {\n                itemLabelOptions = {\n                    color: inactiveItemsLabels.color,\n                    font: inactiveItemsLabels.font\n                };\n                markerColor = (inactiveItems.markers || {}).color;\n            }\n\n            if (hasValue(text) && text !== \"\") {\n                this.legendItems.push({\n                    active: pointVisible,\n                    pointIndex: options.index,\n                    text: text,\n                    series: options.series,\n                    markerColor: markerColor,\n                    labels: itemLabelOptions\n                });\n            }\n        }\n    }\n};\n\nvar PIE_SECTOR_ANIM_DELAY = 70;\n\nvar PieChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.points = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    render: function() {\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var colorsCount = seriesColors.length;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        for (var seriesIx = 0; seriesIx < seriesCount; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var data = currentSeries.data;\n            var ref$1 = bindSegments(currentSeries);\n            var total = ref$1.total;\n            var points = ref$1.points;\n            var count = ref$1.count;\n            var anglePerValue = 360 / total;\n            var constantAngle = (void 0);\n            if (!isFinite(anglePerValue)) {\n                constantAngle = 360 / count;\n            }\n            var currentAngle = (void 0);\n\n            if (defined(currentSeries.startAngle)) {\n                currentAngle = currentSeries.startAngle;\n            } else {\n                currentAngle = options.startAngle;\n            }\n\n            if (seriesIx !== seriesCount - 1) {\n                if (currentSeries.labels.position === OUTSIDE_END) {\n                    currentSeries.labels.position = CENTER;\n                }\n            }\n\n            for (var i = 0; i < points.length; i++) {\n                var pointData = points[i];\n                if (!pointData) {\n                    continue;\n                }\n\n                var fields = pointData.fields;\n                var value = pointData.value;\n                var visible = pointData.visible;\n                var angle = value !== 0 ? (constantAngle || (value * anglePerValue)) : 0;\n                var explode = data.length !== 1 && Boolean(fields.explode);\n\n                if (!isFunction(currentSeries.color)) {\n                    currentSeries.color = fields.color || seriesColors[i % colorsCount];\n                }\n\n                callback(value, new dataviz.Ring(null, 0, 0, currentAngle, angle), {\n                    owner: this$1$1,\n                    category: defined(fields.category) ? fields.category : \"\",\n                    index: i,\n                    series: currentSeries,\n                    seriesIx: seriesIx,\n                    dataItem: data[i],\n                    percentage: total !== 0 ? value / total : 0,\n                    explode: explode,\n                    visibleInLegend: fields.visibleInLegend,\n                    visible: visible,\n                    zIndex: seriesCount - seriesIx,\n                    animationDelay: this$1$1.animationDelay(i, seriesIx, seriesCount)\n                });\n\n                if (visible !== false) {\n                    currentAngle += angle;\n                }\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            category: fields.category,\n            percentage: fields.percentage\n        }, { defaults: series._defaults, excluded: [\n            \"data\", \"content\", \"template\", \"visual\", \"toggle\",\n            \"ariaTemplate\", \"ariaContent\"\n        ] });\n    },\n\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new PieSegment(value, sector, segmentOptions);\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var ref = this;\n        var options = ref.options;\n        var points = ref.points;\n        var seriesConfigs = ref.seriesConfigs; if (seriesConfigs === void 0) { seriesConfigs = []; }\n        var count = points.length;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var newBox = new Box(box.x1, box.y1, box.x1 + minWidth, box.y1 + minWidth);\n        var newBoxCenter = newBox.center();\n        var boxCenter = box.center();\n        var seriesCount = options.series.length;\n        var leftSideLabels = [];\n        var rightSideLabels = [];\n        var padding = valueOrDefault(options.padding, defaultPadding);\n\n        this.targetBox = targetBox;\n\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n        newBox.translate(boxCenter.x - newBoxCenter.x, boxCenter.y - newBoxCenter.y);\n\n        var radius = halfMinWidth - padding;\n        var center = new Point(\n            radius + newBox.x1 + padding,\n            radius + newBox.y1 + padding\n        );\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var seriesIndex = segment.seriesIx;\n            sector.radius = radius;\n            sector.center = center;\n\n            if (seriesConfigs.length) {\n                var seriesConfig = seriesConfigs[seriesIndex];\n                sector.innerRadius = seriesConfig.innerRadius;\n                sector.radius = seriesConfig.radius;\n            }\n\n            if (seriesIndex === seriesCount - 1 && segment.explode) {\n                sector.center = sector.clone().setRadius(sector.radius * 0.15).point(sector.middle());\n            }\n\n            segment.reflow(newBox);\n\n            var label = segment.label;\n            if (label) {\n                if (label.options.position === OUTSIDE_END) {\n                    if (seriesIndex === seriesCount - 1) {\n                        if (label.orientation === RIGHT) {\n                            rightSideLabels.push(label);\n                        } else {\n                            leftSideLabels.push(label);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (leftSideLabels.length > 0) {\n            leftSideLabels.sort(this.labelComparator(true));\n            this.leftLabelsReflow(leftSideLabels);\n        }\n\n        if (rightSideLabels.length > 0) {\n            rightSideLabels.sort(this.labelComparator(false));\n            this.rightLabelsReflow(rightSideLabels);\n        }\n\n        this.box = newBox;\n    },\n\n    leftLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    rightLabelsReflow: function(labels) {\n        var distances = this.distanceBetweenLabels(labels);\n\n        this.distributeLabels(distances, labels);\n    },\n\n    distanceBetweenLabels: function(labels) {\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var count = labels.length - 1;\n        var lr = sector.radius + segment.options.labels.distance;\n        var distances = [];\n        var firstBox = labels[0].box;\n        var distance = round(firstBox.y1 - (sector.center.y - lr - firstBox.height() - firstBox.height() / 2));\n\n        distances.push(distance);\n\n        for (var i = 0; i < count; i++) {\n            var secondBox = labels[i + 1].box;\n\n            firstBox = labels[i].box;\n            distance = round(secondBox.y1 - firstBox.y2);\n            distances.push(distance);\n        }\n        distance = round(sector.center.y + lr - labels[count].box.y2 - labels[count].box.height() / 2);\n        distances.push(distance);\n\n        return distances;\n    },\n\n    distributeLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var count = distances.length;\n        var left, right, remaining;\n\n        for (var i = 0; i < count; i++) {\n            remaining = -distances[i];\n            left = right = i;\n\n            while (remaining > 0 && (left >= 0 || right < count)) {\n                remaining = this$1$1._takeDistance(distances, i, --left, remaining);\n                remaining = this$1$1._takeDistance(distances, i, ++right, remaining);\n            }\n        }\n\n        this.reflowLabels(distances, labels);\n    },\n\n    _takeDistance: function(distances, anchor, position, amount) {\n        var result = amount;\n        if (distances[position] > 0) {\n            var available = Math.min(distances[position], result);\n            result -= available;\n            distances[position] -= available;\n            distances[anchor] += available;\n        }\n\n        return result;\n    },\n\n    reflowLabels: function(distances, labels) {\n        var this$1$1 = this;\n\n        var segment = last(this.points);\n        var sector = segment.sector;\n        var labelOptions = segment.options.labels;\n        var labelsCount = labels.length;\n        var labelDistance = labelOptions.distance;\n        var boxY = sector.center.y - (sector.radius + labelDistance) - labels[0].box.height();\n        var boxX;\n\n        distances[0] += 2;\n        for (var i = 0; i < labelsCount; i++) {\n            var label = labels[i];\n            var box = label.box;\n\n            boxY += distances[i];\n            boxX = this$1$1.hAlignLabel(\n                box.x2,\n                sector.clone().expand(labelDistance),\n                boxY,\n                boxY + box.height(),\n                label.orientation === RIGHT);\n\n            if (label.orientation === RIGHT) {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.radius + sector.center.x + labelDistance;\n                }\n                label.reflow(new Box(boxX + box.width(), boxY, boxX, boxY));\n            } else {\n                if (labelOptions.align !== CIRCLE) {\n                    boxX = sector.center.x - sector.radius - labelDistance;\n                }\n                label.reflow(new Box(boxX - box.width(), boxY, boxX, boxY));\n            }\n\n            boxY += box.height();\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var connectors = ref.options.connectors;\n        var points = ref.points;\n        var count = points.length;\n        var space = 4;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this._connectorLines = [];\n\n        for (var i = 0; i < count; i++) {\n            var segment = points[i];\n            var sector = segment.sector;\n            var label = segment.label;\n            var angle = sector.middle();\n            var connectorsColor = (segment.options.connectors || {}).color || connectors.color;\n\n            if (label) {\n                var connectorLine = new Path({\n                    stroke: {\n                        color: connectorsColor,\n                        width: connectors.width\n                    },\n                    animation: {\n                        type: FADEIN,\n                        delay: segment.animationDelay\n                    }\n                });\n\n                if (label.options.position === OUTSIDE_END) {\n                    var box = label.box;\n                    var centerPoint = sector.center;\n                    var start = sector.point(angle);\n                    var middle = new Point(box.x1, box.center().y);\n                    var sr = (void 0), end = (void 0), crossing = (void 0);\n\n                    start = sector.clone().expand(connectors.padding).point(angle);\n                    connectorLine.moveTo(start.x, start.y);\n                    // TODO: Extract into a method to remove duplication\n                    if (label.orientation === RIGHT) {\n                        end = new Point(box.x1 - connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x - space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.min(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x < sector.center.x) {\n                            sr = sector.center.x + sector.radius + space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr < middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x + space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    } else {\n                        end = new Point(box.x2 + connectors.padding, box.center().y);\n                        crossing = intersection(centerPoint, start, middle, end);\n                        middle = new Point(end.x + space, end.y);\n                        crossing = crossing || middle;\n                        crossing.x = Math.max(crossing.x, middle.x);\n\n                        if (this$1$1.pointInCircle(crossing, sector.center, sector.radius + space) ||\n                            crossing.x > sector.center.x) {\n                            sr = sector.center.x - sector.radius - space;\n                            if (segment.options.labels.align !== COLUMN) {\n                                if (sr > middle.x) {\n                                    connectorLine.lineTo(sr, start.y);\n                                } else {\n                                    connectorLine.lineTo(start.x - space * 2, start.y);\n                                }\n                            } else {\n                                connectorLine.lineTo(sr, start.y);\n                            }\n                            connectorLine.lineTo(middle.x, end.y);\n                        } else {\n                            crossing.y = end.y;\n                            connectorLine.lineTo(crossing.x, crossing.y);\n                        }\n                    }\n\n                    connectorLine.lineTo(end.x, end.y);\n\n                    this$1$1._connectorLines.push(connectorLine);\n                    this$1$1.visual.append(connectorLine);\n                }\n            }\n        }\n    },\n\n    renderVisual: function() {\n        ChartElement.fn.renderVisual.call(this);\n\n        if (dataviz.find(this.options.series, function (options) { return options.autoFit; })) {\n            var targetBox = this.targetBox;\n            var pieCenter = this.box.center();\n            var bbox = this.visual.bbox();\n            if (!bbox) {\n                return;\n            }\n\n            var bboxBottom = bbox.bottomRight();\n\n            var scale = Math.min(\n                (pieCenter.y - targetBox.y1) / (pieCenter.y - bbox.origin.y),\n                (targetBox.y2 - pieCenter.y) / (bboxBottom.y - pieCenter.y),\n                (pieCenter.x - targetBox.x1) / (pieCenter.x - bbox.origin.x),\n                (targetBox.x2 - pieCenter.x) / (bboxBottom.x - pieCenter.x)\n            );\n\n            if (scale < 1) {\n                this.visual.transform(transform().scale(scale, scale, [ pieCenter.x, pieCenter.y ]));\n            }\n        }\n    },\n\n    labelComparator: function(reverse) {\n        var reverseValue = reverse ? -1 : 1;\n\n        return function(a, b) {\n            var first = (a.parent.sector.middle() + 270) % 360;\n            var second = (b.parent.sector.middle() + 270) % 360;\n            return (first - second) * reverseValue;\n        };\n    },\n\n    hAlignLabel: function(originalX, sector, y1, y2, direction) {\n        var radius = sector.radius;\n        var sector_center = sector.center;\n        var cx = sector_center.x;\n        var cy = sector_center.y;\n        var t = Math.min(Math.abs(cy - y1), Math.abs(cy - y2));\n\n        if (t > radius) {\n            return originalX;\n        }\n\n        return cx + Math.sqrt((radius * radius) - (t * t)) * (direction ? 1 : -1);\n    },\n\n    pointInCircle: function(point, center, radius) {\n        return Math.pow(center.x - point.x, 2) + Math.pow(center.y - point.y, 2) < Math.pow(radius, 2);\n    },\n\n    formatPointValue: function(point, format) {\n        return this.chartService.format.auto(format, point.value);\n    },\n\n    animationDelay: function(categoryIndex) {\n        return categoryIndex * PIE_SECTOR_ANIM_DELAY;\n    },\n\n    stackRoot: function() {\n        return this;\n    }\n});\n\nfunction intersection(a1, a2, b1, b2) {\n    var uat = (b2.x - b1.x) * (a1.y - b1.y) - (b2.y - b1.y) * (a1.x - b1.x);\n    var ub = (b2.y - b1.y) * (a2.x - a1.x) - (b2.x - b1.x) * (a2.y - a1.y);\n\n    var result;\n    if (ub !== 0) {\n        var ua = (uat / ub);\n\n        result = new Point(\n            a1.x + ua * (a2.x - a1.x),\n            a1.y + ua * (a2.y - a1.y)\n        );\n    }\n\n    return result;\n}\n\nsetDefaultOptions(PieChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    },\n    inactiveItems: {\n        markers: {},\n        labels: {}\n    }\n});\n\ndeepExtend(PieChart.prototype, PieChartMixin);\n\nPieChart.prototype.isStackRoot = true;\n\nvar PiePlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createPieChart(this.series);\n    },\n\n    createPieChart: function(series) {\n        var firstSeries = series[0];\n        var pieChart = new PieChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            startAngle: firstSeries.startAngle,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(pieChart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.data, chart.legendItems);\n    },\n\n    getPointBelow: function(point) {\n        return this.getPointToTheRight(point);\n    },\n\n    getPointAbove: function(point) {\n        return this.getPointToTheLeft(point);\n    }\n});\n\nvar DonutSegment = PieSegment.extend({\n    reflowLabel: function() {\n        var ref = this;\n        var labelsOptions = ref.options.labels;\n        var label = ref.label;\n        var sector = this.sector.clone();\n        var angle = sector.middle();\n\n        if (label) {\n            var labelHeight = label.box.height();\n            if (labelsOptions.position === CENTER) {\n                sector.radius -= (sector.radius - sector.innerRadius) / 2;\n\n                var lp = sector.point(angle);\n\n                label.reflow(new Box(lp.x, lp.y - labelHeight / 2, lp.x, lp.y));\n            } else {\n                PieSegment.fn.reflowLabel.call(this);\n            }\n        }\n    },\n\n    createSegment: function(sector, options) {\n        return dataviz.ShapeBuilder.current.createRing(sector, options);\n    }\n});\n\nsetDefaultOptions(DonutSegment, {\n    overlay: {\n        gradient: \"roundedGlass\"\n    },\n    labels: {\n        position: CENTER\n    },\n    animation: {\n        type: PIE\n    }\n});\n\ndeepExtend(DonutSegment.prototype, PointEventsMixin);\n\nvar DONUT_SECTOR_ANIM_DELAY = 50;\n\nvar DonutChart = PieChart.extend({\n    addValue: function(value, sector, fields) {\n        var segmentOptions = deepExtend({}, fields.series, { index: fields.index });\n        this.evalSegmentOptions(segmentOptions, value, fields);\n\n        this.createLegendItem(value, segmentOptions, fields);\n\n        if (fields.visible === false) {\n            return;\n        }\n\n        var segment = new DonutSegment(value, sector, segmentOptions);\n\n        $.extend(segment, fields);\n        this.append(segment);\n        this.points.push(segment);\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var box = targetBox.clone();\n        var space = 5;\n        var minWidth = Math.min(box.width(), box.height());\n        var halfMinWidth = minWidth / 2;\n        var defaultPadding = minWidth - minWidth * 0.85;\n        var series = options.series;\n        var seriesCount = series.length;\n\n        var padding = valueOrDefault(options.padding, defaultPadding);\n        padding = padding > halfMinWidth - space ? halfMinWidth - space : padding;\n\n        var totalSize = halfMinWidth - padding;\n        var seriesWithoutSize = 0;\n        var holeSize;\n\n        for (var i = 0; i < seriesCount; i++) {\n            var currentSeries = series[i];\n            if (i === 0) {\n                if (defined(currentSeries.holeSize)) {\n                    holeSize = currentSeries.holeSize;\n                    totalSize -= currentSeries.holeSize;\n                }\n            }\n\n            if (defined(currentSeries.size)) {\n                totalSize -= currentSeries.size;\n            } else {\n                seriesWithoutSize++;\n            }\n\n            if (defined(currentSeries.margin) && i !== seriesCount - 1) {\n                totalSize -= currentSeries.margin;\n            }\n        }\n\n        if (!defined(holeSize)) {\n            var currentSize = (halfMinWidth - padding) / (seriesCount + 0.75);\n            holeSize = currentSize * 0.75;\n            totalSize -= holeSize;\n        }\n\n        var innerRadius = holeSize;\n        var margin = 0;\n        var size, radius;\n\n        this.seriesConfigs = [];\n\n        for (var i$1 = 0; i$1 < seriesCount; i$1++) {\n            var currentSeries$1 = series[i$1];\n            size = valueOrDefault(currentSeries$1.size, totalSize / seriesWithoutSize);\n            innerRadius += margin;\n            radius = innerRadius + size;\n            this$1$1.seriesConfigs.push({ innerRadius: innerRadius, radius: radius });\n            margin = currentSeries$1.margin || 0;\n            innerRadius = radius;\n        }\n\n        PieChart.fn.reflow.call(this, targetBox);\n    },\n\n    animationDelay: function(categoryIndex, seriesIndex, seriesCount) {\n        return categoryIndex * DONUT_SECTOR_ANIM_DELAY +\n            (INITIAL_ANIMATION_DURATION * (seriesIndex + 1) / (seriesCount + 1));\n    }\n});\n\nsetDefaultOptions(DonutChart, {\n    startAngle: 90,\n    connectors: {\n        width: 2,\n        color: \"#939393\",\n        padding: 8\n    }\n});\n\nvar DonutPlotArea = PiePlotArea.extend({\n    render: function() {\n        this.createDonutChart(this.series);\n    },\n\n    createDonutChart: function(series) {\n        var firstSeries = series[0];\n        var donutChart = new DonutChart(this, {\n            series: series,\n            padding: firstSeries.padding,\n            connectors: firstSeries.connectors,\n            legend: this.options.legend\n        });\n\n        this.appendChart(donutChart);\n    },\n\n    getPointBelow: function(point) {\n        return this._getNextPoint(point, this._pointsByVertical, -1);\n    },\n\n    getPointAbove: function(point) {\n        return this._getNextPoint(point, this._pointsByVertical, 1);\n    }\n});\n\nvar DEFAULT_PADDING = 0.15;\n\nvar PolarPlotAreaBase = PlotAreaBase.extend({\n    initFields: function() {\n        this.valueAxisRangeTracker = new AxisGroupRangeTracker();\n    },\n\n    render: function() {\n        this.addToLegend(this.series);\n        this.createPolarAxis();\n        this.createCharts();\n        this.createValueAxis();\n    },\n\n    alignAxes: function() {\n        var axis = this.valueAxis;\n        var range = axis.range();\n        var crossingValue = axis.options.reverse ? range.max : range.min;\n        var slot = axis.getSlot(crossingValue);\n        var center = this.polarAxis.getSlot(0).center;\n        var axisBox = axis.box.translate(\n            center.x - slot.x1,\n            center.y - slot.y1\n        );\n\n        axis.reflow(axisBox);\n    },\n\n    createValueAxis: function() {\n        var tracker = this.valueAxisRangeTracker;\n        var defaultRange = tracker.query();\n        var axisOptions = this.valueAxisOptions({\n            roundToMajorUnit: false,\n            zIndex: -1\n        });\n        var axisType, axisDefaultRange;\n\n        if (axisOptions.type === LOGARITHMIC) {\n            axisType = dataviz.RadarLogarithmicAxis;\n            axisDefaultRange = { min: 0.1, max: 1 };\n        } else {\n            axisType = dataviz.RadarNumericAxis;\n            axisDefaultRange = { min: 0, max: 1 };\n        }\n\n        var range = tracker.query(name) || defaultRange || axisDefaultRange;\n\n        if (range && defaultRange) {\n            range.min = Math.min(range.min, defaultRange.min);\n            range.max = Math.max(range.max, defaultRange.max);\n        }\n\n        var valueAxis = new axisType(\n            range.min, range.max,\n            axisOptions,\n            this.chartService\n        );\n\n        this.valueAxis = valueAxis;\n        this.appendAxis(valueAxis);\n    },\n\n    reflowAxes: function() {\n        var ref = this;\n        var options = ref.options.plotArea;\n        var valueAxis = ref.valueAxis;\n        var polarAxis = ref.polarAxis;\n        var box = ref.box;\n        var defaultPadding = Math.min(box.width(), box.height()) * DEFAULT_PADDING;\n        var padding = getSpacing(options.padding || {}, defaultPadding);\n        var paddingBox = box.clone().unpad(padding);\n        var axisBox = paddingBox.clone();\n\n        axisBox.y2 = axisBox.y1 + Math.min(axisBox.width(), axisBox.height());\n        axisBox.align(paddingBox, Y, CENTER);\n\n        var valueAxisBox = axisBox.clone().shrink(0, axisBox.height() / 2);\n\n        polarAxis.reflow(axisBox);\n        valueAxis.reflow(valueAxisBox);\n        var heightDiff = valueAxis.lineBox().height() - valueAxis.box.height();\n        valueAxis.reflow(valueAxis.box.unpad({ top: heightDiff }));\n\n        this.axisBox = axisBox;\n        this.alignAxes(axisBox);\n    },\n\n    backgroundBox: function() {\n        return this.box;\n    },\n\n    detachLabels: function() {}\n});\n\nvar PolarScatterChart = ScatterChart.extend({\n    pointSlot: function(slotX, slotY) {\n        var valueRadius = slotX.center.y - slotY.y1;\n        var slot = Point.onCircle(slotX.center, slotX.startAngle, valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    }\n});\n\nsetDefaultOptions(PolarScatterChart, {\n    clip: false\n});\n\nvar PolarLineChart = ScatterLineChart.extend({\n\n});\n\nPolarLineChart.prototype.pointSlot = PolarScatterChart.prototype.pointSlot;\n\nsetDefaultOptions(PolarLineChart, {\n    clip: false\n});\n\nvar SplinePolarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var center = this._polarAxisCenter();\n        fillPath.lineTo(center.x, center.y);\n    },\n\n    _polarAxisCenter: function() {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        return center;\n    },\n\n    strokeSegments: function() {\n        var segments = this._strokeSegments;\n\n        if (!segments) {\n            var center = this._polarAxisCenter();\n            var curveProcessor = new CurveProcessor(false);\n            var linePoints = this.points();\n\n            linePoints.push(center);\n            segments = this._strokeSegments = curveProcessor.process(linePoints);\n            segments.pop();\n        }\n\n        return segments;\n    }\n});\n\nvar PolarAreaSegment = AreaSegment.extend({\n    fillToAxes: function(fillPath) {\n        var polarAxis = this.parent.plotArea.polarAxis;\n        var center = polarAxis.box.center();\n        var centerSegment = new geometry.Segment([ center.x, center.y ]);\n\n        fillPath.segments.unshift(centerSegment);\n        fillPath.segments.push(centerSegment);\n    }\n});\n\nvar PolarAreaChart = PolarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = (currentSeries.line || {}).style;\n        var segment;\n\n        if (style === SMOOTH) {\n            segment = new SplinePolarAreaSegment(linePoints, currentSeries, seriesIx);\n        } else {\n            segment = new PolarAreaSegment(linePoints, currentSeries, seriesIx);\n        }\n        return segment;\n    },\n\n    createMissingValue: function(value, missingValues) {\n        var missingValue;\n\n        if (hasValue(value.x) && missingValues !== INTERPOLATE) {\n            missingValue = {\n                x: value.x,\n                y: value.y\n            };\n            if (missingValues === ZERO) {\n                missingValue.y = 0;\n            }\n        }\n\n        return missingValue;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    },\n\n    _hasMissingValuesGap: function() {\n        var this$1$1 = this;\n\n        var series = this.options.series;\n\n        for (var idx = 0; idx < series.length; idx++) {\n            if (this$1$1.seriesMissingValues(series[idx]) === GAP) {\n                return true;\n            }\n        }\n    },\n\n    sortPoints: function(points) {\n        var this$1$1 = this;\n\n        points.sort(xComparer);\n\n        if (this._hasMissingValuesGap()) {\n            for (var idx = 0; idx < points.length; idx++) {\n                var point = points[idx];\n                if (point) {\n                    var value = point.value;\n                    if (!hasValue(value.y) && this$1$1.seriesMissingValues(point.series) === GAP) {\n                        delete points[idx];\n                    }\n                }\n            }\n        }\n\n        return points;\n    }\n});\n\nfunction xComparer(a, b) {\n    return a.value.x - b.value.x;\n}\n\nvar PolarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var polarAxis = new dataviz.PolarAxis(this.options.xAxis, this.chartService);\n\n        this.polarAxis = polarAxis;\n        this.axisX = polarAxis;\n        this.appendAxis(polarAxis);\n    },\n\n    render: function() {\n        this.series = [].concat( this.originalSeries );\n        this.createTrendlineSeries();\n\n        PolarPlotAreaBase.fn.render.call(this);\n    },\n\n    valueAxisOptions: function(defaults) {\n        return deepExtend(defaults, {\n            majorGridLines: { type: ARC },\n            minorGridLines: { type: ARC }\n        }, this.options.yAxis);\n    },\n\n    createValueAxis: function() {\n        PolarPlotAreaBase.fn.createValueAxis.call(this);\n        this.axisY = this.valueAxis;\n    },\n\n    trendlineFactory: function(options, series) {\n        var trendline = XYPlotArea.prototype.trendlineFactory.call(this, options, series);\n        if (trendline) {\n            trendline.type = POLAR_LINE;\n        }\n\n        return trendline;\n    },\n\n    appendChart: function(chart, pane) {\n        this.valueAxisRangeTracker.update(chart.yAxisRanges);\n\n        PlotAreaBase.prototype.appendChart.call(this, chart, pane);\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createLineChart(\n            filterSeriesByType(series, [ POLAR_LINE ]),\n            pane\n        );\n\n        this.createScatterChart(\n            filterSeriesByType(series, [ POLAR_SCATTER ]),\n            pane\n        );\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ POLAR_AREA ]),\n            pane\n        );\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new PolarLineChart(this, { series: series });\n\n        this.appendChart(lineChart, pane);\n    },\n\n    createScatterChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var scatterChart = new PolarScatterChart(this, { series: series });\n\n        this.appendChart(scatterChart, pane);\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new PolarAreaChart(this, { series: series });\n\n        this.appendChart(areaChart, pane);\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var xValue = this.axisX.getValue(point);\n        var yValue = this.axisY.getValue(point);\n\n        if (xValue !== null && yValue !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                x: xValue,\n                y: yValue\n            });\n        }\n    },\n\n    createCrosshairs: function() {}\n});\n\nsetDefaultOptions(PolarPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(PolarPlotArea.prototype, PlotAreaEventsMixin, {\n    seriesValues: XYPlotArea.prototype.seriesValues\n});\n\nfunction groupBySeriesIx(segments) {\n    var seriesSegments = [];\n    for (var idx = 0; idx < segments.length; idx++) {\n        var segment = segments[idx];\n        seriesSegments[segment.seriesIx] = seriesSegments[segment.seriesIx] || [];\n        seriesSegments[segment.seriesIx].push(segment);\n    }\n\n    return seriesSegments;\n}\n\nvar RadarLineChart = LineChart.extend({\n    pointSlot: function(categorySlot, valueSlot) {\n        var valueRadius = categorySlot.center.y - valueSlot.y1;\n        var slot = Point.onCircle(categorySlot.center, categorySlot.middle(), valueRadius);\n\n        return new Box(slot.x, slot.y, slot.x, slot.y);\n    },\n\n    renderSegments: function() {\n        LineChart.fn.renderSegments.call(this);\n\n        if (this._segments && this._segments.length > 1) {\n            var seriesSegments = groupBySeriesIx(this._segments);\n\n            for (var idx = 0; idx < seriesSegments.length; idx++) {\n                var segments = seriesSegments[idx];\n                if (segments && segments.length > 1) {\n                    var firstPoint = segments[0].linePoints[0];\n                    var lastSegment = last(segments);\n                    var lastPoint = last(lastSegment.linePoints);\n                    var isFirstDataPoint = firstPoint.categoryIx === 0;\n                    var isLastDataPoint = lastPoint.categoryIx === lastPoint.categoriesCount - 1;\n                    if (isFirstDataPoint && isLastDataPoint) {\n                        last(segments).linePoints.push(firstPoint);\n                    }\n                }\n            }\n        }\n    },\n\n    createSegment: function(linePoints, currentSeries, seriesIx) {\n        var style = currentSeries.style;\n        var pointType;\n\n        if (style === SMOOTH) {\n            pointType = SplineSegment;\n        } else {\n            pointType = LineSegment;\n        }\n\n        var segment = new pointType(linePoints, currentSeries, seriesIx);\n        var missingValues = this.seriesMissingValues(currentSeries);\n\n        if (linePoints.length === currentSeries.data.length || missingValues === INTERPOLATE) {\n            segment.options.closed = true;\n        }\n\n        return segment;\n    }\n});\n\nsetDefaultOptions(RadarLineChart, {\n    clip: false,\n    limitPoints: false\n});\n\nvar SplineRadarAreaSegment = SplineAreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaSegment = AreaSegment.extend({\n    fillToAxes: function() {}\n});\n\nvar RadarAreaChart = RadarLineChart.extend({\n    createSegment: function(linePoints, currentSeries, seriesIx, prevSegment) {\n        var isStacked = this.options.isStacked;\n        var style = (currentSeries.line || {}).style;\n        var previousSegment;\n        var stackPoints;\n        var segment;\n\n        if (isStacked && seriesIx > 0 && prevSegment) {\n            stackPoints = prevSegment.linePoints.slice(0);\n            previousSegment = prevSegment;\n        }\n\n        if (style === SMOOTH) {\n            segment = new SplineRadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n            segment.options.closed = true;\n        } else {\n            linePoints.push(linePoints[0]);\n            segment = new RadarAreaSegment(linePoints, currentSeries, seriesIx, previousSegment, stackPoints);\n        }\n\n        return segment;\n    },\n\n    seriesMissingValues: function(series) {\n        return series.missingValues || ZERO;\n    }\n});\n\nvar RadarSegment = DonutSegment.extend({\n    init: function(value, options) {\n        DonutSegment.fn.init.call(this, value, null, options);\n    },\n\n    getIndex: function() {\n        return this.categoryIx;\n    }\n});\n\nsetDefaultOptions(RadarSegment, {\n    overlay: {\n        gradient: \"none\"\n    },\n    labels: {\n        distance: 10\n    }\n});\n\nvar RadarClusterLayout = ChartElement.extend({\n    init: function(options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.forEach = options.rtl ? forEachReverse : forEach;\n    },\n\n    reflow: function(sector) {\n        var ref = this;\n        var options = ref.options;\n        var children = ref.children;\n        var gap = options.gap;\n        var spacing = options.spacing;\n        var count = children.length;\n        var slots = count + gap + (spacing * (count - 1));\n        var slotAngle = sector.angle / slots;\n        var angle = sector.startAngle + slotAngle * (gap / 2);\n\n        this.forEach(children, function (child) {\n            var slotSector = sector.clone();\n            slotSector.startAngle = angle;\n            slotSector.angle = slotAngle;\n\n            if (child.sector) {\n                slotSector.radius = child.sector.radius;\n            }\n\n            child.reflow(slotSector);\n            child.sector = slotSector;\n\n            angle += slotAngle + (slotAngle * spacing);\n        });\n    }\n});\n\nsetDefaultOptions(RadarClusterLayout, {\n    gap: 1,\n    spacing: 0\n});\n\nvar RadarStackLayout = ChartElement.extend({\n    reflow: function(sector) {\n        var ref = this;\n        var reverse = ref.options.reverse;\n        var children = ref.children;\n        var childrenCount = children.length;\n        var first = reverse ? childrenCount - 1 : 0;\n        var step = reverse ? -1 : 1;\n\n        this.box = new Box();\n\n        for (var i = first; i >= 0 && i < childrenCount; i += step) {\n            var childSector = children[i].sector;\n            childSector.startAngle = sector.startAngle;\n            childSector.angle = sector.angle;\n        }\n    }\n});\n\nvar RadarBarChart = BarChart.extend({\n    pointType: function() {\n        return RadarSegment;\n    },\n\n    clusterType: function() {\n        return RadarClusterLayout;\n    },\n\n    stackType: function() {\n        return RadarStackLayout;\n    },\n\n    categorySlot: function(categoryAxis, categoryIx) {\n        return categoryAxis.getSlot(categoryIx);\n    },\n\n    pointSlot: function(categorySlot, valueSlot) {\n        var slot = categorySlot.clone();\n        var y = categorySlot.center.y;\n\n        slot.radius = y - valueSlot.y1;\n        slot.innerRadius = y - valueSlot.y2;\n\n        return slot;\n    },\n\n    reflowPoint: function(point, pointSlot) {\n        point.sector = pointSlot;\n        point.reflow();\n    },\n\n    createAnimation: function() {\n        this.options.animation.center = this.box.toRect().center();\n        BarChart.fn.createAnimation.call(this);\n    }\n});\n\nRadarBarChart.prototype.reflow = CategoricalChart.prototype.reflow;\n\nsetDefaultOptions(RadarBarChart, {\n    clip: false,\n    limitPoints: false,\n    animation: {\n        type: \"pie\"\n    }\n});\n\nvar RadarPlotArea = PolarPlotAreaBase.extend({\n    createPolarAxis: function() {\n        var categoryAxis = new dataviz.RadarCategoryAxis(this.options.categoryAxis, this.chartService);\n\n        this.polarAxis = categoryAxis;\n        this.categoryAxis = categoryAxis;\n        this.appendAxis(categoryAxis);\n        this.aggregateCategories();\n        this.createTrendlineSeries();\n        this.createCategoryAxesLabels();\n    },\n\n    valueAxisOptions: function(defaults) {\n        if (this._hasBarCharts) {\n            deepExtend(defaults, {\n                majorGridLines: { type: ARC },\n                minorGridLines: { type: ARC }\n            });\n        }\n\n        if (this._isStacked100) {\n            deepExtend(defaults, {\n                roundToMajorUnit: false,\n                labels: { format: \"P0\" }\n            });\n        }\n\n        return deepExtend(defaults, this.options.valueAxis);\n    },\n\n    aggregateCategories: function() {\n        // No separate panes in radar charts\n        CategoricalPlotArea.prototype.aggregateCategories.call(this, this.panes);\n    },\n\n    createCategoryAxesLabels: function() {\n        CategoricalPlotArea.prototype.createCategoryAxesLabels.call(this, this.panes);\n    },\n\n    filterSeries: function(currentSeries) {\n        // Not supported for radar charts\n        return currentSeries;\n    },\n\n    trendlineFactory: function(options, series) {\n        var trendline = CategoricalPlotArea.prototype.trendlineFactory.call(this, options, series);\n        if (trendline) {\n            trendline.type = RADAR_LINE;\n        }\n\n        return trendline;\n    },\n\n    createCharts: function() {\n        var series = this.filterVisibleSeries(this.series);\n        var pane = this.panes[0];\n\n        this.createAreaChart(\n            filterSeriesByType(series, [ RADAR_AREA ]),\n            pane\n        );\n\n        this.createLineChart(\n            filterSeriesByType(series, [ RADAR_LINE ]),\n            pane\n        );\n\n        this.createBarChart(\n            filterSeriesByType(series, [ RADAR_COLUMN ]),\n            pane\n        );\n    },\n\n    chartOptions: function(series) {\n        var options = { series: series };\n        var firstSeries = series[0];\n        if (firstSeries) {\n            var filteredSeries = this.filterVisibleSeries(series);\n            var stack = firstSeries.stack;\n            options.isStacked = stack && filteredSeries.length > 1;\n            options.isStacked100 = stack && stack.type === \"100%\" && filteredSeries.length > 1;\n\n            if (options.isStacked100) {\n                this._isStacked100 = true;\n            }\n        }\n\n        return options;\n    },\n\n    createAreaChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var areaChart = new RadarAreaChart(this, this.chartOptions(series));\n        this.appendChart(areaChart, pane);\n    },\n\n    createLineChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var lineChart = new RadarLineChart(this, this.chartOptions(series));\n        this.appendChart(lineChart, pane);\n    },\n\n    createBarChart: function(series, pane) {\n        if (series.length === 0) {\n            return;\n        }\n\n        var firstSeries = series[0];\n        var options = this.chartOptions(series);\n        var filteredSeries = this.filterVisibleSeries(series);\n        var anyStackedSeries = filteredSeries.some(function (s) { return s.stack; });\n        var isStacked100 = filteredSeries.some(function (s) { return s.stack && s.stack.type === \"100%\"; });\n        options.gap = firstSeries.gap;\n        options.spacing = firstSeries.spacing;\n        options.defaultStack = firstSeries.stack && filteredSeries.length > 1;\n        options.isStacked = anyStackedSeries && filteredSeries.length > 1;\n        options.isStacked100 = isStacked100 && filteredSeries.length > 1;\n\n        var barChart = new RadarBarChart(this, options);\n        this.appendChart(barChart, pane);\n\n        this._hasBarCharts = true;\n    },\n\n    seriesCategoryAxis: function() {\n        return this.categoryAxis;\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var category = this.categoryAxis.getCategory(point);\n        var value = this.valueAxis.getValue(point);\n\n        if (category !== null && value !== null) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                category: category,\n                value: value\n            });\n        }\n    },\n\n    createCrosshairs: function() {},\n\n    _pointsByVertical: function(basePoint) {\n        return PolarPlotAreaBase.fn._pointsByVertical.call(this, basePoint).sort(this._getSeriesCompareFn());\n    },\n\n    _getSeriesCompareFn: function() {\n        return function (a, b) { return b.value - a.value; };\n    }\n});\n\ndeepExtend(RadarPlotArea.prototype, PlotAreaEventsMixin, {\n    appendChart: CategoricalPlotArea.prototype.appendChart,\n    aggregateSeries: CategoricalPlotArea.prototype.aggregateSeries,\n    seriesSourcePoints: CategoricalPlotArea.prototype.seriesSourcePoints,\n    seriesValues: CategoricalPlotArea.prototype.seriesValues\n});\n\nsetDefaultOptions(RadarPlotArea, {\n    categoryAxis: {\n        categories: []\n    },\n    valueAxis: {}\n});\n\nvar FunnelSegment = ChartElement.extend({\n    init: function(value, options, segmentOptions) {\n        ChartElement.fn.init.call(this, options);\n\n        this.value = value;\n        this.options.index = segmentOptions.index;\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        } else if (options.format) {\n            return this.formatValue(options.format);\n        }\n\n        return this.value;\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var label = this.children[0];\n        var x1 = Math.min(points[0].x, points[3].x);\n        var x2 = Math.max(points[1].x, points[2].x);\n\n        this.box = new Box(x1, points[0].y, x2, points[2].y);\n\n        if (label) {\n            label.reflow(new Box(chartBox.x1, points[0].y, chartBox.x2, points[2].y));\n        }\n    },\n\n    createVisual: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var visual;\n\n        ChartElement.fn.createVisual.call(this);\n\n        this.addAccessibilityAttributesToVisual();\n\n        if (options.visual) {\n            visual = options.visual({\n                category: this.category,\n                dataItem: this.dataItem,\n                value: this.value,\n                series: this.series,\n                percentage: this.percentage,\n                points: this.points,\n                options: options,\n                sender: this.getSender(),\n                createVisual: function () { return this$1$1.createPath(); }\n            });\n        } else {\n            visual = this.createPath();\n        }\n\n        if (visual) {\n            this.visual.append(visual);\n        }\n    },\n\n    createPath: function() {\n        var options = this.options;\n        var border = options.border;\n        var path = Path.fromPoints(this.points, {\n            fill: {\n                color: options.color,\n                opacity: options.opacity\n            },\n            stroke: {\n                color: border.color,\n                opacity: border.opacity,\n                width: border.width\n            }\n        }).close();\n\n        return path;\n    },\n\n    createHighlight: function(style) {\n        return Path.fromPoints(this.points, style);\n    },\n\n    highlightVisual: function() {\n        return this.visual.children[0];\n    },\n\n    highlightVisualArgs: function() {\n        var path = Path.fromPoints(this.points).close();\n\n        return {\n            options: this.options,\n            path: path\n        };\n    },\n\n    createFocusHighlight: function(style) {\n        var borderWidth = this.options.accessibility.highlight.border.width;\n        var result = Path.fromPoints(this.points, deepExtend({}, style, {\n            stroke: {\n                width: borderWidth * 2\n            }\n        })).close();\n\n        var clipPath = new MultiPath();\n\n        clipPath.paths.push(Path.fromRect(this.box.clone().pad(borderWidth).toRect()));\n        clipPath.paths.push(Path.fromPoints(this.points));\n\n        result.clip(clipPath);\n\n        return result;\n    },\n\n    tooltipAnchor: function() {\n        var box = this.box;\n        return {\n            point: new Point(box.center().x, box.y1),\n            align: {\n                horizontal: \"center\",\n                vertical: \"top\"\n            }\n        };\n    },\n\n    formatValue: function(format) {\n        var point = this;\n        return point.owner.formatPointValue(point, format);\n    },\n\n    pointData: function() {\n        return {\n            dataItem: this.dataItem,\n            category: this.category,\n            value: this.value,\n            series: this.series,\n            percentage: this.percentage\n        };\n    },\n\n    getIndex: function() {\n        return this.index;\n    }\n});\n\nsetDefaultOptions(FunnelSegment, {\n    color: WHITE,\n    border: {\n        width: 1\n    },\n    labels: {\n        format: \"\"\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n});\n\ndeepExtend(FunnelSegment.prototype, PointEventsMixin);\ndeepExtend(FunnelSegment.prototype, AccessibilityAttributesMixin);\n\nvar FunnelChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this.points = [];\n        this.labels = [];\n        this.legendItems = [];\n        this.render();\n    },\n\n    formatPointValue: function(point, format) {\n        return this.plotArea.chartService.format.auto(format,point.value);\n    },\n\n    render: function() {\n        var this$1$1 = this;\n\n        var seriesIx = 0;\n        var ref = this;\n        var options = ref.options;\n        var seriesColors = ref.plotArea.options.seriesColors; if (seriesColors === void 0) { seriesColors = []; }\n        var series = options.series[seriesIx];\n        var data = series.data;\n\n        if (!data) {\n            return;\n        }\n\n        var ref$1 = bindSegments(series);\n        var total = ref$1.total;\n        var points = ref$1.points;\n\n        for (var i = 0; i < points.length; i++) {\n            var pointData = points[i];\n\n            if (!pointData) {\n                continue;\n            }\n\n            var fields = pointData.fields;\n\n            if (!isFunction(series.color)) {\n                series.color = fields.color || seriesColors[i % seriesColors.length];\n            }\n\n            fields = deepExtend({\n                index: i,\n                owner: this$1$1,\n                series: series,\n                seriesIx: seriesIx,\n                dataItem: data[i],\n                percentage: pointData.value / total\n            }, fields, { visible: pointData.visible });\n\n            var value = pointData.valueFields.value;\n            var segment = this$1$1.createSegment(value, fields);\n            var label = this$1$1.createLabel(value, fields);\n\n            if (segment && label) {\n                segment.append(label);\n            }\n        }\n    },\n\n    evalSegmentOptions: function(options, value, fields) {\n        var series = fields.series;\n\n        evalOptions(options, {\n            value: value,\n            series: series,\n            dataItem: fields.dataItem,\n            index: fields.index\n        }, { defaults: series._defaults, excluded: [\n            \"data\", \"content\", \"template\", \"toggle\", \"visual\",\n            \"ariaTemplate\", \"ariaContent\"\n        ] });\n    },\n\n    createSegment: function(value, fields) {\n        var seriesOptions = deepExtend({}, fields.series);\n        this.evalSegmentOptions(seriesOptions, value, fields);\n\n        this.createLegendItem(value, seriesOptions, fields);\n\n        if (fields.visible !== false) {\n\n            var segment = new FunnelSegment(value, seriesOptions, fields);\n            $.extend(segment, fields);\n\n            this.append(segment);\n            this.points.push(segment);\n\n            return segment;\n        }\n    },\n\n    createLabel: function(value, fields) {\n        var series = fields.series;\n        var dataItem = fields.dataItem;\n        var labels = deepExtend({}, this.options.labels, series.labels);\n        var text = value;\n\n        if (labels.visible) {\n            var labelTemplate = getTemplate(labels);\n            var data = {\n                dataItem: dataItem,\n                value: value,\n                percentage: fields.percentage,\n                category: fields.category,\n                series: series\n            };\n            if (labelTemplate) {\n                text = labelTemplate(data);\n            } else if (labels.format) {\n                text = this.chartService.format.auto(labels.format, text);\n            }\n\n            if (!labels.color) {\n                labels.color = autoTextColor(series.color);\n                if (!labels.background) {\n                    labels.background = series.color;\n                }\n            }\n\n            this.evalSegmentOptions(labels, value, fields);\n            var textBox = new TextBox(text, deepExtend({\n                vAlign: labels.position\n            }, labels), data);\n\n            this.labels.push(textBox);\n\n            return textBox;\n        }\n    },\n\n    labelPadding: function() {\n        var labels = this.labels;\n        var padding = { left: 0, right: 0 };\n\n        for (var i = 0; i < labels.length; i++) {\n            var label = labels[i];\n            var align = label.options.align;\n            if (align !== CENTER) {\n                var width = labels[i].box.width();\n\n                if (align === LEFT) {\n                    padding.left = Math.max(padding.left, width);\n                } else {\n                    padding.right = Math.max(padding.right, width);\n                }\n            }\n        }\n\n        return padding;\n    },\n\n    dynamicSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var firstSegment = segments[0];\n        var maxSegment = firstSegment;\n\n        for (var idx = 0; idx < segments.length; idx++) {\n            if (segments[idx].percentage > maxSegment.percentage) {\n                maxSegment = segments[idx];\n            }\n        }\n\n        var lastUpperSide = (firstSegment.percentage / maxSegment.percentage) * width;\n        var previousOffset = (width - lastUpperSide) / 2;\n        var previousHeight = 0;\n\n        for (var idx$1 = 0; idx$1 < count; idx$1++) {\n            var percentage = segments[idx$1].percentage;\n            var nextSegment = segments[idx$1 + 1];\n            var nextPercentage = (nextSegment ? nextSegment.percentage : percentage);\n            var points = segments[idx$1].points = [];\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n            var offset = (void 0);\n\n            if (!percentage) {\n                offset = nextPercentage ? 0 : width / 2;\n            } else {\n                offset = (width - lastUpperSide * (nextPercentage / percentage)) / 2;\n            }\n\n            offset = limitValue(offset, 0, width);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + offset, box.y1 + height + previousHeight));\n\n            previousOffset = offset;\n            previousHeight += height + options.segmentSpacing;\n            lastUpperSide = limitValue(width - 2 * offset, 0, width);\n        }\n    },\n\n    constantSlopeReflow: function(box, width, totalHeight) {\n        var ref = this;\n        var options = ref.options;\n        var segments = ref.points;\n        var count = segments.length;\n        var decreasingWidth = options.neckRatio <= 1;\n        var neckRatio = decreasingWidth ? options.neckRatio * width : width;\n        var previousOffset = decreasingWidth ? 0 : (width - width / options.neckRatio) / 2;\n        var topMostWidth = decreasingWidth ? width : width - previousOffset * 2;\n        var finalNarrow = (topMostWidth - neckRatio) / 2;\n        var previousHeight = 0;\n\n        for (var idx = 0; idx < count; idx++) {\n            var points = segments[idx].points = [];\n            var percentage = segments[idx].percentage;\n            var offset = (options.dynamicHeight) ? (finalNarrow * percentage) : (finalNarrow / count);\n            var height = (options.dynamicHeight) ? (totalHeight * percentage) : (totalHeight / count);\n\n            points.push(new GeometryPoint(box.x1 + previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset, box.y1 + previousHeight));\n            points.push(new GeometryPoint(box.x1 + width - previousOffset - offset, box.y1 + height + previousHeight));\n            points.push(new GeometryPoint(box.x1 + previousOffset + offset,box.y1 + height + previousHeight));\n            previousOffset += offset;\n            previousHeight += height + options.segmentSpacing;\n        }\n    },\n\n    reflow: function(chartBox) {\n        var points = this.points;\n        var count = points.length;\n\n        if (!count) {\n            return;\n        }\n\n        var options = this.options;\n        var box = chartBox.clone().unpad(this.labelPadding());\n        var totalHeight = box.height() - options.segmentSpacing * (count - 1);\n        var width = box.width();\n\n        if (options.dynamicSlope) {\n            this.dynamicSlopeReflow(box, width, totalHeight);\n        } else {\n            this.constantSlopeReflow(box, width, totalHeight);\n        }\n\n        for (var idx = 0; idx < count; idx++) {\n            points[idx].reflow(chartBox);\n        }\n    }\n});\n\nsetDefaultOptions(FunnelChart, {\n    neckRatio: 0.3,\n    width: 300,\n    dynamicSlope: false,\n    dynamicHeight: true,\n    segmentSpacing: 0,\n    labels: {\n        visible: false,\n        align: CENTER,\n        position: CENTER,\n        zIndex: 1\n    }\n});\n\ndeepExtend(FunnelChart.prototype, PieChartMixin);\n\nvar MAX_NECK_RATIO = 1e6;\n\nvar PyramidChart = FunnelChart.extend({\n    init: function(plotArea, options) {\n        options.dynamicSlope = false;\n        options.neckRatio = MAX_NECK_RATIO;\n\n        FunnelChart.fn.init.call(this, plotArea, options);\n    }\n});\n\nvar FunnelPlotArea = PlotAreaBase.extend({\n    render: function() {\n        this.createChart(FunnelChart, filterSeriesByType(this.series, [ FUNNEL ]));\n        this.createChart(PyramidChart, filterSeriesByType(this.series, [ PYRAMID ]));\n    },\n\n    createChart: function(chartType, series) {\n        var firstSeries = series[0];\n        if (!firstSeries) {\n            return;\n        }\n\n        var chart = new chartType(this, {\n            series: series,\n            legend: this.options.legend,\n            neckRatio: firstSeries.neckRatio,\n            dynamicHeight: firstSeries.dynamicHeight,\n            dynamicSlope: firstSeries.dynamicSlope,\n            segmentSpacing: firstSeries.segmentSpacing,\n            highlight: firstSeries.highlight\n        });\n\n        this.appendChart(chart);\n    },\n\n    appendChart: function(chart, pane) {\n        PlotAreaBase.fn.appendChart.call(this, chart, pane);\n        append(this.options.legend.data, chart.legendItems);\n    },\n\n    _pointsByVertical: function(basePoint) {\n        return this.pointsBySeriesIndex(basePoint.series.index);\n    },\n\n    getPointToTheRight: function(point) {\n        return this.getPointBelow(point);\n    },\n\n    getPointToTheLeft: function(point) {\n        return this.getPointAbove(point);\n    }\n});\n\n// Linear color scale from the given color to white minus minimum lightness offset.\nvar colorScale = function (color, minLightnessOffset) {\n    if (minLightnessOffset === void 0) { minLightnessOffset = 0.05; }\n\n    var baseColor = kendo.parseColor(color);\n    var offset = 1 - minLightnessOffset;\n\n    return function (value) {\n        var hsl = baseColor.toHSL();\n        var range = 100 - hsl.l;\n        var point = offset - value;\n        hsl.l += Math.min(point * range, range);\n\n        return hsl.toCss();\n    };\n};\n\nvar HeatmapPoint = ChartElement.extend({\n    init: function(value, options) {\n        ChartElement.fn.init.call(this);\n\n        this.options = options;\n        this.color = options.color || WHITE;\n        this.value = value;\n    },\n\n    render: function() {\n        if (this._rendered) {\n            return;\n        }\n\n        this._rendered = true;\n\n        this.createMarker();\n        this.createLabel();\n        this.createNote();\n    },\n\n    createLabel: function() {\n        var options = this.options;\n        var labels = options.labels;\n\n        if (labels.visible) {\n            this.label = this.createLabelElement(labels);\n            this.append(this.label);\n        }\n    },\n\n    createLabelElement: function(options) {\n        var labelColor = options.color;\n\n        if (!labelColor) {\n            labelColor = autoTextColor(this.color);\n        }\n\n        return new TextBox(this.getLabelText(options),\n            deepExtend({\n                align: CENTER,\n                vAlign: CENTER,\n                margin: {\n                    left: 5,\n                    right: 5\n                },\n                zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n            },\n            options, {\n                color: labelColor\n            }),\n            this.pointData()\n        );\n    },\n\n    getLabelText: function(options) {\n        var labelTemplate = getTemplate(options);\n\n        if (labelTemplate) {\n            return labelTemplate(this.pointData());\n        }\n\n        return this.formatValue(options.format);\n    },\n\n    formatValue: function(format) {\n        return this.owner.formatPointValue(this, format);\n    },\n\n    reflow: function(targetBox) {\n        this.render();\n\n        var label = this.label;\n\n        this.box = targetBox;\n\n        if (label) {\n            label.reflow(this.markerBox());\n        }\n\n        if (this.note) {\n            this.note.reflow(targetBox);\n        }\n\n        this.marker.reflow(this.markerBox());\n    },\n\n    createVisual: function() {\n        ChartElement.fn.createVisual.call(this);\n\n        this.addAccessibilityAttributesToVisual();\n    },\n\n    markerBox: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var rect = this.box.toRect();\n        var type = valueOrDefault(markers.type, 'rect');\n        var isRoundRect = type === datavizConstants.ROUNDED_RECT;\n        var borderWidth = valueOrDefault(border.width, isRoundRect ? 1 : 0);\n        var halfBorderWidth = Math.round(borderWidth / 2);\n\n        if (markers.size) {\n            var center = rect.center();\n            rect.size.width = rect.size.height = markers.size;\n            rect.origin.x = Math.round(center.x - rect.size.width / 2);\n            rect.origin.y = Math.round(center.y - rect.size.height / 2);\n        }\n\n        rect.size.width -= borderWidth;\n        rect.size.height -= borderWidth;\n        rect.origin.y += halfBorderWidth + 0.5;\n        rect.origin.x += halfBorderWidth + 0.5;\n\n        return dataviz.rectToBox(rect);\n    },\n\n    markerBorder: function() {\n        var options = this.options;\n        var markers = options.markers;\n        var border = markers.border;\n        var opacity = valueOrDefault(border.opacity, options.opacity);\n\n        return {\n            color: border.color || this.color,\n            width: border.width,\n            opacity: opacity,\n            dashType: border.dashType\n        };\n    },\n\n    createMarker: function() {\n        var options = this.options;\n        var markerOptions = options.markers;\n        var marker = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex),\n            animation: options.animation,\n            visual: options.visual\n        }, {\n            dataItem: this.dataItem,\n            value: this.value,\n            series: this.series,\n            category: this.category\n        });\n\n        this.marker = marker;\n        this.append(marker);\n    },\n\n    createHighlight: function(style) {\n        var options = this.options;\n        var markerOptions = this.options.highlight.markers || this.options.markers;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: markerOptions.color || this.color,\n            border: this.markerBorder(),\n            borderRadius: markerOptions.borderRadius,\n            opacity: this.series.opacity || options.opacity,\n            zIndex: valueOrDefault(options.zIndex, this.series.zIndex)\n        });\n\n        highlight.reflow(this.markerBox());\n        var visual = highlight.getElement();\n\n        visual.options.fill = style.fill;\n        visual.options.stroke = style.stroke;\n\n        return visual;\n    },\n\n    highlightVisual: function() {\n        return this.rectVisual;\n    },\n\n    highlightVisualArgs: function() {\n        return {\n            options: this.options,\n            rect: this.box.toRect(),\n            visual: this.rectVisual\n        };\n    },\n\n    createFocusHighlight: function() {\n        var markerOptions = this.options.markers;\n        var highlightOptions = this.options.accessibility.highlight;\n\n        var highlight = new ShapeElement({\n            type: valueOrDefault(markerOptions.type, 'rect'),\n            width: markerOptions.size,\n            height: markerOptions.size,\n            rotation: markerOptions.rotation,\n            background: highlightOptions.color,\n            border: highlightOptions.border,\n            borderRadius: markerOptions.borderRadius,\n            padding: highlightOptions.border.width / 2,\n            zIndex: highlightOptions.zIndex\n        });\n\n        highlight.reflow(this.markerBox());\n\n        return highlight.getElement();\n    },\n\n    tooltipAnchor: function() {\n        var left = this.box.center().x;\n        var top = this.box.y1 - TOOLTIP_OFFSET;\n\n        return {\n            point: new Point(left, top),\n            align: {\n                horizontal: CENTER,\n                vertical: BOTTOM\n            }\n        };\n    },\n\n    overlapsBox: function(box) {\n        return this.box.overlaps(box);\n    },\n\n    unclipElements: function() {\n        /* noop, clip labels */\n    },\n\n    pointData: function() {\n        return {\n            x: this.value.x,\n            y: this.value.y,\n            value: this.value.value,\n            dataItem: this.dataItem,\n            series: this.series\n        };\n    }\n});\n\ndeepExtend(HeatmapPoint.prototype, PointEventsMixin);\ndeepExtend(HeatmapPoint.prototype, NoteMixin);\ndeepExtend(HeatmapPoint.prototype, AccessibilityAttributesMixin);\n\nHeatmapPoint.prototype.defaults = {\n    markers: {\n        type: 'rect',\n        borderRadius: 4,\n        border: {\n            color: 'transparent'\n        }\n    },\n    padding: { top: 1 },\n    labels: {\n        visible: false,\n        padding: 3\n    },\n    opacity: 1,\n    notes: {\n        label: {}\n    },\n    accessibility: {\n        role: CHART_POINT_ROLE,\n        className: CHART_POINT_CLASSNAME,\n        ariaRoleDescription: CHART_POINT_ROLE_DESCRIPTION\n    }\n};\n\nvar HeatmapChart = ChartElement.extend({\n    init: function(plotArea, options) {\n        ChartElement.fn.init.call(this, options);\n\n        this.plotArea = plotArea;\n        this.chartService = plotArea.chartService;\n        this._initFields();\n\n        this.render();\n    },\n\n    _initFields: function() {\n        this.points = [];\n        this.seriesOptions = [];\n        this.valueRange = { min: MAX_VALUE, max: MIN_VALUE };\n        this._evalSeries = [];\n    },\n\n    render: function() {\n        this.setRange();\n        this.traverseDataPoints(this.addValue.bind(this));\n    },\n\n    setRange: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$1 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var valueFields = ref$1.valueFields;\n                if (defined(valueFields.value) && valueFields.value !== null) {\n                    this$1$1.valueRange.min = Math.min(this$1$1.valueRange.min, valueFields.value);\n                    this$1$1.valueRange.max = Math.max(this$1$1.valueRange.max, valueFields.value);\n                }\n            }\n        }\n    },\n\n    addValue: function(value, fields) {\n        var point;\n        if (value && defined(value.value) && value.value !== null) {\n            point = this.createPoint(value, fields);\n            if (point) {\n                $.extend(point, fields);\n            }\n        }\n\n        this.points.push(point);\n    },\n\n    evalPointOptions: function(options, value, fields) {\n        var series = fields.series;\n        var seriesIx = fields.seriesIx;\n        var state = {\n            defaults: series._defaults,\n            excluded: [\n                \"data\", \"tooltip\", \"content\", \"template\",\n                \"visual\", \"toggle\", \"drilldownSeriesFactory\",\n                \"ariaTemplate\", \"ariaContent\"\n            ]\n        };\n\n        var doEval = this._evalSeries[seriesIx];\n        if (!defined(doEval)) {\n            this._evalSeries[seriesIx] = doEval = evalOptions(options, {}, state, true);\n        }\n\n        var pointOptions = options;\n        if (doEval) {\n            pointOptions = deepExtend({}, options);\n            evalOptions(pointOptions, {\n                value: value,\n                series: series,\n                dataItem: fields.dataItem,\n                min: this.valueRange.min,\n                max: this.valueRange.max\n            }, state);\n        }\n\n        return pointOptions;\n    },\n\n    pointType: function() {\n        return HeatmapPoint;\n    },\n\n    pointOptions: function(series, seriesIx) {\n        var options = this.seriesOptions[seriesIx];\n        if (!options) {\n            var defaults = this.pointType().prototype.defaults;\n            this.seriesOptions[seriesIx] = options = deepExtend({}, defaults, {\n                markers: {\n                    opacity: series.opacity\n                },\n                tooltip: {\n                    format: this.options.tooltip.format\n                },\n                labels: {\n                    format: this.options.labels.format\n                }\n            }, series);\n        }\n\n        return options;\n    },\n\n    createPoint: function(value, fields) {\n        var series = fields.series;\n        var pointOptions = this.pointOptions(series, fields.seriesIx);\n        var color = fields.color || series.color;\n\n        pointOptions = this.evalPointOptions(pointOptions, value, fields);\n\n        if (isFunction(series.color)) {\n            color = pointOptions.color;\n        } else if (this.valueRange.max !== 0) {\n            var scale = colorScale(color);\n            color = scale(value.value / this.valueRange.max);\n        }\n\n        var point = new HeatmapPoint(value, pointOptions);\n        point.color = color;\n\n        this.append(point);\n\n        return point;\n    },\n\n    seriesAxes: function(series) {\n        var xAxisName = series.xAxis;\n        var yAxisName = series.yAxis;\n        var plotArea = this.plotArea;\n        var xAxis = xAxisName ? plotArea.namedXAxes[xAxisName] : plotArea.axisX;\n        var yAxis = yAxisName ? plotArea.namedYAxes[yAxisName] : plotArea.axisY;\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    reflow: function(targetBox) {\n        var this$1$1 = this;\n\n        var chartPoints = this.points;\n        var limit = !this.options.clip;\n        var pointIx = 0;\n\n        this.traverseDataPoints(function (value, fields) {\n            var point = chartPoints[pointIx++];\n            var ref = this$1$1.seriesAxes(fields.series);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n            var indexX = xAxis.categoryIndex(value.x);\n            var indexY = yAxis.categoryIndex(value.y);\n            var slotX = xAxis.getSlot(indexX, indexX, limit);\n            var slotY = yAxis.getSlot(indexY, indexY, limit);\n\n            if (point) {\n                if (slotX && slotY) {\n                    var pointSlot = this$1$1.pointSlot(slotX, slotY);\n                    point.reflow(pointSlot);\n                } else {\n                    point.visible = false;\n                }\n            }\n        });\n\n        this.box = targetBox;\n    },\n\n    pointSlot: function(slotX, slotY) {\n        return new Box(slotX.x1, slotY.y1, slotX.x2, slotY.y2);\n    },\n\n    traverseDataPoints: function(callback) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var series = ref.options.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var ref$1 = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref$1.xAxis;\n            var yAxis = ref$1.yAxis;\n            var xRange = xAxis.currentRangeIndices();\n            var yRange = yAxis.currentRangeIndices();\n\n            for (var pointIx = 0; pointIx < currentSeries.data.length; pointIx++) {\n                var ref$2 = this$1$1.plotArea.bindPoint(currentSeries, pointIx);\n                var value = ref$2.valueFields;\n                var fields = ref$2.fields;\n                var xIndex = xAxis.totalIndex(value.x);\n                var yIndex = yAxis.totalIndex(value.y);\n                var xIn = xRange.min <= xIndex && xIndex <= xRange.max;\n                var yIn = yRange.min <= yIndex && yIndex <= yRange.max;\n\n                if (xIn && yIn) {\n                    callback(value, deepExtend({\n                        pointIx: pointIx,\n                        series: currentSeries,\n                        seriesIx: seriesIx,\n                        dataItem: currentSeries.data[pointIx],\n                        owner: this$1$1\n                    }, fields));\n                }\n            }\n        }\n    },\n\n    formatPointValue: function(point, format) {\n        var value = point.value;\n        return this.chartService.format.auto(format, value.x, value.y, value.value);\n    },\n\n    animationPoints: function() {\n        var points = this.points;\n        var result = [];\n        for (var idx = 0; idx < points.length; idx++) {\n            result.push((points[idx] || {}).marker);\n        }\n        return result;\n    }\n});\nsetDefaultOptions(HeatmapChart, {\n    series: [],\n    tooltip: {\n        format: \"{0}, {1}: {2}\"\n    },\n    labels: {\n        format: \"{2}\"\n    },\n    clip: true\n});\n\nvar HeatmapPlotArea = PlotAreaBase.extend({\n    initFields: function() {\n        this.namedXAxes = {};\n        this.namedYAxes = {};\n    },\n\n    render: function(panes) {\n        if (panes === void 0) { panes = this.panes; }\n\n        this.bindCategories();\n        this.createAxes(panes);\n        this.createCharts(panes);\n        this.createAxisLabels();\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var series = this.srcSeries || this.series;\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var data = currentSeries.data || [];\n            var ref = this$1$1.seriesAxes(currentSeries);\n            var xAxis = ref.xAxis;\n            var yAxis = ref.yAxis;\n\n            var xCategories = dataviz.createHashSet(xAxis.categories || []);\n            var yCategories = dataviz.createHashSet(yAxis.categories || []);\n\n            for (var pointIndex = 0; pointIndex < data.length; pointIndex++) {\n                var ref$1 = SeriesBinder.current.bindPoint(currentSeries, pointIndex).valueFields;\n                var x = ref$1.x;\n                var y = ref$1.y;\n\n                if (!xCategories.has(x)) {\n                    xCategories.add(x);\n                }\n\n                if (!yCategories.has(y)) {\n                    yCategories.add(y);\n                }\n            }\n\n            xAxis.categories = xCategories.values();\n            yAxis.categories = yCategories.values();\n        }\n    },\n\n    createCharts: function(panes) {\n        var this$1$1 = this;\n\n        var seriesByPane = this.groupSeriesByPane();\n\n        for (var i = 0; i < panes.length; i++) {\n            var pane = panes[i];\n            var paneSeries = seriesByPane[pane.options.name || \"default\"] || [];\n            this$1$1.addToLegend(paneSeries);\n            var filteredSeries = this$1$1.filterVisibleSeries(paneSeries);\n\n            if (!filteredSeries) {\n                continue;\n            }\n\n            this$1$1.createHeatmapChart(\n                filterSeriesByType(filteredSeries, [ HEATMAP ]),\n                pane\n            );\n        }\n    },\n\n    createHeatmapChart: function(series, pane) {\n        var chart = new HeatmapChart(this, {\n            series: series\n        });\n\n        this.appendChart(chart, pane);\n    },\n\n    seriesPaneName: function(series) {\n        var options = this.options;\n        var xAxisName = series.xAxis;\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxis = grep(xAxisOptions, function(a) { return a.name === xAxisName; })[0];\n        var yAxisName = series.yAxis;\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxis = grep(yAxisOptions, function(a) { return a.name === yAxisName; })[0];\n        var panes = options.panes || [ {} ];\n        var defaultPaneName = panes[0].name || \"default\";\n        var paneName = (xAxis || {}).pane || (yAxis || {}).pane || defaultPaneName;\n\n        return paneName;\n    },\n\n    seriesAxes: function(series) {\n        var xAxis;\n        var yAxis;\n\n        var options = this.options;\n\n        var xAxisOptions = [].concat(options.xAxis);\n        var xAxisName = series.xAxis;\n        if (xAxisName) {\n            xAxis = xAxisOptions.find(function (axis) { return axis.name === xAxisName; });\n        } else {\n            xAxis = xAxisOptions[0];\n        }\n\n        var yAxisOptions = [].concat(options.yAxis);\n        var yAxisName = series.yAxis;\n        if (yAxisName) {\n            yAxis = yAxisOptions.find(function (axis) { return axis.name === yAxisName; });\n        } else {\n            yAxis = yAxisOptions[0];\n        }\n\n        if (!xAxis) {\n            throw new Error(\"Unable to locate X axis with name \" + xAxisName);\n        }\n\n        if (!yAxis) {\n            throw new Error(\"Unable to locate Y axis with name \" + yAxisName);\n        }\n\n        return { xAxis: xAxis, yAxis: yAxis };\n    },\n\n    createAxisLabels: function() {\n        var axes = this.axes;\n        for (var i = 0; i < axes.length; i++) {\n            axes[i].createLabels();\n        }\n    },\n\n    createXYAxis: function(options, vertical, axisIndex) {\n        var axisName = options.name;\n        var namedAxes = vertical ? this.namedYAxes : this.namedXAxes;\n        var axisOptions = $.extend({\n            axisCrossingValue: 0\n        }, options, {\n            vertical: vertical,\n            reverse: (vertical || this.chartService.rtl) ? !options.reverse : options.reverse,\n            justified: false\n        });\n        var firstCategory = axisOptions.categories ? axisOptions.categories[0] : null;\n        var typeSamples = [ axisOptions.min, axisOptions.max, firstCategory ];\n        var series = this.series;\n\n        for (var seriesIx = 0; seriesIx < series.length; seriesIx++) {\n            var currentSeries = series[seriesIx];\n            var seriesAxisName = currentSeries[vertical ? \"yAxis\" : \"xAxis\"];\n            if ((seriesAxisName === axisOptions.name) || (axisIndex === 0 && !seriesAxisName)) {\n                var firstPointValue = SeriesBinder.current.bindPoint(currentSeries, 0).valueFields;\n                typeSamples.push(firstPointValue[vertical ? \"y\" : \"x\"]);\n\n                break;\n            }\n        }\n\n        var inferredDate;\n\n        for (var i = 0; i < typeSamples.length; i++) {\n            if (typeSamples[i] instanceof Date) {\n                inferredDate = true;\n                break;\n            }\n        }\n\n        var axisType;\n        if (equalsIgnoreCase(axisOptions.type, DATE) || (!axisOptions.type && inferredDate)) {\n            axisType = dataviz.DateCategoryAxis;\n        } else {\n            axisType = CategoryAxis;\n        }\n\n        var axis = new axisType(axisOptions, this.chartService);\n        axis.axisIndex = axisIndex;\n\n        if (axisName) {\n            if (namedAxes[axisName]) {\n                throw new Error(((vertical ? \"Y\" : \"X\") + \" axis with name \" + axisName + \" is already defined\"));\n            }\n            namedAxes[axisName] = axis;\n        }\n\n        this.appendAxis(axis);\n        axis.indexCategories();\n\n        return axis;\n    },\n\n    createAxes: function(panes) {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var xAxesOptions = [].concat(options.xAxis);\n        var xAxes = [];\n        var yAxesOptions = [].concat(options.yAxis);\n        var yAxes = [];\n\n        for (var idx = 0; idx < xAxesOptions.length; idx++) {\n            var axisPane = this$1$1.findPane(xAxesOptions[idx].pane);\n            if (inArray(axisPane, panes)) {\n                xAxes.push(this$1$1.createXYAxis(xAxesOptions[idx], false, idx));\n            }\n        }\n\n        for (var idx$1 = 0; idx$1 < yAxesOptions.length; idx$1++) {\n            var axisPane$1 = this$1$1.findPane(yAxesOptions[idx$1].pane);\n            if (inArray(axisPane$1, panes)) {\n                yAxes.push(this$1$1.createXYAxis(yAxesOptions[idx$1], true, idx$1));\n            }\n        }\n\n        this.axisX = this.axisX || xAxes[0];\n        this.axisY = this.axisY || yAxes[0];\n    },\n\n    removeAxis: function(axis) {\n        var axisName = axis.options.name;\n\n        PlotAreaBase.fn.removeAxis.call(this, axis);\n\n        if (axis.options.vertical) {\n            delete this.namedYAxes[axisName];\n        } else {\n            delete this.namedXAxes[axisName];\n        }\n\n        if (axis === this.axisX) {\n            delete this.axisX;\n        }\n\n        if (axis === this.axisY) {\n            delete this.axisY;\n        }\n    },\n\n    _dispatchEvent: function(chart, e, eventType) {\n        var coords = chart._eventCoordinates(e);\n        var point = new Point(coords.x, coords.y);\n        var allAxes = this.axes;\n        var length = allAxes.length;\n        var xValues = [];\n        var yValues = [];\n\n        for (var i = 0; i < length; i++) {\n            var axis = allAxes[i];\n            var values = axis.options.vertical ? yValues : xValues;\n            appendIfNotNull(values, axis.getCategory(point));\n        }\n\n        if (xValues.length > 0 && yValues.length > 0) {\n            chart.trigger(eventType, {\n                element: eventElement(e),\n                originalEvent: e,\n                x: singleItemOrArray(xValues),\n                y: singleItemOrArray(yValues)\n            });\n        }\n    },\n\n    updateAxisOptions: function(axis, options) {\n        var vertical = axis.options.vertical;\n        var axes = this.groupAxes(this.panes);\n        var index = (vertical ? axes.y : axes.x).indexOf(axis);\n\n        updateAxisOptions$2(this.options, index, vertical, options);\n        updateAxisOptions$2(this.originalOptions, index, vertical, options);\n    },\n\n    crosshairOptions: function(axis) {\n        // Stack the crosshair above the series points.\n        return $.extend({}, axis.options.crosshair, { zIndex: 0 });\n    },\n\n    _pointsByVertical: function(basePoint, offset) {\n        var this$1$1 = this;\n        if (offset === void 0) { offset = 0; }\n\n        var normalizedOffset = this.axisX.options.reverse ? offset * -1 : offset;\n        var axisXItems = this.axisX.children;\n        var xIndex = this._getPointAxisXIndex(basePoint) + normalizedOffset;\n\n        xIndex = cycleIndex(xIndex, axisXItems.length);\n        var targetXValue = axisXItems[xIndex].value;\n\n        var points = this\n            .filterPoints(function (point) { return compareValues(point.pointData().x, targetXValue); })\n            .sort(function (a, b) { return this$1$1._getPointAxisYIndex(a) - this$1$1._getPointAxisYIndex(b); });\n\n        if (this.axisY.options.reverse) {\n            return points.reverse();\n        }\n\n        return points;\n    },\n\n    _pointsByHorizontal: function(basePoint, offset) {\n        var this$1$1 = this;\n        if (offset === void 0) { offset = 0; }\n\n        var normalizedOffset = this.axisY.options.reverse ? offset * -1 : offset;\n        var axisYItems = this.axisY.children;\n        var yIndex = this._getPointAxisYIndex(basePoint) + normalizedOffset;\n\n        yIndex = cycleIndex(yIndex, axisYItems.length);\n        var targetYValue = axisYItems[yIndex].value;\n\n        var points = this\n            .filterPoints(function (point) { return compareValues(point.pointData().y, targetYValue); })\n            .sort(function (a, b) { return this$1$1._getPointAxisXIndex(a) - this$1$1._getPointAxisXIndex(b); });\n\n        if (this.axisX.options.reverse) {\n            return points.reverse();\n        }\n\n        return points;\n    },\n\n    _getPointAxisXIndex: function(point) {\n        return this._getPointAxisIndex(this.axisX, point.pointData().x);\n    },\n\n    _getPointAxisYIndex: function(point) {\n        return this._getPointAxisIndex(this.axisY, point.pointData().y);\n    },\n\n    _getPointAxisIndex: function(axis, pointValue) {\n        return axis.children.findIndex(function (axisItem) { return compareValues(pointValue, axisItem.value); });\n    }\n});\n\nfunction compareValues(a, b) {\n    if (a instanceof Date && b instanceof Date) {\n        return dataviz.dateEquals(a, b);\n    }\n\n    return a === b;\n}\n\nfunction updateAxisOptions$2(targetOptions, axisIndex, vertical, options) {\n    var axisOptions = ([].concat(vertical ? targetOptions.yAxis : targetOptions.xAxis))[axisIndex];\n    deepExtend(axisOptions, options);\n}\n\nsetDefaultOptions(HeatmapPlotArea, {\n    xAxis: {},\n    yAxis: {}\n});\n\ndeepExtend(HeatmapPlotArea.prototype, PlotAreaEventsMixin);\n\nvar COLOR = \"color\";\nvar FIRST = \"first\";\nvar FROM = \"from\";\nvar MAX = \"max\";\nvar MIN = \"min\";\nvar NOTE_TEXT = \"noteText\";\nvar SUMMARY_FIELD = \"summary\";\nvar TO = \"to\";\n\nPlotAreaFactory.current.register(CategoricalPlotArea, [\n    BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA,\n    CANDLESTICK, OHLC, BULLET, VERTICAL_BULLET, BOX_PLOT, VERTICAL_BOX_PLOT,\n    RANGE_COLUMN, RANGE_BAR, WATERFALL, HORIZONTAL_WATERFALL, RANGE_AREA, VERTICAL_RANGE_AREA ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(XYPlotArea, [\n    SCATTER, SCATTER_LINE, BUBBLE ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(PiePlotArea, [ PIE ]);\nPlotAreaFactory.current.register(DonutPlotArea, [ DONUT ]);\nPlotAreaFactory.current.register(FunnelPlotArea, [ FUNNEL, PYRAMID ]);\n\nPlotAreaFactory.current.register(PolarPlotArea, [\n    POLAR_AREA, POLAR_LINE, POLAR_SCATTER ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(RadarPlotArea, [\n    RADAR_AREA, RADAR_COLUMN, RADAR_LINE ].concat( TRENDLINE_SERIES\n));\n\nPlotAreaFactory.current.register(HeatmapPlotArea, [ HEATMAP ]);\n\nSeriesBinder.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, ERROR_LOW_FIELD, ERROR_HIGH_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    [ FROM, TO ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ WATERFALL, HORIZONTAL_WATERFALL ],\n    [ VALUE ], [ CATEGORY, COLOR, NOTE_TEXT, SUMMARY_FIELD, DRILLDOWN_FIELD ]\n);\n\nSeriesBinder.current.register([ POLAR_AREA, POLAR_LINE, POLAR_SCATTER ], [ X, Y ], [ COLOR, DRILLDOWN_FIELD ]);\nSeriesBinder.current.register([ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ], [ VALUE ], [ CATEGORY, COLOR, DRILLDOWN_FIELD ]);\n\nSeriesBinder.current.register(\n    [ FUNNEL, PYRAMID ],\n    [ VALUE ], [ CATEGORY, COLOR, \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BAR, COLUMN, LINE, VERTICAL_LINE, AREA, VERTICAL_AREA, WATERFALL, HORIZONTAL_WATERFALL ],\n    { value: MAX, color: FIRST, noteText: FIRST, errorLow: MIN, errorHigh: MAX }\n);\n\nDefaultAggregates.current.register(\n    [ RANGE_COLUMN, RANGE_BAR, RANGE_AREA, VERTICAL_RANGE_AREA ],\n    { from: MIN, to: MAX, color: FIRST, noteText: FIRST }\n);\n\nDefaultAggregates.current.register(\n    [ RADAR_AREA, RADAR_COLUMN, RADAR_LINE ],\n    { value: MAX, color: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ SCATTER, SCATTER_LINE, BUBBLE ],\n    [ X, Y ], [ COLOR, NOTE_TEXT, X_ERROR_LOW_FIELD, X_ERROR_HIGH_FIELD, Y_ERROR_LOW_FIELD, Y_ERROR_HIGH_FIELD ]\n);\n\nSeriesBinder.current.register(\n    [ BUBBLE ], [ X, Y, \"size\" ], [ COLOR, CATEGORY, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ HEATMAP ],\n    [ X, Y, VALUE ], [ COLOR, NOTE_TEXT ]\n);\n\nSeriesBinder.current.register(\n    [ CANDLESTICK, OHLC ],\n    [ \"open\", \"high\", \"low\", \"close\" ], [ CATEGORY, COLOR, \"downColor\", NOTE_TEXT ]\n);\n\nDefaultAggregates.current.register(\n    [ CANDLESTICK, OHLC ],\n    { open: MAX, high: MAX, low: MIN, close: MAX,\n        color: FIRST, downColor: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    [ \"lower\", \"q1\", \"median\", \"q3\", \"upper\", \"mean\", \"outliers\" ], [ CATEGORY, COLOR, NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BOX_PLOT, VERTICAL_BOX_PLOT ],\n    { lower: MAX, q1: MAX, median: MAX, q3: MAX, upper: MAX, mean: MAX, outliers: FIRST,\n        color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    [ \"current\", \"target\" ], [ CATEGORY, COLOR, \"visibleInLegend\", NOTE_TEXT, DRILLDOWN_FIELD ]\n);\n\nDefaultAggregates.current.register(\n    [ BULLET, VERTICAL_BULLET ],\n    { current: MAX, target: MAX, color: FIRST, noteText: FIRST }\n);\n\nSeriesBinder.current.register(\n    [ PIE, DONUT ],\n    [ VALUE ], [ CATEGORY, COLOR, \"explode\", \"visibleInLegend\", \"visible\", DRILLDOWN_FIELD ]\n);\n\nvar AXIS_NAMES = [ CATEGORY, VALUE, X, Y ];\n\nvar MOUSEDOWN = \"mousedown\";\nvar MOUSEMOVE = \"mousemove\";\nvar CONTEXTMENU = \"contextmenu\";\nvar MOUSELEAVE = \"mouseleave\";\nvar KEYDOWN = \"keydown\";\nvar FOCUS = \"focus\";\nvar BLUR = \"blur\";\nvar MOUSEMOVE_DELAY = 20;\n\nvar Chart = Class.extend({\n    init: function(element, userOptions, themeOptions, context) {\n        var this$1$1 = this;\n        if (context === void 0) { context = {}; }\n\n        this.observers = [];\n        this.addObserver(context.observer);\n        this.chartService = new services.ChartService(this, context);\n        this.chartService.theme = themeOptions;\n\n        this._initElement(element);\n\n        var options = deepExtend({}, this.options, userOptions);\n        this._originalOptions = deepExtend({}, options);\n        this._theme = themeOptions;\n        this._initTheme(options, themeOptions);\n        this._focusState = {};\n\n        this._initHandlers();\n        this._initSurface();\n\n        this.bindCategories();\n        dataviz.FontLoader.preloadFonts(userOptions, function () {\n            this$1$1.fontLoaded = true;\n            if (!this$1$1._destroyed) {\n                this$1$1.trigger('init');\n                this$1$1._redraw();\n                this$1$1._attachEvents();\n            }\n        });\n    },\n\n    _initElement: function(element) {\n        this._setElementClass(element);\n        element.style.position = \"relative\";\n        element.tabIndex = element.getAttribute(\"tabindex\") ? element.getAttribute(\"tabindex\") : 0;\n        // To support user agents and assistive technologies based on the ARIA 1.0 specification, authors may wish to include the document role as a fallback value, in the form role=\"graphics-document document\".\n        element.setAttribute(\"role\", \"graphics-document document\");\n        while (element.firstChild) {\n            element.removeChild(element.firstChild);\n        }\n        this.element = element;\n    },\n\n    _setElementClass: function(element) {\n        dataviz.addClass(element, \"k-chart\");\n    },\n\n    _initTheme: function(options, themeOptions) {\n        var seriesCopies = [];\n        var series = options.series || [];\n\n        for (var i = 0; i < series.length; i++) {\n            seriesCopies.push($.extend({}, series[i]));\n        }\n        options.series = seriesCopies;\n\n        resolveAxisAliases(options);\n        this.applyDefaults(options, themeOptions);\n\n        // Clean up default if not overriden by data attributes\n        if (options.seriesColors === null) {\n            delete options.seriesColors;\n        }\n\n        if (isString(options.title)) {\n            options.title = { text: options.title };\n        }\n\n        this.options = deepExtend({}, themeOptions, options);\n        this.applySeriesColors();\n    },\n\n    getSize: function() {\n        var chartArea = this.options.chartArea || {};\n        var width = chartArea.width ? parseInt(chartArea.width, 10) : Math.floor(this.element.offsetWidth);\n        var height = chartArea.height ? parseInt(chartArea.height, 10) : Math.floor(this.element.offsetHeight);\n\n        return {\n            width: width,\n            height: height\n        };\n    },\n\n    resize: function(force) {\n        var size = this.getSize();\n        var currentSize = this._size;\n        var hasSize = size.width > 0 || size.height > 0;\n\n        if (force || hasSize && (!currentSize || size.width !== currentSize.width || size.height !== currentSize.height)) {\n            this._size = size;\n            this._resize(size, force);\n            this.trigger(\"resize\", size);\n        } else if (hasSize && this._selections && dataviz.find(this._selections, function (s) { return !s.visible; })) {\n            this._destroySelections();\n            this._setupSelection();\n        }\n    },\n\n    _resize: function() {\n        this._noTransitionsRedraw();\n    },\n\n    redraw: function(paneName) {\n        this.applyDefaults(this.options);\n        this.applySeriesColors();\n\n        if (paneName) {\n            var plotArea = this._model._plotArea;\n            var pane = plotArea.findPane(paneName);\n            plotArea.redraw(pane);\n        } else {\n            this._redraw();\n        }\n    },\n\n    getAxis: function(name) {\n        return findAxisByName(name, this._plotArea.axes);\n    },\n\n    findAxisByName: function(name) {\n        return this.getAxis(name);\n    },\n\n    findPaneByName: function(name) {\n        var panes = this._plotArea.panes;\n\n        for (var idx = 0; idx < panes.length; idx++) {\n            if (panes[idx].options.name === name) {\n                return new ChartPane(panes[idx]);\n            }\n        }\n    },\n\n    findPaneByIndex: function(idx) {\n        var panes = this._plotArea.panes;\n        if (panes[idx]) {\n            return new ChartPane(panes[idx]);\n        }\n    },\n\n    plotArea: function() {\n        return new ChartPlotArea(this._plotArea);\n    },\n\n    toggleHighlight: function(show, filter) {\n        var plotArea = this._plotArea;\n        var firstSeries = (plotArea.srcSeries || plotArea.series || [])[0];\n        var points;\n\n        if (isFunction(filter)) {\n            points = plotArea.filterPoints(filter);\n        } else {\n            var seriesName, categoryName;\n            if (isObject(filter)) {\n                seriesName = filter.series;\n                categoryName = filter.category;\n            } else {\n                seriesName = categoryName = filter;\n            }\n\n            if (firstSeries.type === DONUT) {\n                points = pointByCategoryName(plotArea.pointsBySeriesName(seriesName), categoryName);\n            } else if (inArray(firstSeries.type, [ PIE, FUNNEL, PYRAMID ])) {\n                points = pointByCategoryName((plotArea.charts[0] || {}).points, categoryName);\n            } else {\n                points = plotArea.pointsBySeriesName(seriesName);\n            }\n        }\n\n        if (points) {\n            this.togglePointsHighlight(show, points);\n        }\n    },\n\n    togglePointsHighlight: function(show, points) {\n        var highlight = this._highlight;\n        for (var idx = 0; idx < points.length; idx++) {\n            highlight.togglePointHighlight(points[idx], show);\n        }\n    },\n\n    showTooltip: function(filter) {\n        var shared = this._sharedTooltip();\n        var ref = this;\n        var tooltip = ref._tooltip;\n        var plotArea = ref._plotArea;\n        var point, categoryIndex;\n\n        if (isFunction(filter)) {\n            point = plotArea.findPoint(filter);\n            if (point && shared) {\n                categoryIndex = point.categoryIx;\n            }\n        } else if (shared && defined(filter)) {\n            categoryIndex = plotArea.categoryAxis.categoryIndex(filter);\n        }\n\n        if (shared) {\n            if (categoryIndex >= 0) {\n                var points = this._plotArea.pointsByCategoryIndex(categoryIndex);\n                tooltip.showAt(points);\n            }\n        } else if (point) {\n            tooltip.show(point);\n        }\n    },\n\n    hideTooltip: function() {\n        this._tooltip.hide();\n    },\n\n    _initSurface: function() {\n        var surface = this.surface;\n        var wrap = this._surfaceWrap();\n\n        var chartArea = this.options.chartArea || {};\n        if (chartArea.width) {\n            dataviz.elementSize(wrap, { width: chartArea.width });\n        }\n        if (chartArea.height) {\n            dataviz.elementSize(wrap, { height: chartArea.height });\n        }\n\n        if (!surface || surface.options.type !== this.options.renderAs) {\n            this._destroySurface();\n\n            this.surface = drawing.Surface.create(wrap, {\n                type: this.options.renderAs\n            });\n\n            this.surface.bind(\"mouseenter\", this._surfaceMouseenterHandler);\n            this.surface.bind(\"mouseleave\", this._surfaceMouseleaveHandler);\n\n        } else {\n            this.surface.clear();\n            this.surface.resize();\n        }\n    },\n\n    _surfaceWrap: function() {\n        return this.element;\n    },\n\n    _redraw: function() {\n        var model = this._getModel();\n        this._size = {\n            width: model.options.width,\n            height: model.options.height\n        };\n\n        this._destroyView();\n\n        this._setElementAccessibilityAttributes();\n\n        this._model = model;\n        this._plotArea = model._plotArea;\n        this._legend = model._legend;\n\n        model.renderVisual();\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.setup();\n                }\n            });\n        }\n\n        this._initSurface();\n        this.surface.draw(model.visual);\n\n        if (this.options.transitions !== false) {\n            model.traverse(function(element) {\n                if (element.animation) {\n                    element.animation.play();\n                }\n            });\n        }\n\n        this._tooltip = this._createTooltip();\n        this._highlight = new Highlight();\n        this._setupSelection();\n        this._createPannable();\n        this._createZoomSelection();\n        this._createMousewheelZoom();\n\n        this.trigger(RENDER);\n        triggerPaneRender(this._plotArea.panes);\n\n        if (!this._navState) {\n            this._cancelDomEvents();\n        }\n\n        this._redrawFocusHighlight();\n    },\n\n    _redrawFocusHighlight: function() {\n        var ref = this;\n        var ref_focusState = ref._focusState;\n        var legendInFocus = ref_focusState.legendInFocus;\n        var preserveHighlight = ref_focusState.preserveHighlight;\n\n        if (legendInFocus && preserveHighlight) {\n            this._focusElement(this._getFocusedLegendItem(), false);\n            this._focusState.preserveHighlight = false;\n        }\n    },\n\n    _setElementAccessibilityAttributes: function() {\n        var titleOptions = this.options.title;\n        var title = isString(titleOptions) ? titleOptions : (titleOptions.description || titleOptions.text);\n\n        if (title) {\n            this.element.setAttribute(\"aria-roledescription\", title);\n        }\n    },\n\n    exportVisual: function(exportOptions) {\n        var visual;\n        if (exportOptions && (exportOptions.width || exportOptions.height || exportOptions.options)) {\n            var currentOptions = this.options;\n            var options = deepExtend({}, exportOptions.options, {\n                chartArea: {\n                    width: exportOptions.width,\n                    height: exportOptions.height\n                }\n            });\n\n            clearMissingValues(this._originalOptions, options);\n            this.options = deepExtend({}, this._originalOptions, options);\n            this._initTheme(this.options, this._theme);\n            this.bindCategories();\n\n            var model = this._getModel();\n\n            model.renderVisual();\n            triggerPaneRender(model._plotArea.panes);\n\n            visual = model.visual;\n\n            this.options = currentOptions;\n        } else {\n            visual = this.surface.exportVisual();\n        }\n\n        return visual;\n    },\n\n    _sharedTooltip: function() {\n        return this._plotArea instanceof CategoricalPlotArea && this.options.tooltip && this.options.tooltip.shared;\n    },\n\n    _createPannable: function() {\n        var options = this.options;\n        if (options.pannable !== false) {\n            this._pannable = new Pannable(this._plotArea, options.pannable);\n        }\n    },\n\n    _createZoomSelection: function() {\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        if (zoomable !== false && selection !== false) {\n            this._zoomSelection = new ZoomSelection(this, selection);\n        }\n    },\n\n    _createMousewheelZoom: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel;\n        if (zoomable !== false && mousewheel !== false) {\n            this._mousewheelZoom = new MousewheelZoom(this, mousewheel);\n        }\n    },\n\n    _toggleDragZoomEvents: function() {\n        var pannable = this.options.pannable;\n        var zoomable = this.options.zoomable;\n        var selection = (zoomable || {}).selection;\n        var mousewheel = (zoomable || {}).mousewheel;\n        var allowDrag = !pannable && (zoomable === false || selection === false) && !this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ]);\n        var allowZoom = (zoomable === false || mousewheel === false) && !this.requiresHandlers([ ZOOM_START, ZOOM, ZOOM_END ]);\n        var element = this.element;\n\n        if (this._dragZoomEnabled && allowDrag && allowZoom) {\n            element.style.touchAction = this._touchAction || '';\n            this._dragZoomEnabled = false;\n        } else if (!this._dragZoomEnabled && !(allowDrag && allowZoom)) {\n            element.style.touchAction = \"none\";\n\n            this._dragZoomEnabled = true;\n        }\n\n        this._toggleDomEvents(!allowDrag, !allowZoom);\n    },\n\n    _toggleDomEvents: function(drag, zoom) {\n        var domEvents = this.domEvents;\n        if (!domEvents) {\n            return;\n        }\n\n        if (domEvents.toggleDrag) {\n            domEvents.toggleDrag(drag);\n        }\n\n        if (domEvents.toggleZoom) {\n            domEvents.toggleZoom(zoom);\n        }\n    },\n\n    _createTooltip: function() {\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var tooltip;\n\n        if (this._sharedTooltip()) {\n            tooltip = this._createSharedTooltip(tooltipOptions);\n        } else {\n            tooltip = new Tooltip(this.chartService, tooltipOptions);\n        }\n\n        return tooltip;\n    },\n\n    _createSharedTooltip: function(options) {\n        return new SharedTooltip(this._plotArea, options);\n    },\n\n    applyDefaults: function(options, themeOptions) {\n        applyAxisDefaults(options, themeOptions);\n        applySeriesDefaults(options, themeOptions);\n    },\n\n    applySeriesColors: function() {\n        var options = this.options;\n        var series = options.series;\n        var colors = options.seriesColors || [];\n\n        for (var i = 0; i < series.length; i++) {\n            var currentSeries = series[i];\n            var seriesColor = colors[i % colors.length];\n            var defaults = currentSeries._defaults;\n\n            currentSeries.color = currentSeries.color || seriesColor;\n            if (defaults) {\n                defaults.color = defaults.color || seriesColor;\n            }\n        }\n    },\n\n    _getModel: function() {\n        var options = this.options;\n        var plotArea = this._createPlotArea();\n        var model = new dataviz.RootElement(this._modelOptions());\n        model.chart = this;\n        model._plotArea = plotArea;\n\n        var title = Title.buildTitle(options.title);\n        var subtitle = Title.buildTitle(options.subtitle, {\n            align: options.title.align,\n            position: options.title.position\n        });\n        model.append.apply(model, Title.orderTitles([title, subtitle]));\n\n        if (options.legend && options.legend.visible) {\n            var legend = new Legend(plotArea.options.legend, this.chartService);\n            model.append(legend);\n            model._legend = legend;\n        }\n        model.append(plotArea);\n        model.reflow();\n\n        return model;\n    },\n\n    _modelOptions: function() {\n        var options = this.options;\n        var size = this.getSize();\n\n        return deepExtend({\n            transitions: options.transitions,\n            width: size.width || datavizConstants.DEFAULT_WIDTH,\n            height: size.height || datavizConstants.DEFAULT_HEIGHT\n        }, options.chartArea);\n    },\n\n    _createPlotArea: function(skipSeries) {\n        var options = this.options;\n\n        var plotArea = PlotAreaFactory.current.create(skipSeries ? [] : options.series, options, this.chartService);\n\n        return plotArea;\n    },\n\n    _setupSelection: function() {\n        var this$1$1 = this;\n\n        var ref = this;\n        var axes = ref._plotArea.axes;\n        var selections = this._selections = [];\n\n        for (var i = 0; i < axes.length; i++) {\n            var axis = axes[i];\n            var options = axis.options;\n            if (axis instanceof CategoryAxis && options.select && !options.vertical) {\n                var range = axis.range();\n\n                var selection = new Selection(this$1$1, axis,\n                    deepExtend({ min: range.min, max: range.max }, options.select)\n                );\n\n                selections.push(selection);\n            }\n        }\n    },\n\n    _selectStart: function(e) {\n        return this.trigger(SELECT_START, e);\n    },\n\n    _select: function(e) {\n        return this.trigger(SELECT, e);\n    },\n\n    _selectEnd: function(e) {\n        return this.trigger(SELECT_END, e);\n    },\n\n    _initHandlers: function() {\n        this._clickHandler = this._click.bind(this);\n        this._keydownHandler = this._keydown.bind(this);\n        this._focusHandler = this._focus.bind(this);\n        this._blurHandler = this._blur.bind(this);\n        this._mousedownHandler = this._mousedown.bind(this);\n        this._mousewheelHandler = this._mousewheel.bind(this);\n        this._mouseleaveHandler = this._mouseleave.bind(this);\n        this._surfaceMouseenterHandler = this._mouseover.bind(this);\n        this._surfaceMouseleaveHandler = this._mouseout.bind(this);\n\n        this._mousemove = kendo.throttle(\n            this._mousemove.bind(this),\n            MOUSEMOVE_DELAY\n        );\n    },\n\n    addObserver: function(observer) {\n        if (observer) {\n            this.observers.push(observer);\n        }\n    },\n\n    removeObserver: function(observer) {\n        var index = this.observers.indexOf(observer);\n        if (index >= 0) {\n            this.observers.splice(index, 1);\n        }\n    },\n\n    requiresHandlers: function(eventNames) {\n        var observers = this.observers;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].requiresHandlers(eventNames)) {\n                return true;\n            }\n        }\n    },\n\n    trigger: function(name, args) {\n        if (args === void 0) { args = {}; }\n\n        args.sender = this;\n\n        if (name === SHOW_TOOLTIP) {\n            args.anchor.point = this._toDocumentCoordinates(args.anchor.point);\n        } else if (name === SERIES_OVER) {\n            this._updateDrilldownPoint(args.point);\n        } else if (name === SERIES_LEAVE) {\n            this._resetDrilldownPoint();\n        } else if (name === SERIES_CLICK) {\n            this._focusPoint(args.point);\n            this._startDrilldown(args.point);\n        } else if (name === LEGEND_ITEM_CLICK) {\n            this._focusLegendItem(args);\n        }\n\n        var observers = this.observers;\n        var isDefaultPrevented = false;\n        for (var idx = 0; idx < observers.length; idx++) {\n            if (observers[idx].trigger(name, args)) {\n                isDefaultPrevented = true;\n            }\n        }\n\n        return isDefaultPrevented;\n    },\n\n    _attachEvents: function() {\n        var element = this.element;\n\n        this._touchAction = element.style.touchAction;\n\n        var obj;\n        bindEvents(element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj[ KEYDOWN ] = this._keydownHandler, obj[ MOUSEDOWN ] = this._mousedownHandler, obj[ FOCUS ] = this._focusHandler, obj[ BLUR] = this._blurHandler, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n\n        this.domEvents = services.DomEventsBuilder.create(this.element, {\n            start: this._start.bind(this),\n            move: this._move.bind(this),\n            end: this._end.bind(this),\n            tap: this._tap.bind(this),\n            gesturestart: this._gesturestart.bind(this),\n            gesturechange: this._gesturechange.bind(this),\n            gestureend: this._gestureend.bind(this)\n        });\n\n        this._toggleDragZoomEvents();\n    },\n\n    _mouseleave: function(e) {\n        if (this._hoveredPoint) {\n            this._hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (this._plotAreaHovered) {\n            this._plotAreaHovered = false;\n            this.trigger(PLOT_AREA_LEAVE);\n        }\n\n        if (this._hasInactiveOpacity() && this._activeChartInstance) {\n            this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n            this._updateSeriesOpacity(null, true);\n        }\n    },\n\n    _cancelDomEvents: function() {\n        if (this.domEvents && this.domEvents.cancel) {\n            this.domEvents.cancel();\n        }\n    },\n\n    _gesturestart: function(e) {\n        if (this._mousewheelZoom && !this._stopChartHandlers(e)) {\n            this._gestureDistance = e.distance;\n            this._unsetActivePoint();\n            this._clearFocusedElement();\n            this.surface.suspendTracking();\n        }\n    },\n\n    _gestureend: function(e) {\n        if (this._zooming && !this._stopChartHandlers(e)) {\n            if (this.surface) {\n                this.surface.resumeTracking();\n            }\n            this._zooming = false;\n            this.trigger(ZOOM_END, {});\n        }\n    },\n\n    _gesturechange: function(e) {\n        var mousewheelZoom = this._mousewheelZoom;\n\n        if (mousewheelZoom && !this._stopChartHandlers(e)) {\n            e.preventDefault();\n            var previousGestureDistance = this._gestureDistance;\n            var scaleDelta = -e.distance / previousGestureDistance + 1;\n\n            if (Math.abs(scaleDelta) >= 0.1) {\n                scaleDelta = Math.round(scaleDelta * 10);\n\n                this._gestureDistance = e.distance;\n                var args = { delta: scaleDelta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n                if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                    var coords = this._eventCoordinates(e);\n\n                    if (!this._zooming) {\n                        this._zooming = true;\n                    }\n\n                    var ranges = args.axisRanges = mousewheelZoom.updateRanges(scaleDelta, coords);\n                    if (ranges && !this.trigger(ZOOM, args)) {\n                        mousewheelZoom.zoom();\n                    }\n                }\n            }\n        }\n    },\n\n    _mouseout: function(e) {\n        if (e.element) {\n            var element = this._drawingChartElement(e.element, e);\n\n            if (element && element.leave) {\n                element.leave(this, e.originalEvent);\n            }\n        }\n    },\n\n    _start: function(e) {\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (this.requiresHandlers([ DRAG_START, DRAG, DRAG_END ])) {\n            this._startNavigation(e, coords, DRAG_START);\n        }\n\n        if (this._pannable && this._pannable.start(e)) {\n            this.surface.suspendTracking();\n            this._unsetActivePoint();\n            this._clearFocusedElement();\n            this._suppressHover = true;\n            this.chartService.panning = true;\n        }\n\n        if (this._zoomSelection) {\n            if (this._zoomSelection.start(e)) {\n                this.trigger(ZOOM_START, { axisRanges: axisRanges(this._plotArea.axes), originalEvent: e });\n            }\n        }\n    },\n\n    _move: function(e) {\n        var ref = this;\n        var state = ref._navState;\n        var pannable = ref._pannable;\n\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        if (pannable) {\n            var ranges = pannable.move(e);\n\n            if (ranges && !this.trigger(DRAG, { axisRanges: ranges, originalEvent: e })) {\n                pannable.pan();\n            }\n        } else if (state) {\n            var ranges$1 = {};\n            var axes = state.axes;\n\n            for (var i = 0; i < axes.length; i++) {\n                var currentAxis = axes[i];\n                var axisName = currentAxis.options.name;\n                if (axisName) {\n                    var axis = currentAxis.options.vertical ? e.y : e.x;\n                    var delta = axis.startLocation - axis.location;\n\n                    if (delta !== 0) {\n                        ranges$1[currentAxis.options.name] = currentAxis.translateRange(delta);\n                    }\n                }\n            }\n\n            state.axisRanges = ranges$1;\n            this.trigger(DRAG, {\n                axisRanges: ranges$1,\n                originalEvent: e\n            });\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.move(e);\n        }\n    },\n\n    _end: function(e) {\n        if (this._stopChartHandlers(e)) {\n            return;\n        }\n\n        var pannable = this._pannable;\n        if (pannable && pannable.end(e)) {\n            this.surface.resumeTracking();\n            this.trigger(DRAG_END, {\n                axisRanges: axisRanges(this._plotArea.axes),\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this.chartService.panning = false;\n        } else {\n            this._endNavigation(e, DRAG_END);\n        }\n\n        if (this._zoomSelection) {\n            var ranges = this._zoomSelection.end(e);\n            if (ranges && !this.trigger(ZOOM, { axisRanges: ranges, originalEvent: e })) {\n                this._zoomSelection.zoom();\n                this.trigger(ZOOM_END, { axisRanges: ranges, originalEvent: e });\n            }\n        }\n    },\n\n    _stopChartHandlers: function(e) {\n        var selections = this._selections || [];\n        if (!selections.length) {\n            return false;\n        }\n\n        var coords = this._eventCoordinates(e);\n        var pane = this._plotArea.paneByPoint(coords);\n        if (pane) {\n            for (var idx = 0; idx < selections.length; idx++) {\n                if (selections[idx].onPane(pane)) {\n                    return true;\n                }\n            }\n        }\n    },\n\n    _mousewheelZoomRate: function() {\n        var zoomable = this.options.zoomable;\n        var mousewheel = (zoomable || {}).mousewheel || {};\n        return valueOrDefault(mousewheel.rate, MOUSEWHEEL_ZOOM_RATE);\n    },\n\n    _mousewheel: function(e) {\n        var this$1$1 = this;\n\n        var delta = dataviz.mousewheelDelta(e);\n        var mousewheelZoom = this._mousewheelZoom;\n        var coords = this._eventCoordinates(e);\n\n        if (this._stopChartHandlers(e) || !this._plotArea.backgroundContainsPoint(coords)) {\n            return;\n        }\n\n        if (mousewheelZoom) {\n            var args = { delta: delta, axisRanges: axisRanges(this._plotArea.axes), originalEvent: e };\n            if (this._zooming || !this.trigger(ZOOM_START, args)) {\n                e.preventDefault();\n\n                if (!this._zooming) {\n                    this._unsetActivePoint();\n                    this._clearFocusedElement();\n                    this.surface.suspendTracking();\n                    this._zooming = true;\n                }\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                args.axisRanges = mousewheelZoom.updateRanges(delta, coords);\n                if (args.axisRanges && !this.trigger(ZOOM, args)) {\n                    mousewheelZoom.zoom();\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1.trigger(ZOOM_END, args);\n                    this$1$1._zooming = false;\n                    if (this$1$1.surface) {\n                        this$1$1.surface.resumeTracking();\n                    }\n                }, MOUSEWHEEL_DELAY);\n            }\n        } else {\n            var state = this._navState;\n            if (!state) {\n                var prevented = this._startNavigation(e, coords, ZOOM_START);\n                if (!prevented) {\n                    state = this._navState;\n                }\n            }\n\n            if (state) {\n                var totalDelta = state.totalDelta || delta;\n                state.totalDelta = totalDelta + delta;\n\n                var axes = this._navState.axes;\n                var ranges = {};\n\n                for (var i = 0; i < axes.length; i++) {\n                    var currentAxis = axes[i];\n                    var axisName = currentAxis.options.name;\n                    if (axisName) {\n                        ranges[axisName] = currentAxis.scaleRange(-totalDelta * this$1$1._mousewheelZoomRate(), coords);\n                    }\n                }\n\n                this.trigger(ZOOM, {\n                    delta: delta,\n                    axisRanges: ranges,\n                    originalEvent: e\n                });\n\n                if (this._mwTimeout) {\n                    clearTimeout(this._mwTimeout);\n                }\n\n                this._mwTimeout = setTimeout(function () {\n                    this$1$1._endNavigation(e, ZOOM_END);\n                }, MOUSEWHEEL_DELAY);\n            }\n        }\n    },\n\n    _startNavigation: function(e, coords, chartEvent) {\n        var plotArea = this._model._plotArea;\n        var pane = plotArea.findPointPane(coords);\n        var axes = plotArea.axes.slice(0);\n\n        if (!pane) {\n            return;\n        }\n\n        var ranges = axisRanges(axes);\n\n        var prevented = this.trigger(chartEvent, {\n            axisRanges: ranges,\n            originalEvent: e\n        });\n\n        if (prevented) {\n            this._cancelDomEvents();\n        } else {\n            this._suppressHover = true;\n            this._unsetActivePoint();\n            this._clearFocusedElement();\n            this._navState = {\n                axisRanges: ranges,\n                pane: pane,\n                axes: axes\n            };\n        }\n    },\n\n    _endNavigation: function(e, chartEvent) {\n        if (this._navState) {\n            this.trigger(chartEvent, {\n                axisRanges: this._navState.axisRanges,\n                originalEvent: e\n            });\n            this._suppressHover = false;\n            this._navState = null;\n        }\n    },\n\n    _getChartElement: function(e, match) {\n        var element = this.surface.eventTarget(e);\n        if (element) {\n            return this._drawingChartElement(element, e, match);\n        }\n    },\n\n    _drawingChartElement: function(element, e, match) {\n        var current = element;\n        var chartElement;\n        while (current && !chartElement) {\n            chartElement = current.chartElement;\n            current = current.parent;\n        }\n\n        if (chartElement) {\n            if (chartElement.aliasFor) {\n                chartElement = chartElement.aliasFor(e, this._eventCoordinates(e));\n            }\n\n            if (match) {\n                chartElement = chartElement.closest(match);\n                if (chartElement && chartElement.aliasFor) {\n                    chartElement = chartElement.aliasFor();\n                }\n            }\n\n            return chartElement;\n        }\n    },\n\n    _eventCoordinates: function(e) {\n        var coordinates = dataviz.eventCoordinates(e);\n        return this._toModelCoordinates(coordinates.x, coordinates.y);\n    },\n\n    _elementPadding: function() {\n        if (!this._padding) {\n            var ref = elementStyles(this.element, [ \"paddingLeft\", \"paddingTop\" ]);\n            var paddingLeft = ref.paddingLeft;\n            var paddingTop = ref.paddingTop;\n            this._padding = {\n                top: paddingTop,\n                left: paddingLeft\n            };\n        }\n\n        return this._padding;\n    },\n\n    _toDocumentCoordinates: function(point) {\n        var padding = this._elementPadding();\n        var offset = dataviz.elementOffset(this.element);\n\n        return {\n            left: round(point.x + padding.left + offset.left),\n            top: round(point.y + padding.top + offset.top)\n        };\n    },\n\n    _toModelCoordinates: function(clientX, clientY) {\n        var element = this.element;\n        var offset = dataviz.elementOffset(element);\n        var padding = this._elementPadding();\n        var inverseTransform = dataviz.elementScale(element).invert();\n        var point = new GeometryPoint(\n            clientX - offset.left - padding.left,\n            clientY - offset.top - padding.top\n        ).transform(inverseTransform);\n\n        return new Point(point.x, point.y);\n    },\n\n    _tap: function(e) {\n        var this$1$1 = this;\n\n        var drawingElement = this.surface.eventTarget(e);\n        var element = this._drawingChartElement(drawingElement, e);\n        var sharedTooltip = this._sharedTooltip();\n\n        if (!this._startHover(drawingElement, e) && !sharedTooltip) {\n            this._unsetActivePoint();\n        }\n\n        if (sharedTooltip) {\n            this._trackSharedTooltip(this._eventCoordinates(e), e, true);\n        }\n\n        this._propagateClick(element, e);\n\n        //part of fix for hover issue on windows touch\n        this.handlingTap = true;\n        setTimeout(function () {\n            this$1$1.handlingTap = false;\n        }, 0);\n    },\n\n    _click: function(e) {\n        var element = this._getChartElement(e);\n        this._propagateClick(element, e);\n    },\n\n    _propagateClick: function(element, e) {\n        var this$1$1 = this;\n\n        var current = element;\n        while (current) {\n            if (current.click) {\n                current.click(this$1$1, e);\n            }\n\n            current = current.parent;\n        }\n    },\n\n    _isLegendBeforeChart: function() {\n        var ref = this;\n        var legendPosition = ref.options.legend.position;\n        var legend = ref._legend;\n\n        return legend && legend.hasItems() && (legendPosition === TOP || legendPosition === LEFT);\n    },\n\n    _focus: function() {\n        if (!this._preventInitialPointFocus) {\n            if (this._isLegendBeforeChart()) {\n                this._focusFirstLegendItem();\n            } else {\n                this._focusFirstPoint();\n            }\n        }\n\n        this._preventInitialPointFocus = false;\n    },\n\n    _keydown: function(e) {\n        var ref = this;\n        var ref_focusState = ref._focusState;\n        var legendInFocus = ref_focusState.legendInFocus;\n        var focusedElement = ref_focusState.focusedElement;\n        var legend = ref._legend;\n\n        if (e.key === datavizConstants.TAB) {\n            this._clearFocusedElement();\n            var isLegendBeforeChart = this._isLegendBeforeChart();\n\n            if (legendInFocus && isLegendBeforeChart !== e.shiftKey) {\n                this._navigatePoints(e);\n            } else if (!legendInFocus && isLegendBeforeChart === e.shiftKey && legend.hasItems()) {\n                this._navigateLegend(e);\n            }\n        } else if (e.key === datavizConstants.ESCAPE) {\n            if (focusedElement) {\n                e.stopPropagation();\n            }\n\n            if (this._tooltip && this._tooltip.visible) {\n                this._hideTooltip();\n            } else {\n                this._blur();\n            }\n        } else if (e.key === datavizConstants.ENTER) {\n            if (focusedElement) {\n                this._focusState.preserveHighlight = true;\n                this._propagateClick(focusedElement, e);\n                this._focusElement(focusedElement);\n            }\n        } else if (!legendInFocus) {\n            this._navigatePoints(e);\n        } else {\n            this._navigateLegend(e);\n        }\n    },\n\n    _navigatePoints: function(e) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var focusState = ref._focusState;\n        var plotArea = ref._plotArea;\n\n        focusState.legendInFocus = false;\n\n        if (!focusState.focusedElement) {\n            this._focusFirstPoint();\n            e.preventDefault();\n            return;\n        }\n\n        var moveFocus = function (point) {\n            focusState.focusedPoint = point;\n\n            this$1$1._focusElement(focusState.focusedPoint);\n            this$1$1._displayTooltip(point);\n            e.preventDefault();\n        };\n\n        switch (e.key) {\n            case datavizConstants.ARROW_RIGHT:\n                moveFocus(plotArea.getPointToTheRight(focusState.focusedPoint));\n                break;\n            case datavizConstants.ARROW_LEFT:\n                moveFocus(plotArea.getPointToTheLeft(focusState.focusedPoint));\n                break;\n            case datavizConstants.ARROW_DOWN:\n                moveFocus(plotArea.getPointBelow(focusState.focusedPoint));\n                break;\n            case datavizConstants.ARROW_UP:\n                moveFocus(plotArea.getPointAbove(focusState.focusedPoint));\n                break;\n            default:\n                break;\n        }\n    },\n\n    _navigateLegend: function(e) {\n        var this$1$1 = this;\n\n        var ref = this;\n        var focusState = ref._focusState;\n        var legend = ref._legend;\n        var rtl = ref.chartService.rtl;\n\n        focusState.legendInFocus = true;\n\n        if (!focusState.focusedElement) {\n            this._focusFirstLegendItem();\n            e.preventDefault();\n            return;\n        }\n\n        var itemsLength = legend.getItems().length;\n        var moveFocus = function (cycleFunc) {\n            focusState.focusedLegendItemIndex = cycleFunc(\n                focusState.focusedLegendItemIndex,\n                itemsLength\n            );\n            this$1$1._focusElement(this$1$1._getFocusedLegendItem());\n            e.preventDefault();\n        };\n\n        switch (e.key) {\n            case datavizConstants.ARROW_UP:\n            case datavizConstants.ARROW_LEFT:\n                moveFocus(rtl ? dataviz.cycleUp : dataviz.cycleDown);\n                break;\n            case datavizConstants.ARROW_DOWN:\n            case datavizConstants.ARROW_RIGHT:\n                moveFocus(rtl ? dataviz.cycleDown : dataviz.cycleUp);\n                break;\n            default:\n                break;\n        }\n    },\n\n    _focusFirstPoint: function() {\n        var point = this._focusState.focusedPoint = this._plotArea.getFirstPoint();\n\n        if (point) {\n            this._focusElement(point);\n            this._displayTooltip(point);\n        }\n    },\n\n    _hasFocus: function() {\n        return this.element.ownerDocument.activeElement === this.element;\n    },\n\n    _mousedown: function() {\n        if (!this._hasFocus()) {\n            this._preventInitialPointFocus = true;\n        }\n    },\n\n    _focusChart: function() {\n        if (!this._hasFocus()) {\n            this._preventInitialPointFocus = true;\n            this.element.focus();\n        }\n    },\n\n    _focusPoint: function(point) {\n        this._focusState.focusedPoint = point;\n\n        this._focusChart();\n\n        this._focusElement(point, true);\n    },\n\n    _focusFirstLegendItem: function() {\n        var ref = this;\n        var focusState = ref._focusState;\n\n        focusState.focusedLegendItemIndex = 0;\n        this._focusElement(this._getFocusedLegendItem());\n        focusState.legendInFocus = true;\n\n        this._hideTooltip();\n    },\n\n    _focusLegendItem: function(args) {\n        var ref = this;\n        var focusState = ref._focusState;\n\n        focusState.focusedLegendItemIndex = this._legend\n            .getItems()\n            .findIndex(function (x) { return x.options.series.index === args.seriesIndex\n                && x.options.pointIndex === args.pointIndex; });\n\n        focusState.legendInFocus = true;\n\n        this._focusChart();\n\n        this._focusElement(this._getFocusedLegendItem(), true);\n    },\n\n    _getFocusedLegendItem: function() {\n        var ref = this;\n        var focusState = ref._focusState;\n        var legend = ref._legend;\n\n        return legend.getItems()[focusState.focusedLegendItemIndex];\n    },\n\n    _focusElement: function(element, omitHighlight) {\n        var ref = this;\n        var focusState = ref._focusState;\n\n        this._clearFocusedElement();\n\n        if (!element) {\n            return;\n        }\n\n        focusState.focusedElement = element;\n\n        this._setElementActiveDescendant(element);\n\n        if (!omitHighlight) {\n            element.focusVisual();\n\n            if (focusState.legendInFocus) {\n                var options = element.options;\n\n                this._showSeriesInactiveOpacity(options.series.index, options.pointIndex);\n            } else {\n                this._showInactiveOpacity(element);\n            }\n        }\n    },\n\n    _clearFocusedElement: function() {\n        var ref = this;\n        var focusState = ref._focusState;\n\n        if (!focusState) {\n            return;\n        }\n\n        if (focusState.focusedElement) {\n            focusState.focusedElement.clearFocusFromVisual();\n            this._clearElementActiveDescendant();\n        }\n\n        focusState.focusedElement = null;\n    },\n\n    _setElementActiveDescendant: function(element) {\n        if (this.options.renderAs === \"canvas\") {\n            this._pseudoFocusedElement = this._createPseudoFocusedElement(element);\n            this.element.append(this._pseudoFocusedElement);\n        }\n\n        this.element.setAttribute(datavizConstants.ARIA_ACTIVE_DESCENDANT, element._id);\n    },\n\n    _clearElementActiveDescendant: function() {\n        if (this._pseudoFocusedElement) {\n            this._pseudoFocusedElement.remove();\n            this._pseudoFocusedElement = null;\n        }\n\n        this.element.removeAttribute(datavizConstants.ARIA_ACTIVE_DESCENDANT);\n    },\n\n    _createPseudoFocusedElement: function(element) {\n        var pseudoElement = document.createElement(\"div\");\n        var accessibilityOptions = element.options.accessibility;\n\n        pseudoElement.id = element._id;\n        pseudoElement.setAttribute(\"aria-label\", element.getAriaLabelText());\n        pseudoElement.setAttribute(\"role\", accessibilityOptions.role);\n        pseudoElement.setAttribute(\"aria-roledescription\", accessibilityOptions.ariaRoleDescription);\n\n        var checked = accessibilityOptions.ariaChecked;\n        if (defined(checked)) {\n            pseudoElement.setAttribute(\"aria-checked\", checked);\n        }\n\n        return pseudoElement;\n    },\n\n    _blur: function() {\n        this._focusState.legendInFocus = false;\n        this._clearFocusedElement();\n        this._hideInactiveOpacity();\n    },\n\n    _startHover: function(element, e) {\n        if (this._suppressHover) {\n            return false;\n        }\n\n        var point = this._drawingChartElement(element, e, function(element) {\n            return (element.hover || element.over) && !(element instanceof PlotAreaBase);\n        });\n\n        var activePoint = this._activePoint;\n\n        this._updateHoveredPoint(point, e);\n\n        if (point && activePoint !== point && point.hover) {\n            this._activePoint = point;\n\n            if (!this._sharedTooltip() && !point.hover(this, e)) {\n                this._displayTooltip(point);\n\n                this._showInactiveOpacity(point);\n            }\n        }\n\n        return point;\n    },\n\n    _displayTooltip: function(point) {\n        var tooltipOptions = deepExtend({}, this.options.tooltip, point.options.tooltip);\n        if (tooltipOptions.visible) {\n            this._tooltip.show(point);\n        }\n    },\n\n    _hideTooltip: function() {\n        if (this._tooltip) {\n            this._tooltip.hide();\n        }\n    },\n\n    _displayInactiveOpacity: function(activePoint, multipleSeries, highlightPoints) {\n        var chartInstance = this._activeChartInstance = this._chartInstanceFromPoint(activePoint);\n        if (!chartInstance) {\n            return;\n        }\n\n        if (multipleSeries) {\n            this._updateSeriesOpacity(activePoint);\n            this._applySeriesOpacity(chartInstance.children, null, true);\n            this._applySeriesOpacity(chartInstance.children, activePoint.series);\n            this._highlight.show(highlightPoints || activePoint);\n        } else {\n            var inactivePoints;\n\n            if (!chartInstance.supportsPointInactiveOpacity()) {\n                this._highlight.show(activePoint);\n                return;\n            }\n\n            inactivePoints = this._getInactivePoints(activePoint, chartInstance);\n\n            if (inactivePoints && inactivePoints.length) {\n                this._highlight.show(inactivePoints, 1 - this._getInactiveOpacityForSeries(activePoint.series));\n            }\n        }\n    },\n\n    _getInactivePoints: function(activePoint, chartInstance) {\n        var allPoints = this._getAllPointsOfType(chartInstance, activePoint.constructor);\n\n        return allPoints.filter(function (point) { return point !== activePoint; });\n    },\n\n    _getAllPointsOfType: function(container, type) {\n        var this$1$1 = this;\n\n        var points = [];\n\n        for (var i = 0; i < container.children.length; i++) {\n            var element = container.children[i];\n\n            if (element.constructor === type) {\n                points.push(element);\n            } else if (element.children && element.children.length) {\n                points = points.concat(this$1$1._getAllPointsOfType(element, type));\n            }\n        }\n\n        return points;\n    },\n\n    _updateHoveredPoint: function(point, e) {\n        var hoveredPoint = this._hoveredPoint;\n\n        if (hoveredPoint && hoveredPoint !== point) {\n            hoveredPoint.out(this, e);\n            this._hoveredPoint = null;\n        }\n\n        if (point && hoveredPoint !== point && point.over) {\n            this._hoveredPoint = point;\n            point.over(this, e);\n        }\n    },\n\n    _updateDrilldownPoint: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var ref = SeriesBinder.current.bindPoint(point.series, null, point.dataItem);\n        var fields = ref.fields;\n        if (fields.drilldown) {\n            this._drilldownState = { cursor: this.element.style.cursor };\n            this.element.style.cursor = 'pointer';\n        }\n    },\n\n    _resetDrilldownPoint: function() {\n        if (this._drilldownState) {\n            this.element.style.cursor = this._drilldownState.cursor;\n            this._drilldownState = null;\n        }\n    },\n\n    _startDrilldown: function(point) {\n        if (!point || !point.series) {\n            return;\n        }\n\n        var series = point.series;\n        var ref = SeriesBinder.current.bindPoint(series, null, point.dataItem);\n        var fields = ref.fields;\n        var value = fields.drilldown;\n        if (value) {\n            var args = { series: series, point: point, value: value, sender: this };\n            this.trigger(DRILLDOWN, args);\n        }\n    },\n\n    _updateSeriesOpacity: function(point, resetOpacity) {\n        var this$1$1 = this;\n\n        var plotArea = this._plotArea;\n        var length = plotArea.series.length;\n\n        for (var i = 0; i < length; i++) {\n            var currSeries = plotArea.series[i];\n            var defaultOpacity = this$1$1._getDefaultOpacityForSeries(currSeries);\n            var inactiveOpacity = this$1$1._getInactiveOpacityForSeries(currSeries);\n\n            if (!resetOpacity && currSeries !== point.series) {\n                currSeries.defaultOpacity = defaultOpacity;\n                currSeries.opacity = inactiveOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = inactiveOpacity;\n                }\n            } else {\n                currSeries.opacity = defaultOpacity;\n\n                if (currSeries.line) {\n                    currSeries.line.opacity = defaultOpacity;\n                }\n            }\n        }\n    },\n\n    _applySeriesOpacity: function(elements, activeSeries, reset, series) {\n        var this$1$1 = this;\n\n        for (var i = 0; i < elements.length; i++) {\n            var element = elements[i];\n            var currSeries = element.series || series;\n            var shouldHighlight = currSeries && (currSeries.highlight || {}).visible;\n\n            if (shouldHighlight && element.visual) {\n                var opacity = series ? series.opacity : element.series.opacity;\n                if (currSeries !== activeSeries || reset) {\n                    element.visual.opacity(reset ? 1 : opacity);\n                }\n            }\n\n            if (element.children && element.children.length) {\n                this$1$1._applySeriesOpacity(element.children, activeSeries, reset, element.series);\n            }\n        }\n    },\n\n    _chartInstanceFromPoint: function(point) {\n        var chartInstance = point.parent;\n\n        while (chartInstance && !chartInstance.plotArea) {\n            chartInstance = chartInstance.parent;\n        }\n\n        return chartInstance;\n    },\n\n    _showInactiveOpacity: function(point) {\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n\n        if (hasInactiveOpacity) {\n            this._displayInactiveOpacity(point, multipleSeries);\n        } else {\n            this._highlight.show(point);\n        }\n    },\n\n    _hideInactiveOpacity: function(point) {\n        var multipleSeries = this._plotArea.series.length > 1;\n        var hasInactiveOpacity = this._hasInactiveOpacity();\n        if (hasInactiveOpacity) {\n            if (multipleSeries && this._activeChartInstance) {\n                this._updateSeriesOpacity(point, true);\n                this._applySeriesOpacity(this._activeChartInstance.children, null, true);\n                this._activeChartInstance = null;\n            }\n            this._highlight && this._highlight.hide();\n            this._activePoint = null;\n        }\n    },\n\n    _hasInactiveOpacity: function() {\n        var hasDefaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity !== undefined;\n        var hasInactiveOpacity = this.options.series.filter(function (s) { return s.highlight.inactiveOpacity !== undefined; } ).length > 0;\n        return hasDefaultInactiveOpacity || hasInactiveOpacity;\n    },\n\n    _getInactiveOpacityForSeries: function(series) {\n        var defaultInactiveOpacity = this.options.seriesDefaults.highlight.inactiveOpacity;\n        var seriesInactiveOpacity = series.highlight.inactiveOpacity;\n        return seriesInactiveOpacity || defaultInactiveOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _getDefaultOpacityForSeries: function(series) {\n        return series.defaultOpacity || series.opacity || datavizConstants.DEFAULT_SERIES_OPACITY;\n    },\n\n    _mouseover: function(e) {\n        var point = this._startHover(e.element, e.originalEvent);\n\n        if (point && point.tooltipTracking && !this._mouseMoveTrackHandler && !this._sharedTooltip()) {\n            this._mouseMoveTrackHandler = this._mouseMoveTracking.bind(this);\n            var obj;\n            bindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n        }\n    },\n\n    _mouseMoveTracking: function(e) {\n        var ref = this;\n        var options = ref.options;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n        var point = ref._activePoint;\n        var coords = this._eventCoordinates(e);\n\n        if (this._plotArea.box.containsPoint(coords)) {\n            if (point && point.tooltipTracking && point.series && point.parent.getNearestPoint) {\n                var seriesPoint = point.parent.getNearestPoint(coords.x, coords.y, point.seriesIx);\n                if (seriesPoint && seriesPoint !== point) {\n                    this._activePoint = seriesPoint;\n\n                    if (!seriesPoint.hover(this, e)) {\n                        var tooltipOptions = deepExtend({}, options.tooltip, seriesPoint.options.tooltip);\n                        if (tooltipOptions.visible) {\n                            tooltip.show(seriesPoint);\n                        }\n\n                        highlight.show(seriesPoint);\n                    }\n                }\n            }\n        } else {\n            var obj;\n            unbindEvents(document, ( obj = {}, obj[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj ));\n            this._unsetActivePoint();\n            this._clearFocusedElement();\n            this._mouseMoveTrackHandler = null;\n\n            this._hideInactiveOpacity(point);\n        }\n    },\n\n    _mousemove: function(e) {\n        var coords = this._eventCoordinates(e);\n        var plotArea = this._plotArea;\n\n        this._trackCrosshairs(coords);\n\n        if (plotArea.hover) {\n            var overPlotArea = plotArea.backgroundContainsPoint(coords);\n            if (overPlotArea) {\n                this._plotAreaHovered = true;\n                this._plotArea.hover(this, e);\n            } else if (this._plotAreaHovered && !overPlotArea) {\n                this._plotAreaHovered = false;\n                this.trigger(PLOT_AREA_LEAVE);\n            }\n        }\n\n        if (this._sharedTooltip()) {\n            this._trackSharedTooltip(coords, e);\n        }\n    },\n\n    _trackCrosshairs: function(coords) {\n        var crosshairs = this._plotArea.crosshairs;\n\n        for (var i = 0; i < crosshairs.length; i++) {\n            var current = crosshairs[i];\n\n            if (current.box.containsPoint(coords)) {\n                current.showAt(coords);\n            } else {\n                current.hide();\n            }\n        }\n    },\n\n    _trackSharedTooltip: function(coords, e, toggle) {\n        if (this._suppressHover) {\n            return;\n        }\n\n        var ref = this;\n        var tooltipOptions = ref.options.tooltip;\n        var plotArea = ref._plotArea;\n        var categoryAxis = ref._plotArea.categoryAxis;\n        var tooltip = ref._tooltip;\n        var highlight = ref._highlight;\n\n        if (plotArea.backgroundContainsPoint(coords)) {\n            var index = categoryAxis.pointCategoryIndex(coords);\n            if (index !== this._tooltipCategoryIx || (!this._sharedHighlight && toggle)) {\n                var points = plotArea.pointsByCategoryIndex(index);\n                var pointArgs = points.map(function(point) {\n                    return point.eventArgs(e);\n                });\n                var hoverArgs = pointArgs[0] || {};\n                hoverArgs.categoryPoints = pointArgs;\n\n                if (points.length > 0 && !this.trigger(SERIES_HOVER, hoverArgs)) {\n                    if (tooltipOptions.visible) {\n                        tooltip.showAt(points, coords);\n                    }\n\n                    highlight.show(points);\n\n                    this._sharedHighlight = true;\n                } else {\n                    tooltip.hide();\n                }\n\n                this._tooltipCategoryIx = index;\n            } else if (toggle && this._sharedHighlight) {\n                highlight.hide();\n                tooltip.hide();\n                this._sharedHighlight = false;\n            }\n        } else if (this._sharedHighlight) {\n            highlight.hide();\n            tooltip.hide();\n            this._tooltipCategoryIx = null;\n            this._sharedHighlight = false;\n        }\n    },\n\n    hideElements: function(options) {\n        var plotArea = this._plotArea;\n        this._mousemove.cancel();\n\n        plotArea.hideCrosshairs();\n\n        this._unsetActivePoint(options);\n    },\n\n    _unsetActivePoint: function(options) {\n        var ref = this;\n        var highlight = ref._highlight;\n\n        this._activePoint = null;\n        this._hoveredPoint = null;\n\n        if (!options || !options.keepTooltipOpen) {\n            this._hideTooltip();\n        }\n\n        this._tooltipCategoryIx = null;\n        this._sharedHighlight = false;\n\n        if (highlight) {\n            highlight.hide();\n        }\n    },\n\n    _deferRedraw: function() {\n        this._redraw();\n    },\n\n    _clearRedrawTimeout: function() {\n        if (this._redrawTimeout) {\n            clearInterval(this._redrawTimeout);\n            this._redrawTimeout = null;\n        }\n    },\n\n    bindCategories: function() {\n        var this$1$1 = this;\n\n        var options = this.options;\n        var definitions = [].concat(options.categoryAxis);\n\n        for (var axisIx = 0; axisIx < definitions.length; axisIx++) {\n            var axis = definitions[axisIx];\n            if (axis.autoBind !== false) {\n                this$1$1.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        }\n    },\n\n    bindCategoryAxisFromSeries: function(axis, axisIx) {\n        var this$1$1 = this;\n\n        var uniqueCategories = new Set();\n        var seriesOnAxis = this.options.series.filter(function (series) { return series.categoryAxis === axis.name || (!series.categoryAxis && axisIx === 0); });\n        var hasCategoryBinding = seriesOnAxis.some(function (series) { return Boolean(series.categoryField); });\n        var seriesWithData = seriesOnAxis.filter(function (series) { return series.data && series.data.length > 0; });\n        var categorySamples = seriesWithData.map(function (series) { return SeriesBinder.current.bindPoint(series, 0).fields.category; });\n        var dateAxis = categorySamples.reduce(function (result, firstCategory) { return result || isDateAxis(axis, firstCategory); }, false);\n        var seriesWithBinding = seriesWithData.filter(function (series, seriesIx) { return series.categoryField || defined(categorySamples[seriesIx]); });\n\n        seriesWithBinding.forEach(function (series) { return series.data.forEach(function (row, index) {\n            var category = SeriesBinder.current.bindPoint(series, index).fields.category;\n            if (dateAxis) {\n                var date = parseDateCategory(category, row, this$1$1.chartService.intl);\n                category = date ? date.getTime() : undefined;\n            }\n\n            uniqueCategories.add(category);\n        }); });\n\n        if (uniqueCategories.size > 0) {\n            var categories = Array.from(uniqueCategories.values());\n            if (dateAxis) {\n                categories = categories.sort().map(function (time) { return time && new Date(time); });\n            }\n\n            axis.categories = categories;\n        } else if (hasCategoryBinding) {\n            axis.categories = [];\n        }\n    },\n\n    _isBindable: function(series) {\n        var valueFields = SeriesBinder.current.valueFields(series);\n        var result = true;\n\n        for (var i = 0; i < valueFields.length; i++) {\n            var field = valueFields[i];\n            if (field === VALUE) {\n                field = \"field\";\n            } else {\n                field = field + \"Field\";\n            }\n\n            if (!defined(series[field])) {\n                result = false;\n                break;\n            }\n        }\n\n        return result;\n    },\n\n    _noTransitionsRedraw: function() {\n        var options = this.options;\n        var transitionsState;\n\n        if (options.transitions !== false) {\n            options.transitions = false;\n            transitionsState = true;\n        }\n\n        this._redraw();\n\n        if (transitionsState) {\n            options.transitions = true;\n        }\n    },\n\n    _legendItemHover: function(seriesIndex, pointIndex) {\n        this._showSeriesInactiveOpacity(seriesIndex, pointIndex);\n    },\n\n    _showSeriesInactiveOpacity: function(seriesIndex, pointIndex) {\n        var ref = this;\n        var plotArea = ref._plotArea;\n        var highlight = ref._highlight;\n        var currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n        var items;\n\n        if (inArray(currentSeries.type, [ PIE, DONUT, FUNNEL, PYRAMID ])) {\n            items = plotArea.findPoint(function(point) {\n                return point.series.index === seriesIndex && point.index === pointIndex;\n            });\n        } else {\n            items = plotArea.pointsBySeriesIndex(seriesIndex);\n        }\n\n        if (this._hasInactiveOpacity() && currentSeries.visible && items) {\n            var multipleSeries = plotArea.series.length > 1;\n            var point = items.length ? items[0] : items;\n\n            this._displayInactiveOpacity(point, multipleSeries, items);\n        } else {\n            highlight.show(items);\n        }\n    },\n\n    _shouldAttachMouseMove: function() {\n        return this._plotArea.crosshairs.length || (this._tooltip && this._sharedTooltip()) || this.requiresHandlers([ PLOT_AREA_HOVER, PLOT_AREA_LEAVE ]);\n    },\n\n    updateMouseMoveHandler: function() {\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ MOUSEMOVE ] = this._mousemove, obj ));\n\n        if (this._shouldAttachMouseMove()) {\n            var obj$1;\n            bindEvents(this.element, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mousemove, obj$1 ));\n        }\n    },\n\n    applyOptions: function(options, theme) {\n        clearMissingValues(this._originalOptions, options);\n        this._originalOptions = deepExtend(this._originalOptions, options);\n        this.options = deepExtend({}, this._originalOptions);\n\n        if (theme) {\n            this._theme = theme;\n            this.chartService.theme = theme;\n        }\n        this._initTheme(this.options, this._theme);\n\n        this._toggleDragZoomEvents();\n    },\n\n    setOptions: function(options, theme) {\n        this.applyOptions(options, theme);\n        this.bindCategories();\n        this.redraw();\n        this.updateMouseMoveHandler();\n    },\n\n    setDirection: function(rtl) {\n        this.chartService.rtl = Boolean(rtl);\n        if (this.surface && this.surface.type === 'svg') {\n            this._destroySurface();\n        }\n    },\n\n    setIntlService: function(intl) {\n        this.chartService.intl = intl;\n    },\n\n    noTransitionsRedraw: function() {\n        this._noTransitionsRedraw();\n    },\n\n    destroy: function() {\n        this._destroyed = true;\n\n        var obj;\n        unbindEvents(this.element, ( obj = {}, obj[ CONTEXTMENU ] = this._clickHandler, obj[ MOUSEWHEEL ] = this._mousewheelHandler, obj[ MOUSEMOVE ] = this._mousemove, obj[ MOUSELEAVE ] = this._mouseleaveHandler, obj[ KEYDOWN ] = this._keydownHandler, obj[ FOCUS ] = this._focusHandler, obj[ BLUR] = this._blurHandler, obj ));\n\n        if (this.domEvents) {\n            this.domEvents.destroy();\n            delete this.domEvents;\n        }\n\n        if (this._mouseMoveTrackHandler) {\n            var obj$1;\n            unbindEvents(document, ( obj$1 = {}, obj$1[ MOUSEMOVE ] = this._mouseMoveTrackHandler, obj$1 ));\n        }\n\n        this._focusState = null;\n\n        this._destroyView();\n\n        this._destroySurface();\n\n        this._clearRedrawTimeout();\n    },\n\n    _destroySurface: function() {\n        var surface = this.surface;\n        if (surface) {\n            surface.unbind(\"mouseenter\", this._surfaceMouseenterHandler);\n            surface.unbind(\"mouseleave\", this._surfaceMouseleaveHandler);\n            surface.destroy();\n\n            this.surface = null;\n        }\n    },\n\n    _destroySelections: function() {\n        var selections = this._selections;\n\n        if (selections) {\n            while (selections.length > 0) {\n                selections.shift().destroy();\n            }\n        }\n    },\n\n    _destroyView: function() {\n        var model = this._model;\n\n        if (model) {\n            model.destroy();\n            this._model = null;\n        }\n\n        this._unsetActivePoint();\n        this._clearFocusedElement();\n        this._resetDrilldownPoint();\n        this._destroySelections();\n\n        if (this._tooltip) {\n            this._tooltip.destroy();\n        }\n\n        if (this._highlight) {\n            this._highlight.destroy();\n        }\n\n        if (this._zoomSelection) {\n            this._zoomSelection.destroy();\n            delete this._zoomSelection;\n        }\n\n        if (this._pannable) {\n            this._pannable.destroy();\n            delete this._pannable;\n        }\n\n        if (this._mousewheelZoom) {\n            this._mousewheelZoom.destroy();\n            delete this._mousewheelZoom;\n        }\n    }\n});\n\nfunction resolveAxisAliases(options) {\n    var aliases = AXIS_NAMES;\n\n    for (var idx = 0; idx < aliases.length; idx++) {\n        var alias = aliases[idx] + \"Axes\";\n        if (options[alias]) {\n            options[aliases[idx] + \"Axis\"] = options[alias];\n            delete options[alias];\n        }\n    }\n}\n\nfunction pointByCategoryName(points, name) {\n    if (points) {\n        for (var idx = 0; idx < points.length; idx++) {\n            if (points[idx].category === name) {\n                return [ points[idx] ];\n            }\n        }\n    }\n}\n\nfunction applyAxisDefaults(options, themeOptions) {\n    var themeAxisDefaults = ((themeOptions || {}).axisDefaults) || {};\n    var axisName, axisDefaults, axes;\n\n    function mapAxisOptions(axisOptions) {\n        var axisColor = (axisOptions || {}).color || axisDefaults.color;\n        var result = deepExtend({},\n            themeAxisDefaults,\n            themeAxisDefaults[axisName],\n            axisDefaults,\n            axisDefaults[axisName], {\n                line: { color: axisColor },\n                labels: { color: axisColor },\n                title: { color: axisColor }\n            },\n            axisOptions\n        );\n\n        delete result[axisName];\n\n        return result;\n    }\n\n    for (var idx = 0; idx < AXIS_NAMES.length; idx++) {\n        axisName = AXIS_NAMES[idx] + \"Axis\";\n        axisDefaults = options.axisDefaults || {};\n        axes = [].concat(options[axisName]);\n\n        axes = axes.map(mapAxisOptions);\n\n        options[axisName] = axes.length > 1 ? axes : axes[0];\n    }\n}\n\nfunction applySeriesDefaults(options, themeOptions) {\n    var series = options.series;\n    var seriesLength = series.length;\n    var seriesDefaults = options.seriesDefaults;\n    var commonDefaults = deepExtend({}, options.seriesDefaults);\n    var themeSeriesDefaults = themeOptions ? deepExtend({}, themeOptions.seriesDefaults) : {};\n    var commonThemeDefaults = deepExtend({}, themeSeriesDefaults);\n\n    cleanupNestedSeriesDefaults(commonDefaults);\n    cleanupNestedSeriesDefaults(commonThemeDefaults);\n\n    for (var i = 0; i < seriesLength; i++) {\n        var seriesType = series[i].type || options.seriesDefaults.type;\n\n        var baseOptions = deepExtend(\n            { data: [] },\n            commonThemeDefaults,\n            themeSeriesDefaults[seriesType],\n            { tooltip: options.tooltip },\n            commonDefaults,\n            seriesDefaults[seriesType]\n        );\n\n        series[i]._defaults = baseOptions;\n        series[i] = deepExtend({}, baseOptions, series[i]);\n        series[i].data = series[i].data || [];\n    }\n}\n\nfunction cleanupNestedSeriesDefaults(seriesDefaults) {\n    delete seriesDefaults.bar;\n    delete seriesDefaults.column;\n    delete seriesDefaults.rangeColumn;\n    delete seriesDefaults.line;\n    delete seriesDefaults.verticalLine;\n    delete seriesDefaults.pie;\n    delete seriesDefaults.donut;\n    delete seriesDefaults.area;\n    delete seriesDefaults.verticalArea;\n    delete seriesDefaults.scatter;\n    delete seriesDefaults.scatterLine;\n    delete seriesDefaults.bubble;\n    delete seriesDefaults.candlestick;\n    delete seriesDefaults.ohlc;\n    delete seriesDefaults.boxPlot;\n    delete seriesDefaults.bullet;\n    delete seriesDefaults.verticalBullet;\n    delete seriesDefaults.polarArea;\n    delete seriesDefaults.polarLine;\n    delete seriesDefaults.radarArea;\n    delete seriesDefaults.radarLine;\n    delete seriesDefaults.waterfall;\n}\n\nfunction axisRanges(axes) {\n    var ranges = {};\n\n    for (var i = 0; i < axes.length; i++) {\n        var axis = axes[i];\n        var axisName = axis.options.name;\n        if (axisName) {\n            ranges[axisName] = axis.range();\n        }\n    }\n\n    return ranges;\n}\n\nvar DATA_FIELDS = [ 'data', 'categories' ];\n\nfunction clearMissingValues(originalOptions, options) {\n    for (var field in options) {\n        if (!inArray(field, DATA_FIELDS) && dataviz.hasOwnProperty(options, field)) {\n            var fieldValue = options[field];\n            var originalValue = originalOptions[field];\n            if (defined(originalValue)) {\n                var nullValue = fieldValue === null;\n                if ((nullValue || !defined(fieldValue))) {\n                    delete originalOptions[field];\n                    if (nullValue) {\n                        delete options[field];\n                    }\n                } else if (originalValue && isObject(fieldValue)) {\n                    if (isObject(originalValue)) {\n                        clearMissingValues(originalValue, fieldValue);\n                    }\n                }\n            }\n        }\n    }\n}\n\nfunction triggerPaneRender(panes) {\n    for (var idx = 0; idx < panes.length; idx++) {\n        panes[idx].notifyRender();\n    }\n}\n\nsetDefaultOptions(Chart, {\n    renderAs: \"\",\n    chartArea: {},\n    legend: {\n        visible: true,\n        labels: {},\n        accessibility: {\n            highlight: {\n                border: {\n                    opacity: 1,\n                    color: BLACK,\n                    width: 2\n                }\n            }\n        }\n    },\n    categoryAxis: {},\n    seriesDefaults: {\n        type: COLUMN,\n        data: [],\n        highlight: {\n            visible: true\n        },\n        labels: {},\n        negativeValues: {\n            visible: false\n        },\n        accessibility: {\n            highlight: {\n                border: {\n                    opacity: 1,\n                    width: 2\n                },\n                zIndex: 200\n            }\n        }\n    },\n    series: [],\n    seriesColors: null,\n    tooltip: {\n        visible: false\n    },\n    transitions: true,\n    valueAxis: {},\n    plotArea: {},\n    title: {},\n    xAxis: {},\n    yAxis: {},\n    panes: [ {} ],\n    pannable: false,\n    zoomable: false\n});\n\nkendo.deepExtend(kendo.dataviz, {\n    constants: constants,\n    Aggregates: Aggregates,\n    AreaChart: AreaChart,\n    AreaSegment: AreaSegment,\n    AxisGroupRangeTracker: AxisGroupRangeTracker,\n    Bar: Bar,\n    BarChart: BarChart,\n    BarLabel: BarLabel,\n    BoxPlotChart: BoxPlotChart,\n    BoxPlot: BoxPlot,\n    BubbleChart: BubbleChart,\n    Bullet: Bullet,\n    BulletChart: BulletChart,\n    CandlestickChart: CandlestickChart,\n    Candlestick: Candlestick,\n    CategoricalChart: CategoricalChart,\n    CategoricalErrorBar: CategoricalErrorBar,\n    CategoricalPlotArea: CategoricalPlotArea,\n    Chart: Chart,\n    ChartContainer: ChartContainer,\n    ClipAnimation: ClipAnimation,\n    ClusterLayout: ClusterLayout,\n    Crosshair: Crosshair,\n    CrosshairTooltip: CrosshairTooltip,\n    DefaultAggregates: DefaultAggregates,\n    DonutChart: DonutChart,\n    DonutPlotArea: DonutPlotArea,\n    DonutSegment: DonutSegment,\n    ErrorBarBase: ErrorBarBase,\n    ErrorRangeCalculator: ErrorRangeCalculator,\n    Highlight: Highlight,\n    SharedTooltip: SharedTooltip,\n    Legend: Legend,\n    LegendItem: LegendItem,\n    LegendLayout: LegendLayout,\n    LineChart: LineChart,\n    LinePoint: LinePoint,\n    LineSegment: LineSegment,\n    Pane: Pane,\n    PieAnimation: PieAnimation,\n    PieChart: PieChart,\n    PieChartMixin: PieChartMixin,\n    PiePlotArea: PiePlotArea,\n    PieSegment: PieSegment,\n    PlotAreaBase: PlotAreaBase,\n    PlotAreaEventsMixin: PlotAreaEventsMixin,\n    PlotAreaFactory: PlotAreaFactory,\n    PointEventsMixin: PointEventsMixin,\n    RangeBar: RangeBar,\n    RangeBarChart: RangeBarChart,\n    RangeAreaPoint: RangeAreaPoint,\n    RangeAreaChart: RangeAreaChart,\n    ScatterChart: ScatterChart,\n    ScatterErrorBar: ScatterErrorBar,\n    ScatterLineChart: ScatterLineChart,\n    Selection: Selection,\n    SeriesAggregator: SeriesAggregator,\n    SeriesBinder: SeriesBinder,\n    SplineSegment: SplineSegment,\n    SplineAreaSegment: SplineAreaSegment,\n    StackWrap: StackWrap,\n    Tooltip: Tooltip,\n    OHLCChart: OHLCChart,\n    OHLCPoint: OHLCPoint,\n    WaterfallChart: WaterfallChart,\n    WaterfallSegment: WaterfallSegment,\n    XYPlotArea: XYPlotArea,\n    MousewheelZoom: MousewheelZoom,\n    ZoomSelection: ZoomSelection,\n    Pannable: Pannable,\n    ChartAxis: ChartAxis,\n    ChartPane: ChartPane,\n    ChartPlotArea: ChartPlotArea,\n    findAxisByName: findAxisByName,\n    anyHasZIndex: anyHasZIndex,\n    appendIfNotNull: appendIfNotNull,\n    areNumbers: areNumbers,\n    bindSegments: bindSegments,\n    categoriesCount: categoriesCount,\n    countNumbers: countNumbers,\n    equalsIgnoreCase: equalsIgnoreCase,\n    evalOptions: evalOptions,\n    filterSeriesByType: filterSeriesByType,\n    parseDateCategory: parseDateCategory,\n    getField: getField,\n    hasGradientOverlay: hasGradientOverlay,\n    hasValue: hasValue,\n    isDateAxis: isDateAxis,\n    segmentVisible: segmentVisible,\n    singleItemOrArray: singleItemOrArray,\n    createOutOfRangePoints: createOutOfRangePoints\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    const kendo = window.kendo;\n    const dataviz = kendo.dataviz;\n    const Widget = kendo.ui.Widget;\n\n    const ChartBreadcrumb = Widget.extend({\n        init: function(element, options) {\n            Widget.fn.init.call(this, element, options);\n\n            if (!options.chart) {\n                throw new Error('ChartBreadcrumb: No Chart instance supplied as `options.chart`');\n            }\n\n            this._attachChartEvents();\n            this._renderBreadcrumb();\n\n            kendo.notify(this, dataviz.ui);\n        },\n\n        events: [],\n\n        options: {\n            name: \"ChartBreadcrumb\",\n            rootItem: {\n                type: 'rootitem',\n                icon: 'home',\n                text: 'Home',\n                showIcon: true\n            }\n        },\n\n        destroy: function() {\n            if (this.breadcrumb) {\n                this.breadcrumb.destroy();\n                this.breadcrumb = null;\n            }\n\n            if (this.chart) {\n                this.chart.unbind('drilldown', this._onChartDrilldown);\n                this.chart.unbind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n                this.chart = null;\n            }\n\n            Widget.fn.destroy.call(this);\n        },\n\n        _attachChartEvents(deferred) {\n            const options = this.options;\n\n            if (typeof options.chart.resetDrilldownLevel === 'function') {\n                this.chart = options.chart;\n            } else if (typeof options.chart === 'string') {\n                this.chart = $(options.chart).getKendoChart() || $('#' + options.chart).getKendoChart();\n\n                if (!this.chart && !deferred) {\n                    setTimeout(() => this._attachChartEvents(true));\n                    return;\n                }\n            } else {\n                throw new Error('ChartBreadcrumb: `options.chart` must be a Chart instance, element ID or a selector');\n            }\n\n            this._onChartDrilldown = this._onChartDrilldown.bind(this);\n            this.chart.bind('drilldown', this._onChartDrilldown);\n\n            this._onChartDrilldownLevelChange = this._onChartDrilldownLevelChange.bind(this);\n            this.chart.bind('drilldownLevelChange', this._onChartDrilldownLevelChange);\n        },\n\n        _renderBreadcrumb: function() {\n            const breadcrumbElement = $('<nav />');\n            this.element.append(breadcrumbElement);\n            this.breadcrumb = new kendo.ui.Breadcrumb(breadcrumbElement, {\n                items: [this.options.rootItem]\n            });\n\n            this.breadcrumb.bind('click', e => this._onBreadcrumbClick(e));\n        },\n\n        _onBreadcrumbClick: function(e) {\n            if (!this.breadcrumb || !this.chart) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            const level = items.findIndex((item) => item === e.item);\n\n            const chart = this.chart;\n            chart.resetDrilldownLevel(level);\n        },\n\n        _onChartDrilldown: function(e) {\n            if (!this.breadcrumb || e.isDefaultPrevented()) {\n                return;\n            }\n\n            this.breadcrumb.items([\n                ...this.breadcrumb.items(),\n                { type: 'item', text: e.point.category }\n            ]);\n        },\n\n        _onChartDrilldownLevelChange: function(e) {\n            if (!this.breadcrumb) {\n                return;\n            }\n\n            let items = this.breadcrumb.items();\n            items = items.slice(0, e.level + 1);\n            this.breadcrumb.items(items);\n        }\n    });\n\n    dataviz.ui.plugin(ChartBreadcrumb);\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n    var NS = \".kendoChart\";\n    var kendo = window.kendo;\n    var Class = kendo.Class;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var dataviz = kendo.dataviz;\n    var constants = dataviz.constants;\n    var KendoChart = dataviz.Chart;\n    var SeriesBinder = dataviz.SeriesBinder;\n    var Widget = kendo.ui.Widget;\n    var DataSource = kendo.data.DataSource;\n    var deepExtend = kendo.deepExtend;\n    var defined = dataviz.defined;\n    var getField = dataviz.getField;\n    var InstanceObserver = dataviz.InstanceObserver;\n    var inArray = dataviz.inArray;\n    var services = dataviz.services;\n    var isArray = Array.isArray;\n    var extend = $.extend;\n    var template = kendo.template;\n    var encode = kendo.htmlEncode;\n\n    var MOUSELEAVE_NS = \"mouseleave\" + NS;\n    var AXIS_LABEL_CLICK = constants.AXIS_LABEL_CLICK;\n    var LEGEND_ITEM_CLICK = constants.LEGEND_ITEM_CLICK;\n    var LEGEND_ITEM_HOVER = constants.LEGEND_ITEM_HOVER;\n    var LEGEND_ITEM_LEAVE = constants.LEGEND_ITEM_LEAVE;\n    var SERIES_CLICK = constants.SERIES_CLICK;\n    var SERIES_HOVER = constants.SERIES_HOVER;\n    var SERIES_OVER = constants.SERIES_OVER;\n    var SERIES_LEAVE = constants.SERIES_LEAVE;\n    var PANE_RENDER = constants.PANE_RENDER;\n    var PLOT_AREA_CLICK = constants.PLOT_AREA_CLICK;\n    var PLOT_AREA_HOVER = constants.PLOT_AREA_HOVER;\n    var PLOT_AREA_LEAVE = constants.PLOT_AREA_LEAVE;\n    var DRAG = constants.DRAG;\n    var DRAG_END = constants.DRAG_END;\n    var DRAG_START = constants.DRAG_START;\n    var DRILLDOWN = constants.DRILLDOWN;\n    var DRILLDOWN_LEVEL_CHANGE = \"drilldownLevelChange\";\n    var ZOOM_START = constants.ZOOM_START;\n    var ZOOM = constants.ZOOM;\n    var ZOOM_END = constants.ZOOM_END;\n    var SELECT_START = constants.SELECT_START;\n    var SELECT = constants.SELECT;\n    var SELECT_END = constants.SELECT_END;\n    var RENDER = constants.RENDER;\n    var NOTE_CLICK = constants.NOTE_CLICK;\n    var NOTE_HOVER = constants.NOTE_HOVER;\n    var NOTE_LEAVE = constants.NOTE_LEAVE;\n    var DOCUMENT_ELEMENT = $(document.documentElement);\n\n    var CHANGE = \"change\";\n    var DATABOUND = \"dataBound\";\n    var LEAVE = \"leave\";\n    var MOUSEDOWN = \"down\";\n\n    var VALUE = constants.VALUE;\n    var PIE = constants.PIE;\n    var DONUT = constants.DONUT;\n    var FUNNEL = constants.FUNNEL;\n\n    var Observable = kendo.Observable;\n    var TOOLTIP_ANIMATION_DURATION = 150;\n    var TOOLTIP_SHOW_DELAY = 100;\n    var TOOLTIP_INVERSE = \"k-chart-tooltip-inverse\";\n    var SHARED_TOOLTIP_CLASS = \"k-chart-shared-tooltip\";\n    var RTL = \"rtl\";\n\n    services.DomEventsBuilder.register({\n        create: function(element, events) {\n             return new kendo.UserEvents(element, deepExtend({\n                 global: true,\n                 multiTouch: true,\n                 fastTap: true\n             }, events));\n        }\n    });\n\n    var ChartInstanceObserver = InstanceObserver.extend({\n        handlerMap: {\n            showTooltip: '_showTooltip',\n            hideTooltip: '_hideTooltip',\n            legendItemClick: '_onLegendItemClick',\n            render: '_onRender',\n            init: '_onInit',\n            drilldown: '_onDrilldown'\n        }\n    });\n\n    var Chart = Widget.extend({\n        init: function(element, userOptions) {\n            var dataSource;\n\n            kendo.destroy(element);\n\n            Widget.fn.init.call(this, element);\n\n            if (userOptions) {\n                dataSource = userOptions.dataSource;\n                delete userOptions.dataSource;\n            }\n\n            this.options = deepExtend({}, this.options, userOptions);\n\n            this.wrapper = this.element;\n            this._attachEvents();\n\n            if (userOptions) {\n                userOptions.dataSource = dataSource;\n            }\n\n            this._seriesVisibility = new SeriesVisibilityState();\n\n            this.bind(this.events, this.options);\n            this._initDataSource(userOptions);\n\n            this._drilldownState = [];\n\n            kendo.notify(this, dataviz.ui);\n\n            if (this._showWatermarkOverlay) {\n                this._showWatermarkOverlay(this.wrapper[0]);\n            }\n        },\n\n        events: [\n            DATABOUND,\n            DRILLDOWN,\n            DRILLDOWN_LEVEL_CHANGE,\n            SERIES_CLICK,\n            SERIES_HOVER,\n            SERIES_OVER,\n            SERIES_LEAVE,\n            AXIS_LABEL_CLICK,\n            LEGEND_ITEM_CLICK,\n            LEGEND_ITEM_HOVER,\n            LEGEND_ITEM_LEAVE,\n            PANE_RENDER,\n            PLOT_AREA_CLICK,\n            PLOT_AREA_HOVER,\n            PLOT_AREA_LEAVE,\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            ZOOM_START,\n            ZOOM,\n            ZOOM_END,\n            SELECT_START,\n            SELECT,\n            SELECT_END,\n            NOTE_CLICK,\n            NOTE_HOVER,\n            NOTE_LEAVE,\n            RENDER\n        ],\n\n        options: {\n            name: \"Chart\",\n            renderAs: \"\",\n            theme: \"sass\",\n            axisDefaults: {},\n            chartArea: {},\n            legend: {},\n            categoryAxis: {},\n            autoBind: true,\n            seriesDefaults: {},\n            series: [],\n            seriesColors: null,\n            tooltip: {},\n            transitions: true,\n            valueAxis: {},\n            plotArea: {},\n            title: {},\n            xAxis: {},\n            yAxis: {},\n            panes: [{}],\n            pannable: false,\n            zoomable: false\n        },\n\n        items: function() {\n            return $();\n        },\n\n        refresh: function() {\n            var chart = this;\n            var instance = chart._instance;\n            instance.applyDefaults(chart.options);\n            instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            chart.trigger(DATABOUND);\n            chart._redraw();\n        },\n\n        getSize: function() {\n            return kendo.dimensions(this.element);\n        },\n\n        redraw: function(paneName) {\n            this._size = null;\n            this._instance.redraw(paneName);\n        },\n\n        setOptions: function(options) {\n            var chart = this,\n                dataSource = options.dataSource;\n\n            delete options.dataSource;\n\n            Widget.fn._setEvents.call(chart, options);\n\n            this._instance.applyOptions(options, this._getThemeOptions(options));\n            this.options = this._instance.options;\n            this._tooltip.setOptions(this.options.tooltip);\n            this._seriesVisibility.setOptions(this.options);\n            this._sourceSeries = null;\n\n            if (dataSource) {\n                chart.setDataSource(dataSource);\n            }\n\n            if (chart._hasDataSource) {\n                chart._onDataChanged();\n            } else {\n                chart._bindCategories();\n                chart.redraw();\n            }\n\n            chart._instance.updateMouseMoveHandler();\n\n        },\n\n        setDataSource: function(dataSource) {\n            var chart = this;\n\n            chart.dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            chart.dataSource = dataSource = DataSource.create(dataSource);\n            chart._hasDataSource = true;\n            chart._hasData = false;\n\n            dataSource.bind(CHANGE, chart._dataChangeHandler);\n\n            if (chart.options.autoBind) {\n                dataSource.fetch();\n            }\n        },\n\n        destroy: function() {\n            var chart = this,\n                dataSource = chart.dataSource;\n\n            chart.element.off(NS);\n\n            if (dataSource) {\n                dataSource.unbind(CHANGE, chart._dataChangeHandler);\n            }\n\n            if (chart._instance) {\n                chart._instance.destroy();\n                delete this._instance;\n            }\n\n            if (this._tooltip) {\n                this._tooltip.destroy();\n                delete this._tooltip;\n            }\n\n            this._destroyCrosshairTooltips();\n\n            Widget.fn.destroy.call(chart);\n        },\n\n        findPaneByName: function(name) {\n            var panes = this._plotArea.panes;\n\n            for (var idx = 0; idx < panes.length; idx++) {\n                if (panes[idx].options.name === name) {\n                    return new ChartPane(this, panes[idx]);\n                }\n            }\n        },\n\n        findPaneByIndex: function(idx) {\n            var panes = this._plotArea.panes;\n            if (panes[idx]) {\n                return new ChartPane(this, panes[idx]);\n            }\n        },\n\n        findSeries: function(callback) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            for (var idx = 0; idx < series.length; idx++) {\n                if (callback(series[idx])) {\n                    return new ChartSeries(this, series[idx]);\n                }\n            }\n        },\n\n        findSeriesByName: function(name) {\n            return this._createSeries({ name: name });\n        },\n\n        findSeriesByIndex: function(index) {\n            return this._createSeries({ index: index });\n        },\n\n        exportVisual: function(options) {\n            var instance = this._instance;\n            if (!instance) {\n                return;\n            }\n\n            var visual;\n\n            //TO DO: support for setting any options. already available in kendo-charts\n            if (options && (options.width || options.height)) {\n                var chartArea = instance.options.chartArea;\n                var originalChartArea = instance._originalOptions.chartArea;\n\n                deepExtend(chartArea, options);\n\n                var model = instance._getModel();\n\n                chartArea.width = originalChartArea.width;\n                chartArea.height = originalChartArea.height;\n\n                model.renderVisual();\n\n                triggerPaneRender(model._plotArea.panes);\n\n                visual = model.visual;\n            } else {\n                visual = instance.exportVisual();\n            }\n\n            return visual;\n        },\n\n        resetDrilldownLevel(level) {\n            level = level || 0;\n            const state = this._drilldownState;\n            if (!state || level < 0 || level > state.length - 1) {\n                return;\n            }\n\n            const args = {\n                level,\n                sender: this\n            };\n            this.trigger(DRILLDOWN_LEVEL_CHANGE, args);\n\n            this.options.series = this._drilldownState[level];\n            this._drilldownState = this._drilldownState.slice(0, level);\n\n            this._bindCategories();\n            this._redraw();\n        },\n\n        _createSeries: function(options) {\n            var seriesOptions = this._seriesOptions(options);\n            if (seriesOptions) {\n                return new ChartSeries(this, seriesOptions);\n            }\n        },\n\n        _seriesOptions: function(options) {\n            var plotArea = this._plotArea;\n            var series = plotArea.srcSeries || plotArea.series;\n            var seriesOptions;\n\n            if (defined(options.index)) {\n                seriesOptions = series[options.index];\n            } else if (defined(options.name)) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (series[idx].name === options.name) {\n                        seriesOptions = series[idx];\n                        break;\n                    }\n                }\n            }\n\n            return seriesOptions;\n        },\n\n        _attachEvents: function() {\n             this.element.on(MOUSELEAVE_NS, this._mouseleave.bind(this));\n        },\n\n        _mouseleave: function(e) {\n            var instance = this._instance;\n            var tooltip = this._tooltip;\n            var target = e.relatedTarget;\n\n            if (!(target && $(target).closest(tooltip.element).length) && instance && !instance.handlingTap) {\n                instance.hideElements({\n                    keepTooltipOpen: !tooltip.options.autoHide\n                });\n            }\n        },\n\n        _getThemeOptions: function(userOptions) {\n            var themeName = (userOptions || {}).theme;\n\n            if (themeName && dataviz.SASS_THEMES.indexOf(themeName.toLowerCase()) !== -1) {\n                return dataviz.autoTheme().chart;\n            }\n\n            if (defined(themeName)) {\n                var themes = dataviz.ui.themes || {};\n                var theme = themes[themeName] || themes[themeName.toLowerCase()] || {};\n                return theme.chart || {};\n            }\n        },\n\n        _initChart: function() {\n            this._createChart(this.options, this._getThemeOptions(this.options));\n            this.options = this._instance.options;\n            this._seriesVisibility.setOptions(this.options);\n        },\n\n        _createChart: function(options, themeOptions) {\n            this._instance = new KendoChart(this.element[0], options, themeOptions, {\n                observer: new ChartInstanceObserver(this),\n                sender: this,\n                rtl: this._isRtl()\n            });\n        },\n\n        _onInit: function(e) {\n            this._instance = e.sender;\n        },\n\n        _initDataSource: function(userOptions) {\n            var chart = this,\n                dataSource = (userOptions || {}).dataSource;\n\n            chart._dataChangeHandler = chart._onDataChanged.bind(chart);\n\n            chart.dataSource = DataSource\n                .create(dataSource)\n                .bind(\"change\", chart._dataChangeHandler);\n\n            chart._bindCategories();\n\n            if (dataSource) {\n                chart._hasDataSource = true;\n            }\n\n            this._initChart();\n            this._initTooltip();\n\n            if (dataSource) {\n                if (chart.options.autoBind) {\n                    chart.dataSource.fetch();\n                }\n            }\n        },\n\n        _destroyCrosshairTooltips: function() {\n            var tooltips = this._crosshairTooltips;\n            if (tooltips) {\n                for (var key in tooltips) {\n                    tooltips[key].destroy();\n                }\n            }\n            this._crosshairTooltips = {};\n        },\n\n        _getCrosshairTooltip: function(name, index) {\n            var tooltips = this._crosshairTooltips = this._crosshairTooltips || {};\n            var key = name + index;\n            var tooltip = tooltips[key];\n            if (!tooltip) {\n                tooltip = tooltips[key] = new CrosshairTooltip(this.element);\n            }\n            return tooltip;\n        },\n\n        _showTooltip: function(e) {\n            if (e.crosshair) {\n                var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                tooltip.show(e);\n            } else if (this._tooltip) {\n                this._tooltip.show(e);\n            }\n        },\n\n        _hideTooltip: function(e) {\n            if (e.crosshair) {\n                 var tooltip = this._getCrosshairTooltip(e.axisName, e.axisIndex);\n                 tooltip.hide();\n            } else if (this._tooltip) {\n                this._tooltip.hide();\n            }\n        },\n\n        _onRender: function(e) {\n            this._destroyCrosshairTooltips();\n            this._copyMembers(e.sender);\n            if (!this._hasDataSource || this._hasData || !this.options.autoBind) {\n                this.trigger(RENDER);\n            }\n        },\n\n        _copyMembers: function(instance) {\n            this.options = instance.options;\n            this._originalOptions = instance._originalOptions;\n            this.surface = instance.surface;\n            this._plotArea = instance._plotArea;\n            this._model = instance._model;\n            this._highlight = instance._highlight;\n            this._selections = instance._selections;\n            this._pannable = instance._pannable;\n            this._zoomSelection = instance._zoomSelection;\n            this._mousewheelZoom = instance._mousewheelZoom;\n        },\n\n        requiresHandlers: function(names) {\n           var events = this._events;\n           for (var idx = 0; idx < names.length; idx++) {\n               if (defined(events[names[idx]])) {\n                   return true;\n               }\n           }\n        },\n\n        _initTooltip: function() {\n            this._tooltip = this._createTooltip();\n\n            this._tooltip.bind(LEAVE, this._tooltipleave.bind(this));\n        },\n\n        _onLegendItemClick: function(e) {\n            if (!this.trigger(LEGEND_ITEM_CLICK, e)) {\n                this._legendItemClick(e.seriesIndex, e.pointIndex);\n            }\n        },\n\n        _legendItemClick: function(seriesIndex, pointIndex) {\n            var chart = this._instance,\n                plotArea = chart._plotArea,\n                currentSeries = (plotArea.srcSeries || plotArea.series)[seriesIndex];\n\n            if (chart._hasInactiveOpacity() && chart._activeChartInstance) {\n                chart._updateSeriesOpacity(null, true);\n                chart._applySeriesOpacity(chart._activeChartInstance.children, null, true);\n                chart._activeChartInstance = null;\n            }\n\n            if ($.inArray(currentSeries.type, [PIE, DONUT, FUNNEL]) >= 0) {\n                var point = currentSeries.data[pointIndex];\n                if (point && defined(point.visible)) {\n                    point.visible = !point.visible;\n                } else {\n                    var pointVisibility = currentSeries.pointVisibility = currentSeries.pointVisibility || {};\n                    var visible = pointVisibility[pointIndex];\n                    pointVisibility[pointIndex] = defined(visible) ? !visible : false;\n                }\n            } else {\n                currentSeries.visible = !currentSeries.visible;\n                this._seriesVisibility.save(currentSeries);\n            }\n\n            chart._noTransitionsRedraw();\n        },\n\n        _createTooltip: function() {\n            return new Tooltip(this.element, extend({}, this.options.tooltip, {\n                rtl: this._isRtl()\n            }));\n        },\n\n        _tooltipleave: function() {\n            if (this._instance) {\n                this._instance.hideElements();\n            }\n        },\n\n        _onDrilldown: function(e) {\n            const { series, value } = e;\n\n            if (series.drilldownSeriesFactory) {\n                const result = series.drilldownSeriesFactory(value);\n\n                if (!result) {\n                    return;\n                } else if (result instanceof Promise) {\n                    result.then((resolved) => this._onDrilldownData(e, resolved));\n                } else {\n                    this._onDrilldownData(e, result);\n                }\n            } else if (typeof value === 'object') {\n                this._onDrilldownData(e, value);\n            }\n        },\n\n        _onDrilldownData: function(e, data) {\n            const drilldownSeries = Object.assign({}, e.series, data);\n            const args = {\n                point: e.point,\n                series: e.series,\n                drilldownSeries,\n                sender: this\n            };\n\n            const prevented = this.trigger(DRILLDOWN, args);\n            if (!prevented) {\n                this._drilldownState.push(this.options.series);\n\n                this.options.series = [drilldownSeries];\n                this._bindCategories();\n                this._redraw();\n            }\n        },\n\n        _bindData: function(e) {\n            var chart = this,\n                options = chart.options,\n                series = chart._sourceSeries || options.series,\n                seriesIx,\n                seriesLength = series.length,\n                data = chart.dataSource.view(),\n                grouped = (chart.dataSource.group() || []).length > 0,\n                processedSeries = [],\n                seriesVisibility = this._seriesVisibility,\n                currentSeries,\n                groupedSeries;\n\n            seriesVisibility.read();\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries) && grouped) {\n                    groupedSeries = groupSeries(currentSeries, data);\n                    processedSeries = processedSeries.concat(groupedSeries);\n\n                    seriesVisibility.applyByGroup(groupedSeries, e);\n                } else {\n                    currentSeries = extend({}, currentSeries);\n                    processedSeries.push(currentSeries);\n\n                    seriesVisibility.applyByIndex(currentSeries, e);\n                }\n            }\n\n            chart._sourceSeries = series;\n            options.series = processedSeries;\n            this._instance.applySeriesColors();\n\n            chart._bindSeries();\n            chart._bindCategories();\n\n            this._hasData = true;\n        },\n\n        _onDataChanged: function(e) {\n            this._bindData(e);\n\n            this.trigger(DATABOUND);\n            if (this._instance && this._instance.fontLoaded) {\n                this._redraw();\n            }\n        },\n\n        _bindSeries: function() {\n            var chart = this,\n                data = chart.dataSource.view(),\n                series = chart.options.series,\n                seriesIx,\n                seriesLength = series.length,\n                currentSeries,\n                groupIx,\n                seriesData;\n\n            for (seriesIx = 0; seriesIx < seriesLength; seriesIx++) {\n                currentSeries = series[seriesIx];\n\n                if (chart._isBindable(currentSeries)) {\n                    groupIx = currentSeries._groupIx;\n                    seriesData = defined(groupIx) ? (data[groupIx] || {}).items : data;\n\n                    if (currentSeries.autoBind !== false) {\n                        currentSeries.data = seriesData;\n                    }\n                }\n            }\n        },\n\n        _bindCategories: function() {\n            var chart = this,\n                data = chart.dataSource.view() || [],\n                grouped = (chart.dataSource.group() || []).length > 0,\n                categoriesData = data,\n                options = chart.options,\n                definitions = [].concat(options.categoryAxis),\n                axisIx,\n                axis;\n\n            if (grouped) {\n                if (data.length) {\n                    categoriesData = data[0].items;\n                }\n            }\n\n            for (axisIx = 0; axisIx < definitions.length; axisIx++) {\n                axis = definitions[axisIx];\n                if (axis.autoBind !== false) {\n                    chart._bindCategoryAxis(axis, categoriesData, axisIx);\n                }\n            }\n        },\n\n        _bindCategoryAxis: function(axis, data, axisIx) {\n            var count = (data || []).length,\n                categoryIx,\n                category,\n                row;\n\n            if (axis.field) {\n                axis.categories = [];\n                for (categoryIx = 0; categoryIx < count; categoryIx++) {\n                    row = data[categoryIx];\n\n                    category = getField(axis.field, row);\n                    if (categoryIx === 0) {\n                        axis.categories = [category];\n                        axis.dataItems = [row];\n                    } else {\n                        axis.categories.push(category);\n                        axis.dataItems.push(row);\n                    }\n                }\n            } else if (this._instance) {\n                this._instance.bindCategoryAxisFromSeries(axis, axisIx);\n            }\n        },\n\n        _isBindable: function(series) {\n            var valueFields = SeriesBinder.current.valueFields(series),\n                result = true,\n                field, i;\n\n            for (i = 0; i < valueFields.length; i++) {\n                field = valueFields[i];\n                if (field === VALUE) {\n                    field = \"field\";\n                } else {\n                    field = field + \"Field\";\n                }\n\n                if (!defined(series[field])) {\n                    result = false;\n                    break;\n                }\n            }\n\n            return result;\n        },\n\n        _isRtl: function() {\n            return kendo.support.isRtl(this.element) && this.element.css(\"direction\") === RTL;\n        }\n    });\n\n    var proxyMembers = [\"getAxis\", \"findAxisByName\", \"plotArea\", \"toggleHighlight\", \"showTooltip\",\n        \"hideTooltip\", \"_resize\", \"_redraw\", \"_noTransitionsRedraw\", \"_legendItemHover\", \"_eventCoordinates\"];\n\n    function createProxyMember(name) {\n        Chart.fn[name] = function() {\n            var instance = this._instance;\n            if (instance) {\n                return instance[name].apply(instance, arguments);\n            }\n        };\n    }\n\n    for (var idx = 0; idx < proxyMembers.length; idx++) {\n        createProxyMember(proxyMembers[idx]);\n    }\n\n    function groupSeries(series, data) {\n        var result = [],\n            nameTemplate,\n            legacyTemplate = series.groupNameTemplate,\n            groupIx,\n            dataLength = data.length,\n            seriesClone,\n            defaultNameTemplate = ({ group }) => `${defined(series.name) ? group.value + \": \" + series.name : group.value}`;\n\n        if (dataLength === 0) {\n            seriesClone = deepExtend({}, series);\n            seriesClone.visibleInLegend = false;\n            return [seriesClone];\n        }\n\n        if (defined(legacyTemplate)) {\n            kendo.logToConsole(\n                \"'groupNameTemplate' is obsolete and will be removed in future versions. \" +\n                \"Specify the group name template as 'series.name'\"\n            );\n\n            if (legacyTemplate) {\n                nameTemplate = template(legacyTemplate);\n            }\n        } else {\n            nameTemplate = template(series.name || defaultNameTemplate);\n        }\n\n        for (groupIx = 0; groupIx < dataLength; groupIx++) {\n            seriesClone = deepExtend({}, series);\n\n            if (!kendo.isFunction(seriesClone.color)) {\n                seriesClone.color = undefined$1;\n            }\n\n            seriesClone._groupIx = groupIx;\n            seriesClone._groupValue = data[groupIx].value;\n            result.push(seriesClone);\n\n            if (nameTemplate) {\n                seriesClone.name = nameTemplate({\n                    series: seriesClone, group: data[groupIx]\n                });\n            }\n        }\n\n        return result;\n    }\n\n    dataviz.ExportMixin.extend(Chart.fn);\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Chart.fn);\n    }\n\n    dataviz.ui.plugin(Chart);\n\n    var SeriesVisibilityState = Class.extend({\n        init: function() {\n            this.groups = {};\n            this.index = {};\n            this.options = {};\n        },\n\n        applyByGroup: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    if (this.groups[series[idx]._groupValue] === false) {\n                        series[idx].visible = false;\n                    }\n                }\n            } else {\n                this.groups = {};\n            }\n        },\n\n        applyByIndex: function(series, e) {\n            if ((e && e.action) || this.options.persistSeriesVisibility) {\n                if (this.index[series.index] === false) {\n                    series.visible = false;\n                }\n            } else {\n                this.index = {};\n            }\n        },\n\n        save: function(series) {\n            if (!series) {\n                return;\n            }\n\n            if (this.options.persistSeriesVisibility) {\n                this.options.series[series.index].visible = series.visible;\n            } else {\n                this.saveState(series);\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = options;\n            this.groups = {};\n            this.index = {};\n        },\n\n        read: function() {\n            var options = this.options;\n            if (options.persistSeriesVisibility) {\n                var series = options.series;\n                for (var idx = 0; idx < series.length; idx++) {\n                    this.saveState(series[idx]);\n                }\n            }\n        },\n\n        saveState: function(series) {\n            if (defined(series._groupValue)) {\n                this.groups[series._groupValue] = series.visible;\n            } else {\n                this.index[series.index] = series.visible;\n            }\n        }\n    });\n\n    var geom = kendo.geometry;\n\n    function normalizeStyle(style) {\n        for (var field in style) {\n            if (style[field] === undefined$1) {\n                style[field] = '';\n            }\n        }\n\n        return style;\n    }\n\n    var Tooltip = Observable.extend({\n        init: function(chartElement, options) {\n            var tooltip = this;\n\n            Observable.fn.init.call(tooltip);\n\n            this.setOptions(options);\n\n            tooltip.chartElement = chartElement;\n\n            tooltip.template = Tooltip.template;\n            if (!tooltip.template) {\n                tooltip.template = Tooltip.template = ({ autoHide, rtl, font, border, opacity }) =>\n                    `<div class='k-tooltip ${autoHide ? \"k-tooltip-closable\" : \"\"} k-chart-tooltip ${rtl ? \"k-rtl\" : \"\"}' ` +\n                    `${kendo.attr(\"style-display\")}=\"none\" ${kendo.attr(\"style-position\")}=\"absolute\" ` +\n                    `${kendo.attr(\"style-font\")}=\"${font}\" ${kendo.attr(\"style-opacity\")}=\"${opacity}\" ` +\n                    `${border ? `${kendo.attr(\"style-border\")}=\"${border.width}px solid\" ` : \"\"}` +\n                    `>` +\n                    '<div class=\"k-tooltip-content\"></div>' +\n                    `${autoHide ? '' : '<div class=\"k-tooltip-button\">' + kendo.ui.icon($('<a href=\"#\" title=\"Close\"></a>'), { icon: \"x\" }) + '</div>'}` +\n                    \"</div>\";\n            }\n\n            tooltip.element = $(tooltip.template(tooltip.options));\n            kendo.applyStylesFromKendoAttributes(tooltip.element, [\"display\", \"position\", \"font\", \"border\", \"opacity\"]);\n\n            tooltip.move = tooltip.move.bind(tooltip);\n            tooltip._mouseleave = tooltip._mouseleave.bind(tooltip);\n\n            var mobileScrollerSelector = kendo.format(\"[{0}='content'],[{0}='scroller']\", kendo.attr(\"role\"));\n            tooltip._mobileScroller = chartElement.closest(mobileScrollerSelector).data(\"kendoMobileScroller\");\n            tooltip.downEvent = kendo.applyEventMap(MOUSEDOWN, kendo.guid());\n            tooltip._closeTooltipHandler = tooltip._closeTooltip.bind(tooltip);\n        },\n\n        destroy: function() {\n            var tooltip = this;\n\n            this._clearShowTimeout();\n            DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            if (this.element) {\n                this.element.off(MOUSELEAVE_NS).remove();\n                this.element = null;\n            }\n        },\n\n        setOptions: function(options) {\n            this.options = deepExtend({}, this.options, options);\n        },\n\n        options: {\n            opacity: 1,\n            animation: {\n                duration: TOOLTIP_ANIMATION_DURATION\n            },\n            sharedTemplate: ({ colspan, categoryText, points, content, colorMarker, nameColumn }) =>\n                \"<table>\" +\n                `<th colspan='${colspan}'>${categoryText}</th>` +\n                    sharedTemplateIterator(points, colorMarker, nameColumn, content) +\n                \"</table>\",\n            categoryFormat: \"{0:d}\",\n            autoHide: true\n        },\n\n        move: function() {\n            var tooltip = this,\n                options = tooltip.options,\n                element = tooltip.element,\n                offset;\n\n            if (!tooltip.anchor || !tooltip.element) {\n                return;\n            }\n\n            offset = tooltip._offset();\n            if (!tooltip.visible) {\n                element.css({ top: offset.top, left: offset.left });\n            }\n\n            tooltip.visible = true;\n            tooltip._ensureElement(document.body);\n            element\n                .stop(true, true)\n                .show()\n                .animate({\n                    left: offset.left,\n                    top: offset.top\n                }, options.animation.duration);\n        },\n\n        _clearShowTimeout: function() {\n            if (this.showTimeout) {\n                clearTimeout(this.showTimeout);\n                this.showTimeout = null;\n            }\n        },\n\n        getAnchor: function(size) {\n            var anchor = this.anchor;\n            var point = anchor.point;\n            var align = anchor.align;\n            var x = point.left;\n            var y = point.top;\n            if (align.horizontal === \"center\") {\n                x -= size.width / 2;\n            } else if (align.horizontal === \"right\") {\n                x -= size.width;\n            }\n\n            if (align.vertical === \"center\") {\n                y -= size.height / 2;\n            } else if (align.vertical === \"bottom\") {\n                y -= size.height;\n            }\n\n            return {\n                x: x,\n                y: y\n            };\n        },\n\n        _offset: function() {\n            var tooltip = this,\n                size = tooltip._measure(),\n                anchor = tooltip.getAnchor(size),\n                top = anchor.y,\n                left = anchor.x,\n                zoomLevel = kendo.support.zoomLevel(),\n                viewport = $(window),\n                scrollTop = window.pageYOffset || document.documentElement.scrollTop || 0,\n                scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || 0,\n                movable = (this._mobileScroller || {}).movable;\n\n            if (!movable || movable.scale === 1) {\n                top += tooltip._fit(top - scrollTop, size.height, outerHeight(viewport) / zoomLevel);\n                left += tooltip._fit(left - scrollLeft, size.width, outerWidth(viewport) / zoomLevel);\n            } else {\n                var transform = geom.transform().scale(movable.scale, movable.scale, [movable.x, movable.y]);\n                var point = new geom.Point(left, top).transform(transform);\n                left = point.x;\n                top = point.y;\n            }\n\n            return {\n                top: top,\n                left: left\n            };\n        },\n\n        show: function(e) {\n            var tooltip = this;\n            var fakeContainer = $(\"<div></div>\");\n            this.anchor = e.anchor;\n            this.element.css(normalizeStyle(e.style));\n            this.element.toggleClass(TOOLTIP_INVERSE, !!e.className);\n            this.element.toggleClass(SHARED_TOOLTIP_CLASS, !!e.shared);\n\n            var content = e.shared ? this._sharedContent(e) : this._pointContent(e.point);\n            fakeContainer.html(content);\n            kendo.applyStylesFromKendoAttributes(fakeContainer, [\"background-color\"]);\n            this.element.find('.k-tooltip-content').empty().append(fakeContainer);\n\n            if (!tooltip.options.autoHide) {\n                tooltip.element.off(\"click\" + NS).on(\"click\" + NS, \".k-tooltip-button\", tooltip._closeTooltipHandler);\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler)\n                    .on(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n\n            this._clearShowTimeout();\n            this.showTimeout = setTimeout(this.move, TOOLTIP_SHOW_DELAY);\n        },\n\n        hide: function(forceHide) {\n            var tooltip = this;\n\n            if (!tooltip.options.autoHide && !forceHide) {\n                return;\n            }\n\n            clearTimeout(tooltip.showTimeout);\n            tooltip._hideElement();\n\n            if (tooltip.visible) {\n                tooltip.point = null;\n                tooltip.visible = false;\n                tooltip.index = null;\n                DOCUMENT_ELEMENT.off(tooltip.downEvent, tooltip._closeTooltipHandler);\n            }\n        },\n\n        _closeTooltip: function(e) {\n            var target = $(e.target);\n\n            if (!target.is(\".k-chart-tooltip, .k-tooltip-content\")) {\n                e.preventDefault();\n                this.chartElement.data(\"kendoChart\")._instance.hideElements();\n                this.hide(true);\n            }\n        },\n\n        _sharedContent: function(e) {\n            var points = e.points;\n            var that = this;\n\n            var nameColumn = dataviz.grep(points, function(point) {\n                return defined(point.series.name);\n            }).length;\n\n            var colorMarker = e.series.length > 1;\n            var colspan = 1;\n            if (nameColumn) {\n                colspan++;\n            }\n            if (colorMarker) {\n                colspan++;\n            }\n\n            var template = kendo.template(this.options.sharedTemplate);\n            var content = template({\n                points: points,\n                category: e.category,\n                categoryText: e.categoryText,\n                content: this._pointContent.bind(that),\n                colorMarker: colorMarker,\n                nameColumn: nameColumn,\n                colspan: colspan\n            });\n\n            return content;\n        },\n\n        _measure: function() {\n            this._ensureElement();\n\n            var size = {\n                width: outerWidth(this.element),\n                height: outerHeight(this.element)\n            };\n\n            return size;\n        },\n\n        _ensureElement: function() {\n            if (this.element) {\n                this.element\n                    .appendTo(document.body)\n                    .on(MOUSELEAVE_NS, this._mouseleave);\n            }\n        },\n\n        _mouseleave: function(e) {\n            var target = e.relatedTarget;\n            var chart = this.chartElement[0];\n            if (target && target !== chart && !$.contains(chart, target)) {\n                this.trigger(LEAVE);\n            }\n        },\n\n        _hideElement: function() {\n            var tooltip = this;\n            var element = this.element;\n            if (element) {\n                element.fadeOut({\n                    always: function() {\n                        if (!tooltip.visible) {\n                            element.off(MOUSELEAVE_NS).remove();\n                        }\n                    }\n                });\n            }\n        },\n\n        _pointContent: function(point) {\n            var tooltip = this,\n                options = deepExtend({}, tooltip.options, point.options.tooltip),\n                content, tooltipTemplate;\n\n            if (defined(point.value)) {\n                content = point.value.toString();\n            }\n\n            if (options.template) {\n                tooltipTemplate = template(options.template);\n                content = tooltipTemplate({\n                    value: point.value,\n                    category: point.category,\n                    series: point.series,\n                    dataItem: point.dataItem,\n                    percentage: point.percentage,\n                    runningTotal: point.runningTotal,\n                    total: point.total,\n                    low: point.low,\n                    high: point.high,\n                    xLow: point.xLow,\n                    xHigh: point.xHigh,\n                    yLow: point.yLow,\n                    yHigh: point.yHigh\n                });\n            } else if (options.format) {\n                content = point.formatValue(options.format);\n            }\n\n            return content;\n        },\n\n        _fit: function(offset, size, viewPortSize) {\n            var output = 0;\n\n            if (offset + size > viewPortSize) {\n                output = viewPortSize - (offset + size);\n            }\n\n            if (offset < 0) {\n                output = -offset;\n            }\n\n            return output;\n        }\n    });\n\n    var CrosshairTooltip = Tooltip.extend({\n        init: function(chartElement, options) {\n            Tooltip.fn.init.call(this, chartElement, options);\n            this.element.addClass(\"k-chart-crosshair-tooltip\");\n        },\n\n        show: function(e) {\n            var element = this.element;\n\n            if (element) {\n                this.anchor = e.anchor;\n                this.element.css(e.style);\n                this.element.html(this.content(e));\n\n                this.move();\n            }\n        },\n\n        move: function() {\n            var tooltip = this,\n                element = tooltip.element,\n                offset = tooltip._offset();\n\n            tooltip._ensureElement();\n            element.css({ top: offset.top, left: offset.left }).show();\n        },\n\n        content: function(e) {\n            var content = e.value,\n                options = e.crosshair.options.tooltip;\n\n            if (options.template) {\n                content = template(options.template)({\n                    value: content\n                });\n            }\n\n            return content;\n        },\n\n        hide: function() {\n            this.element.hide();\n        }\n    });\n\n    var ChartPane = Class.extend({\n        init: function(chart, pane) {\n            this._chart = chart;\n            this._pane = pane;\n            this.visual = pane.visual;\n            this.chartsVisual = pane.chartContainer.visual;\n            this.name = pane.options.name;\n        },\n\n        series: function() {\n            var chart = this._chart;\n            var seriesByPane = chart._plotArea.groupSeriesByPane();\n            var series = seriesByPane[this.name || \"default\"];\n\n            var result = [];\n            if (series) {\n                for (var idx = 0; idx < series.length; idx++) {\n                    result.push(new ChartSeries(chart, series[idx]));\n                }\n            }\n\n            return result;\n        }\n    });\n\n    var ChartSeries = Class.extend({\n        init: function(chart, options) {\n            this._chart = chart;\n            this._options = options;\n        },\n\n        points: function(filter) {\n            var points = this._points;\n            if (!points) {\n                var series = this._seriesOptions();\n                var plotArea = this._chart._plotArea;\n                this._points = points = plotArea.pointsBySeriesIndex(series.index);\n            }\n            if (kendo.isFunction(filter)) {\n                points = this._filterPoints(points, filter);\n            }\n\n\n            return points;\n        },\n\n        data: function(data) {\n            var series = this._seriesOptions();\n            if (data) {\n                var chart = this._chart;\n                var plotArea = chart._plotArea;\n\n                series.data = data;\n\n                if (series.categoryField) {\n                    var axis = plotArea.seriesCategoryAxis(series);\n                    var options = [].concat(chart.options.categoryAxis);\n\n                    chart._instance.bindCategoryAxisFromSeries(options[axis.axisIndex], axis.axisIndex);\n                }\n\n                chart._noTransitionsRedraw();\n                this._clearFields();\n            }\n\n            return series.data;\n        },\n\n        findPoint: function(filter) {\n            var points = this.points();\n            for (var idx = 0; idx < points.length; idx++) {\n                if (filter(points[idx])) {\n                    return points[idx];\n                }\n            }\n        },\n\n        toggleHighlight: function(show, elements) {\n            if (!elements) {\n                elements = this.points();\n            } else if (kendo.isFunction(elements)) {\n                elements = this.points(elements);\n            } else {\n                elements = isArray(elements) ? elements : [elements];\n            }\n\n            this._chart._instance.togglePointsHighlight(show, elements);\n        },\n\n        toggleVisibility: function(visible, filter) {\n            var chart = this._chart;\n            var seriesOptions = this._seriesOptions();\n            var hasFilter = kendo.isFunction(filter);\n            if (!hasFilter) {\n                seriesOptions.visible = visible;\n                chart._seriesVisibility.save(seriesOptions);\n            } else {\n                if (inArray(seriesOptions.type, [PIE, DONUT, FUNNEL])) {\n                    var data = this._filterData(filter);\n                    for (var idx = 0; idx < data.length; idx++) {\n                        data[idx].visible = visible;\n                    }\n                } else {\n                    seriesOptions.visible = function(data) {\n                        return filter(data.dataItem) ? visible : true;\n                    };\n                }\n            }\n\n            chart._noTransitionsRedraw();\n\n            this._clearFields();\n        },\n\n        _filterData: function(filter) {\n            var data = this._seriesOptions().data;\n            var length = data.length;\n            var result = [];\n\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(data[idx])) {\n                    result.push(data[idx]);\n                }\n            }\n            return result;\n        },\n\n        _filterPoints: function(points, filter) {\n            var result = [];\n            var length = points.length;\n            for (var idx = 0; idx < length; idx++) {\n                if (filter(points[idx])) {\n                    result.push(points[idx]);\n                }\n            }\n            return result;\n        },\n\n        _seriesOptions: function() {\n            var series = this._series;\n            if (!series) {\n                series = this._series = this._chart._seriesOptions(this._options);\n            }\n            return series;\n        },\n\n        _clearFields: function() {\n            delete this._points;\n            delete this._series;\n        }\n    });\n\n    function triggerPaneRender(panes) {\n        for (var idx = 0; idx < panes.length; idx++) {\n            panes[idx].notifyRender();\n        }\n    }\n\n    function sharedTemplateIterator(points, colorMarker, nameColumn, content) {\n        var result = \"\";\n\n        for (var i = 0; i < points.length; i++) {\n            var point = points[i];\n            result += \"<tr>\";\n\n            if (colorMarker) {\n                result += `<td><span class='k-chart-shared-tooltip-marker' ${kendo.attr(\"style-background-color\")}=\"${encode(point.series.color)}\"></span></td>`;\n            }\n\n            if (nameColumn) {\n                result += `<td> ${point.series.name ? point.series.name + \":\" : \"&nbsp;\"}</td>`;\n            }\n\n            result += `<td>${content(point)}</td>`;\n            result += \"</tr>\";\n        }\n\n        return result;\n    }\n\n    dataviz.Tooltip = Tooltip;\n    dataviz.CrosshairTooltip = CrosshairTooltip;\n    dataviz.ChartInstanceObserver = ChartInstanceObserver;\n    dataviz.ChartPane = ChartPane;\n    dataviz.ChartSeries = ChartSeries;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n    id: \"dataviz.chart\",\n    name: \"Chart\",\n    category: \"dataviz\",\n    description: \"The Chart widget uses modern browser technologies to render high-quality data visualizations in the browser.\",\n    depends: [ \"data\", \"userevents\", \"drawing\", \"dataviz.core\", \"dataviz.themes\" ],\n    features: [{\n        id: \"dataviz.chart-pdf-export\",\n        name: \"PDF export\",\n        description: \"Export Chart as PDF\",\n        depends: [ \"pdf\" ]\n    }]\n};\n\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}