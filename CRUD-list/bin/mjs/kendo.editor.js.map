{"version":3,"file":"kendo.editor.js","names":["kendo","UndoRedoStack","Observable","extend","init","options","fn","call","this","clear","events","push","command","stack","slice","currentCommandIndex","undo","canUndo","trigger","redo","canRedo","length","deepExtend","util","$","undefined$1","window","Class","Widget","ui","os","support","mobileOS","browser","keys","outerWidth","_outerWidth","outerHeight","_outerHeight","FORMATTING_MARKS_STYLE_ID","FORMATTING_MARKS_OVERLAY_ID","FORMATTING_MARKS_OVERLAY_WRAPPER_ID","SELECT","PLACEHOLDER_CLASS","PLACEHOLDER_TAG_ID","NATIVE_TOOLS","EditorUtils","editorWrapperTemplate","formatByName","name","format","i","inArray","tags","getToolCssClass","icon","cssClass","superscript","subscript","justifyLeft","justifyCenter","justifyRight","justifyFull","insertUnorderedList","insertOrderedList","insertUpperRomanList","insertLowerRomanList","import","indent","outdent","createLink","unlink","insertImage","insertFile","viewHtml","foreColor","backColor","createTable","addColumnLeft","addColumnRight","addRowAbove","addRowBelow","deleteRow","deleteColumn","mergeCellsHorizontally","mergeCellsVertically","splitCellHorizontally","splitCellVertically","tableProperties","tableCellProperties","tableWizardInsert","tableAlignLeft","tableAlignCenter","tableAlignRight","cleanFormatting","copyFormat","applyFormat","pdf","nameToKebab","replace","toLowerCase","registerTool","toolName","tool","Editor","defaultTools","registerFormat","formatName","formats","cacheComments","content","comments","index","retrieveComments","supportedContentEditable","document","documentElement","toolGroups","basic","scripts","alignment","lines","symbols","links","lists","dent","tablesWizard","tablesInsert","tablesAddDelete","tablesMerge","tablesPosition","formatPainter","element","toolbarContainer","type","domElement","that","editorNS","editor","dom","Dom","_registerHandler","closest","update","bind","_setupType","_initToolbar","_setupHeight","_resizable","_initializeContentElement","_setupKeyboard","clipboard","Clipboard","undoRedoStack","_populateValue","mousedown","_endTyping","mouseup","e","_mouseup","_handleSpaceAndNewLines","_initializeImmutables","_ariaLabel","wrapper","find","toolbar","resize","notify","_showWatermarkOverlay","messages","auto","bold","italic","underline","strikethrough","fitToCell","lineHeight","formattingMarks","insertHtml","fontName","fontNameInherit","fontSize","fontSizeInherit","formatBlock","formatting","style","emptyFolder","editAreaTitle","uploadFile","overflowAnchor","orderBy","orderBySize","orderByName","invalidFileType","deleteFile","overwriteFile","directoryNotFound","imageWebAddress","imageAltText","imageWidth","imageHeight","fileWebAddress","fileTitle","fileText","linkWebAddress","linkText","linkToolTip","linkOpenInNewWindow","dialogUpdate","dialogInsert","dialogOk","dialogCancel","createTableHint","tableWizard","tableTab","cellTab","accessibilityTab","caption","summary","width","height","units","cellSpacing","cellPadding","topPadding","leftPadding","bottomPadding","rightPadding","independentCellPaddings","cellMargin","captionAlignment","position","background","tableBackground","id","border","borderStyle","borderWidth","borderColor","collapseBorders","wrapText","associateCellsWithHeaders","alignLeft","alignCenter","alignRight","alignLeftTop","alignCenterTop","alignRightTop","alignLeftMiddle","alignCenterMiddle","alignRightMiddle","alignLeftBottom","alignCenterBottom","alignRightBottom","alignRemove","columns","rows","selectAllCells","applyToColumn","applyToRow","exportAs","print","headerRows","headerColumns","tableSummaryPlaceholder","associateNone","associateScope","associateIds","borderNone","placeholder","nonce","unsafeInline","encoded","formattingMarksRefreshDelay","domain","resizable","deserialization","custom","serialization","entities","semantic","optimizeTags","keepEOL","pasteCleanup","all","css","keepNewLines","msAllFormatting","msConvertLists","msTags","none","span","stylesheets","dialogOptions","modal","draggable","animation","imageBrowser","fileBrowser","navigateOnTab","text","value","tools","destroy","_deregisterHandlers","clearTimeout","_spellCorrectTimeout","_focusOutside","windowInstance","tablePopup","_destroyUploadWidget","resizeObserver","disconnect","_destroyResizings","_destroyFormattingMarksOverlay","setOptions","_setOptionsTools","_initializePlaceholder","createRange","RangeUtils","encodedValue","encode","exec","params","range","Error","body","getAttribute","keyboard","isTypingInProgress","_focusBody","selectRange","_range","getRange","Object","map","key","immutables","test","execCommand","async","change","_selectionChange","managesUndoRedo","focus","restoreSelection","selection","getSelection","rangeCount","getRangeAt","doc","startContainer","endContainer","startOffset","endOffset","setStart","collapse","SelectionUtils","selectionFromDocument","paste","html","InsertHtmlCommand","refresh","textarea","val","remove","selectionRestorePoint","toRange","saveSelection","container","commonAncestorContainer","contains","RestorePoint","selectedHtml","Serializer","domToXhtml","cloneContents","removeAllRanges","addRange","state","textNodes","finder","collapsed","getFormat","isFormatted","_togglePlaceholder","trim","_oldValue","currentHtml","htmlToDom","_refreshTools","_bindTools","unbind","filter","el","each","initialize","_blur","old","_containsRange","isAncestorOrSelf","_createContentElement","iframe","wnd","lang","specifiedDomain","domainScript","src","hide","title","frameBorder","addClass","attr","tabIndex","insertBefore","location","hostname","contentWindow","contentDocument","one","_decorateFormatting","getElementsByTagName","open","write","isRtl","ios","edge","chrome","href","join","close","_deleteSavedRange","component","dataSource","items","tag","className","formattingElement","getKendoDropDownList","data","list","getEffectiveBackground","inlineStyle","_appendFormattingMarksStyles","$head","head","append","_appendFormattingMarksOverlay","_formattingMarksOverlay","handlers","_handlers","h","off","handler","_uploadWidget","endTyping","scrollTop","activeElement","_activeElement","scrollHeight","clientHeight","msie","left","top","opacity","appendTo","_handleToolbarClick","target","_immutablesContext","Immutables","immutablesContext","editableTextNodes","blurTrigger","mousedownTrigger","createElement","setAttribute","appendChild","interval","setInterval","last","clearInterval","setTimeout","_mousedown","touch","keydown","_spellCorrect","parentElement","nodeName","_cachedHeight","restoreHeight","keyCode","BACKSPACE","DELETE","F10","first","preventPopupHide","preventDefault","LEFT","RIGHT","offset","next","nextChar","nodeType","nodeValue","toolFromShortcut","toolOptions","keyPressCommand","_runPostContentKeyCommands","keypress","_showElementResizeHandles","keyup","selectionCodes","TAB","PAGEUP","PAGEDOWN","END","HOME","UP","DOWN","INSERT","ctrlKey","altKey","shiftKey","_refreshInterval","click","selectNode","focusin","hasAttribute","_showWindow","focusout","active","popup","toolbarContainerElement","get","_toolbarFocused","hasClass","removeClass","_hideWindow","_initializeColumnResizing","_initializeRowResizing","_initializeElementResizing","defaults","toolbarOptions","_processToolbarItems","_setNativeTools","parentMessages","toggle","evaluateTemplates","ToolBar","on","is","_initToolbarWindow","toolbarEl","wrap","parent","prepend","kendoWindow","dragHandle","effects","minHeight","visible","autoFocus","actions","dragend","_moved","_selectionStarted","parents","stopPropagation","gecko","which","tagName","defaultValue","deserializedRoot","getAllComments","innerHTML","_resetGroups","current","result","optionsTools","j","t","guidGroupName","flatDefaultTools","processedObject","currentGroups","Array","isArray","guid","_processToolOptions","gr","includes","values","group","g","to","_processDefaultTool","isPlainObject","view","shortcuts","uiOptions","originalOptions","palette","template","showText","showIcon","tooltip","attributes","ColorTool","componentOptions","views","preview","input","buttons","_shortcutSequence","nodes","filterBy","htmlIndentSpace","_updateImmutablesState","eventNames","NS","hasOwnProperty","applyEventMap","split","toolsFromShortcut","o","changesContent","refreshDelay","applyFormattingMarks","clearFormattingMarksOverlay","_toggledFormattingMarks","children","_formattingMarksTimeout","empty","heightStyle","expectedHeight","parseInt","actualHeight","indexOf","isNaN","Keyboard","BackspaceHandler","TypingHandler","SystemHandler","SelectAllHandler","_wrapTextarea","res","ctrl","shift","alt","beforeCorrection","falseTrigger","contextmenu","mozilla","_finishUpdate","show","$body","toggleClass","overflowPopup","uiElement","trackImmutables","toolsToBeUpdated","w","editorWrap","editArea","isResizable","resizableMin","min","resizableMax","max","maxHeight","minWidth","maxWidth","ResizeObserver","_resizeTimeOut","observe","_destroyElementResizing","ElementResizingFactory","dispose","_destroyRowResizing","RowResizing","_destroyColumnResizing","ColumnResizing","create","_showElementResizeHandlesProxy","elementResizing","parentNode","showResizeHandles","columnResizing","rowResizing","_getWindowWidth","editorElement","_overlapsWindow","box","toolbarWrapper","toolbarWrapperOffset","toolbarWrapperLeft","toolbarWrapperTop","boxOffset","boxOffsetLeft","boxOffsetTop","editorOffset","Math","plugin","Tool","commandArguments","noop","UndoTool","enable","removeAttr","emptyElementContent","emptyTableCellContent","PDFMixin","prototype","_drawPDF","drawing","drawDOM","saveAsPDF","progress","Deferred","promise","args","then","root","exportPDF","done","dataURI","saveAs","fileName","proxyURL","proxyTarget","forceProxy","resolve","fail","err","reject","jQuery","STYLE","FLOAT","CSSFLOAT","STYLEFLOAT","CLASS","KMARKER","makeMap","len","obj","nonListBlockElements","blockElements","concat","block","selfClosing","inlineElements","inline","fillAttrs","nonEmptyNonTextContentElements","normalize","node","version","firstChild","prev","nextSibling","persistedScrollTop","whitespace","emptyspace","rgb","bom","whitespaceOrBom","cssAttributes","htmlRe","entityRe","entityTable","findNodeIndex","skipText","previousSibling","isDataNode","isAncestorOf","findClosestAncestor","rootElem","iterator","createNodeIterator","NodeFilter","SHOW_COMMENT","FILTER_ACCEPT","curNode","nextNode","getNodeLength","childNodes","splitDataNode","temp","newNode","cloneNode","denormalizedText","deleteData","insertAfter","attrEquals","cssFloat","blockParentOrBody","parentOfType","ownerDocument","blockParents","blocks","windowFromDocument","defaultView","parentWindow","nodeTypes","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","toHex","color","matches","x","toString","encodableChars","c","charCode","charCodeAt","entity","isBom","stripBom","stripBomNode","removeChild","insignificant","_moz_dirty","_moz_editor_bogus_node","tableCell","significantNodes","grep","child","emptyTextNode","emptyNode","significantChildNodes","isWhitespace","getTextNodes","lastTextNode","lastChild","isMarker","allowsTextContent","every","allWhitespaceContent","isEmptyspace","sibling","direction","isBlock","isPrevBlock","isNextBlock","isSelfClosing","isEmpty","isInline","isImg","isBr","scrollContainer","compatMode","scrollingElement","scrollTo","toStart","elementTop","elementHeight","marker","windowHeight","innerHeight","offsetHeight","ceil","persistScrollTop","offsetParent","offsetTop","offsetLeft","restoreScrollTop","undefined","insertAt","newElement","referenceElement","removeChildren","removeTextSiblings","closestBy","condition","rootCondition","ofType","changeTag","skipAttributes","attribute","specified","cssText","editableParent","contentEditable","unwrap","isChildOfBaseContainer","createEmptyNode","removeAttribute","mergeAttributes","origin","traverseCss","unstyle","backgroundStyle","innerText","classNames","classes","commonAncestor","ancestors","count","arguments","paths","minPathLength","Infinity","output","reverse","closestSplittableParent","apply","editableParents","editableAncestor","closestEditable","types","editable","closestEditableOfType","invert","match","ensureTrailingBreaks","elements","ensureTrailingBreak","removeTrailingBreak","br","reMapTableColumns","table","colAttr","_mapColIndices","clearTableMappings","registeredColumns","rowIndex","cells","colIndex","cellIndex","cell","rowSpan","_mapColspan","colSpan","ci","ri","associateWithIds","theadRows","numberOfTheadRows","tableRows","numberOfTableRows","theadMatrix","tbodyMatrix","tHead","_getNumberOfHeaderRows","_generateIdsForColumns","_generateIdsForRows","_assignIds","col","colspan","rowspan","k","l","timestamp","Date","getTime","row","headers","pushHeaderId","forEach","_onlyUnique","_getNumberOfColumns","currentIndex","numberOfCols","Number","_getNumberOfHeaderColumns","numberOfHeaderRows","number","self","fontSizeMappings","quoteRe","brRe","pixelRe","emptyPRe","cssDeclaration","sizzleAttr","scriptAttr","onerrorRe","bomSpan","div","supportsLeadingWhitespace","isFunction","toEditableHtml","_toEditableImmutables","immutable","prependTo","_fillEmptyElements","p","_removeSystemElements","_resetOrderedLists","ol","originalStart","ols","_preventScriptExecution","attributesToRemove","deserialize","semanticFilter","mapStart","tagMap","start","end","skipEncoding","canOptimize","semanticAttributes","specifiedAttributes","textDecoration","font","fontFamily","size","inlineStyles","ignoredStylePrefixes","prop","startsWith","strong","em","b","u","item","styleObj","splice","face","styleAttr","properties","property","lastIndex","cssProperties","$node","htmlEncode","skip","childNode","mapper","previous","jqNode","serialize","shouldOptimize","isEmptyBomNode","runCustom","script","childrenCount","textOnly","selectionFromWindow","W3CSelection","selectionFromRange","rangeDocument","documentFromRange","W3CRange","updateRangeProperties","fixIvalidRange","setEnd","setStartBefore","setStartAfter","setEndBefore","setEndAfter","selectNodeContents","deleteContents","cloneRange","deleteSubtree","hasPartialSubtree","getSubtreeIterator","RangeIterator","cloneSubtree","frag","createDocumentFragment","extractContents","extractSubtree","originalRange","insertNode","startNodeName","endNodeName","startAncestor","endAncestor","compareBoundaries","ex","isInvalidRange","fromNode","_current","_next","_end","hasNext","traverse","callback","delta","inStartContainer","inEndContainer","nodeIndex","getSubRange","subRange","textRange","createTextRange","adoptContainer","select","duplicate","right","textRangeContainer","adoptEndPoint","compareEndPoints","movedStart","movedEnd","cursorNode","textOffset","isData","anchorNode","anchorParent","cursor","moveToElementText","setEndPoint","comparison","appended","RangeEnumerator","enumerate","visit","ImmutablesRangeIterator","ImmutablesRangeEnumerator","rootNode","getEditable","nodeToPath","serializedImmutables","removeImmutables","restoreImmutables","lastType","restoreHtml","path","toRangePoint","denormalizedOffset","Marker","caret","addCaret","removeCaret","containerIndex","textNode","add","expand","isExpandable","rangeBoundary","_removeDeadMarkers","createTextNode","_normalizedIndex","pointer","shouldNormalizeStart","shouldNormalizeEnd","isBomSelected","charAt","collapsedToStart","startParent","endParent","startIndex","endIndex","boundary","immutableParent","image","stringify","partition","partitionRange","contents","mapAll","mapped","getAll","predicate","selector","getMarkers","isStartOf","isEndOf","wrapSelectedElements","startEditable","endEditable","isEnd","beforeCaret","afterCaret","search","substring","complexBlocks","IMMUTABALE","IMMUTABALE_MARKER_SELECTOR","randomId","chars","round","random","updateToolOptions","_initOptions","_toHtml","replaceWith","isDeleting","_cancelDeleting","_cancelTyping","typingInProgress","isTypingKey","backspace","del","cancelDeleting","nextImmutable","closestSelectionLi","closestImmutableLi","_removeImmutable","forwards","commonContainer","_nextNode","startRestorePoint","expandImmutablesIn","startImmutableParent","endImmutableParent","serialized","Command","restorePoint","formatter","lockRange","releaseRange","point","createDialog","_actionButtonsTemplate","insertButtonIcon","cancelButtonIcon","renderButton","themeColor","GenericCommand","endRestorePoint","ViewHtmlCommand","cmd","dialog","_footerTemplate","_footerMessages","center","FormatCommand","FormatTool","getKendoToolBar","getKendoToggleButton","MOUSEDOWN_NS","InlineFormatFinder","numberOfSiblings","referenceNode","textNodesCount","elementNodesCount","markerCount","findSuitable","sourceNode","findFormat","InlineFormatter","activate","formatNode","formatNodes","consolidate","outerMostInline","pop","GreedyInlineFormatFinder","greedyProperty","fontAttr","getInlineCssValue","attributeValue","pair","cssIndex","propertyAndValue","getFormatInner","parentsUntil","addBack","toArray","GreedyInlineFormatter","toCamelCase","action","InlineFormatTool","DelayedExecutionTool","FontTool","cssAttr","domAttr","widget","setDataSource","sender","newRange","ENTER","_widget","getKendoColorPicker","storedRange","_inputFocused","_popup","unselectable","_value","toCssRgba","fontWeight","togglable","fontStyle","overflow","toolIcon","commandOn","closeOnSelect","dataValueField","dataTextField","valuePrimitive","HTTP_PROTOCOL","protocolRegExp","endLinkCharsRegExp","LinkFormatFinder","LinkFormatter","markers","a","ref","UnlinkCommand","LinkCommand","url","_initialText","img","_close","_form","_createForm","_apply","_keydown","linkUrl","_dialog","formElement","form","kendoForm","renderButtons","field","label","editorOptions","after","ESC","textInput","anchor","AutoLinkCommand","detectedLink","detectLink","linkMarker","linkRange","_ensureWebProtocol","startNode","traverser","LeftDomTextTraverser","cancelAtNode","DomTextLinkDetection","_hasProtocolPrefix","_prefixWithWebProtocol","UnlinkTool","isLink","DomPos","_detectEnd","blank","clone","_detectStart","_isLinkDetected","puntuationOptions","extendOptions","RightDomTextTraverser","_skipStartPuntuation","lastIndexOfRegExp","ii","r","str","DomTextTraverser","cancel","_traverse","edgeNode","subText","splitIndex","SPACEBAR","BlockFormatFinder","candidate","suitable","f","_resolveListsItems","until","ImmutablesNS","BlockFormatter","ancestor","_handleImmutables","images","imageAttributes","nonImages","applyFormatting","immutableFormat","namedFormat","GreedyBlockFormatter","formatTag","ListFormatter","blockFormatter","BlockFormatTool","listElements","textAlign","float","display","marginLeft","marginRight","listStylePosition","ListFormatFinder","altAttr","matchesType","isList","unwrapTag","li","isImmutable","containsAny","_parentLists","merge","breakable","findSuitableNode","applyOnSection","section","pushAncestor","listStyleType","lastSection","lastNodes","sections","addLastSection","ul","fragment","ListCommand","ListTool","FormattingTool","toFormattingItem","dot","context","decorate","optionLabel","dataItem","toJSON","dataBound","getFormattingValue","n","selectBox","_ancestor","operator","CleanFormatCommand","tagsToClean","clean","listFormatter","unwrapListItem","highlightFirst","autoWidth","KEDITORIMAGEURL","KEDITORIMAGETITLE","KEDITORIMAGEWIDTH","KEDITORIMAGEHEIGHT","ImageCommand","removeIEAttributes","onload","onerror","applied","isIE","showBrowser","ImageBrowser","transport","read","_imageBrowser","ev","selected","dialogHeight","loadingOverlay","ImportCommand","_initializeUploadWidget","importOptions","upload","kendoUpload","success","_onUploadSuccess","_onUploadProgress","_onUploadSelect","error","_onUploadError","complete","_onUploadComplete","showFileList","multiple","saveUrl","autoUpload","saveField","validation","allowedExtensions","maxFileSize","getKendoUpload","_trigger","clearAllFiles","_removeLoadingOverlay","response","files","validationErrors","_initLoadingOverlay","eventType","uploadEvent","_iframeWrapper","_container","postProcess","genericCommand","InsertHtmlTool","initialValue","autoSize","ExportAsCommand","exportType","postToProxy","generateForm","submit","exportAsOptions","method","valueInput","exportTypeInput","fileNameInput","antiForgeryInput","csrf_param","ExportAsTool","changeHandler","_exec","itemTemplate","valueTemplate","iconClass","indentDirection","IndentFormatter","parentList","targets","mapImmutables","siblingList","nestedList","getListTypeAttr","targetIndex","styleType","targetNode","listParent","siblings","nextAll","IndentCommand","indentFormatter","OutdentCommand","OutdentTool","isOutdentable","listParentsCount","suitableNodes","ParagraphCommand","_insertMarker","_moveFocus","focusNode","shouldTrim","startInBlock","endInBlock","_blankAfter","paragraph","heading","tableNode","rng","emptyParagraphContent","parentChildrenLength","_insertParagraphAfter","NewLineCommand","filler","kbrParent","oldIE","KEDITORFILEURL","KEDITORFILETEXT","KEDITORFILETITLE","FileCommand","file","FileBrowser","_fileBrowser","ACTIVESTATE","SELECTEDSTATE","SCOPE","ROW","COL","ROWGROUP","COLGROUP","COLSPAN","ROWSPAN","TABLE","THEAD","TBODY","TR","TD","TH","getTouches","columnTemplate","tableFormatFinder","TableCommand","skipCleaners","_tableHtml","columnHtml","rowHeight","insertedTable","PopupTool","btn","popupTemplate","kendoPopup","copyAnchorStyles","_open","_activate","_toggle","_editor","TableWizardTool","TableWizardCommand","insertNewTable","kendoButton","_setTableSize","InsertTableTool","cols","cellWidth","cellHeight","firstCell","eq","lastCell","getOffset","tableFromLocation","floor","clientY","clientX","scrollLeft","offsetWidth","autoApplyNS","_valid","status","initiallyVisible","button","selectedRows","selectedColumns","changed","tableSize","stopImmediatePropagation","TableModificationCommand","_clearColIndexAttr","_findRowSpanCell","_resetElementResizing","_findNextTdInRow","td","lastTd","_adjustColgroups","colgroup","colElements","colgroupElements","numberOfCells","_associateHeaderIds","InsertRowCommand","cellCount","newRow","createdCell","_appendCell","newCell","InsertColumnCommand","columnIndex","_processForColSpan","_resizeCells","selectedCell","colSpanEffect","parsedWidth","unit","calculatedWidth","parseFloat","DeleteRowCommand","focusElement","rowParent","_focusElement","_handleRowSpanCells","adjacentCell","nextRow","firstRow","before","_reduceRowSpan","rowSpanValue","DeleteColumnCommand","columnCount","_handleColSpanCells","_reduceColSpan","colSpanValue","MergeCellsHorizontallyCommand","nextTd","_getColspan","MergeCellsVerticallyCommand","tr","targetRow","bottomTd","_getRowspan","SplitCellCommand","emptyTd","_splitCellHorizontally","_splitCellVertically","_getRowspanValue","_getColspanValue","tdToAdd","colSpanResult","rowSpanResult","TableModificationTool","commandsMap","insert","delete","column","TableFormatCommand","_showResizeHandles","TableFormatTool","isTable","align","nonSplittableTagsOnPaste","cleaners","ScriptCleaner","TabCleaner","MSWordFormatCleaner","WebkitFormatCleaner","HtmlTagsCleaner","HtmlAttrCleaner","HtmlContentCleaner","CustomCleaner","htmlToFragment","_startModification","_inProgress","_endModification","modificationInfo","_contentModification","_removeBomNodes","_onBeforeCopy","oncopy","oncut","_fileToDataURL","blob","deferred","reader","FileReader","File","getAsFile","readAsDataURL","_triggerPaste","_handleImagePaste","clipboardData","originalEvent","_insertImages","when","results","onpaste","clipboardNode","_decoreateClipboardNode","webkit","_moveToCaretPosition","clipboardRange","containers","ondragover","ondrop","dataTransfer","margin","padding","fontVariant","lineSpacing","nodeOffset","caretOffset","_caretOffset","translate","transform","rangeChanged","isStartTextNode","prevLength","bomNode","splittableParent","preventSplit","unwrapPasted","applicable","splitter","splittable","fragmentsHtml","elm","rangeEnd","focusedTable","siblingNodes","lastSiblingIndex","lastSibling","Cleaner","replacements","customReplacements","junkReplacements","convertFontMatch","$0","$1","closing","family","stripEmptyAnchors","listType","listData","startingSymbol","matchSymbol","symbol","isNumber","trimStartText","_guessUnorderedListStyle","_guessOrderedListStyle","_convertToLi","_checkForBullet","_getHtmlNoBullet","extractListLevels","level","_createList","rootMargin","rootIndex","lastRootLi","isLastRootLi","rootList","blockChildren","lastMargin","levels","acceptedNameTags","listIndex","levelType","removeAttributes","significantStyles","addSignificantStyles","isSignificantCss","removeAttributeNode","createColGroup","convertHeaders","boldedCells","removeParagraphs","paragraphs","removeTextNodes","trs","currentNode","tables","longestRow","titles","removeFormatting","filters","DomCleaner","cleanDom","collectTags","collectAttr","TextContainer","HtmlTextLines","separators","line","inlineBlockText","resetLine","appendText","textContainer","appendInlineBlockText","flashInlineBlockText","endLine","il","il1","jl","jl1","DomEnumerator","preventDown","hasText","enumerator","buildText","getDefaultSeparators","htmlLines","thead","tbody","cleaner","cellText","PREVIOUS_SIBLING","getSibling","tableCells","tableCellsWrappers","tableElements","inTable","RemoveTableContent","cellsTypes","startCell","endCell","_removeContent","getNext","evt","Event","isDefaultPrevented","deleteSelection","startTyping","_removeBomSpan","textContent","_addCaret","_restoreCaret","_handleDelete","caretPlaceholder","_merge","_cleanBomBefore","_handleBackspace","startAtLi","liIndex","startAtNonFirstLi","rangeStartNode","previousNode","_handleSelection","parentElementOrNode","_surroundFullyContent","_surroundFullySelectedAnchor","toLocaleLowerCase","_join","startImmutable","endImmutable","_moveMarker","_root","dest","_mergeWithTextNode","appendedNode","_isCaret","systemCommandIsInProgress","createUndoCommand","isModifierKey","isSystem","_toSelectableImmutables","_selectEditorBody","isCharacter","String","fromCharCode","modifier","_getShortcutModifier","navigator","platform","toUpperCase","metaKey","found","matchKey","toolKey","onEndTyping","stopTyping","force","timeout","what","ExportPdfCommand","PrintCommand","CopyFormatCommand","blockStyles","collectStyles","rangeNodes","populateStyles","destination","styleValue","styleKey","attributeKey","styles","nodeStyles","ApplyFormatCommand","removeEmptyElementsFromRange","cleanInlineParents","applyBlockStyles","applyInlineStyles","emptyElements","blockParent","outerWrapper","previousNodes","nextNodes","prevWrapper","nextWrapper","listItems","currentStyle","createdNode","topNode","CopyFormatTool","ApplyFormatTool","LineHeightCommand","LineHeightFormatTool","getKendoComboBox","prefixOptions","DOM","createMark","character","clonedRange","domRect","y","getBoundingClientRect","createElementNS","setAttributeNS","appendSvgMarks","overlay","FormattingMarksCommand","global","math","REGEX_NUMBER_IN_PERCENTAGES","REGEX_NUMBER_IN_PIXELS","STRING","inPercentages","ResizingUtils","constrain","lowerBound","upperBound","getScrollBarWidth","scrollbar","calculatePercentageRatio","total","inPixels","toPercentages","toPixels","KEY_DOWN","MOUSE_LEAVE","MOUSE_UP","TableElementResizing","_attachEventHandlers","eventNamespace","rootElement","_destroyResizeHandle","rtl","handle","dataAttribute","detectElementBorderHovering","resizingInProgress","resizing","handleOptions","tableElement","currentTarget","resizeHandle","elementBorderHovered","showResizeHandle","_initResizeHandle","setResizeHandlePosition","setResizeHandleDimensions","setResizeHandleDataAttributes","_attachResizeHandleEventHandlers","_initResizable","_hideResizeMarker","markerClass","_destroyResizable","Resizable","draggableElement","onResizeStart","onResize","resizeend","onResizeEnd","_disableKeyboard","setResizeHandleDragPosition","_enableKeyboard","_forceResizing","userEvents","ResizingFactory","resizingName","_destroyResizing","_initResizing","parentTable","resizingType","abs","RESIZE_HANDLE_CLASS","RESIZE_MARKER_CLASS","BODY","COLATTR","COMMA","WIDTH","handleWidth","borderOffset","mousePosition","tableInnerElement","tBodies","scrollTopOffset","scrollLeftOffset","columnWidthOffset","scrollBarWidth","columnOffsetLeft","innerElementOffsetTop","tableHead","tableBody","fullHeight","columnWidth","columnLeftOffset","adjacentColumnWidth","resizeHandleOffsetLeft","handleOffset","newWidth","initialAdjacentColumnWidth","initialColumnWidth","nextColumn","rtlModifier","initialDeltaX","initialDelta","_setTableComputedWidth","_setColumnsComputedWidth","_resizeColumn","_resizeTopAndBottomColumns","_resizeAdjacentColumns","innerElementWidth","currentColumnsWidths","topAndBottomColumns","innerTableElement","deltaWidth","adjacentColumns","_resizeAdjacentColumn","adjacentColumn","HEIGHT","handleHeight","rowOffsetLeft","rowOffsetTop","topInnerTableElement","$row","tableTopOffset","resizeHandleOffsetTop","currentRowHeight","initialTableHeight","tableHeadHeight","tableBodyHeight","initialStyleHeight","newRowHeight","_setRowsHeightInPixels","_setTableHeight","_setRowsHeightInPercentages","currentRowsHeights","newHeight","Draggable","DRAG_START","DRAG","DRAG_END","HALF_INSIDE","MOUSE_OVER","MOUSE_OUT","EAST","NORTH","NORTHEAST","NORTHWEST","SOUTH","SOUTHEAST","SOUTHWEST","WEST","ElementResizeHandle","_addStyles","_initDraggable","_initPositioningStrategy","_initDraggingStrategy","resizableElement","_destroyDraggable","_setPosition","_positioningStrategy","getPosition","_onMouseOver","_onMouseOut","HandlePositioningStrategy","_draggable","dragstart","_onDragStart","drag","_onDrag","_onDragEnd","_draggingStrategy","adjustDragDelta","deltaX","deltaY","initialDeltaY","HandleDraggingStrategy","StrategyFactory","_items","register","itemsLength","PositioningStrategyFactory","calculatePosition","handleOffsetPosition","applyHandleOffset","applyScrollOffset","rootLeft","EastPositioningStrategy","NorthPositioningStrategy","NortheastPositioningStrategy","NorthwestPositioningStrategy","SouthPositioningStrategy","SoutheastPositioningStrategy","SouthwestPositioningStrategy","WestPositioningStrategy","DraggingStrategyFactory","adjustment","deltas","xAxisAdjustment","yAxisAdjustment","HorizontalDraggingStrategy","EastDraggingStrategy","WestDraggingStrategy","VerticalDraggingStrategy","NorthDraggingStrategy","SouthDraggingStrategy","HorizontalAndVerticalDraggingStrategy","NorthEastDraggingStrategy","NorthWestDraggingStrategy","SouthEastDraggingStrategy","SouthWestDraggingStrategy","RESIZE_HANDLE_WRAPPER_CLASS","ELEMENT_RESIZING_CLASS","MOUSE_DOWN","ELEMENT_TYPES","isUndefined","ElementResizing","handles","_destroyResizeHandles","appendHandlesTo","_resizeWidth","_resizeHeight","_getMaxDimensionValue","dimension","dimensionLowercase","parentDimension","parentScrollOffset","_initResizeHandles","_bindToResizeHandlesEvents","_onResizeHandleDragStart","_initialElementHeight","_initialElementWidth","_onResizeHandleDrag","_onResizeHandleDragEnd","TableResizing","_hasRowsInPixels","ratioValue","ratioTotalValue","constrainedWidth","styleWidth","currentWidth","parentWidth","_setColumnsWidth","constrainedHeight","styleHeight","currentHeight","parentHeight","hasRowsInPixels","parentColumn","columnsLength","isWidthInPercentages","ImageResizing","_onResizeHandleDragVertical","_onResizeHandleDragHorizontal","_onResizeHandleDragLocked","_getDeltas","initialWidth","initialHeight","MAX_SAFE_INTEGER","factory","hasImg","eventTarget","eventCurrentTarget","isResizeHandleOrChild","tableResizing","cellsFormatFinder","reUnit","COL_INDEX","isTableCellWizard","tableCellWizard","selectedTable","_sourceTable","_selectedTable","selectedCells","_selectedTableCells","_selectedCells","closeCallback","onDialogClose","parseTable","TableWizardDialog","insertTable","createNewTable","updateTable","_ensureFocusableAfterTable","lastSelectedRow","cellProp","tableProp","_lastInCollection","_deleteTableRows","_addRows","_updateColumns","_updateTableProperties","cellProperties","_updateCellProperties","_updateCaption","_updateHeadersWithThead","_updateHeadersNoThead","_updateHeaderAssociates","_isHeadingRow","_isHeadingCell","cellsWithHeadersAssociated","headingIds","checkHeader","header","headersArray","headersAttr","some","_insertCells","insertCell","createTHead","_createTableRows","createTBody","cellsWithHeaders","_addScopes","initialIndex","insertRow","cellsLength","newRowsCount","firstRowLastCell","numberOfColumns","lastCurrentCell","rowColumns","deleteCell","_getStylesData","topCellPadding","_getNumericValue","leftCellPadding","bottomCellPadding","rightCellPadding","tableData","paddingTop","paddingLeft","paddingBottom","paddingRight","captionContent","deleteCaption","createCaption","_getAlignmentData","verticalAlign","_swapToHeaderCells","deleteTHead","_removeScopes","_removeAssociates","headerCols","whiteSpace","widthUnit","heightUnit","backgroundColor","bgColor","borderCollapse","_getTablePositionData","tStyle","captionClone","tableAlignment","_getAlignment","tablePosition","_getTablePosition","numberOfHeaderColumns","tableJson","_getUnit","parseTableRows","rowData","cellData","parseCell","cStyle","horizontalOnly","hAlign","vAlign","collection","TableWizardEditTool","TableCellWizardEditTool","FORM_FIELD_CLASS","INVISIBLE_CLASS","DOT","numericTextBoxSettings","borderStyles","textWrapDropDownSettings","tablePositionDropDownSettings","tableAlignmentDropDownSettings","cellAlignmentDropDownSettings","accessibilityAlignmentDropDownSettings","tablePropertiesDialogTemplate","cellPropertiesDialogTemplate","_openTablePropertiesDialog","closeHandler","_dialogTemplate","collectTableDialogValues","components","_initTabStripComponent","_tablePropertiesForm","_createTablePropertiesForm","_accessibilityPropertiesForm","_createAccessibilityPropertiesForm","_openCellPropertiesDialog","collectCellDialogValues","_cellPropertiesForm","_createCellPropertiesForm","isCellProperties","tabStrip","kendoTabStrip","_collectTableViewValues","_collectAccessibilityViewValues","_collectCellViewValues","tableView","check","cellView","wrapTextValue","accessibilityView","_addUnit","_initNumericTextbox","storage","settings","kendoNumericTextBox","_initDropDownList","kendoDropDownList","_setComponentValue","_initBorderStyleDropDown","_initTablePositionDropDown","_initPositionDropDown","_initTableAlignmentDropDown","_initAlignmentDropDown","_initCellAlignmentDropDown","_initAccessibilityAlignmentDropDown","_initTextWrapDropDown","_initAssociationDropDown","_initColorPicker","kendoColorPicker","clearButton","_initInput","kendoTextBox","_initCheckbox","kendoCheckBox","_initTextArea","kendoTextArea","_destroyComponents","dialogTemplate","_onPaddingTopChange","viewType","topCellPaddingNumeric","topCellPaddingValue","leftCellPaddingNumeric","bottomCellPaddingNumeric","rightCellPaddingNumeric","_cachedPadding","_onPaddingCheckChange","checked","bottomCellPaddingValue","leftCellPaddingValue","rightCellPaddingValue","_onColumnsNumberChange","headerColumnsNumeric","currentNumberOfColumnsHeaders","_onRowsNumberChange","headerRowsNumeric","currentNumberOfRowHeaders","numberOfRows","layout","grid","gutter","layoutWrapper","hint","optional","__meta__","category","description","depends","features","kendo$1"],"sources":["kendo.editor.js"],"mappings":"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","sourcesContent":["import './kendo.combobox.js';\nimport './kendo.dropdownlist.js';\nimport './kendo.resizable.js';\nimport './kendo.window.js';\nimport './kendo.colorpicker.js';\nimport './kendo.imagebrowser.js';\nimport './kendo.numerictextbox.js';\nimport './kendo.textarea.js';\nimport './kendo.core.js';\nimport './kendo.toolbar.js';\nimport './kendo.icons.js';\nimport './kendo.form.js';\nimport './kendo.filebrowser.js';\nimport './kendo.draganddrop.js';\nimport './kendo.html.button.js';\nimport './kendo.tabstrip.js';\n\n(function(kendo) {\n    var UndoRedoStack = kendo.Observable.extend({\n        init: function(options) {\n            kendo.Observable.fn.init.call(this, options);\n            this.clear();\n        },\n        events: [ \"undo\", \"redo\" ],\n        push: function (command) {\n            this.stack = this.stack.slice(0, this.currentCommandIndex + 1);\n            this.currentCommandIndex = this.stack.push(command) - 1;\n        },\n        undo: function () {\n            if (this.canUndo()) {\n                var command = this.stack[this.currentCommandIndex--];\n                command.undo();\n                this.trigger(\"undo\", { command: command });\n            }\n        },\n        redo: function () {\n            if (this.canRedo()) {\n                var command = this.stack[++this.currentCommandIndex];\n                command.redo();\n                this.trigger(\"redo\", { command: command });\n            }\n        },\n        clear: function() {\n            this.stack = [];\n            this.currentCommandIndex = -1;\n        },\n        canUndo: function () {\n            return this.currentCommandIndex >= 0;\n        },\n        canRedo: function () {\n            return this.currentCommandIndex != this.stack.length - 1;\n        }\n    });\n\n    kendo.deepExtend(kendo, {\n        util: {\n            UndoRedoStack: UndoRedoStack\n        }\n    });\n})(kendo);\n\n(function($,undefined$1) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Widget = kendo.ui.Widget,\n        os = kendo.support.mobileOS,\n        browser = kendo.support.browser,\n        extend = $.extend,\n        deepExtend = kendo.deepExtend,\n        keys = kendo.keys,\n        outerWidth = kendo._outerWidth,\n        outerHeight = kendo._outerHeight,\n        NS = \".kendoEditor\";\n\n    const FORMATTING_MARKS_STYLE_ID = \"formatting-marks-style\",\n          FORMATTING_MARKS_OVERLAY_ID = \"formatting-marks-overlay\",\n          FORMATTING_MARKS_OVERLAY_WRAPPER_ID = \"formatting-marks-overlay-wrapper\";\n\n    var SELECT = \"select\";\n    var SELECT_OVERLAY_SELECTOR = \"select.k-select-overlay\";\n    var PLACEHOLDER_CLASS = \"k-placeholder\";\n    var PLACEHOLDER_TAG_ID = \"placeholder\";\n    var REFRESH_INTERVAL = 200;\n    var DEFAULT_LANGUAGE = \"en\";\n\n    var NATIVE_TOOLS = [\n        \"insertLineBreak\",\n        \"insertParagraph\",\n        \"redo\",\n        \"undo\",\n        \"autoLink\"\n    ];\n\n    var EditorUtils = {\n        editorWrapperTemplate: () =>\n            '<div class=\"k-editor\">' +\n                '<div class=\"k-editor-toolbar\" role=\"toolbar\"></div>' +\n                '<div class=\"k-editable-area k-editor-content\"></div>' +\n            '</div>',\n\n        formatByName: function(name, format) {\n            for (var i = 0; i < format.length; i++) {\n                if ($.inArray(name, format[i].tags) >= 0) {\n                    return format[i];\n                }\n            }\n        },\n\n        getToolCssClass: function(name, icon) {\n            var toolCssClassNames = {\n                superscript: \"supscript\",\n                subscript: \"subscript\",\n                justifyLeft: \"align-left\",\n                justifyCenter: \"align-center\",\n                justifyRight: \"align-right\",\n                justifyFull: \"align-justify\",\n                insertUnorderedList: \"list-unordered\",\n                insertOrderedList: \"list-ordered\",\n                insertUpperRomanList: \"list-roman-upper\",\n                insertLowerRomanList: \"list-roman-lower\",\n                \"import\": \"import\",\n                indent: \"indent\",\n                outdent: \"outdent\",\n                createLink: \"link\",\n                unlink: \"unlink\",\n                insertImage: \"image\",\n                insertFile: \"file-add\",\n                viewHtml: \"code\",\n                foreColor: \"foreground-color\",\n                backColor: \"droplet\",\n                createTable: \"table-add\",\n                addColumnLeft: \"table-column-insert-left\",\n                addColumnRight: \"table-column-insert-right\",\n                addRowAbove: \"table-row-insert-above\",\n                addRowBelow: \"table-row-insert-below\",\n                deleteRow: \"table-row-delete\",\n                deleteColumn: \"table-column-delete\",\n                mergeCellsHorizontally: \"cells-merge-horizontally\",\n                mergeCellsVertically: \"cells-merge-vertically\",\n                splitCellHorizontally: \"cell-split-horizontally\",\n                splitCellVertically: \"cell-split-vertically\",\n                tableProperties: \"table-properties\",\n                tableCellProperties: \"table-cell-properties\",\n                tableWizardInsert: \"table-wizard\",\n                tableAlignLeft: \"table-position-start\",\n                tableAlignCenter: \"table-position-center\",\n                tableAlignRight: \"table-position-end\",\n                cleanFormatting: \"clear-css\",\n                copyFormat: \"copy-format\",\n                applyFormat: \"apply-format\",\n                pdf: \"file-pdf\"\n            };\n\n            var cssClass = toolCssClassNames[name];\n\n            if (cssClass) {\n                return cssClass;\n            }\n\n            if (icon) {\n                return icon;\n            }\n\n            return EditorUtils.nameToKebab(name);\n        },\n\n        nameToKebab: function(name) {\n            return name.replace(/([a-z])([A-Z])/g, \"$1-$2\")\n                .replace(/[\\s_]+/g, '-')\n                .toLowerCase();\n        },\n\n        registerTool: function(toolName, tool) {\n            if (!tool.name) {\n                tool.options.name = toolName;\n                tool.name = toolName.toLowerCase();\n            }\n\n            if (!tool.options.ui) {\n                tool.options.ui = {};\n            }\n\n            tool.options.ui.command = toolName;\n\n            Editor.defaultTools[toolName] = tool;\n        },\n\n        registerFormat: function(formatName, format) {\n            Editor.fn.options.formats[formatName] = format;\n        },\n\n        cacheComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(comments[index], \"{\" + index + \"}\");\n            }\n            return content;\n        },\n\n        retrieveComments: function(content, comments) {\n            for (var index in comments) {\n                content = content.replace(\"{\" + index + \"}\", comments[index]);\n            }\n            return content;\n        }\n    };\n\n    var messages = {\n        auto: \"Auto\",\n        bold: \"Bold\",\n        italic: \"Italic\",\n        underline: \"Underline\",\n        strikethrough: \"Strikethrough\",\n        superscript: \"Superscript\",\n        subscript: \"Subscript\",\n        fitToCell: \"Fit to cell\",\n        justifyCenter: \"Center text\",\n        justifyLeft: \"Align text left\",\n        justifyRight: \"Align text right\",\n        justifyFull: \"Justify\",\n        insertUnorderedList: \"Insert unordered list\",\n        insertOrderedList: \"Insert ordered list\",\n        lineHeight: \"Set line height\",\n        formattingMarks: \"Toggle formatting marks\",\n        indent: \"Indent\",\n        outdent: \"Outdent\",\n        createLink: \"Insert hyperlink\",\n        unlink: \"Remove hyperlink\",\n        insertImage: \"Insert image\",\n        insertFile: \"Insert file\",\n        insertHtml: \"Insert HTML\",\n        viewHtml: \"View HTML\",\n        fontName: \"Select font family\",\n        fontNameInherit: \"(inherited font)\",\n        fontSize: \"Select font size\",\n        fontSizeInherit: \"(inherited size)\",\n        formatBlock: \"Format\",\n        formatting: \"Format\",\n        foreColor: \"Color\",\n        backColor: \"Background color\",\n        style: \"Styles\",\n        emptyFolder: \"Empty Folder\",\n        editAreaTitle: \"Editable area. Press F10 for toolbar.\",\n        uploadFile: \"Upload\",\n        overflowAnchor: \"More tools\",\n        orderBy: \"Arrange by:\",\n        orderBySize: \"Size\",\n        orderByName: \"Name\",\n        invalidFileType: \"The selected file \\\"{0}\\\" is not valid. Supported file types are {1}.\",\n        deleteFile: 'Are you sure you want to delete \"{0}\"?',\n        overwriteFile: 'A file with name \"{0}\" already exists in the current directory. Do you want to overwrite it?',\n        directoryNotFound: \"A directory with this name was not found.\",\n        imageWebAddress: \"Web address\",\n        imageAltText: \"Alternate text\",\n        imageWidth: \"Width (px)\",\n        imageHeight: \"Height (px)\",\n        fileWebAddress: \"Web address\",\n        fileTitle: \"Title\",\n        fileText: \"Text\",\n        linkWebAddress: \"Web address\",\n        linkText: \"Text\",\n        linkToolTip: \"ToolTip\",\n        linkOpenInNewWindow: \"Open link in new window\",\n        dialogUpdate: \"Update\",\n        dialogInsert: \"Insert\",\n        dialogOk: \"Confirm\",\n        dialogCancel: \"Cancel\",\n        cleanFormatting: \"Clean formatting\",\n        createTable: \"Create a table\",\n        createTableHint: \"Create a {0} x {1} table\",\n        addColumnLeft: \"Add column on the left\",\n        addColumnRight: \"Add column on the right\",\n        addRowAbove: \"Add row above\",\n        addRowBelow: \"Add row below\",\n        deleteRow: \"Delete row\",\n        deleteColumn: \"Delete column\",\n        mergeCellsHorizontally: \"Merge cells horizontally\",\n        mergeCellsVertically: \"Merge cells vertically\",\n        splitCellHorizontally: \"Split cells horizontally\",\n        splitCellVertically: \"Split cells vertically\",\n        tableAlignLeft: \"Table Align Left\",\n        tableAlignCenter: \"Table Align Center\",\n        tableAlignRight: \"Table Align Right\",\n        tableWizard: \"Table Wizard\",\n        tableProperties: \"Table Properties\",\n        tableCellProperties: \"Cell Properties\",\n        tableTab: \"General\",\n        cellTab: \"Cell\",\n        accessibilityTab: \"Advanced\",\n        caption: \"Caption\",\n        summary: \"Summary\",\n        width: \"Width\",\n        height: \"Height\",\n        units: \"Units\",\n        cellSpacing: \"Cell Spacing\",\n        cellPadding: \"Cell Padding\",\n        topPadding: \"Top\",\n        leftPadding: \"Left\",\n        bottomPadding: \"Bottom\",\n        rightPadding: \"Right\",\n        independentCellPaddings: \"Independent Cell Paddings\",\n        cellMargin: \"Cell Margin\",\n        alignment: \"Alignment\",\n        captionAlignment: \"Caption alignment\",\n        position: \"Position\",\n        background: \"Background\",\n        tableBackground: \"Table background\",\n        cssClass: \"CSS Class\",\n        id: \"ID\",\n        border: \"Border\",\n        borderStyle: \"Border Style\",\n        borderWidth: \"Border Width\",\n        borderColor: \"Border Color\",\n        collapseBorders: \"Collapse borders\",\n        wrapText: \"Wrap text\",\n        associateCellsWithHeaders: \"Associate headers\",\n        alignLeft: \"Align Left\",\n        alignCenter: \"Align Center\",\n        alignRight: \"Align Right\",\n        alignLeftTop: \"Align Left Top\",\n        alignCenterTop: \"Align Center Top\",\n        alignRightTop: \"Align Right Top\",\n        alignLeftMiddle: \"Align Left Middle\",\n        alignCenterMiddle: \"Align Center Middle\",\n        alignRightMiddle: \"Align Right Middle\",\n        alignLeftBottom: \"Align Left Bottom\",\n        alignCenterBottom: \"Align Center Bottom\",\n        alignRightBottom: \"Align Right Bottom\",\n        alignRemove: \"Remove Alignment\",\n        columns: \"Columns\",\n        rows: \"Rows\",\n        selectAllCells: \"Apply to all cells\",\n        applyToColumn: \"apply to column\",\n        applyToRow: \"apply to row\",\n        exportAs: \"Export As\",\n        \"import\": \"Import\",\n        print: \"Print\",\n        headerRows: \"Header Rows\",\n        headerColumns: \"Header Cols\",\n        tableSummaryPlaceholder: \"Summary attribute is not HTML5 compatible.\",\n        associateNone: \"None\",\n        associateScope: \"Associate using 'scope' attribute\",\n        associateIds: \"Associate using Ids\",\n        copyFormat: \"Copy format\",\n        applyFormat: \"Apply format\",\n        borderNone: \"None\",\n        undo: \"Undo\",\n        redo: \"Redo\"\n    };\n\n    var supportedContentEditable = typeof(document.documentElement.contentEditable) != 'undefined';\n\n    var toolGroups = {\n        basic: [\"bold\", \"italic\", \"underline\", \"strikethrough\"],\n        undo: [\"undo\", \"redo\"],\n        scripts: [\"subscript\", \"superscript\" ],\n        alignment: [\"justifyLeft\", \"justifyCenter\", \"justifyRight\", \"justifyFull\" ],\n        lines: [\"lineHeight\"],\n        symbols: [\"formattingMarks\"],\n        links: [\"insertImage\", \"insertFile\", \"createLink\", \"unlink\"],\n        lists: [\"insertUnorderedList\", \"insertOrderedList\", \"insertUpperRomanList\", \"insertLowerRomanList\",],\n        dent: [\"indent\", \"outdent\"],\n        tablesWizard: [\"tableProperties\", \"tableCellProperties\"],\n        tablesInsert: [\"createTable\"],\n        tablesAddDelete: [ \"addColumnLeft\", \"addColumnRight\", \"addRowAbove\", \"addRowBelow\", \"deleteRow\", \"deleteColumn\" ],\n        tablesMerge: [ \"mergeCellsHorizontally\", \"mergeCellsVertically\", \"splitCellHorizontally\", \"splitCellVertically\" ],\n        tablesPosition: [ \"tableAlignLeft\", \"tableAlignCenter\", \"tableAlignRight\" ],\n        formatPainter: [ \"copyFormat\", \"applyFormat\" ]\n    };\n\n    var Editor = Widget.extend({\n        init: function(element, options) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                toolbarContainer,\n                type, domElement;\n\n            /* suppress initialization in devices w/o proper contenteditable support */\n            if (!supportedContentEditable) {\n                return;\n            }\n\n            Widget.fn.init.call(that, element, options);\n\n            that.options = deepExtend({}, that.options, options);\n\n            element = that.element;\n            domElement = element[0];\n            type = dom.name(domElement);\n\n            this._registerHandler(\n                element.closest(\"form\"), \"submit\", that.update.bind(that, undefined$1)\n            );\n\n            toolbarContainer = that._setupType(element);\n\n            that._initToolbar(toolbarContainer);\n            that._setupHeight(type);\n            that._resizable();\n            that._initializeContentElement(that);\n            that._setupKeyboard();\n\n            that.clipboard = new editorNS.Clipboard(this);\n            that.undoRedoStack = new kendo.util.UndoRedoStack();\n\n            that._populateValue(options, domElement);\n\n            that._registerHandler(document, {\n                \"mousedown\": function() { that._endTyping(); },\n                \"mouseup\": function(e) { that._mouseup(e); }\n            });\n\n            that._registerHandler(window, \"resize\", that._handleSpaceAndNewLines.bind(that));\n\n            that._initializeImmutables();\n\n            if (type == \"textarea\") {\n                that._ariaLabel(that.wrapper.find(\"iframe\"));\n            }\n\n            that.toolbar.resize();\n\n            kendo.notify(that);\n\n            if (that._showWatermarkOverlay) {\n                that._showWatermarkOverlay((that.wrapper && that.wrapper[0]) || that.element[0]);\n            }\n        },\n\n        events: [\n            \"select\",\n            \"change\",\n            \"execute\",\n            \"error\",\n            \"paste\",\n            \"keydown\",\n            \"keyup\"\n        ],\n\n        options: {\n            name: \"Editor\",\n            messages: messages,\n            placeholder: \"\",\n            nonce: \"\",\n            unsafeInline: true,\n            formats: {},\n            encoded: true,\n            formattingMarksRefreshDelay: 250,\n            domain: null,\n            resizable: false,\n            deserialization: {\n                custom: null\n            },\n            serialization: {\n                entities: true,\n                semantic: true,\n                scripts: false,\n                optimizeTags: false,\n                keepEOL: false\n            },\n            pasteCleanup: {\n                all: false,\n                css: false,\n                custom: null,\n                keepNewLines: false,\n                msAllFormatting: false,\n                msConvertLists: true,\n                msTags: true,\n                none: false,\n                span: false\n            },\n            stylesheets: [],\n            dialogOptions: {\n                modal: true, resizable: false, draggable: true,\n                animation: false\n            },\n            imageBrowser: null,\n            fileBrowser: null,\n            navigateOnTab: false,\n            fontName: [\n                { text: \"Arial\", value: \"Arial, Helvetica, sans-serif\" },\n                { text: \"Courier New\", value: \"\\\"Courier New\\\", Courier, monospace\" },\n                { text: \"Georgia\", value: \"Georgia, serif\" },\n                { text: \"Impact\", value: \"Impact, Charcoal, sans-serif\" },\n                { text: \"Lucida Console\", value: \"\\\"Lucida Console\\\", Monaco, monospace\" },\n                { text: \"Tahoma\", value: \"Tahoma, Geneva, sans-serif\" },\n                { text: \"Times New Roman\", value: \"\\\"Times New Roman\\\", Times, serif\" },\n                { text: \"Trebuchet MS\", value: \"\\\"Trebuchet MS\\\", Helvetica, sans-serif\" },\n                { text: \"Verdana\", value: \"Verdana, Geneva, sans-serif\" }\n            ],\n            fontSize: [\n                { text: \"1 (8pt)\", value: \"xx-small\" },\n                { text: \"2 (10pt)\", value: \"x-small\" },\n                { text: \"3 (12pt)\", value: \"small\" },\n                { text: \"4 (14pt)\", value: \"medium\" },\n                { text: \"5 (18pt)\", value: \"large\" },\n                { text: \"6 (24pt)\", value: \"x-large\" },\n                { text: \"7 (36pt)\", value: \"xx-large\" }\n            ],\n            formatBlock: [\n                { text: \"Paragraph\", value: \"p\" },\n                { text: \"Quotation\", value: \"blockquote\" },\n                { text: \"Heading 1\", value: \"h1\" },\n                { text: \"Heading 2\", value: \"h2\" },\n                { text: \"Heading 3\", value: \"h3\" },\n                { text: \"Heading 4\", value: \"h4\" },\n                { text: \"Heading 5\", value: \"h5\" },\n                { text: \"Heading 6\", value: \"h6\" }\n            ],\n            tools: [\n                \"formatting\",\n                \"bold\",\n                \"italic\",\n                \"underline\",\n                \"undo\",\n                \"redo\",\n                \"justifyLeft\",\n                \"justifyCenter\",\n                \"justifyRight\",\n                \"copyFormat\",\n                \"applyFormat\",\n                \"insertUnorderedList\",\n                \"insertOrderedList\",\n                \"indent\",\n                \"outdent\",\n                \"createLink\",\n                \"unlink\",\n                \"insertImage\",\n                \"tableProperties\",\n                \"tableCellProperties\",\n                \"createTable\",\n                \"addRowAbove\",\n                \"addRowBelow\",\n                \"addColumnLeft\",\n                \"addColumnRight\",\n                \"deleteRow\",\n                \"deleteColumn\",\n                \"mergeCellsHorizontally\",\n                \"mergeCellsVertically\",\n                \"splitCellHorizontally\",\n                \"splitCellVertically\",\n                \"tableAlignLeft\",\n                \"tableAlignCenter\",\n                \"tableAlignRight\"\n            ]\n        },\n\n        destroy: function() {\n            var editor = this;\n\n            Widget.fn.destroy.call(this);\n\n            this._endTyping(true);\n\n            this._deregisterHandlers();\n\n            clearTimeout(this._spellCorrectTimeout);\n\n            this._focusOutside();\n\n            this.toolbar.destroy();\n\n            if (this.windowInstance) {\n                this.windowInstance.destroy();\n            }\n            if (this.tablePopup) {\n                this.tablePopup.destroy();\n            }\n\n            editor._destroyUploadWidget();\n\n            if (this.resizeObserver) {\n                this.resizeObserver.disconnect();\n                this.resizeObserver = null;\n                this.wrapper.css(\"min-height\", \"\");\n                this.wrapper.css(\"max-height\", \"\");\n            }\n\n            editor._destroyResizings();\n\n            editor._destroyFormattingMarksOverlay();\n\n            kendo.destroy(this.wrapper);\n        },\n\n        setOptions: function(options) {\n            var editor = this;\n\n            Widget.fn.setOptions.call(editor, options);\n\n            if (options.tools) {\n                this._setOptionsTools(options.tools);\n            }\n\n            this._initializePlaceholder();\n        },\n\n        createRange: function(document) {\n            return kendo.ui.editor.RangeUtils.createRange(document || this.document);\n        },\n\n        encodedValue: function() {\n            return kendo.ui.editor.Dom.encode(this.value());\n        },\n\n        exec: function(name, params) {\n            var that = this;\n            var command = null;\n            var defaultTools = kendo.ui.Editor.defaultTools;\n            var range, tool, prevented;\n\n            if (!name) {\n                throw new Error(\"kendoEditor.exec(): `name` parameter cannot be empty\");\n            }\n\n            if (that.body.getAttribute(\"contenteditable\") !== \"true\" &&\n                name !== \"print\" &&\n                name !== \"pdf\" &&\n                name !== \"exportAs\") {\n                return false;\n            }\n\n            if (!that.keyboard.isTypingInProgress()) {\n                that._focusBody();\n                that.selectRange(that._range || that.getRange());\n            }\n\n            tool = that.tools[name] || defaultTools[name];\n\n            if (!tool) {\n                Object.keys(defaultTools).map(key => {\n                    if (key.toLowerCase() === name) {\n                        tool = defaultTools[key];\n                    }\n                });\n            }\n\n            if (tool) {\n                range = that.getRange();\n\n                if (tool.command) {\n                    command = tool.command(extend({ range: range, body: that.body, immutables: !!that.immutables }, params));\n                }\n\n                prevented = that.trigger(\"execute\", { name: name, command: command });\n\n                if (prevented) {\n                    return;\n                }\n\n                if (/^(undo|redo)$/i.test(name)) {\n                    that.undoRedoStack[name]();\n                } else if (command) {\n                    that.execCommand(command);\n\n                    if (command.async) {\n                        command.change = that._selectionChange.bind(that);\n                        return;\n                    }\n                }\n\n                that._handleSpaceAndNewLines();\n                that._selectionChange();\n            }\n        },\n\n        execCommand: function(command) {\n            if (!command.managesUndoRedo) {\n                this.undoRedoStack.push(command);\n            }\n\n            command.editor = this;\n            command.exec();\n        },\n\n        focus: function() {\n            this.restoreSelection();\n        },\n\n        getRange: function() {\n            var selection = this.getSelection(),\n                range = selection && selection.rangeCount > 0 ? selection.getRangeAt(0) : this.createRange(),\n                doc = this.document;\n\n            if (range.startContainer == doc && range.endContainer == doc && !range.startOffset && !range.endOffset) {\n                range.setStart(this.body, 0);\n                range.collapse(true);\n            }\n\n            return range;\n        },\n\n        getSelection: function() {\n            return kendo.ui.editor.SelectionUtils.selectionFromDocument(this.document);\n        },\n\n        paste: function(html, options) {\n            this.focus();\n\n            var command = new kendo.ui.editor.InsertHtmlCommand($.extend({\n                range: this.getRange(),\n                html: html\n            }, options));\n\n            command.editor = this;\n\n            command.exec();\n        },\n\n        refresh: function() {\n            var that = this;\n\n            if (that.textarea) {\n                that._destroyResizings();\n                // preserve updated value before re-initializing\n                // don't use update() to prevent the editor from encoding the content too early\n                var value = that.value();\n                that.textarea.val(value);\n                that.wrapper.find(\"iframe\").remove();\n                that._initializeContentElement(that);\n                that.value(value);\n            }\n        },\n\n        restoreSelection: function() {\n            this._focusBody();\n\n            if (this.selectionRestorePoint) {\n                this.selectRange(this.selectionRestorePoint.toRange());\n            }\n        },\n\n        saveSelection: function(range) {\n            range = range || this.getRange();\n            var container = range.commonAncestorContainer,\n                body = this.body;\n\n            if (container == body || $.contains(body, container)) {\n                this.selectionRestorePoint = new kendo.ui.editor.RestorePoint(range, body);\n            }\n        },\n\n        selectedHtml: function() {\n            return kendo.ui.editor.Serializer.domToXhtml(this.getRange().cloneContents());\n        },\n\n        selectRange: function(range) {\n            this._focusBody();\n            var selection = this.getSelection();\n            selection.removeAllRanges();\n            selection.addRange(range);\n            this.saveSelection(range);\n        },\n\n        state: function(toolName) {\n            var tool = kendo.ui.Editor.defaultTools[toolName];\n            var finder = tool && (tool.options.finder || tool.finder);\n            var RangeUtils = kendo.ui.editor.RangeUtils;\n            var range, textNodes;\n\n            if (finder) {\n                range = this.getRange();\n\n                textNodes = RangeUtils.textNodes(range);\n\n                if (!textNodes.length && range.collapsed) {\n                    textNodes = [range.startContainer];\n                }\n\n                return finder.getFormat ? finder.getFormat(textNodes) : finder.isFormatted(textNodes);\n            }\n\n            return false;\n        },\n\n        update: function(value) {\n            value = value || this.options.encoded ? this.encodedValue() : this.value();\n\n            if (this.textarea) {\n                this.textarea.val(value);\n                this._togglePlaceholder(!value.trim());\n            } else {\n                this._oldValue = value;\n            }\n        },\n\n        value: function(html) {\n            var body = this.body,\n                editorNS = kendo.ui.editor,\n                options = this.options,\n                currentHtml = editorNS.Serializer.domToXhtml(body, options.serialization);\n\n            if (html === undefined$1) {\n                return currentHtml;\n            }\n\n            if (html == currentHtml) {\n                return;\n            }\n\n            editorNS.Serializer.htmlToDom(html, body, options.deserialization);\n\n            this.selectionRestorePoint = null;\n            this.update();\n            this._refreshTools();\n        },\n\n        _bindTools: function() {\n            var that = this,\n                defaultTools = this.tools;\n\n            that.unbind(\"select\", that.toolbar.resize.bind(that.toolbar));\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each((i, el) => {\n                    var toolName = el.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName];\n\n                    if (tool && tool.initialize) {\n                        tool.initialize($(el), that);\n                    }\n                });\n\n            that.bind(\"select\", that.toolbar.resize.bind(that.toolbar));\n        },\n\n        _blur: function() {\n            var textarea = this.textarea;\n            var old = textarea ? textarea.val() : this._oldValue;\n            var value = this.options.encoded ? this.encodedValue() : this.value();\n\n            this.update();\n\n            if (textarea) {\n                textarea.trigger(\"blur\");\n            }\n\n            if (value != old) {\n                this.trigger(\"change\");\n                if (textarea) {\n                    textarea.trigger(\"change\");\n                }\n            }\n        },\n\n        _containsRange: function(range) {\n            var dom = kendo.ui.editor.Dom;\n            var body = this.body;\n            return range && dom.isAncestorOrSelf(body, range.startContainer) &&\n                dom.isAncestorOrSelf(body, range.endContainer);\n        },\n\n        _createContentElement: function(stylesheets) {\n            var editor = this;\n            var iframe, wnd, doc;\n            var textarea = editor.textarea;\n            var specifiedDomain = editor.options.domain;\n            var domain = specifiedDomain || document.domain;\n            var domainScript = \"\";\n            var src = 'javascript:\"\"';\n            var lang = \"\";\n\n            textarea.hide();\n\n            iframe = $(\"<iframe />\", { title: editor.options.messages.editAreaTitle, frameBorder: \"0\" })[0];\n\n            $(iframe)\n                .css(\"display\", \"\")\n                .addClass(\"k-content k-iframe\")\n                .attr(\"tabindex\", textarea[0].tabIndex)\n                .insertBefore(textarea);\n\n            // automatically relax same-origin policy if document.domain != location.hostname,\n            // or forcefully relax if options.domain is specified (for document.domain = document.domain scenario)\n            if (specifiedDomain || domain != location.hostname) {\n                // relax same-origin policy\n                domainScript = `<script ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>document.domain=\"${domain}\"</script>`;\n                src = \"javascript:document.write('\" + domainScript + \"')\";\n                iframe.src = src;\n            }\n\n            if (!iframe.src) {\n                iframe.src = \"\";\n            }\n\n            wnd = iframe.contentWindow || iframe;\n            doc = wnd.document || iframe.contentDocument;\n\n            $(iframe).one(\"load\", function() {\n                editor._decorateFormatting(doc.body);\n            });\n\n            lang = document.getElementsByTagName(\"html\")[0].getAttribute(\"lang\") || DEFAULT_LANGUAGE;\n\n            doc.open();\n            doc.write(\n                \"<!DOCTYPE html><html lang='\" + lang + \"'><head>\" +\n                \"<meta charset='utf-8' />\" +\n                \"<title>Kendo UI Editor content</title>\" +\n                `<style ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>` +\n                    \"html{padding:0;margin:0;height:100%;min-height:100%;cursor:text;}\" +\n                    \"body{padding:0;margin:0;}\" +\n                    \"body{box-sizing:border-box;font-size:12px;font-family:Verdana,Geneva,sans-serif;margin-top:-1px;padding:5px .4em 0;\" +\n                    \"word-wrap: break-word;-webkit-nbsp-mode: space;-webkit-line-break: after-white-space;\" +\n                    (kendo.support.isRtl(textarea) ? \"direction:rtl;\" : \"\") +\n                    (os.ios ? \"word-break:keep-all;\" : \"\") +\n                    (browser.edge || browser.chrome ? \"height:100%;\" : \"\") +\n                    \"}\" +\n                    \"h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em}h3{font-size:1.16em}h4{font-size:1em}h5{font-size:.83em}h6{font-size:.7em}\" +\n                    \"p{margin:0 0 1em;}.k-marker{display:none;}.k-paste-container,.Apple-style-span{position:absolute;left:-10000px;width:1px;height:1px;overflow:hidden}\" +\n                    \"ul,ol{padding-left:2.5em}\" +\n                    \"span{-ms-high-contrast-adjust:none;}\" +\n                    \"a{color:#00a}\" +\n                    \"code{font-size:1.23em}\" +\n                    \"telerik\\\\3Ascript{display: none;}\" +\n                    \".k-table{width:100%;border-spacing:0;margin: 0 0 1em;}\" +\n                    \".k-table td{min-width:1px;padding:.2em .3em;}\" +\n                    \".k-table,.k-table td{outline:0;border: 1px dotted #ccc;}\" +\n                    \".k-table th{outline:0;border: 1px dotted #999;}\" +\n                    \".k-table p{margin:0;padding:0;}\" +\n                    \".k-column-resize-handle-wrapper {position: absolute; height: 10px; width:10px; cursor: col-resize; z-index: 2;}\" +\n                    \".k-column-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-column-resize-handle > .k-column-resize-marker {width:2px; height:100%; margin:0 auto; background-color:#00b0ff; display:none; opacity:0.8;}\" +\n                    \".k-row-resize-handle-wrapper {position: absolute; cursor: row-resize; z-index:2; width: 10px; height: 10px;}\" +\n                    \".k-row-resize-handle {display: table; width: 100%; height: 100%;}\" +\n                    \".k-row-resize-marker-wrapper{display: table-cell; height:100%; width:100%; margin:0; padding:0; vertical-align: middle;}\" +\n                    \".k-row-resize-marker{margin: 0; padding:0; width:100%; height:2px; background-color: #00b0ff; opacity:0.8; display:none;}\" +\n                    \".k-element-resize-handle-wrapper {position: absolute; background-color: #fff; border: 1px solid #000; z-index: 100; width: 5px; height: 5px;}\" +\n                    \".k-element-resize-handle {width: 100%; height: 100%;}\" +\n                    \".k-element-resize-handle.k-resize-east{cursor:e-resize;}\" +\n                    \".k-element-resize-handle.k-resize-north{cursor:n-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northeast{cursor:ne-resize;}\" +\n                    \".k-element-resize-handle.k-resize-northwest{cursor:nw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-south{cursor:s-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southeast{cursor:se-resize;}\" +\n                    \".k-element-resize-handle.k-resize-southwest{cursor:sw-resize;}\" +\n                    \".k-element-resize-handle.k-resize-west{cursor:w-resize;}\" +\n                    \".k-table.k-element-resizing{opacity:0.6;}\" +\n                    \".k-placeholder{color:grey}\" +\n                    \"k\\\\:script{display:none;}\" +\n                \"</style>\" +\n                domainScript +\n                $.map(stylesheets, function(href) {\n                    return `<link rel='stylesheet' href='${href}' ${editor.options.nonce ? `nonce=\"${editor.options.nonce}\"` : \"\" }>`;\n                }).join(\"\") +\n                \"</head><body autocorrect='off' contenteditable='true'></body></html>\"\n            );\n            doc.close();\n\n            return wnd;\n        },\n\n        _deleteSavedRange: function() {\n            if (\"_range\" in this) {\n                delete this._range;\n            }\n        },\n\n        _decorateFormatting: function(body) {\n            var formattingElement = this.toolbar.element.find(\"input[data-command=formatting]\"),\n                dom = kendo.ui.editor.Dom,\n                component, dataSource, items, i, tag, className, style;\n\n            if (formattingElement.length) {\n                component = formattingElement.getKendoDropDownList();\n                if (!component) {\n                    return;\n                }\n                dataSource = component.dataSource;\n                items = dataSource.data();\n\n                if (body) {\n                    component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n                }\n\n                if (this.options.unsafeInline !== false) {\n\n                    for (i = 0; i < items.length; i++) {\n                        tag = items[i].tag || \"span\";\n                        className = items[i].className;\n\n                        style = dom.inlineStyle(body, tag, { className: className });\n                        style = style.replace(/\"/g, \"'\");\n\n                        items[i].style = style + \";display:inline-block\";\n                    }\n                }\n\n                dataSource.trigger(\"change\");\n            }\n        },\n\n        _appendFormattingMarksStyles: function() {\n            const that = this;\n\n            let style, $head;\n\n            style = `<style id='${FORMATTING_MARKS_STYLE_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >\n                p::after,li::after,h1::after,h2::after,h3::after,h4::after,h5::after,h6::after {content: '\\\\00B6'; color: #6098f2;}\n                #${FORMATTING_MARKS_OVERLAY_WRAPPER_ID} {\n                    position: absolute;\n                    top: 0;\n                    left: 0;\n                    width: 100%;\n                    height: 99%;\n                    z-index: 9999;\n                    pointer-events: none;\n                }\n                #${FORMATTING_MARKS_OVERLAY_ID} {\n                    width: 100%;\n                    height: 99%;\n                    overflow: visible;\n                  }\n            </style>`;\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + FORMATTING_MARKS_STYLE_ID).remove();\n            $head.append(style);\n        },\n\n        _appendFormattingMarksOverlay: function() {\n            const that = this;\n\n            that._formattingMarksOverlay = $(that.document)\n            .find(\"html\")\n            .append(`<div id='${FORMATTING_MARKS_OVERLAY_WRAPPER_ID}'><svg id='${FORMATTING_MARKS_OVERLAY_ID}'></svg><div>`)\n            .find(\"#\" + FORMATTING_MARKS_OVERLAY_ID);\n        },\n\n        _destroyFormattingMarksOverlay: function() {\n            const that = this;\n\n            $(that.document).find(\"#\" + FORMATTING_MARKS_OVERLAY_ID).remove();\n            $(that.document.head).find(\"#\" + FORMATTING_MARKS_STYLE_ID).remove();\n        },\n\n        _deregisterHandlers: function() {\n            var handlers = this._handlers;\n\n            for (var i = 0; i < handlers.length; i++) {\n                var h = handlers[i];\n                h.element.off(h.type, h.handler);\n            }\n\n            this._handlers = [];\n        },\n\n        _destroyUploadWidget: function() {\n            var editor = this;\n            if (editor._uploadWidget) {\n                editor._uploadWidget.destroy();\n                editor._uploadWidget = null;\n            }\n        },\n\n        _endTyping: function() {\n            var keyboard = this.keyboard;\n\n            try {\n                if (keyboard.isTypingInProgress()) {\n                    keyboard.endTyping(true);\n                    this.saveSelection();\n                }\n            } catch (e) { }\n        },\n\n        _focusBody: function() {\n            var body = this.body;\n            var iframe = this.wrapper && this.wrapper.find(\"iframe\")[0];\n            var documentElement = this.document.documentElement;\n            var activeElement = kendo._activeElement();\n            var scrollTop;\n\n\n            if (!iframe && body.scrollHeight > body.clientHeight) {\n                scrollTop = body.scrollTop;\n                body.focus();\n                body.scrollTop = scrollTop;\n\n            } else if (activeElement != body && activeElement != iframe) {\n                scrollTop = documentElement.scrollTop;\n                body.focus();\n                documentElement.scrollTop = scrollTop;\n            }\n        },\n\n        _focusOutside: function() {\n            // move focus outside the Editor, see https://github.com/telerik/kendo/issues/3673\n            if (kendo.support.browser.msie && this.textarea) {\n                var tempInput = $(\"<input />\")\n                    .css({\n                        position: \"fixed\",\n                        left: \"1px\",\n                        top: \"1px\",\n                        width: \"1px\",\n                        height: \"1px\",\n                        \"font-size\": \"0\",\n                        border: \"0\",\n                        opacity: \"0\"\n                })\n                .appendTo(document.body).trigger(\"focus\");\n                tempInput.trigger(\"blur\").remove();\n            }\n        },\n\n        _handleToolbarClick: function(e) {\n            var toolName = e.target.data(\"command\");\n\n            if (toolName && toolName !== \"createTable\") {\n                this.exec(toolName);\n            }\n        },\n\n        _immutablesContext: function(range) {\n            var editorNS = kendo.ui.editor;\n\n            if (this.options.immutables) {\n                if (range.collapsed) {\n                    return editorNS.Immutables.immutablesContext(range);\n                } else {\n                    return editorNS.RangeUtils.editableTextNodes(range).length === 0;\n                }\n            }\n        },\n\n        _initializeContentElement: function() {\n            var editor = this;\n            var doc;\n            var blurTrigger;\n            var mousedownTrigger;\n\n            if (editor.textarea) {\n                editor.window = editor._createContentElement(editor.options.stylesheets);\n                doc = editor.document = editor.window.contentDocument || editor.window.document;\n\n                // Ensure that body exists as various Firefox plugins can cause a delay of the body creation\n                // https://github.com/telerik/kendo-ui-core/issues/3515\n                if (!doc.body) {\n                    var body = doc.createElement(\"body\");\n                    body.setAttribute(\"contenteditable\", \"true\");\n                    body.setAttribute(\"autocorrect\", \"off\");\n                    doc.getElementsByTagName(\"html\")[0].appendChild(body);\n\n                    var interval = setInterval(function() {\n                        if ($(editor.document).find(\"body\").length > 1) {\n                            $(editor.document).find(\"body\").last().remove();\n                            window.clearInterval(interval);\n                        }\n                    },10);\n                }\n\n                editor.body = doc.body;\n\n                blurTrigger = editor.window;\n                mousedownTrigger = doc;\n\n                this._registerHandler(doc, \"mouseup\", this._mouseup.bind(this));\n            } else {\n                editor.window = window;\n                doc = editor.document = document;\n                editor.body = editor.element[0];\n\n                blurTrigger = editor.body;\n                mousedownTrigger = editor.body;\n\n                setTimeout(() => {\n                    editor._decorateFormatting(editor.body);\n                });\n            }\n\n            this._registerHandler(blurTrigger, \"blur\", this._blur.bind(this));\n            editor._registerHandler(mousedownTrigger, \"down\", editor._mousedown.bind(editor));\n\n            try {\n                doc.execCommand(\"enableInlineTableEditing\", null, false);\n            } catch (e) { }\n\n            if (kendo.support.touch) {\n                this._registerHandler(doc, {\n                    \"keydown\": function() {\n                        // necessary in iOS when touch events are bound to the page\n                        if (kendo._activeElement() != doc.body) {\n                            editor.window.focus();\n                        }\n                    }\n                });\n            }\n\n            this._initializePlaceholder();\n\n            this._spellCorrect(editor);\n\n            this._registerHandler(editor.document, {\n                \"mouseover dragenter\": function(e) {\n                    var height = $(editor.body).height();\n                    var htmlHeight = $(editor.body.parentElement).height();\n\n                    if (htmlHeight > height && e.target.nodeName.toLowerCase() === \"html\") {\n                        editor._cachedHeight = \"\" + editor.body.style.height;\n                        editor.body.style.height = \"100%\";\n                    }\n                },\n                \"mouseout dragleave drop contextmenu\": function(e) {\n                    var restoreHeight = function() {\n                        if (editor._cachedHeight !== undefined$1 && e.target === editor.body) {\n                            editor.body.style.height = editor._cachedHeight;\n                            delete editor._cachedHeight;\n                        }\n                    };\n\n                    if (e.type === \"contextmenu\") {\n                        setTimeout(function() {\n                            restoreHeight();\n                        }, 10);\n                    } else {\n                        restoreHeight();\n                    }\n\n                }\n            });\n\n            this._registerHandler(editor.body, {\n                \"keydown\": function(e) {\n                    var range;\n\n                    if ((e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) && editor.body.getAttribute(\"contenteditable\") !== \"true\") {\n                        return false;\n                    }\n\n                    if (e.keyCode === keys.F10) {\n                        editor.toolbar.element.find(\"[tabindex=0]\").first().trigger(\"focus\");\n                        editor.toolbar.preventPopupHide = true;\n                        e.preventDefault();\n                        return;\n                    } else if (e.keyCode == keys.LEFT || e.keyCode == keys.RIGHT) {\n                        // skip bom nodes when navigating with arrows\n                        range = editor.getRange();\n                        var left = e.keyCode == keys.LEFT;\n                        var container = range[left ? \"startContainer\" : \"endContainer\"];\n                        var offset = range[left ? \"startOffset\" : \"endOffset\"];\n                        var direction = left ? -1 : 1;\n\n                        var next = offset + direction;\n                        var nextChar = left ? next : offset;\n\n                        if (container.nodeType == 3 && container.nodeValue[nextChar] == \"\\ufeff\") {\n                            range.setStart(container, next);\n                            range.collapse(true);\n                            editor.selectRange(range);\n                        }\n                    }\n\n                    var tools = editor.tools;\n                    var toolName = editor.keyboard.toolFromShortcut(tools, e);\n                    var toolOptions = toolName ? tools[toolName].options : {};\n\n                    if (toolName && !toolOptions.keyPressCommand) {\n                        e.preventDefault();\n\n                        if (!/^(undo|redo)$/.test(toolName)) {\n                            editor.keyboard.endTyping(true);\n                        }\n\n                        editor.trigger(\"keydown\", e);\n                        editor.exec(toolName);\n                        editor._runPostContentKeyCommands(e);\n\n                        return false;\n                    }\n\n                    editor.keyboard.clearTimeout();\n\n                    editor.keyboard.keydown(e);\n                },\n                \"keypress\": function(e) {\n                    setTimeout(function() {\n                        editor._runPostContentKeyCommands(e);\n                        editor._showElementResizeHandles();\n                    }, 0);\n                },\n                \"keyup\": function(e) {\n                    var selectionCodes = [\n                       keys.BACKSPACE,\n                       keys.TAB,\n                       keys.PAGEUP,\n                       keys.PAGEDOWN,\n                       keys.END,\n                       keys.HOME,\n                       keys.LEFT,\n                       keys.UP,\n                       keys.RIGHT,\n                       keys.DOWN,\n                       keys.INSERT,\n                       keys.DELETE\n                    ];\n\n                    if ($.inArray(e.keyCode, selectionCodes) > -1 || (e.keyCode == 65 && e.ctrlKey && !e.altKey && !e.shiftKey)) {\n                        window.clearTimeout(this._refreshInterval);\n                        this._refreshInterval = window.setTimeout(function() {\n                            editor._selectionChange();\n                        }, REFRESH_INTERVAL);\n                    }\n\n                    if (e.keyCode === keys.BACKSPACE || e.keyCode === keys.DELETE) {\n                        editor._handleSpaceAndNewLines();\n                    }\n\n                    editor.keyboard.keyup(e);\n                },\n                \"click\": function(e) {\n                    var dom = kendo.ui.editor.Dom, range;\n\n                    if (dom.name(e.target) === \"img\") {\n                        range = editor.createRange();\n                        range.selectNode(e.target);\n                        editor.selectRange(range);\n                    }\n                },\n                \"cut copy paste drop dragover\": function(e) {\n                    editor.clipboard[\"on\" + e.type](e);\n                },\n                \"focusin\": function() {\n                    if (editor.body.hasAttribute(\"contenteditable\")) {\n                        $(this).addClass(\"k-active\");\n                        // To be moved to the Editor\n                        editor._showWindow();\n                        editor._togglePlaceholder(false);\n                    }\n                },\n                \"focusout\": function() {\n                    setTimeout(function() {\n                        var active = kendo._activeElement();\n                        var body = editor.body;\n                        // All below to be moved to the Editor\n                        var toolbar = editor.toolbar;\n\n                        if (toolbar.options.popup) {\n                            var toolbarContainerElement = editor.windowInstance.element.get(0);\n                            if (toolbarContainerElement && !($.contains(toolbarContainerElement, active) || toolbarContainerElement == active)) {\n                                toolbar.preventPopupHide = false;\n                            }\n                        }\n\n                        if (active != body && !$.contains(body, active) && !editor._toolbarFocused() && !toolbar.preventPopupHide && !$(active).hasClass(\"k-context-menu\")) {\n                            $(body).removeClass(\"k-active\");\n                            editor._hideWindow();\n                        }\n\n                        editor._togglePlaceholder(!editor.value().trim());\n                    }, 10);\n                }\n            });\n\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        },\n\n        _initializeImmutables: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            if (that.options.immutables) {\n                that.immutables = new editorNS.Immutables(that);\n            }\n        },\n\n        _initializePlaceholder: function() {\n            var that = this,\n                placeholder = that.options.placeholder,\n                style, $head;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            style = `<style id='${PLACEHOLDER_TAG_ID}' ${that.options.nonce ? `nonce=\"${that.options.nonce}\"` : \"\" } >.` +\n                        PLACEHOLDER_CLASS + \":before { content: '\" + placeholder + \"'; }\" +\n                    \"</style>\";\n\n            $head = $(that.document.head);\n            $head.find(\"#\" + PLACEHOLDER_TAG_ID).remove();\n            $head.append(style);\n\n            that._togglePlaceholder(!that.value().trim());\n        },\n\n        _initToolbar: function(toolbarContainer) {\n            var that = this,\n                tools, defaults, toolbarOptions;\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(that.options.tools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this),\n                navigateOnTab: that.options.navigateOnTab,\n                evaluateTemplates: true\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n            that.bind(\"select\", that._refreshTools.bind(that));\n\n            toolbarContainer.on(\"mousedown\" + NS, \".k-toolbar-tool\", function(e) {\n                if (!$(e.target).is(\"input\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!that.textarea) {\n                that._initToolbarWindow(toolbarContainer);\n            }\n        },\n\n        _initToolbarWindow: function(toolbarEl) {\n            var that = this;\n\n            this.windowInstance = toolbarEl\n                .wrap(\"<div class='editorToolbarWindow k-editor-window' />\")\n                .parent()\n                .prepend(\"<span class='k-editortoolbar-dragHandle'>\" + kendo.ui.icon(\"handle-drag\") + \"</span>\")\n                .kendoWindow({\n                    title: false,\n                    resizable: false,\n                    draggable: {\n                        dragHandle: \".k-editortoolbar-dragHandle\"\n                    },\n                    animation: {\n                        open: { effects: \"fade:in\" },\n                        close: { effects: \"fade:out\" }\n                    },\n                    minHeight: 42,\n                    visible: false,\n                    autoFocus: false,\n                    actions: [],\n                    dragend: function() {\n                        this._moved = true;\n                    }\n                })\n                .on(\"mousedown\", function(e) {\n                    if (!$(e.target).is(\".k-icon,.k-svg-icon,svg\")) {\n                        that.toolbar.preventPopupHide = true;\n                    }\n                })\n                .on(\"focusout\", function() {\n                    that.element.focusout();\n                })\n                .data(\"kendoWindow\");\n        },\n\n        _mousedown: function(e) {\n            var editor = this;\n            editor._selectionStarted = true;\n\n            if ($(editor.body).parents('.k-window').length) {\n                e.stopPropagation();\n            }\n\n            // handle middle-click and ctrl-click on links\n            if (browser.gecko) {\n                return;\n            }\n\n            var target = $(e.target).closest(\"a[href]\");\n\n            if ((e.which == 2 || (e.which == 1 && e.ctrlKey)) && target && target.is(\"a[href]\")) {\n                window.open(target.attr(\"href\"), \"_new\");\n            }\n\n            if (e.target.tagName && e.target.tagName.toLowerCase() === \"html\") {\n                setTimeout(function() {\n                    editor.body.focus();\n                }, 0);\n            }\n        },\n\n        _mouseup: function(e) {\n            var that = this;\n\n            if (kendo.support.mobileOS.ios && e && $(e.target).is(SELECT_OVERLAY_SELECTOR)) {\n                return;\n            }\n\n            if (that._selectionStarted) {\n                setTimeout(function() {\n                    that._selectionChange();\n                }, 1);\n            }\n        },\n\n        _populateValue: function(options, domElement) {\n            var that = this,\n                editorNS = kendo.ui.editor,\n                dom = editorNS.Dom,\n                value, comments;\n\n            if (options && options.value) {\n                value = options.value;\n            } else if (that.textarea) {\n                // indented HTML introduces problematic ranges in IE\n                value = domElement.value;\n\n                if (!value.replace(/\\s/g, '').length) {\n                    value = value.replace(/\\s/g, '');\n                }\n\n                // revert encoding of value when content is fetched from cache\n                if (that.options.encoded && domElement.defaultValue && domElement.defaultValue.trim().length) {\n                    value = domElement.defaultValue;\n                }\n\n                var deserializedRoot = editorNS.Serializer.htmlToDom(value, $(\"<div></div>\")[0], that.options.deserialization);\n                comments = dom.getAllComments(deserializedRoot);\n                value = EditorUtils.cacheComments(value, comments);\n                value = value.replace(/[\\r\\n\\v\\f\\t ]+/ig, \" \");\n                value = EditorUtils.retrieveComments(value, comments);\n            } else {\n                value = domElement.innerHTML;\n            }\n\n            that.value(value || '\\ufeff');\n        },\n\n        _resetGroups: function(current) {\n            var result = {};\n\n            Object.keys(current).map(key => {\n                result[key + \"_\"] = current[key];\n            });\n\n            return result;\n        },\n\n        _processToolbarItems: function(optionsTools) {\n            var flatDefaultTools = {},\n                processedObject = {},\n                tools = [],\n                currentGroups = $.extend(true, {}, toolGroups),\n                i, j, t, name, guidGroupName;\n\n            for (i = 0; i < optionsTools.length; i++) {\n                t = optionsTools[i];\n\n                if (Array.isArray(t)) {\n                    guidGroupName = kendo.guid();\n\n                    for (j = 0; j < t.length; j++) {\n                        [flatDefaultTools, name] = this._processToolOptions(t[j], flatDefaultTools);\n\n                        if (!name) {\n                            continue;\n                        }\n\n                        flatDefaultTools[name].gr = guidGroupName;\n                    }\n                } else {\n                    [flatDefaultTools, name] = this._processToolOptions(t, flatDefaultTools);\n\n                    if (!name) {\n                        continue;\n                    } else if (name === \"separator\") {\n                        currentGroups = this._resetGroups(currentGroups);\n                    }\n\n                    Object.keys(currentGroups).map(key => {\n                        var group = currentGroups[key];\n\n                        if (group.includes(name)) {\n                            flatDefaultTools[name].gr = key;\n                        }\n                    });\n                }\n            }\n\n            Object.values(flatDefaultTools).map((tool) => {\n                var group = tool.gr;\n\n                delete tool.gr;\n\n                if (group === undefined$1) {\n                    processedObject[tool.name] = tool;\n                } else {\n                    if (!processedObject[group]) {\n                        processedObject[group] = [];\n                    }\n\n                    processedObject[group].push(tool);\n                }\n            });\n\n            tools = Object.values(processedObject).map((g) => {\n                var result;\n\n                if (g.length) {\n                    result = g.map((to) => to.name);\n                } else {\n                    result = g.name;\n                }\n\n                if (result.length === 1) {\n                    result = result[0];\n                }\n\n                return result;\n            });\n\n            return [tools, flatDefaultTools];\n        },\n\n        _processDefaultTool: function(tool, defaultTools) {\n            var name = tool.name,\n                result = {},\n                options;\n\n            if ($.isPlainObject(tool)) {\n                if (name && defaultTools[name]) {\n                    // configured tool\n                    result = extend({}, defaultTools[name]);\n                    extend(result.options, tool);\n                } else {\n                    // custom tool\n                    options = extend({ icon: \"gear\", type: \"button\" }, tool);\n\n                    if (!options.name) {\n                        options.name = \"custom\";\n                    }\n\n                    options.cssClass = \"k-\" + options.name;\n\n                    result = {\n                        options: options\n                    };\n\n                    name = options.name;\n                }\n            } else if (defaultTools[tool]) {\n                name = tool;\n                result = defaultTools[name];\n            } else {\n                return null;\n            }\n\n            this.tools[name] = result;\n\n            return result;\n        },\n\n        _processToolOptions: function(t, flatDefaultTools) {\n            var that = this,\n                defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                tool, name, view, shortcuts, options, uiOptions, icon, toolOptions, originalOptions, palette;\n\n            tool = this._processDefaultTool(t, defaultTools);\n\n            if (!tool) {\n                return [flatDefaultTools, null];\n            }\n\n            options = tool.options;\n            name = options.name;\n            uiOptions = options.ui || {};\n            icon = EditorUtils.getToolCssClass(options.name, options.icon);\n\n            // We want to preserve any custom properties from the original tool object.\n            originalOptions = $.isPlainObject(t) ? $.extend({}, t) : {};\n            delete originalOptions.items;\n\n            toolOptions = $.extend({\n                name: options.name,\n                command: options.command,\n                template: options.template,\n                type: \"button\",\n                icon: icon,\n                showText: \"overflow\",\n                showIcon: \"both\"\n            }, uiOptions, originalOptions);\n\n            if (options.tooltip) {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes.title = options.tooltip;\n            }\n            if (options.exec) {\n                toolOptions.click = options.exec.bind(that);\n                delete toolOptions.exec;\n            }\n\n            if (toolOptions.component === \"ColorPicker\") {\n                if (options.palette !== undefined$1 || uiOptions.palette !== kendo.ui.editor.ColorTool.fn.options.palette) {\n                    palette = options.palette || kendo.ui.editor.ColorTool.fn.options.palette;\n                    view = options.palette !== undefined$1 && !options.palette ? \"gradient\" : \"palette\";\n                    toolOptions.componentOptions.palette = view === \"palette\" ? palette : undefined$1;\n                    toolOptions.componentOptions.views = [view];\n                    toolOptions.componentOptions.preview = view === \"gradient\";\n                    toolOptions.componentOptions.input = view === \"gradient\";\n                    toolOptions.componentOptions.buttons = view === \"gradient\";\n\n                    if (view === \"gradient\") {\n                        delete toolOptions.componentOptions.columns;\n                    }\n                }\n                if (view === \"palette\" && options.columns) {\n                    toolOptions.componentOptions.columns = options.columns;\n                }\n            }\n\n            if (toolOptions.component === \"DropDownList\" || toolOptions.component === \"ComboBox\") {\n                if (!toolOptions.componentOptions) {\n                    toolOptions.componentOptions = {};\n                }\n\n                if (!toolOptions.componentOptions.dataSource) {\n                    if (that.options[name] && Array.isArray(that.options[name])) {\n                        toolOptions.componentOptions.dataSource = that.options[name];\n                    } else {\n                        toolOptions.componentOptions.dataSource = options.items;\n                    }\n                }\n            }\n            if (toolOptions.template) {\n                delete toolOptions.type;\n            }\n\n            shortcuts = this._shortcutSequence(name);\n\n            if (shortcuts !== \"\") {\n                if (!toolOptions.attributes) {\n                    toolOptions.attributes = {};\n                }\n\n                toolOptions.attributes[\"aria-keyshortcuts\"] = shortcuts;\n            }\n\n            flatDefaultTools[name] = toolOptions;\n\n            return [flatDefaultTools, name];\n        },\n\n        _refreshTools: function() {\n            var that = this,\n                range = that.getRange(),\n                editorNS = kendo.ui.editor,\n                rangeUtils = editorNS.RangeUtils,\n                nodes = rangeUtils.textNodes(range),\n                immutables = that.options.immutables,\n                immutablesContext = that._immutablesContext(range),\n                defaultTools = that.tools;\n\n            nodes = editorNS.Dom.filterBy(nodes, editorNS.Dom.htmlIndentSpace, true);\n\n            if (!nodes.length) {\n                nodes = [range.startContainer];\n            }\n\n            that.toolbar.element.find(\"[data-command]\")\n                .filter((i, el) => $(el).find(\"[data-command]\").length === 0)\n                .each(function() {\n                    var toolName = this.getAttribute(\"data-command\"),\n                        tool = defaultTools[toolName],\n                        ui;\n\n                    if (tool) {\n                        ui = $(this);\n\n                        if (tool.update) {\n                            tool.update(ui, nodes, that.undoRedoStack);\n                        }\n\n                        if (immutables) {\n                            that._updateImmutablesState(tool, ui, immutablesContext);\n                        }\n                    }\n                });\n        },\n\n        _registerHandler: function(element, type, handler) {\n            var editor = this;\n            var NS = \".kendoEditor\";\n            var eventNames;\n            var i;\n\n            element = $(element);\n\n            if (!this._handlers) {\n                this._handlers = [];\n            }\n\n            if (element.length) {\n                if ($.isPlainObject(type)) {\n                    for (var t in type) {\n                        if (type.hasOwnProperty(t)) {\n                            this._registerHandler(element, t, type[t]);\n                        }\n                    }\n                } else {\n                    //map the original event to handle interaction on mobile platforms\n                    eventNames = kendo.applyEventMap(type).split(\" \");\n\n                    for (i = 0; i < eventNames.length; i++) {\n                        editor._handlers.push({\n                            element: element,\n                            type: eventNames[i] + NS,\n                            handler: handler\n                        });\n\n                        element.on(eventNames[i] + NS, handler);\n                    }\n                }\n            }\n        },\n\n        _runPostContentKeyCommands: function(e) {\n            var range = this.getRange();\n            var tools = this.keyboard.toolsFromShortcut(this.tools, e);\n\n            for (var i = 0; i < tools.length; i++) {\n                var tool = tools[i];\n                var o = tool.options;\n                if (!o.keyPressCommand) {\n                    continue;\n                }\n\n                var cmd = new o.command({ range: range });\n                if (cmd.changesContent()) {\n                    this.keyboard.endTyping(true);\n                    this.exec(tool.name);\n                }\n            }\n\n            this._handleSpaceAndNewLines();\n        },\n\n        _handleSpaceAndNewLines: function() {\n            const that = this,\n                refreshDelay = that.options.formattingMarksRefreshDelay,\n                editorNS = kendo.ui.editor,\n                applyFormattingMarks = editorNS.applyFormattingMarks,\n                clearFormattingMarksOverlay = editorNS.clearFormattingMarksOverlay;\n\n            if (that._toggledFormattingMarks) {\n                if (that._formattingMarksOverlay.children().length) {\n                    clearFormattingMarksOverlay(that);\n                }\n\n                if (refreshDelay) {\n                    clearTimeout(that._formattingMarksTimeout);\n                    that._formattingMarksTimeout = setTimeout(() => applyFormattingMarks(that), refreshDelay);\n                } else {\n                    applyFormattingMarks(that);\n                }\n\n            }\n        },\n\n        _selectionChange: function() {\n            this._selectionStarted = false;\n            this.saveSelection();\n            this.trigger(\"select\", {});\n        },\n\n        _setOptionsTools: function(optionsTools) {\n            var that = this,\n                toolbar = that.toolbar,\n                toolbarContainer = toolbar.element,\n                tools, defaults, toolbarOptions;\n\n            toolbar.destroy();\n            toolbarContainer.empty();\n\n            that.tools = [];\n            [tools, defaults] = that._processToolbarItems(optionsTools);\n            that._setNativeTools();\n\n            toolbarOptions = {\n                tools: tools,\n                defaultTools: defaults,\n                parentMessages: that.options.messages,\n                resizable: that.options.resizable && that.options.resizable.toolbar,\n                toggle: that._handleToolbarClick.bind(this),\n                click: that._handleToolbarClick.bind(this)\n            };\n\n            that.toolbar = new kendo.ui.ToolBar(toolbarContainer, toolbarOptions);\n\n            that._bindTools();\n        },\n\n        _setNativeTools: function() {\n            var defaultTools = kendo.deepExtend({}, kendo.ui.Editor.defaultTools),\n                i;\n\n            for (i = 0; i < NATIVE_TOOLS.length; i++) {\n                if (!this.tools[NATIVE_TOOLS[i]]) {\n                    this.tools[NATIVE_TOOLS[i]] = defaultTools[NATIVE_TOOLS[i]];\n                }\n            }\n        },\n\n        _setupHeight: function(type) {\n            var that = this;\n\n            if (type == \"textarea\") {\n                setTimeout(function() {\n                    var heightStyle = that.wrapper[0].style.height;\n                    var expectedHeight = parseInt(heightStyle, 10);\n                    var actualHeight = that.wrapper.height();\n                    if (heightStyle.indexOf(\"px\") > 0 && !isNaN(expectedHeight) && actualHeight > expectedHeight) {\n                        that.wrapper.height(expectedHeight - (actualHeight - expectedHeight));\n                    }\n                });\n            }\n        },\n\n        _setupKeyboard: function() {\n            var that = this,\n                editorNS = kendo.ui.editor;\n\n            that.keyboard = new editorNS.Keyboard([\n                new editorNS.BackspaceHandler(that),\n                new editorNS.TypingHandler(that),\n                new editorNS.SystemHandler(that),\n                new editorNS.SelectAllHandler(that)\n            ]);\n        },\n\n        _setupType: function(element) {\n            var domElement = element[0],\n                type = kendo.ui.editor.Dom.name(domElement),\n                id = domElement.id,\n                toolbarContainer;\n\n            if (type == \"textarea\") {\n                this._wrapTextarea();\n\n                toolbarContainer = this.wrapper.find(\".k-editor-toolbar\");\n\n                if (!id) {\n                    id = kendo.guid();\n                    domElement.setAttribute(\"id\", id);\n                }\n\n                toolbarContainer.attr(\"aria-controls\", id);\n            } else {\n                this.element.attr(\"contenteditable\", true).addClass(\"k-editor k-editor-inline\");\n                toolbarContainer = $('<div class=\"k-editor-toolbar\"/>').insertBefore(element);\n            }\n\n            return toolbarContainer;\n        },\n\n        _shortcutSequence: function(name) {\n            var tool = kendo.ui.Editor.defaultTools[name],\n                res = \"\",\n                options;\n\n            if (!tool || !tool.options) {\n                return res;\n            }\n\n            options = tool.options;\n\n            if (options.ctrl) {\n                res += \"Ctrl+\";\n            }\n\n            if (options.shift) {\n                res += \"Shift+\";\n            }\n\n            if (options.alt) {\n                res += \"Alt+\";\n            }\n\n            if (options.key) {\n                res += options.key;\n            }\n\n            return res;\n        },\n\n        _spellCorrect: function(editor) {\n            var beforeCorrection;\n            var falseTrigger = false;\n\n            this._registerHandler(editor.body, {\n                \"contextmenu\": function() {\n                    editor.one(\"select\", function() {\n                        beforeCorrection = null;\n                    });\n\n                    editor._spellCorrectTimeout = setTimeout(function() {\n                        beforeCorrection = new kendo.ui.editor.RestorePoint(editor.getRange(), editor.body);\n                        falseTrigger = false;\n                    }, 10);\n                },\n                \"input\": function() {\n                    if (!beforeCorrection) {\n                        return;\n                    }\n\n                    if (kendo.support.browser.mozilla && !falseTrigger) {\n                        falseTrigger = true;\n                        return;\n                    }\n\n                    kendo.ui.editor._finishUpdate(editor, beforeCorrection);\n                }\n            });\n        },\n\n        _togglePlaceholder: function(show) {\n            var that = this,\n                body = that.body,\n                $body = $(body),\n                placeholder = that.options.placeholder;\n\n            if (!that.textarea || !placeholder) {\n                return;\n            }\n\n            $body.attr('aria-label', function() {\n                return show ? placeholder : \"\";\n            });\n\n            $body.toggleClass(PLACEHOLDER_CLASS, show);\n        },\n\n        _toolbarFocused: function() {\n            var active = kendo._activeElement(),\n                popup = this.windowInstance,\n                overflowPopup = this.overflowPopup;\n\n            return (popup && $(active).closest(popup.wrapper).length) ||\n                (overflowPopup && overflowPopup.visible());\n        },\n\n        _updateImmutablesState: function(tool, ui, immutablesContext) {\n            var toolbar = this.toolbar,\n                name = tool.name,\n                uiElement = ui.closest(\".k-toolbar-tool\"),\n                trackImmutables = tool.options.trackImmutables,\n                editorNS = kendo.ui.editor;\n\n            if (trackImmutables === undefined$1) {\n                trackImmutables = $.inArray(name, editorNS.Immutables.toolsToBeUpdated) > -1;\n            }\n\n            if (trackImmutables) {\n                if (immutablesContext) {\n                    toolbar.hide(uiElement);\n                } else {\n                    toolbar.show(uiElement);\n                }\n            }\n        },\n\n        _wrapTextarea: function() {\n            var that = this,\n                textarea = that.element,\n                w = textarea[0].style.width,\n                h = textarea[0].style.height,\n                template = EditorUtils.editorWrapperTemplate(),\n                editorWrap = $(template).insertBefore(textarea),\n                editArea = editorWrap.find(\".k-editable-area\");\n\n            editorWrap.css({\n                \"width\": w,\n                \"height\": h\n            });\n\n            textarea.attr(\"autocomplete\", \"off\")\n                .appendTo(editArea).addClass(\"k-content k-raw-content\").css(\"display\", \"none\");\n\n            that.textarea = textarea;\n            that.wrapper = editorWrap;\n        },\n\n        // Resizing methods\n        _resizable: function() {\n            let that = this;\n            let resizable = this.options.resizable;\n            let isResizable = $.isPlainObject(resizable) ? (resizable.content === undefined$1 || resizable.content === true) : resizable;\n            let resizableMin = $.isPlainObject(resizable.min) ? resizable.min : { minHeight: resizable.min };\n            let resizableMax = $.isPlainObject(resizable.max) ? resizable.max : { maxHeight: resizable.max };\n\n            if (isResizable && this.textarea) {\n                that.wrapper.addClass('k-editor-resizable');\n\n                if (resizableMin.minHeight) {\n                    that.wrapper.css(\"min-height\", resizableMin.minHeight);\n                }\n\n                if (resizableMax.maxHeight) {\n                    that.wrapper.css(\"max-height\", resizableMax.maxHeight);\n                }\n\n                if (resizableMin.minWidth) {\n                    that.wrapper.css(\"min-width\", resizableMin.minWidth);\n                }\n\n                if (resizableMax.maxWidth) {\n                    that.wrapper.css(\"max-width\", resizableMax.maxWidth);\n                }\n\n                that.resizeObserver = new ResizeObserver(() => {\n                    clearTimeout(that._resizeTimeOut);\n\n                    that._resizeTimeOut = setTimeout(function() {\n                        that.toolbar.resize();\n                    }, 50);\n\n                });\n                that.resizeObserver.observe(that.wrapper[0]);\n            }\n        },\n\n        _destroyResizings: function() {\n            var editor = this;\n\n            editor._destroyElementResizing();\n            kendo.ui.editor.ElementResizingFactory.current.dispose(editor);\n            editor._destroyRowResizing();\n            kendo.ui.editor.RowResizing.dispose(editor);\n            editor._destroyColumnResizing();\n            kendo.ui.editor.ColumnResizing.dispose(editor);\n        },\n\n        _initializeElementResizing: function() {\n            var editor = this;\n\n            kendo.ui.editor.ElementResizingFactory.current.create(editor);\n\n            editor._showElementResizeHandlesProxy = editor._showElementResizeHandles.bind(editor);\n            editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n        },\n\n        _destroyElementResizing: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing) {\n                elementResizing.destroy();\n                editor.elementResizing = null;\n            }\n\n            if (editor._showElementResizeHandlesProxy) {\n                editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n            }\n        },\n\n        _showElementResizeHandles: function() {\n            var editor = this;\n            var elementResizing = editor.elementResizing;\n\n            if (elementResizing && elementResizing.element && elementResizing.element.parentNode) {\n                elementResizing.showResizeHandles();\n            } else if (elementResizing && (!elementResizing.element || !elementResizing.element.parentNode)) {\n                editor._destroyElementResizing();\n            }\n        },\n\n        _initializeColumnResizing: function() {\n            kendo.ui.editor.ColumnResizing.create(this);\n        },\n\n        _destroyColumnResizing: function() {\n            var editor = this;\n\n            if (editor.columnResizing) {\n                editor.columnResizing.destroy();\n                editor.columnResizing = null;\n            }\n        },\n\n        _initializeRowResizing: function() {\n            kendo.ui.editor.RowResizing.create(this);\n        },\n\n        _destroyRowResizing: function() {\n            var editor = this;\n\n            if (editor.rowResizing) {\n                editor.rowResizing.destroy();\n                editor.rowResizing = null;\n            }\n        },\n\n        // ToolBar Window methods\n        _getWindowWidth: function() {\n            var that = this,\n                wrapper = that.windowInstance.wrapper,\n                editorElement = that.element;\n\n            return outerWidth(editorElement) - parseInt(wrapper.css(\"border-left-width\"), 10) - parseInt(wrapper.css(\"border-right-width\"), 10);\n        },\n\n        _hideWindow: function() {\n            if (this.windowInstance) {\n                this.windowInstance.close();\n            }\n        },\n\n        _overlapsWindow: function(box) {\n            var toolbarWrapper = this.windowInstance.wrapper,\n                toolbarWrapperOffset = toolbarWrapper.offset(),\n                toolbarWrapperLeft = toolbarWrapperOffset.left,\n                toolbarWrapperTop = toolbarWrapperOffset.top,\n                boxOffset = box.offset(),\n                boxOffsetLeft = boxOffset.left,\n                boxOffsetTop = boxOffset.top;\n\n            return !(boxOffsetLeft + box.width() < toolbarWrapperLeft ||\n                    boxOffsetLeft > toolbarWrapperLeft + toolbarWrapper.width() ||\n                    boxOffsetTop + box.height() < toolbarWrapperTop ||\n                    boxOffsetTop > toolbarWrapperTop + toolbarWrapper.height());\n        },\n\n        _showWindow: function() {\n            var that = this,\n                windowInstance = that.windowInstance,\n                wrapper, editorElement, editorOffset,\n                browser = kendo.support.browser;\n\n            if (windowInstance) {\n                wrapper = windowInstance.wrapper;\n                editorElement = that.element;\n\n                if (!wrapper.is(\":visible\") || !that.windowInstance.options.visible) {\n\n                    if (!wrapper[0].style.width) {\n                        wrapper.width(this._getWindowWidth());\n                    }\n\n                    // track content position when other parts of page change\n                    if (!windowInstance._moved) {\n                        editorOffset = editorElement.offset();\n                        wrapper.css({\n                            top: Math.max(0, parseInt(editorOffset.top, 10) - outerHeight(wrapper) - parseInt(that.windowInstance.element.css(\"padding-bottom\"), 10)),\n                            left: Math.max(0, parseInt(editorOffset.left, 10))\n                        });\n                    }\n\n                    if ((browser.msie || browser.edge) && that._overlapsWindow(editorElement)) {\n                        setTimeout(function() {\n                            windowInstance.open();\n                        }, 0);\n                    } else {\n                        windowInstance.open();\n                    }\n                }\n            }\n        }\n    });\n\n    Editor.defaultTools = {};\n\n    kendo.ui.plugin(Editor);\n\n    var Tool = Class.extend({\n        init: function(options) {\n            this.options = options;\n        },\n\n        command: function(commandArguments) {\n            return new this.options.command(commandArguments);\n        },\n\n        update: $.noop\n    });\n\n    Tool.exec = function(editor, name, value) {\n        editor.exec(name, { value: value });\n    };\n\n    var UndoTool = Tool.extend({\n        command: $.noop,\n        update: function(ui, nodes, undoRedoStack) {\n            var that = this,\n                name = that.options.name,\n                toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n            switch (name) {\n                case \"undo\":\n                    toolbar.enable(ui, undoRedoStack.canUndo());\n                    break;\n                case \"redo\":\n                    toolbar.enable(ui, undoRedoStack.canRedo());\n                    break;\n                default:\n                    break;\n            }\n\n            ui.removeAttr(\"disabled\");\n        }\n    });\n\n    EditorUtils.registerTool(\"separator\", new Tool({ ui: { type: \"separator\" } }));\n    EditorUtils.registerTool(\"undo\", new UndoTool({ key: \"Z\", ctrl: true }));\n    EditorUtils.registerTool(\"redo\", new UndoTool({ key: \"Y\", ctrl: true }));\n\n    // Exports ================================================================\n\n    var emptyElementContent = '\\ufeff';\n    var emptyTableCellContent = emptyElementContent;\n\n    if (browser.msie || browser.edge) {\n        emptyTableCellContent = emptyElementContent = \"&nbsp;\";\n    }\n\n    extend(kendo.ui, {\n        editor: {\n            EditorUtils: EditorUtils,\n            Tool: Tool,\n            emptyElementContent: emptyElementContent,\n            emptyTableCellContent: emptyTableCellContent\n        }\n    });\n\n    if (kendo.PDFMixin) {\n        kendo.PDFMixin.extend(Editor.prototype);\n        Editor.prototype._drawPDF = function() {\n            return kendo.drawing.drawDOM(this.body, this.options.pdf);\n        };\n        Editor.prototype.saveAsPDF = function() {\n            var progress = new $.Deferred();\n            var promise = progress.promise();\n            var args = { promise: promise };\n\n            if (this.trigger(\"pdfExport\", args)) {\n                return;\n            }\n\n            var options = this.options.pdf;\n\n            this._drawPDF(progress)\n            .then(function(root) {\n                return kendo.drawing.exportPDF(root, options);\n            })\n            .done(function(dataURI) {\n                kendo.saveAs({\n                    dataURI: dataURI,\n                    fileName: options.fileName,\n                    proxyURL: options.proxyURL,\n                    proxyTarget: options.proxyTarget,\n                    forceProxy: options.forceProxy\n                });\n                progress.resolve();\n            })\n            .fail(function(err) {\n                progress.reject(err);\n            });\n\n            return promise;\n        };\n    }\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    map = $.map,\n    extend = $.extend,\n    browser = kendo.support.browser,\n    STYLE = \"style\",\n    FLOAT = \"float\",\n    CSSFLOAT = \"cssFloat\",\n    STYLEFLOAT = \"styleFloat\",\n    CLASS = \"class\",\n    KMARKER = \"k-marker\";\n\nfunction makeMap(items) {\n    var obj = {},\n        i, len;\n\n    for (i = 0, len = items.length; i < len; i++) {\n        obj[items[i]] = true;\n    }\n    return obj;\n}\n\nvar empty = makeMap(\"area,base,basefont,br,col,frame,hr,img,input,isindex,link,meta,param,embed\".split(\",\")),\n    nonListBlockElements = \"p,div,h1,h2,h3,h4,h5,h6,address,applet,blockquote,button,center,dd,dir,dl,dt,fieldset,form,frameset,hr,iframe,isindex,map,menu,noframes,noscript,object,pre,script,table,tbody,td,tfoot,th,thead,tr,header,article,nav,footer,section,aside,main,figure,figcaption\".split(\",\"),\n    blockElements = nonListBlockElements.concat([\"ul\",\"ol\",\"li\"]),\n    block = makeMap(blockElements),\n    selfClosing = makeMap(\"area,base,br,col,command,embed,hr,img,input,keygen,link,menuitem,meta,param,source,track,wbr\".split(\",\")),\n    inlineElements = \"span,em,a,abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,strike,strong,sub,sup,textarea,tt,u,var,data,time,mark,ruby\".split(\",\"),\n    inline = makeMap(inlineElements),\n    fillAttrs = makeMap(\"checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected\".split(\",\")),\n    nonEmptyNonTextContentElements = [\"hgroup\",\"ol\",\"ul\",\"dl\",\"object\",\"video\",\"audio\",\"table\",\"colgroup\",\"tbody\",\"thead\",\"tfoot\",\"tr\",\"select\",\"optgroup\"];\n\nvar normalize = function(node) {\n    if (node.nodeType == 1) {\n        node.normalize();\n    }\n};\n\nif (browser.msie && browser.version >= 8) {\n    normalize = function(parent) {\n        if (parent.nodeType == 1 && parent.firstChild) {\n            var prev = parent.firstChild,\n                node = prev;\n\n            normalize(node);\n\n            while (true) {\n                node = node.nextSibling;\n\n                if (!node) {\n                    break;\n                }\n\n                normalize(node);\n\n                if (node.nodeType == 3 && prev.nodeType == 3) {\n                    node.nodeValue = prev.nodeValue + node.nodeValue;\n                    Dom.remove(prev);\n                }\n\n                prev = node;\n            }\n        }\n    };\n}\n\nvar whitespace = /^\\s+$/,\n    emptyspace = /^[\\n\\r\\t]+$/,\n    rgb = /rgb\\s*\\(\\s*(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*\\)/i,\n    bom = /\\ufeff/g,\n    whitespaceOrBom = /^(\\s+|\\ufeff)$/,\n    persistedScrollTop,\n    cssAttributes =\n           (\"color,padding-left,padding-right,padding-top,padding-bottom,\" +\n            \"background-color,background-attachment,background-image,background-position,background-repeat,\" +\n            \"border-top-style,border-top-width,border-top-color,\" +\n            \"border-bottom-style,border-bottom-width,border-bottom-color,\" +\n            \"border-left-style,border-left-width,border-left-color,\" +\n            \"border-right-style,border-right-width,border-right-color,\" +\n            \"font-family,font-size,font-style,font-variant,font-weight,line-height\"\n           ).split(\",\"),\n    htmlRe = /[<>\\&]/g,\n    entityRe = /[\\u00A0-\\u2666<>\\&]/g,\n    entityTable = {\n            34: 'quot', 38: 'amp', 39: 'apos', 60: 'lt', 62: 'gt',\n            160: 'nbsp', 161: 'iexcl', 162: 'cent', 163: 'pound', 164: 'curren',\n            165: 'yen', 166: 'brvbar', 167: 'sect', 168: 'uml', 169: 'copy',\n            170: 'ordf', 171: 'laquo', 172: 'not', 173: 'shy', 174: 'reg',\n            175: 'macr', 176: 'deg', 177: 'plusmn', 178: 'sup2', 179: 'sup3',\n            180: 'acute', 181: 'micro', 182: 'para', 183: 'middot', 184: 'cedil',\n            185: 'sup1', 186: 'ordm', 187: 'raquo', 188: 'frac14', 189: 'frac12',\n            190: 'frac34', 191: 'iquest', 192: 'Agrave', 193: 'Aacute', 194: 'Acirc',\n            195: 'Atilde', 196: 'Auml', 197: 'Aring', 198: 'AElig', 199: 'Ccedil',\n            200: 'Egrave', 201: 'Eacute', 202: 'Ecirc', 203: 'Euml', 204: 'Igrave',\n            205: 'Iacute', 206: 'Icirc', 207: 'Iuml', 208: 'ETH', 209: 'Ntilde',\n            210: 'Ograve', 211: 'Oacute', 212: 'Ocirc', 213: 'Otilde', 214: 'Ouml',\n            215: 'times', 216: 'Oslash', 217: 'Ugrave', 218: 'Uacute', 219: 'Ucirc',\n            220: 'Uuml', 221: 'Yacute', 222: 'THORN', 223: 'szlig', 224: 'agrave',\n            225: 'aacute', 226: 'acirc', 227: 'atilde', 228: 'auml', 229: 'aring',\n            230: 'aelig', 231: 'ccedil', 232: 'egrave', 233: 'eacute', 234: 'ecirc',\n            235: 'euml', 236: 'igrave', 237: 'iacute', 238: 'icirc', 239: 'iuml',\n            240: 'eth', 241: 'ntilde', 242: 'ograve', 243: 'oacute', 244: 'ocirc',\n            245: 'otilde', 246: 'ouml', 247: 'divide', 248: 'oslash', 249: 'ugrave',\n            250: 'uacute', 251: 'ucirc', 252: 'uuml', 253: 'yacute', 254: 'thorn',\n            255: 'yuml', 402: 'fnof', 913: 'Alpha', 914: 'Beta', 915: 'Gamma',\n            916: 'Delta', 917: 'Epsilon', 918: 'Zeta', 919: 'Eta', 920: 'Theta',\n            921: 'Iota', 922: 'Kappa', 923: 'Lambda', 924: 'Mu', 925: 'Nu',\n            926: 'Xi', 927: 'Omicron', 928: 'Pi', 929: 'Rho', 931: 'Sigma',\n            932: 'Tau', 933: 'Upsilon', 934: 'Phi', 935: 'Chi', 936: 'Psi',\n            937: 'Omega', 945: 'alpha', 946: 'beta', 947: 'gamma', 948: 'delta',\n            949: 'epsilon', 950: 'zeta', 951: 'eta', 952: 'theta', 953: 'iota',\n            954: 'kappa', 955: 'lambda', 956: 'mu', 957: 'nu', 958: 'xi',\n            959: 'omicron', 960: 'pi', 961: 'rho', 962: 'sigmaf', 963: 'sigma',\n            964: 'tau', 965: 'upsilon', 966: 'phi', 967: 'chi', 968: 'psi',\n            969: 'omega', 977: 'thetasym', 978: 'upsih', 982: 'piv', 8226: 'bull',\n            8230: 'hellip', 8242: 'prime', 8243: 'Prime', 8254: 'oline', 8260: 'frasl',\n            8472: 'weierp', 8465: 'image', 8476: 'real', 8482: 'trade', 8501: 'alefsym',\n            8592: 'larr', 8593: 'uarr', 8594: 'rarr', 8595: 'darr', 8596: 'harr',\n            8629: 'crarr', 8656: 'lArr', 8657: 'uArr', 8658: 'rArr', 8659: 'dArr',\n            8660: 'hArr', 8704: 'forall', 8706: 'part', 8707: 'exist', 8709: 'empty',\n            8711: 'nabla', 8712: 'isin', 8713: 'notin', 8715: 'ni', 8719: 'prod',\n            8721: 'sum', 8722: 'minus', 8727: 'lowast', 8730: 'radic', 8733: 'prop',\n            8734: 'infin', 8736: 'ang', 8743: 'and', 8744: 'or', 8745: 'cap',\n            8746: 'cup', 8747: 'int', 8756: 'there4', 8764: 'sim', 8773: 'cong',\n            8776: 'asymp', 8800: 'ne', 8801: 'equiv', 8804: 'le', 8805: 'ge',\n            8834: 'sub', 8835: 'sup', 8836: 'nsub', 8838: 'sube', 8839: 'supe',\n            8853: 'oplus', 8855: 'otimes', 8869: 'perp', 8901: 'sdot', 8968: 'lceil',\n            8969: 'rceil', 8970: 'lfloor', 8971: 'rfloor', 9001: 'lang', 9002: 'rang',\n            9674: 'loz', 9824: 'spades', 9827: 'clubs', 9829: 'hearts', 9830: 'diams',\n            338: 'OElig', 339: 'oelig', 352: 'Scaron', 353: 'scaron', 376: 'Yuml',\n            710: 'circ', 732: 'tilde', 8194: 'ensp', 8195: 'emsp', 8201: 'thinsp',\n            8204: 'zwnj', 8205: 'zwj', 8206: 'lrm', 8207: 'rlm', 8211: 'ndash',\n            8212: 'mdash', 8216: 'lsquo', 8217: 'rsquo', 8218: 'sbquo', 8220: 'ldquo',\n            8221: 'rdquo', 8222: 'bdquo', 8224: 'dagger', 8225: 'Dagger', 8240: 'permil',\n            8249: 'lsaquo', 8250: 'rsaquo', 8364: 'euro'\n        };\n\nvar Dom = {\n    block: block,\n    inline: inline,\n\n    findNodeIndex: function(node, skipText) {\n        var i = 0;\n\n        if (!node) {\n            return -1;\n        }\n\n        while (true) {\n            node = node.previousSibling;\n\n            if (!node) {\n                break;\n            }\n\n            if (!(skipText && node.nodeType == 3)) {\n                i++;\n            }\n        }\n\n        return i;\n    },\n\n    isDataNode: function(node) {\n        return node && node.nodeValue !== null && node.data !== null;\n    },\n\n    isAncestorOf: function(parent, node) {\n        try {\n            return !Dom.isDataNode(parent) && ($.contains(parent, Dom.isDataNode(node) ? node.parentNode : node) || node.parentNode == parent);\n        } catch (e) {\n            return false;\n        }\n    },\n\n    isAncestorOrSelf: function(root, node) {\n        return Dom.isAncestorOf(root, node) || root == node;\n    },\n\n    findClosestAncestor: function(root, node) {\n        if (Dom.isAncestorOf(root, node)) {\n            while (node && node.parentNode != root) {\n                node = node.parentNode;\n            }\n        }\n\n        return node;\n    },\n\n    getAllComments: function(rootElem) {\n        var comments = [];\n        // Fourth argument, which is actually obsolete according to the DOM4 standard, is required in IE 11\n        var iterator = document.createNodeIterator(rootElem,\n            NodeFilter.SHOW_COMMENT,\n            function() {\n                return NodeFilter.FILTER_ACCEPT;\n            }, false);\n\n        var curNode = iterator.nextNode();\n        while (curNode) {\n            comments.push(curNode.nodeValue);\n            curNode = iterator.nextNode();\n        }\n        return comments;\n    },\n\n    getNodeLength: function(node) {\n        return Dom.isDataNode(node) ? node.length : node.childNodes.length;\n    },\n\n    splitDataNode: function(node, offset) {\n        var newNode = node.cloneNode(false);\n        var denormalizedText = \"\";\n        var iterator = node.nextSibling;\n        var temp;\n\n        while (iterator && iterator.nodeType == 3 && iterator.nodeValue) {\n            denormalizedText += iterator.nodeValue;\n            temp = iterator;\n            iterator = iterator.nextSibling;\n            Dom.remove(temp);\n        }\n\n        node.deleteData(offset, node.length);\n        newNode.deleteData(0, offset);\n        newNode.nodeValue += denormalizedText;\n        Dom.insertAfter(newNode, node);\n    },\n\n    attrEquals: function(node, attributes) {\n        for (var key in attributes) {\n            var value = node[key];\n\n            if (key == FLOAT) {\n                value = node[kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT];\n            }\n\n            if (typeof value == \"object\") {\n                if (!Dom.attrEquals(value, attributes[key])) {\n                    return false;\n                }\n            } else if (value != attributes[key]) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    blockParentOrBody: function(node) {\n        return Dom.parentOfType(node, blockElements) || node.ownerDocument.body;\n    },\n\n    blockParents: function(nodes) {\n        var blocks = [],\n            i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            var block = Dom.parentOfType(nodes[i], Dom.blockElements);\n            if (block && $.inArray(block, blocks) < 0) {\n                blocks.push(block);\n            }\n        }\n\n        return blocks;\n    },\n\n    windowFromDocument: function(document) {\n        return document.defaultView || document.parentWindow;\n    },\n\n    normalize: normalize,\n    blockElements: blockElements,\n    nonListBlockElements: nonListBlockElements,\n    inlineElements: inlineElements,\n    empty: empty,\n    fillAttrs: fillAttrs,\n    nodeTypes: {\n        ELEMENT_NODE: 1,\n        ATTRIBUTE_NODE: 2,\n        TEXT_NODE: 3,\n        CDATA_SECTION_NODE: 4,\n        ENTITY_REFERENCE_NODE: 5,\n        ENTITY_NODE: 6,\n        PROCESSING_INSTRUCTION_NODE: 7,\n        COMMENT_NODE: 8,\n        DOCUMENT_NODE: 9,\n        DOCUMENT_TYPE_NODE: 10,\n        DOCUMENT_FRAGMENT_NODE: 11,\n        NOTATION_NODE: 12\n    },\n\n    toHex: function(color) {\n        var matches = rgb.exec(color);\n\n        if (!matches) {\n            return color;\n        }\n\n        return \"#\" + map(matches.slice(1), function(x) {\n            x = parseInt(x, 10).toString(16);\n            return x.length > 1 ? x : \"0\" + x;\n        }).join(\"\");\n    },\n\n    encode: function(value, options) {\n        var encodableChars = (!options || options.entities) ? entityRe : htmlRe;\n        return value.replace(encodableChars, function(c) {\n            var charCode = c.charCodeAt(0);\n            var entity = entityTable[charCode];\n            return entity ? '&' + entity + ';' : c;\n        });\n    },\n    isBom: function(node) {\n        return node && node.nodeType === 3 && /^[\\ufeff]+$/.test(node.nodeValue);\n    },\n    stripBom: function(text) {\n        return (text || \"\").replace(bom, \"\");\n    },\n\n    stripBomNode: function(node) {\n        if (Dom.isBom(node)) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    insignificant: function(node) {\n        var attr = node.attributes;\n\n        return node.className == \"k-marker\" || (Dom.is(node, 'br') && (node.className == \"k-br\" || attr._moz_dirty || attr._moz_editor_bogus_node)) || (Dom.is(node, 'span') && (node.className == \"k-br\"));\n    },\n    tableCell: function(node) {\n        return Dom.is(node, \"td\") || Dom.is(node, \"th\");\n    },\n    significantNodes: function(nodes) {\n        return $.grep(nodes, function(child) {\n            var name = Dom.name(child);\n\n            if (name == 'br') {\n                return false;\n            } else if (Dom.insignificant(child)) {\n                return false;\n            } else if (Dom.emptyTextNode(child)) {\n                return false;\n            } else if (child.nodeType == 1 && !empty[name] && Dom.emptyNode(child)) {\n                return false;\n            }\n\n            return true;\n        });\n    },\n\n    emptyTextNode: function(node) {\n        return node && node.nodeType == 3 && whitespaceOrBom.test(node.nodeValue);\n    },\n\n    emptyNode: function(node) {\n        return node.nodeType == 1 && !Dom.significantNodes(node.childNodes).length;\n    },\n\n    name: function(node) {\n        return node.nodeName.toLowerCase();\n    },\n\n    significantChildNodes: function(node) {\n        return $.grep(node.childNodes, function(child) {\n            return child.nodeType != 3 || !Dom.isWhitespace(child);\n        });\n    },\n\n    getTextNodes: function(body, nodes) {\n        const childNodes = body.childNodes;\n        nodes = nodes || [];\n\n        for (const node of childNodes) {\n            if (node.nodeType === this.nodeTypes.TEXT_NODE &&\n                (blockElements.includes(Dom.name(node.parentNode)) ||\n                inlineElements.includes(Dom.name(node.parentNode)))) {\n                nodes.push(node);\n            } else if (node.nodeType === this.nodeTypes.ELEMENT_NODE) {\n                this.getTextNodes(node, nodes);\n            }\n        }\n\n        return nodes;\n    },\n\n    lastTextNode: function(node) {\n        var result = null;\n\n        if (node.nodeType == 3) {\n            return node;\n        }\n\n        for (var child = node.lastChild; child; child = child.previousSibling) {\n            result = Dom.lastTextNode(child);\n\n            if (result) {\n                return result;\n            }\n        }\n\n        return result;\n    },\n\n    is: function(node, nodeName) {\n        return node && Dom.name(node) == nodeName;\n    },\n\n    isMarker: function(node) {\n        return node.className == KMARKER;\n    },\n\n    isWhitespace: function(node) {\n        return whitespace.test(node.nodeValue);\n    },\n\n    allowsTextContent: function(node) {\n        var result = true;\n\n        nonEmptyNonTextContentElements.every(function(name) {\n            if (Dom.is(node, name)) {\n                result = false;\n                return false;\n            } else {\n                return true;\n            }\n        });\n\n        return result;\n    },\n\n    allWhitespaceContent: function(node) {\n        var child = node.firstChild;\n        while (child && Dom.isWhitespace(child)) {\n            child = child.nextSibling;\n        }\n\n        return !child;\n    },\n\n    isEmptyspace: function(node) {\n        return emptyspace.test(node.nodeValue);\n    },\n\n    htmlIndentSpace: function(node) {\n        if (!(Dom.isDataNode(node) && Dom.isWhitespace(node))) {\n            return false;\n        }\n\n        if (emptyspace.test(node.nodeValue)) {\n            return true;\n        }\n\n        var sibling = function(el, direction) {\n            while (el[direction]) {\n                el = el[direction];\n                if (Dom.significantNodes([el]).length > 0) {\n                    return el;\n                }\n            }\n        };\n\n        var parent = node.parentNode;\n        var prev = sibling(node, \"previousSibling\");\n        var next = sibling(node, \"nextSibling\");\n\n        if (bom.test(node.nodeValue)) {\n            return !!(prev || next);\n        }\n\n        if ($(parent).is(\"tr,tbody,thead,tfoot,table,ol,ul\")) {\n            return true;\n        }\n\n        if (Dom.isBlock(parent) || Dom.is(parent, \"body\")) {\n            var isPrevBlock = prev && Dom.isBlock(prev);\n            var isNextBlock = next && Dom.isBlock(next);\n            if ((!next && isPrevBlock) || (!prev && isNextBlock) || (isPrevBlock && isNextBlock)) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    isBlock: function(node) {\n        return block[Dom.name(node)];\n    },\n\n    isSelfClosing: function(node) {\n        return selfClosing[Dom.name(node)];\n    },\n\n    isEmpty: function(node) {\n        return empty[Dom.name(node)];\n    },\n\n    isInline: function(node) {\n        return inline[Dom.name(node)];\n    },\n\n    isImg: function(node) {\n        return Dom.name(node) == \"img\";\n    },\n\n    isBr: function(node) {\n        return Dom.name(node) == \"br\";\n    },\n\n    list: function(node) {\n        var name = node ? Dom.name(node) : \"\";\n        return name == \"ul\" || name == \"ol\" || name == \"dl\";\n    },\n\n    scrollContainer: function(doc) {\n        var wnd = Dom.windowFromDocument(doc),\n            scrollContainer = (wnd.contentWindow || wnd).document || wnd.ownerDocument || wnd;\n\n        if (scrollContainer.compatMode == 'BackCompat') {\n            scrollContainer = scrollContainer.body;\n        } else {\n            scrollContainer = scrollContainer.scrollingElement || scrollContainer.documentElement;\n        }\n\n        return scrollContainer;\n    },\n\n    scrollTo: function(node, toStart) {\n        var doc = node.ownerDocument;\n        var wnd = Dom.windowFromDocument(doc);\n        var windowHeight = wnd.innerHeight;\n        var scrollContainer = Dom.scrollContainer(doc);\n        var element, elementTop, elementHeight, marker;\n\n        if (Dom.isDataNode(node)) {\n            if (toStart) {\n                marker = Dom.create(doc, \"span\", { \"innerHTML\": \"&#xfeff;\" });\n                Dom.insertBefore(marker, node);\n                element = $(marker);\n            } else {\n                element = $(node.parentNode);\n            }\n        } else {\n            element = $(node);\n        }\n\n        elementTop = element.offset().top;\n        elementHeight = element[0].offsetHeight;\n\n        if (toStart || !elementHeight) {\n            elementHeight = parseInt(element.css(\"line-height\"), 10) ||\n                            Math.ceil(1.2 * parseInt(element.css(\"font-size\"), 10)) ||\n                            15;\n        }\n\n        if (marker) {\n            Dom.remove(marker);\n        }\n\n        if (elementHeight + elementTop > scrollContainer.scrollTop + windowHeight) {\n            scrollContainer.scrollTop = elementHeight + elementTop - windowHeight;\n        }\n    },\n\n    persistScrollTop: function(doc) {\n        persistedScrollTop = Dom.scrollContainer(doc).scrollTop;\n    },\n\n    offset: function(target, offsetParent) {\n        var result = { top: target.offsetTop, left: target.offsetLeft };\n        var parent = target.offsetParent;\n\n        while (parent && (!offsetParent || Dom.isAncestorOf(offsetParent, parent))) {\n            result.top += parent.offsetTop;\n            result.left += parent.offsetLeft;\n            parent = parent.offsetParent;\n        }\n\n        return result;\n    },\n\n    restoreScrollTop: function(doc) {\n        if (typeof persistedScrollTop == \"number\") {\n            Dom.scrollContainer(doc).scrollTop = persistedScrollTop;\n            persistedScrollTop = undefined;\n        }\n    },\n\n    insertAt: function(parent, newElement, position) {\n        parent.insertBefore(newElement, parent.childNodes[position] || null);\n    },\n\n    insertBefore: function(newElement, referenceElement) {\n        if (referenceElement.parentNode) {\n            return referenceElement.parentNode.insertBefore(newElement, referenceElement);\n        } else {\n            return referenceElement;\n        }\n    },\n\n    insertAfter: function(newElement, referenceElement) {\n        return referenceElement.parentNode.insertBefore(newElement, referenceElement.nextSibling);\n    },\n\n    remove: function(node) {\n        if (node.parentNode) {\n            node.parentNode.removeChild(node);\n        }\n    },\n\n    removeChildren: function(node) {\n        while (node.firstChild) {\n            node.removeChild(node.firstChild);\n        }\n    },\n\n    removeTextSiblings: function(node) {\n        var parentNode = node.parentNode;\n\n        while (node.nextSibling && node.nextSibling.nodeType == 3) {\n            parentNode.removeChild(node.nextSibling);\n        }\n\n        while (node.previousSibling && node.previousSibling.nodeType == 3) {\n            parentNode.removeChild(node.previousSibling);\n        }\n    },\n\n    trim: function(parent) {\n        for (var i = parent.childNodes.length - 1; i >= 0; i--) {\n            var node = parent.childNodes[i];\n            if (Dom.isDataNode(node)) {\n                if (!Dom.stripBom(node.nodeValue).length) {\n                    Dom.remove(node);\n                }\n            } else if (node.className != KMARKER) {\n                Dom.trim(node);\n\n                if ((!Dom.isEmpty(node) && node.childNodes.length === 0) ||\n                    (Dom.isBlock(node) && Dom.allWhitespaceContent(node))) {\n                    Dom.remove(node);\n                }\n            }\n        }\n\n        return parent;\n    },\n\n    closest: function(node, tags) {\n        if (typeof tags === \"string\") {\n            tags = [tags];\n        }\n\n        while (node && tags.indexOf(Dom.name(node)) < 0) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    closestBy: function(node, condition, rootCondition) {\n        while (node && !condition(node)) {\n            if (rootCondition && rootCondition(node)) {\n                return null;\n            }\n            node = node.parentNode;\n        }\n        return node;\n    },\n\n    sibling: function(node, direction) {\n        do {\n            node = node[direction];\n        } while (node && node.nodeType != 1);\n\n        return node;\n    },\n\n    next: function(node) {\n        return Dom.sibling(node, \"nextSibling\");\n    },\n\n    prev: function(node) {\n        return Dom.sibling(node, \"previousSibling\");\n    },\n\n    parentOfType: function(node, tags) {\n        do {\n            node = node.parentNode;\n        } while (node && !(Dom.ofType(node, tags)));\n\n        return node;\n    },\n\n    ofType: function(node, tags) {\n        return $.inArray(Dom.name(node), tags) >= 0;\n    },\n\n    changeTag: function(referenceElement, tagName, skipAttributes) {\n        var newElement = Dom.create(referenceElement.ownerDocument, tagName),\n            attributes = referenceElement.attributes,\n            i, len, name, value, attribute;\n\n        if (!skipAttributes) {\n            for (i = 0, len = attributes.length; i < len; i++) {\n                attribute = attributes[i];\n                if (attribute.specified) {\n                    // IE < 8 cannot set class or style via setAttribute\n                    name = attribute.nodeName;\n                    value = attribute.nodeValue;\n                    if (name == CLASS) {\n                        newElement.className = value;\n                    } else if (name == STYLE) {\n                        newElement.style.cssText = referenceElement.style.cssText;\n                    } else {\n                        newElement.setAttribute(name, value);\n                    }\n                }\n            }\n        }\n\n        while (referenceElement.firstChild) {\n            newElement.appendChild(referenceElement.firstChild);\n        }\n\n        Dom.insertBefore(newElement, referenceElement);\n        Dom.remove(referenceElement);\n        return newElement;\n    },\n\n    editableParent: function(node) {\n        while (node && (node.nodeType == 3 || node.contentEditable !== 'true')) {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    wrap: function(node, wrapper) {\n        Dom.insertBefore(wrapper, node);\n        wrapper.appendChild(node);\n        return wrapper;\n    },\n\n    unwrap: function(node) {\n        var parent = node.parentNode;\n        while (node.firstChild) {\n            parent.insertBefore(node.firstChild, node);\n        }\n\n        parent.removeChild(node);\n    },\n\n    wrapper: function(node) {\n        var wrapper = Dom.closestBy(node, function(el) {\n            return el.parentNode && Dom.significantNodes(el.parentNode.childNodes).length > 1;\n        });\n\n        return $(wrapper).is(\"body,.k-editor\") ? undefined : wrapper;\n    },\n\n    isChildOfBaseContainer: function(node) {\n        return $(node).parent().is(\"body,.k-editor\");\n    },\n\n    create: function(document, tagName, attributes) {\n        return Dom.attr(document.createElement(tagName), attributes);\n    },\n\n    createEmptyNode: function(document, tagName, attributes) {\n        var node = Dom.attr(document.createElement(tagName), attributes);\n        node.innerHTML = \"\\ufeff\";\n        return node;\n    },\n\n    attr: function(element, attributes) {\n        attributes = extend({}, attributes);\n\n        if (attributes && STYLE in attributes) {\n            Dom.style(element, attributes.style);\n            delete attributes.style;\n        }\n\n        for (var attr in attributes) {\n            if (attributes[attr] === null) {\n                element.removeAttribute(attr);\n                delete attributes[attr];\n            } else if (attr == \"className\") {\n                element[attr] = attributes[attr];\n            }\n        }\n\n        return extend(element, attributes);\n    },\n\n    mergeAttributes: function(origin, target, traverseCss) {\n        if (!origin.attributes.length) {\n            return;\n        }\n\n        $.each(origin.attributes, function() {\n            if (this.name !== \"contenteditable\" && (!traverseCss || this.name !== STYLE)) {\n                $(target).attr(this.name, this.value);\n            }\n\n            if (traverseCss && this.name === STYLE) {\n                $.each(origin.style, function() {\n                    target.style[this] = origin.style[this];\n                });\n            }\n        });\n    },\n\n    style: function(node, value) {\n        $(node).css(value || {});\n    },\n\n    unstyle: function(node, value) {\n        for (var key in value) {\n            if (key == FLOAT) {\n                key = kendo.support.cssFloat ? CSSFLOAT : STYLEFLOAT;\n            }\n\n            node.style[key] = \"\";\n        }\n\n        if (node.style.cssText === \"\") {\n            node.removeAttribute(STYLE);\n        }\n    },\n\n    inlineStyle: function(body, name, attributes) {\n        var span = $(Dom.create(body.ownerDocument, name, attributes)),\n            style;\n\n        body.appendChild(span[0]);\n\n        style = map(cssAttributes, function(value) {\n            if (browser.msie && value == \"line-height\" && span.css(value) == \"1px\") {\n                return \"line-height:1.5\";\n            } else {\n                return value + \":\" + span.css(value);\n            }\n        }).join(\";\");\n\n        span.remove();\n\n        return style;\n    },\n\n    getEffectiveBackground: function(element) {\n        var backgroundStyle = element.css(\"background-color\") || \"\";\n\n        if (backgroundStyle.indexOf(\"rgba(0, 0, 0, 0\") < 0 && backgroundStyle !== \"transparent\") {\n            return backgroundStyle;\n        } else if (element[0].tagName.toLowerCase() === \"html\") {\n            return \"Window\";\n        } else {\n            return Dom.getEffectiveBackground(element.parent());\n        }\n    },\n\n    innerText: function(node) {\n        var text = node.innerHTML;\n        text = text.replace(/<!--(.|\\s)*?-->/gi, \"\");\n        text = text.replace(/<\\/?[^>]+?\\/?>/gm, \"\");\n\n        return text;\n    },\n\n    removeClass: function(node, classNames) {\n        var className = \" \" + node.className + \" \",\n            classes = classNames.split(\" \"),\n            i, len;\n\n        for (i = 0, len = classes.length; i < len; i++) {\n            className = className.replace(\" \" + classes[i] + \" \", \" \");\n        }\n\n        className = kendo.trim(className);\n\n        if (className.length) {\n            node.className = className;\n        } else {\n            node.removeAttribute(CLASS);\n        }\n    },\n\n    commonAncestor: function() {\n        var count = arguments.length,\n            paths = [],\n            minPathLength = Infinity,\n            output = null,\n            i, ancestors, node, first, j;\n\n        if (!count) {\n            return null;\n        }\n\n        if (count == 1) {\n            return arguments[0];\n        }\n\n        for (i = 0; i < count; i++) {\n            ancestors = [];\n            node = arguments[i];\n            while (node) {\n                ancestors.push(node);\n                node = node.parentNode;\n            }\n            paths.push(ancestors.reverse());\n            minPathLength = Math.min(minPathLength, ancestors.length);\n        }\n\n        if (count == 1) {\n            return paths[0][0];\n        }\n\n        for (i = 0; i < minPathLength; i++) {\n            first = paths[0][i];\n\n            for (j = 1; j < count; j++) {\n                if (first != paths[j][i]) {\n                    return output;\n                }\n            }\n\n            output = first;\n        }\n        return output;\n    },\n\n    closestSplittableParent: function(nodes) {\n        var result;\n\n        if (nodes.length == 1) {\n            result = Dom.parentOfType(nodes[0], [\"ul\",\"ol\"]);\n        } else {\n            result = Dom.commonAncestor.apply(null, nodes);\n        }\n\n        if (!result) {\n            result = Dom.parentOfType(nodes[0], [\"p\", \"td\"]) || nodes[0].ownerDocument.body;\n        }\n\n        if (Dom.isInline(result)) {\n            result = Dom.blockParentOrBody(result);\n        }\n\n        var editableParents = map(nodes, Dom.editableParent);\n        var editableAncestor = Dom.commonAncestor(editableParents)[0];\n\n        if ($.contains(result, editableAncestor)) {\n            result = editableAncestor;\n        }\n\n        return result;\n    },\n\n    closestEditable: function(node, types) {\n        var closest;\n        var editable = Dom.editableParent(node);\n\n        if (Dom.ofType(node, types)) {\n            closest = node;\n        } else {\n            closest = Dom.parentOfType(node, types);\n        }\n\n        if (closest && editable && $.contains(closest, editable)) {\n            closest = editable;\n        } else if (!closest && editable) {\n            closest = editable;\n        }\n\n        return closest;\n    },\n\n    closestEditableOfType: function(node, types) {\n        var editable = Dom.closestEditable(node, types);\n\n        if (editable && Dom.ofType(editable, types) && !$(editable).is(\".k-editor\")) {\n            return editable;\n        }\n    },\n\n    filter: function(tagName, nodes, invert) {\n        var filterFn = function(node) {\n            return Dom.name(node) == tagName;\n        };\n\n        return Dom.filterBy(nodes, filterFn, invert);\n    },\n\n    filterBy: function(nodes, condition, invert) {\n        var i = 0;\n        var len = nodes.length;\n        var result = [];\n        var match;\n\n        for (; i < len; i++) {\n            match = condition(nodes[i]);\n            if ((match && !invert) || (!match && invert)) {\n                result.push(nodes[i]);\n            }\n        }\n\n        return result;\n    },\n\n    ensureTrailingBreaks: function(node) {\n        var elements = $(node).find(\"p,td,th\");\n        var length = elements.length;\n        var i = 0;\n\n        if (length) {\n            for (; i < length; i++) {\n                Dom.ensureTrailingBreak(elements[i]);\n            }\n        } else {\n            Dom.ensureTrailingBreak(node);\n        }\n    },\n\n    removeTrailingBreak: function(node) {\n        $(node).find(\"br[type=_moz],.k-br\").remove();\n    },\n\n    ensureTrailingBreak: function(node) {\n        Dom.removeTrailingBreak(node);\n\n        var lastChild = node.lastChild;\n        var name = lastChild && Dom.name(lastChild);\n        var br;\n\n        if (!name ||\n            (name != \"br\" && name != \"img\") ||\n            (name == \"br\" && lastChild.className != \"k-br\")) {\n            br = node.ownerDocument.createElement(\"br\");\n            br.className = \"k-br\";\n            node.appendChild(br);\n        }\n    },\n\n    // Start: Table Utilities\n\n    reMapTableColumns: function(table, colAttr) {\n        Dom._mapColIndices(table, colAttr);\n    },\n\n    clearTableMappings: function(table, colAttr) {\n        $(table).find(\"[\" + colAttr + \"]\").removeAttr(colAttr);\n    },\n\n    _mapColIndices: function(table, colAttr) {\n        var registeredColumns = {};\n\n        for (var rowIndex = 0; rowIndex < table.rows.length; rowIndex++) {\n            var cells = table.rows[rowIndex].cells;\n            var colIndex = 0;\n            for (var cellIndex = 0; cellIndex < cells.length; cellIndex++, colIndex++) {\n                var cell = cells[cellIndex];\n\n                if (cell.rowSpan > 1) {\n                    this._mapColspan(cell, rowIndex, colIndex, registeredColumns);\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][colIndex]) {\n                        colIndex++;\n                    }\n                }\n\n                cell.setAttribute(colAttr, colIndex);\n\n                if (cell.colSpan > 1) {\n                    colIndex = colIndex + cell.colSpan - 1;\n                }\n            }\n        }\n    },\n\n    _mapColspan: function(cell, rowIndex, colIndex, registeredColumns) {\n        var rowSpan = cell.rowSpan,\n            colSpan = cell.colSpan,\n            index;\n\n        for (var ci = 0; ci < colSpan; ci++) {\n            index = colIndex + ci;\n\n            for (var ri = rowIndex + 1; ri < rowIndex + rowSpan; ri++) {\n\n                if (!registeredColumns[ri]) {\n                    registeredColumns[ri] = {};\n                    registeredColumns[ri].length = 0;\n                }\n\n                if (registeredColumns[rowIndex]) {\n                    while (registeredColumns[rowIndex][index]) {\n                        index++;\n                    }\n                }\n\n                registeredColumns[ri][index] = true;\n                registeredColumns[ri].length++;\n            }\n        }\n\n    },\n\n    associateWithIds: function(table) {\n        var that = this;\n        var numberOfTheadRows = 0;\n        var tableRows = table.rows;\n        var numberOfTableRows = tableRows.length;\n        var theadMatrix = [];\n        var tbodyMatrix = [];\n        var theadRows, i;\n\n        if (table.tHead) {\n            theadRows = table.tHead.rows;\n            numberOfTheadRows = theadRows.length;\n        } else {\n            numberOfTheadRows = that._getNumberOfHeaderRows(table);\n            theadRows = [];\n            for (i = 0; i < numberOfTheadRows; i++) {\n                theadRows.push(tableRows[i]);\n            }\n        }\n        for (i = 0; i < numberOfTheadRows; i++) {\n            theadMatrix.push([]);\n        }\n        for (i = 0; i < numberOfTableRows; i++) {\n            tbodyMatrix.push([]);\n        }\n\n        that._generateIdsForColumns(theadMatrix, theadRows);\n        that._generateIdsForRows(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n        that._assignIds(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows);\n    },\n\n    _generateIdsForColumns: function(theadMatrix, theadRows) {\n        var timestamp = new Date().getTime();\n        var numberOfTheadRows = theadRows ? theadRows.length : 0;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l;\n\n        for (i = 0; i < numberOfTheadRows; i++) {\n            row = theadRows[i];\n            cells = row.cells;\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (theadMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        theadMatrix[i + k][j + col + l] = id;\n                    }\n                }\n            }\n        }\n    },\n\n    _generateIdsForRows: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var timestamp = new Date().getTime();\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, col, id, colspan, rowspan, i, j, k, l, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"th\");\n            col = 0;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                id = \"table\" + i + j + (++timestamp);\n                cell.setAttribute(\"id\", id);\n                colspan = cell.getAttribute(\"colspan\") || 1;\n                rowspan = cell.getAttribute(\"rowspan\") || 1;\n\n                while (tbodyMatrix[i][j + col]) {\n                    col += 1;\n                }\n\n                for (k = 0; k < rowspan; k++) {\n                    for (l = 0; l < colspan; l++) {\n                        tbodyMatrix[i + k][j + col + l] = id;\n                    }\n                }\n\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = [];\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _assignIds: function(theadMatrix, tbodyMatrix, numberOfTheadRows, tableRows) {\n        var that = this;\n        var numberOfTableRows = tableRows.length;\n        var row, cells, cell, i, j, colIndex, headers;\n\n        var pushHeaderId = function(row) {\n            headers.push(row[colIndex]);\n        };\n\n        for (i = numberOfTheadRows; i < numberOfTableRows; i++) {\n            row = tableRows[i];\n            cells = $(row.cells).filter(\"td\");\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                colIndex = cell.getAttribute(\"col-index\");\n                headers = tbodyMatrix[i].slice();\n\n                theadMatrix.forEach(pushHeaderId);\n                headers = headers.filter(that._onlyUnique);\n                cell.setAttribute(\"headers\", headers.join(\" \").trim());\n            }\n        }\n    },\n\n    _getNumberOfColumns: function(table) {\n        var cells = $(table).find(\"th, td\");\n        var numberOfCols = 0;\n        var cell, i, currentIndex;\n\n        for (i = 0; i < cells.length; i++) {\n            cell = cells[i];\n            currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n            if (currentIndex > numberOfCols) {\n                numberOfCols = currentIndex;\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderColumns: function(table, numberOfHeaderRows) {\n        var rows = table.rows;\n        var numberOfCols = 0;\n        var currentIndex, row, i, j, cell;\n\n        for (i = numberOfHeaderRows; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (this.is(cell, \"th\")) {\n                    currentIndex = Number(cell.getAttribute(\"col-index\")) + 1;\n                    if (currentIndex > numberOfCols) {\n                        numberOfCols = currentIndex;\n                    }\n                }\n            }\n        }\n\n        return numberOfCols;\n    },\n\n    _getNumberOfHeaderRows: function(table) {\n        var rows = table.rows;\n        var thead = table.tHead;\n        var number = thead && table.tHead.rows ? table.tHead.rows.length : 0;\n        var j, row, cell, length;\n\n        if (number === 0) {\n            row = rows[0];\n            length = row.cells && row.cells.length;\n\n            while (row && length && this.is(row.cells[0], \"th\")) {\n                for (j = 0; j < length; j++) {\n                    cell = row ? row.cells[j] : null;\n\n                    if (!this.is(cell, \"th\")) {\n                        row = null;\n                    }\n                }\n\n                if (row) {\n                    number += 1;\n                    row = this.next(row);\n                    length = row && row.cells && row.cells.length;\n                }\n            }\n        }\n\n        return number;\n    },\n\n    // End: Table Utilities\n\n    _onlyUnique: function(value, index, self) {\n        return self.indexOf(value) === index;\n    }\n};\n\nkendo.ui.editor.Dom = Dom;\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo;\nvar Editor = kendo.ui.editor;\nvar dom = Editor.Dom;\nvar extend = $.extend;\n\nvar fontSizeMappings = 'xx-small,x-small,small,medium,large,x-large,xx-large'.split(',');\nvar quoteRe = /\"/g; //\"\nvar brRe = /<br[^>]*>/i;\nvar pixelRe = /^\\d+(\\.\\d*)?(px)?$/i;\nvar emptyPRe = /<p>(?:&nbsp;)?<\\/p>/i;\nvar cssDeclaration = /(\\*?[-#\\/\\*\\\\\\w]+(?:\\[[0-9a-z_-]+\\])?)\\s*:\\s*((?:'(?:\\\\'|.)*?'|\"(?:\\\\\"|.)*?\"|\\([^\\)]*?\\)|[^};])+)/g;\nvar sizzleAttr = /^sizzle-\\d+/i;\nvar scriptAttr = /^k-script-/i;\nvar onerrorRe = /\\s*onerror\\s*=\\s*(?:'|\")?([^'\">\\s]*)(?:'|\")?/i;\nvar br = '<br class=\"k-br\">';\nvar bomSpan = \"<span class='k-br'>\\ufeff</span>\";\n\nvar div = document.createElement(\"div\");\ndiv.innerHTML = \" <hr>\";\nvar supportsLeadingWhitespace = div.firstChild.nodeType === 3;\ndiv = null;\nvar isFunction = kendo.isFunction;\n\nvar TD = \"td\";\n\nvar Serializer = {\n    toEditableHtml: function(html) {\n        return (html || \"\")\n            .replace(/<!\\[CDATA\\[(.*)?\\]\\]>/g, \"<!--[CDATA[$1]]-->\")\n            .replace(/<(\\/?)script([^>]*)>/ig, \"<$1k:script$2>\")\n            .replace(/<img([^>]*)>/ig, function(match) {\n                return match.replace(onerrorRe, \"\");\n            })\n            .replace(/(<\\/?img[^>]*>)[\\r\\n\\v\\f\\t ]+/ig, \"$1\")\n            .replace(/^<(table|blockquote)/i, br + '<$1')\n            .replace(/^[\\s]*(&nbsp;|\\u00a0)/i, '$1')\n            .replace(/<\\/(table|blockquote)>$/i, '</$1>' + br);\n    },\n\n    _toEditableImmutables: function(body) {\n        var immutable = Editor.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    _fillEmptyElements: function(body) {\n        // fills empty elements to allow them to be focused\n        $(body).find(\"p,td\").each(function() {\n            var p = $(this);\n            if (/^\\s*$/g.test(p.text()) && !p.find(\"img,input\").length) {\n                var node = this;\n                while (node.children[0] && node.children[0].nodeType != 3) {\n                    node = node.children[0];\n                }\n\n                if (node.nodeType == 1 && !dom.empty[dom.name(node)]) {\n                    if (dom.is(node, \"td\")) {\n                        node.innerHTML = kendo.ui.editor.emptyTableCellContent;\n                    }\n                    else {\n                        node.innerHTML = kendo.ui.editor.emptyElementContent;\n                    }\n                }\n            }\n        });\n    },\n\n    _removeSystemElements: function(body) {\n        // removes persisted system elements\n        $(\".k-paste-container\", body).remove();\n    },\n\n    _resetOrderedLists: function(root) {\n        // fix for IE9 OL bug -- https://connect.microsoft.com/IE/feedback/details/657695/ordered-list-numbering-changes-from-correct-to-0-0\n        var ols = root.getElementsByTagName(\"ol\"), i, ol, originalStart;\n\n        for (i = 0; i < ols.length; i++) {\n            ol = ols[i];\n            originalStart = ol.getAttribute(\"start\");\n\n            ol.setAttribute(\"start\", 1);\n\n            if (originalStart) {\n                ol.setAttribute(\"start\", originalStart);\n            } else {\n                ol.removeAttribute(originalStart);\n            }\n        }\n    },\n\n    _preventScriptExecution: function(root) {\n        $(root).find(\"*\").each(function() {\n            var attributes = this.attributes;\n            var attribute, i, l, name;\n            var attributesToRemove = [];\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n\n                if (attribute.specified && /^on/i.test(name)) {\n                    this.setAttribute(\"k-script-\" + name, attribute.value);\n                    attributesToRemove.push(name);\n                }\n            }\n\n            for (i = 0, l = attributesToRemove.length; i < l; i++) {\n                this.removeAttribute(attributesToRemove[i]);\n            }\n        });\n    },\n\n    htmlToDom: function(html, root, options) {\n        var browser = kendo.support.browser;\n        var msie = browser.msie;\n        var o = options || {};\n        var immutables = o.immutables;\n\n        html = Serializer.toEditableHtml(html);\n\n        if (isFunction(o.custom)) {\n            html = o.custom(html) || html;\n        }\n        root.innerHTML = html;\n\n        if (immutables) {\n            immutables.deserialize(root);\n        }\n\n        if (msie) {\n            // unicode characters denormalize the DOM tree in IE9\n            dom.normalize(root);\n\n            Serializer._resetOrderedLists(root);\n        }\n\n        Serializer._preventScriptExecution(root);\n\n        Serializer._fillEmptyElements(root);\n\n        Serializer._removeSystemElements(root);\n\n        Serializer._toEditableImmutables(root);\n\n        // add k-table class to all tables\n        $(\"table\", root).addClass(\"k-table\");\n\n        return root;\n    },\n\n    domToXhtml: function(root, options) {\n        var result = [];\n        var immutables = options && options.immutables;\n\n        function semanticFilter(attributes) {\n            return $.grep(attributes, function(attr) {\n                return attr.name != \"style\";\n            });\n        }\n\n        function mapStart(node, tag) {\n            result.push('<' + tag);\n            attr(node);\n            result.push('>');\n        }\n\n        var tagMap = {\n            iframe: {\n                start: function(node) { mapStart(node, \"iframe\"); },\n                end: function() { result.push('</iframe>'); }\n            },\n            'k:script': {\n                start: function(node) { mapStart(node, \"script\"); },\n                end: function() { result.push('</script>'); },\n                skipEncoding: true\n            },\n            span: {\n                canOptimize: true,\n                semantic: true,\n                start: function(node) {\n                    var style = node.style;\n\n                    var attributes = specifiedAttributes(node);\n                    var semanticAttributes = semanticFilter(attributes);\n\n                    if (semanticAttributes.length) {\n                        result.push(\"<span\"); attr(node, semanticAttributes); result.push(\">\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"<u>\");\n                    }\n\n                    var font = [];\n                    if (style.color) {\n                        font.push('color=\"' + dom.toHex(style.color) + '\"');\n                    }\n\n                    if (style.fontFamily) {\n                        font.push('face=\"' + style.fontFamily + '\"');\n                    }\n\n                    if (style.fontSize) {\n                        var size = $.inArray(style.fontSize, fontSizeMappings);\n                        font.push('size=\"' + size + '\"');\n                    }\n\n                    // Apply the rest of the inline styles back\n                    var inlineStyles = [];\n                    var ignoredStylePrefixes = [\"text-decoration\", \"color\", \"font\"];\n\n                    for (let i = 0; i < style.length; i++) {\n                        var inlineStyle = style[i];\n\n                        if (ignoredStylePrefixes.filter(prop => inlineStyle.startsWith(prop)).length <= 0) {\n                            inlineStyles.push(`${inlineStyle}: ${style[inlineStyle]}`);\n                        }\n                    }\n\n                    if (inlineStyles.length) {\n                        font.push('style=\"' + inlineStyles.join(\";\") + '\"');\n                    }\n\n                    if (font.length) {\n                        result.push(\"<font \" + font.join(\" \") + \">\");\n                    }\n                },\n                end: function(node) {\n                    var style = node.style;\n\n                    if (style.color || style.fontFamily || style.fontSize) {\n                        result.push(\"</font>\");\n                    }\n\n                    if (style.textDecoration == \"underline\") {\n                        result.push(\"</u>\");\n                    }\n\n                    if (semanticFilter(specifiedAttributes(node)).length) {\n                        result.push(\"</span>\");\n                    }\n                }\n            },\n            strong: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"b\"); },\n                end: function() { result.push('</b>'); }\n            },\n            em: {\n                semantic: true,\n                start: function(node) { mapStart(node, \"i\"); },\n                end: function() { result.push('</i>'); }\n            },\n            b: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"strong\"); },\n                end: function() { result.push('</strong>'); }\n            },\n            i: {\n                semantic: false,\n                start: function(node) { mapStart(node, \"em\"); },\n                end: function() { result.push('</em>'); }\n            },\n            u: {\n                semantic: false,\n                start: function(node) {\n                    result.push('<span');\n\n                    var attributes = specifiedAttributes(node);\n                    var style = $(attributes).filter(function(i, item) { return item.name == \"style\"; })[0];\n                    var styleObj = { nodeName: \"style\", value: \"text-decoration:underline;\" };\n\n                    if (style) {\n                        styleObj.value = style.value;\n                        if (!/text-decoration/i.test(styleObj.value)) {\n                            styleObj.value = \"text-decoration:underline;\" + styleObj.value;\n                        }\n                        attributes.splice($.inArray(style, attributes), 1);\n                    }\n                    attributes.push(styleObj);\n\n                    attr(node, attributes);\n                    result.push('>');\n                },\n                end: function() { result.push('</span>'); }\n            },\n            font: {\n                canOptimize: true,\n                semantic: false,\n                start: function(node) {\n                    result.push('<span style=\"');\n\n                    var color = node.getAttribute('color');\n                    var size = fontSizeMappings[node.getAttribute('size')];\n                    var face = node.getAttribute('face');\n\n                    if (color) {\n                        result.push('color:');\n                        result.push(dom.toHex(color));\n                        result.push(';');\n                    }\n\n                    if (face) {\n                        result.push('font-family:');\n                        result.push(face);\n                        result.push(';');\n                    }\n\n                    if (size) {\n                        result.push('font-size:');\n                        result.push(size);\n                        result.push(';');\n                    }\n\n                    result.push('\">');\n                },\n                end: function() {\n                    result.push('</span>');\n                }\n            }\n        };\n\n        tagMap.script = tagMap[\"k:script\"];\n\n        options = options || {};\n\n        if (typeof options.semantic == \"undefined\") {\n            options.semantic = true;\n        }\n\n        function cssProperties(cssText) {\n            var trim = kendo.trim;\n            var css = trim(cssText);\n            var match;\n            var property, value;\n            var properties = [];\n\n            cssDeclaration.lastIndex = 0;\n\n            while (true) {\n                match = cssDeclaration.exec(css);\n\n                if (!match) {\n                    break;\n                }\n\n                property = trim(match[1].toLowerCase());\n                value = trim(match[2]);\n\n                if (property == \"font-size-adjust\" || property == \"font-stretch\") {\n                    continue;\n                }\n\n                if (property.indexOf('color') >= 0) {\n                    value = dom.toHex(value);\n                } else if (property.indexOf('font') >= 0) {\n                    value = value.replace(quoteRe, \"'\");\n                } else if (/\\burl\\(/g.test(value)) {\n                    value = value.replace(quoteRe, \"\");\n                }\n\n                properties.push({ property: property, value: value });\n            }\n\n            return properties;\n        }\n\n        function styleAttr(cssText) {\n            var properties = cssProperties(cssText);\n            var i;\n\n            for (i = 0; i < properties.length; i++) {\n                result.push(properties[i].property);\n                result.push(':');\n                result.push(properties[i].value);\n                result.push(';');\n            }\n        }\n\n        function specifiedAttributes(node) {\n            var result = [];\n            var attributes = node.attributes;\n            var attribute, i, l;\n            var name, value, specified;\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n\n                name = attribute.nodeName;\n                value = attribute.value;\n                specified = attribute.specified;\n\n                // In IE < 8 the 'value' attribute is not returned as 'specified'. The same goes for type=\"text\"\n                if (name == 'value' && 'value' in node && node.value) {\n                    specified = true;\n                } else if (name == 'type' && value == 'text') {\n                    specified = true;\n                } else if (name == \"class\" && !value) {\n                    specified = false;\n                } else if (sizzleAttr.test(name)) {\n                    specified = false;\n                } else if (name == 'complete') {\n                    specified = false;\n                } else if (name == 'altHtml') {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ul\")) {\n                    specified = false;\n                } else if (name == 'start' && dom.is(node, \"ol\") && value == \"1\") {\n                    specified = false;\n                } else if (name.indexOf('_moz') >= 0) {\n                    specified = false;\n                } else if (scriptAttr.test(name)) {\n                    specified = !!options.scripts;\n                } else if (name == 'data-role' && value == 'resizable' && (dom.is(node, \"tr\") || dom.is(node, \"td\"))) {\n                    specified = false;\n                }\n\n                if (specified) {\n                    result.push(attribute);\n                }\n            }\n\n            return result;\n        }\n\n        function attr(node, attributes) {\n            var i, l, attribute, name, value;\n\n            attributes = attributes || specifiedAttributes(node);\n\n            if (dom.is(node, 'img')) {\n                var width = node.style.width,\n                    height = node.style.height,\n                    $node = $(node);\n\n                if (width && pixelRe.test(width)) {\n                    $node.attr('width', parseInt(width, 10));\n                    dom.unstyle(node, { width: undefined$1 });\n                }\n\n                if (height && pixelRe.test(height)) {\n                    $node.attr('height', parseInt(height, 10));\n                    dom.unstyle(node, { height: undefined$1 });\n                }\n            }\n\n            if (!attributes.length) {\n                return;\n            }\n\n            // Remove the following if everything seems to be in order.\n            // https://github.com/telerik/kendo-ui-core/issues/3639\n            // attributes.sort(function (a, b) {\n            //     return a.nodeName > b.nodeName ? 1 : a.nodeName < b.nodeName ? -1 : 0;\n            // });\n\n            for (i = 0, l = attributes.length; i < l; i++) {\n                attribute = attributes[i];\n                name = attribute.nodeName;\n                value = attribute.value;\n\n                if (name == \"class\" && value == \"k-table\") {\n                    continue;\n                }\n\n                name = name.replace(scriptAttr, \"\");\n\n                result.push(' ');\n                result.push(name);\n                result.push('=\"');\n\n                if (name == 'style') {\n                    styleAttr(value || node.style.cssText);\n                } else if (name == 'src' || name == 'href') {\n                    result.push(kendo.htmlEncode(node.getAttribute(name, 2)));\n                } else {\n                    result.push(dom.fillAttrs[name] ? name : value);\n                }\n\n                result.push('\"');\n            }\n        }\n\n        function children(node, skip, skipEncoding) {\n            for (var childNode = node.firstChild; childNode; childNode = childNode.nextSibling) {\n                child(childNode, skip, skipEncoding);\n            }\n        }\n\n        function text(node) {\n            return node.nodeValue.replace(/\\ufeff/g, \"\");\n        }\n\n        function isEmptyBomNode(node) {\n            if (dom.isBom(node)) {\n                do {\n                    node = node.parentNode;\n\n                    if (dom.is(node, TD) && node.childNodes.length === 1) {\n                        return true;\n                    }\n\n                    if (node.childNodes.length !== 1) {\n                        return false;\n                    }\n                } while (!dom.isBlock(node));\n\n                return true;\n            }\n\n            return false;\n        }\n\n        function child(node, skip, skipEncoding) {\n            var nodeType = node.nodeType,\n                tagName, mapper,\n                parent, value, previous, jqNode;\n\n            if (immutables && Editor.Immutables.immutable(node)) {\n                result.push(immutables.serialize(node));\n            } else if (nodeType == 1) {\n                tagName = dom.name(node);\n                jqNode = $(node);\n\n                if (jqNode.hasClass(\"k-element-resize-handle-wrapper\") || jqNode.hasClass(\"k-column-resize-handle-wrapper\") || jqNode.hasClass(\"k-row-resize-handle-wrapper\")) {\n                    return;\n                }\n\n                if (!tagName || dom.insignificant(node)) {\n                    return;\n                }\n\n                if (!options.scripts && (tagName == \"script\" || tagName == \"k:script\")) {\n                    return;\n                }\n\n                mapper = tagMap[tagName];\n\n                if (mapper) {\n                    if (mapper.canOptimize &&\n                        options.optimizeTags &&\n                        shouldOptimize(node)) {\n                            children(node, false, mapper.skipEncoding);\n                        return;\n                    }\n\n                    if (typeof mapper.semantic == \"undefined\" ||\n                        (options.semantic ^ mapper.semantic)) {\n                        mapper.start(node);\n                        children(node, false, mapper.skipEncoding);\n                        mapper.end(node);\n                        return;\n                    }\n                }\n\n                result.push('<');\n                result.push(tagName);\n\n                attr(node);\n\n                if (dom.empty[tagName]) {\n                    result.push(' />');\n                } else {\n                    result.push('>');\n                    children(node, skip || dom.is(node, 'pre'));\n                    result.push('</');\n                    result.push(tagName);\n                    result.push('>');\n                }\n            } else if (nodeType == 3) {\n                if (isEmptyBomNode(node)) {\n                    result.push('&nbsp;');\n                    return;\n                }\n\n                value = text(node);\n\n                if (!skip && supportsLeadingWhitespace) {\n                    parent = node.parentNode;\n                    previous = node.previousSibling;\n\n                    if (!previous) {\n                         previous = (dom.isInline(parent) ? parent : node).previousSibling;\n                    }\n\n                    if (!previous || previous.innerHTML === \"\" || dom.isBlock(previous)) {\n                        if (options.keepEOL) {\n                            value = value.replace(/[\\r\\n\\v\\f\\t ]+/, ' ');\n                        } else {\n                            value = value.replace(/^[\\r\\n\\v\\f\\t ]+/, '');\n                        }\n                    }\n\n                    value = value.replace(/ +/, ' ');\n                }\n\n                result.push(skipEncoding ? value : dom.encode(value, options));\n\n            } else if (nodeType == 4) {\n                result.push('<![CDATA[');\n                result.push(node.data);\n                result.push(']]>');\n            } else if (nodeType == 8) {\n                if (node.data.indexOf('[CDATA[') < 0) {\n                    result.push('<!--');\n                    result.push(node.data);\n                    result.push('-->');\n                } else {\n                    result.push('<!');\n                    result.push(node.data);\n                    result.push('>');\n                }\n            }\n        }\n\n        function shouldOptimize(node) {\n            return node.attributes.length === 0;\n        }\n\n        function textOnly(root) {\n            var childrenCount = root.childNodes.length;\n            var textChild = childrenCount && root.firstChild.nodeType == 3;\n\n            return textChild && (childrenCount == 1 || (childrenCount == 2 && dom.insignificant(root.lastChild)));\n        }\n\n        function runCustom() {\n            if (kendo.isFunction(options.custom)) {\n                result = options.custom(result) || result;\n            }\n        }\n\n        if (textOnly(root)) {\n            result = dom.encode(text(root.firstChild).replace(/[\\r\\n\\v\\f\\t ]+/, ' '), options);\n            runCustom();\n\n            return result;\n        }\n\n        children(root);\n        result = result.join('');\n        runCustom();\n\n        // if serialized dom contains only whitespace elements, consider it empty (required field validation)\n        if (result.replace(brRe, \"\").replace(emptyPRe, \"\") === \"\") {\n            return \"\";\n        }\n\n        return result;\n    }\n\n};\n\nextend(Editor, {\n    Serializer: Serializer\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        browser = kendo.support.browser,\n        dom = Editor.Dom,\n        findNodeIndex = dom.findNodeIndex,\n        isDataNode = dom.isDataNode,\n        findClosestAncestor = dom.findClosestAncestor,\n        getNodeLength = dom.getNodeLength,\n        normalize = dom.normalize;\n\nvar SelectionUtils = {\n    selectionFromWindow: function(window) {\n        if (!window) {\n            return;\n        }\n\n        if (!(\"getSelection\" in window)) {\n            return new W3CSelection(window.document);\n        }\n\n        return window.getSelection();\n    },\n\n    selectionFromRange: function(range) {\n        var rangeDocument = RangeUtils.documentFromRange(range);\n        return SelectionUtils.selectionFromDocument(rangeDocument);\n    },\n\n    selectionFromDocument: function(document) {\n        return SelectionUtils.selectionFromWindow(dom.windowFromDocument(document));\n    }\n};\n\nvar W3CRange = Class.extend({\n    init: function(doc) {\n        $.extend(this, {\n            ownerDocument: doc, /* not part of the spec; used when cloning ranges, traversing the dom and creating fragments */\n            startContainer: doc,\n            endContainer: doc,\n            commonAncestorContainer: doc,\n            startOffset: 0,\n            endOffset: 0,\n            collapsed: true\n        });\n    },\n\n    // Positioning Methods\n    setStart: function(node, offset) {\n        this.startContainer = node;\n        this.startOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, true);\n    },\n\n    setEnd: function(node, offset) {\n        this.endContainer = node;\n        this.endOffset = offset;\n        updateRangeProperties(this);\n        fixIvalidRange(this, false);\n    },\n\n    setStartBefore: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node));\n    },\n\n    setStartAfter: function(node) {\n        this.setStart(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    setEndBefore: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node));\n    },\n\n    setEndAfter: function(node) {\n        this.setEnd(node.parentNode, findNodeIndex(node) + 1);\n    },\n\n    selectNode: function(node) {\n        this.setStartBefore(node);\n        this.setEndAfter(node);\n    },\n\n    selectNodeContents: function(node) {\n        this.setStart(node, 0);\n        this.setEnd(node, node[node.nodeType === 1 ? 'childNodes' : 'nodeValue'].length);\n    },\n\n    collapse: function(toStart) {\n        var that = this;\n\n        if (toStart) {\n            that.setEnd(that.startContainer, that.startOffset);\n        } else {\n            that.setStart(that.endContainer, that.endOffset);\n        }\n    },\n\n    // Editing Methods\n\n    deleteContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        (function deleteSubtree(iterator) {\n            while (iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    deleteSubtree(iterator.getSubtreeIterator());\n                } else {\n                    iterator.remove();\n                }\n            }\n        })(new RangeIterator(range));\n    },\n\n    cloneContents: function() {\n        // clone subtree\n        var document = RangeUtils.documentFromRange(this);\n        return (function cloneSubtree(iterator) {\n                var node, frag = document.createDocumentFragment();\n\n                while (node = iterator.next()) {\n                    node = node.cloneNode(!iterator.hasPartialSubtree());\n\n                    if (iterator.hasPartialSubtree()) {\n                        node.appendChild(cloneSubtree(iterator.getSubtreeIterator()));\n                    }\n\n                    frag.appendChild(node);\n                }\n\n                return frag;\n        })(new RangeIterator(this));\n    },\n\n    extractContents: function() {\n        var that = this,\n            range = that.cloneRange();\n\n        if (that.startContainer != that.commonAncestorContainer) {\n            that.setStartAfter(findClosestAncestor(that.commonAncestorContainer, that.startContainer));\n        }\n\n        that.collapse(true);\n\n        var document = RangeUtils.documentFromRange(that);\n\n        return (function extractSubtree(iterator) {\n            var node, frag = document.createDocumentFragment();\n\n            while (node = iterator.next()) {\n                if (iterator.hasPartialSubtree()) {\n                    node = node.cloneNode(false);\n                    node.appendChild(extractSubtree(iterator.getSubtreeIterator()));\n                } else {\n                    iterator.remove(that.originalRange);\n                }\n\n                frag.appendChild(node);\n            }\n\n            return frag;\n        })(new RangeIterator(range));\n    },\n\n    insertNode: function(node) {\n        var that = this;\n\n        if (isDataNode(that.startContainer)) {\n            if (that.startOffset != that.startContainer.nodeValue.length) {\n                dom.splitDataNode(that.startContainer, that.startOffset);\n            }\n\n            dom.insertAfter(node, that.startContainer);\n        } else {\n            dom.insertAt(that.startContainer, node, that.startOffset);\n        }\n\n        that.setStart(that.startContainer, that.startOffset);\n    },\n\n    cloneRange: function() {\n        // fast copy\n        return $.extend(new W3CRange(this.ownerDocument), {\n            startContainer: this.startContainer,\n            endContainer: this.endContainer,\n            commonAncestorContainer: this.commonAncestorContainer,\n            startOffset: this.startOffset,\n            endOffset: this.endOffset,\n            collapsed: this.collapsed,\n\n            originalRange: this /* not part of the spec; used to update the original range when calling extractContents() on clones */\n        });\n    },\n\n    // used for debug purposes\n    toString: function() {\n        var startNodeName = this.startContainer.nodeName,\n            endNodeName = this.endContainer.nodeName;\n\n        return [startNodeName == \"#text\" ? this.startContainer.nodeValue : startNodeName, '(', this.startOffset, ') : ',\n                endNodeName == \"#text\" ? this.endContainer.nodeValue : endNodeName, '(', this.endOffset, ')'].join('');\n    }\n});\n\nW3CRange.fromNode = function(node) {\n    return new W3CRange(node.ownerDocument);\n};\n\n/* can be used in Range.compareBoundaryPoints if we need it one day */\nfunction compareBoundaries(start, end, startOffset, endOffset) {\n    if (start == end) {\n        return endOffset - startOffset;\n    }\n\n    // end is child of start\n    var container = end;\n    while (container && container.parentNode != start) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return findNodeIndex(container) - startOffset;\n    }\n\n    // start is child of end\n    container = start;\n    while (container && container.parentNode != end) {\n        container = container.parentNode;\n    }\n\n    if (container) {\n        return endOffset - findNodeIndex(container) - 1;\n    }\n\n    // deep traversal\n    var root = dom.commonAncestor(start, end);\n    var startAncestor = start;\n\n    while (startAncestor && startAncestor.parentNode != root) {\n        startAncestor = startAncestor.parentNode;\n    }\n\n    if (!startAncestor) {\n        startAncestor = root;\n    }\n\n    var endAncestor = end;\n    while (endAncestor && endAncestor.parentNode != root) {\n        endAncestor = endAncestor.parentNode;\n    }\n\n    if (!endAncestor) {\n        endAncestor = root;\n    }\n\n    if (startAncestor == endAncestor) {\n        return 0;\n    }\n\n    return findNodeIndex(endAncestor) - findNodeIndex(startAncestor);\n}\n\nfunction fixIvalidRange(range, toStart) {\n    function isInvalidRange(range) {\n        try {\n            return compareBoundaries(range.startContainer, range.endContainer, range.startOffset, range.endOffset) < 0;\n        } catch (ex) {\n            // range was initially invalid (e.g. when cloned from invalid range) - it must be fixed\n            return true;\n        }\n    }\n\n    if (isInvalidRange(range)) {\n        if (toStart) {\n            range.commonAncestorContainer = range.endContainer = range.startContainer;\n            range.endOffset = range.startOffset;\n        } else {\n            range.commonAncestorContainer = range.startContainer = range.endContainer;\n            range.startOffset = range.endOffset;\n        }\n\n        range.collapsed = true;\n    }\n}\n\nfunction updateRangeProperties(range) {\n    range.collapsed = range.startContainer == range.endContainer && range.startOffset == range.endOffset;\n\n    var node = range.startContainer;\n    while (node && node != range.endContainer && !dom.isAncestorOf(node, range.endContainer)) {\n        node = node.parentNode;\n    }\n\n    range.commonAncestorContainer = node;\n}\n\nvar RangeIterator = Class.extend({\n    init: function(range) {\n        $.extend(this, {\n            range: range,\n            _current: null,\n            _next: null,\n            _end: null\n        });\n\n        if (range.collapsed) {\n            return;\n        }\n\n        var root = range.commonAncestorContainer;\n\n        this._next = range.startContainer == root && !isDataNode(range.startContainer) ?\n        range.startContainer.childNodes[range.startOffset] :\n        findClosestAncestor(root, range.startContainer);\n\n        this._end = range.endContainer == root && !isDataNode(range.endContainer) ?\n        range.endContainer.childNodes[range.endOffset] :\n        findClosestAncestor(root, range.endContainer).nextSibling;\n    },\n\n    hasNext: function() {\n        return !!this._next;\n    },\n\n    next: function() {\n        var that = this,\n            current = that._current = that._next;\n        that._next = that._current && that._current.nextSibling != that._end ?\n        that._current.nextSibling : null;\n\n        if (isDataNode(that._current)) {\n            if (that.range.endContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(that.range.endOffset, current.length - that.range.endOffset);\n            }\n\n            if (that.range.startContainer == that._current) {\n                current = current.cloneNode(true);\n                current.deleteData(0, that.range.startOffset);\n            }\n        }\n\n        return current;\n    },\n\n    traverse: function(callback) {\n        var that = this,\n            current;\n\n        function next() {\n            that._current = that._next;\n            that._next = that._current && that._current.nextSibling != that._end ? that._current.nextSibling : null;\n            return that._current;\n        }\n\n        while (current = next()) {\n            if (that.hasPartialSubtree()) {\n                that.getSubtreeIterator().traverse(callback);\n            } else {\n                callback(current);\n            }\n        }\n\n        return current;\n    },\n\n    remove: function(originalRange) {\n        var that = this,\n            inStartContainer = that.range.startContainer == that._current,\n            inEndContainer = that.range.endContainer == that._current,\n            start, end, delta;\n\n        if (isDataNode(that._current) && (inStartContainer || inEndContainer)) {\n            start = inStartContainer ? that.range.startOffset : 0;\n            end = inEndContainer ? that.range.endOffset : that._current.length;\n            delta = end - start;\n\n            if (originalRange && (inStartContainer || inEndContainer)) {\n                if (that._current == originalRange.startContainer && start <= originalRange.startOffset) {\n                    originalRange.startOffset -= delta;\n                }\n\n                if (that._current == originalRange.endContainer && end <= originalRange.endOffset) {\n                    originalRange.endOffset -= delta;\n                }\n            }\n\n            that._current.deleteData(start, delta);\n        } else {\n            var parent = that._current.parentNode;\n\n            if (originalRange && (that.range.startContainer == parent || that.range.endContainer == parent)) {\n                var nodeIndex = findNodeIndex(that._current);\n\n                if (parent == originalRange.startContainer && nodeIndex <= originalRange.startOffset) {\n                    originalRange.startOffset -= 1;\n                }\n\n                if (parent == originalRange.endContainer && nodeIndex < originalRange.endOffset) {\n                    originalRange.endOffset -= 1;\n                }\n            }\n\n            dom.remove(that._current);\n        }\n    },\n\n    hasPartialSubtree: function() {\n        return !isDataNode(this._current) &&\n        (dom.isAncestorOrSelf(this._current, this.range.startContainer) ||\n            dom.isAncestorOrSelf(this._current, this.range.endContainer));\n    },\n\n    getSubtreeIterator: function() {\n        return new RangeIterator(this.getSubRange());\n    },\n\n    getSubRange: function() {\n        var that = this,\n            subRange = that.range.cloneRange();\n        subRange.selectNodeContents(that._current);\n        if (dom.isAncestorOrSelf(that._current, that.range.startContainer)) {\n            subRange.setStart(that.range.startContainer, that.range.startOffset);\n        }\n        if (dom.isAncestorOrSelf(that._current, that.range.endContainer)) {\n            subRange.setEnd(that.range.endContainer, that.range.endOffset);\n        }\n\n        return subRange;\n    }\n});\n\nvar W3CSelection = Class.extend({\n    init: function(doc) {\n        this.ownerDocument = doc;\n        this.rangeCount = 1;\n    },\n\n    addRange: function(range) {\n        var textRange = this.ownerDocument.body.createTextRange();\n\n        // end container should be adopted first in order to prevent selection with negative length\n        adoptContainer(textRange, range, false);\n        adoptContainer(textRange, range, true);\n\n        textRange.select();\n    },\n\n    removeAllRanges: function() {\n        var selection = this.ownerDocument.selection;\n\n        if (selection.type != \"None\") {\n            selection.empty();\n        }\n    },\n\n    getRangeAt: function() {\n        var textRange,\n            range = new W3CRange(this.ownerDocument),\n            selection = this.ownerDocument.selection,\n            element, commonAncestor;\n\n        try {\n            textRange = selection.createRange();\n            element = textRange.item ? textRange.item(0) : textRange.parentElement();\n            if (element.ownerDocument != this.ownerDocument) {\n                return range;\n            }\n        } catch (ex) {\n            return range;\n        }\n\n        if (selection.type == \"Control\") {\n            range.selectNode(textRange.item(0));\n        } else {\n            commonAncestor = textRangeContainer(textRange);\n            adoptEndPoint(textRange, range, commonAncestor, true);\n            adoptEndPoint(textRange, range, commonAncestor, false);\n\n            if (range.startContainer.nodeType == 9) {\n                range.setStart(range.endContainer, range.startOffset);\n            }\n\n            if (range.endContainer.nodeType == 9) {\n                range.setEnd(range.startContainer, range.endOffset);\n            }\n\n            if (textRange.compareEndPoints(\"StartToEnd\", textRange) === 0) {\n                range.collapse(false);\n            }\n\n            var startContainer = range.startContainer,\n                endContainer = range.endContainer,\n                body = this.ownerDocument.body;\n\n            if (!range.collapsed && range.startOffset === 0 && range.endOffset == getNodeLength(range.endContainer) && // check for full body selection\n                !(startContainer == endContainer && isDataNode(startContainer) && startContainer.parentNode == body)) { // but not when single textnode is selected\n                var movedStart = false,\n                    movedEnd = false;\n\n                while (findNodeIndex(startContainer) === 0 && startContainer == startContainer.parentNode.firstChild && startContainer != body) {\n                    startContainer = startContainer.parentNode;\n                    movedStart = true;\n                }\n\n                while (findNodeIndex(endContainer) == getNodeLength(endContainer.parentNode) - 1 && endContainer == endContainer.parentNode.lastChild && endContainer != body) {\n                    endContainer = endContainer.parentNode;\n                    movedEnd = true;\n                }\n\n                if (startContainer == body && endContainer == body && movedStart && movedEnd) {\n                    range.setStart(startContainer, 0);\n                    range.setEnd(endContainer, getNodeLength(body));\n                }\n            }\n        }\n\n        return range;\n    }\n});\n\nfunction textRangeContainer(textRange) {\n    var left = textRange.duplicate(),\n        right = textRange.duplicate();\n\n    left.collapse(true);\n    right.collapse(false);\n\n    return dom.commonAncestor(textRange.parentElement(), left.parentElement(), right.parentElement());\n}\n\nfunction adoptContainer(textRange, range, start) {\n    // find anchor node and offset\n    var container = range[start ? \"startContainer\" : \"endContainer\"],\n        offset = range[start ? \"startOffset\" : \"endOffset\"],\n        textOffset = 0,\n        isData = isDataNode(container),\n        anchorNode = isData ? container : container.childNodes[offset] || null,\n        anchorParent = isData ? container.parentNode : container,\n        doc = range.ownerDocument,\n        cursor = doc.body.createTextRange(),\n        cursorNode;\n\n    // visible data nodes need a text offset\n    if (container.nodeType == 3 || container.nodeType == 4) {\n        textOffset = offset;\n    }\n\n    if (!anchorParent) {\n        anchorParent = doc.body;\n    }\n\n    if (anchorParent.nodeName.toLowerCase() == \"img\") {\n        cursor.moveToElementText(anchorParent);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    } else {\n        // create a cursor element node to position range (since we can't select text nodes)\n        cursorNode = anchorParent.insertBefore(dom.create(doc, \"a\"), anchorNode);\n\n        cursor.moveToElementText(cursorNode);\n        dom.remove(cursorNode);\n        cursor[start ? \"moveStart\" : \"moveEnd\"](\"character\", textOffset);\n        cursor.collapse(false);\n        textRange.setEndPoint(start ? \"StartToStart\" : \"EndToStart\", cursor);\n    }\n}\n\nfunction adoptEndPoint(textRange, range, commonAncestor, start) {\n    var cursorNode = dom.create(range.ownerDocument, \"a\"),\n        cursor = textRange.duplicate(),\n        comparison = start ? \"StartToStart\" : \"StartToEnd\",\n        result, parent, target,\n        previous, next,\n        args, index,\n        appended = false;\n\n    cursorNode.innerHTML = \"\\ufeff\";\n    cursor.collapse(start);\n\n    parent = cursor.parentElement();\n\n    if (!dom.isAncestorOrSelf(commonAncestor, parent)) {\n        parent = commonAncestor;\n    }\n\n    // detect range end points\n    // insert cursorNode within the textRange parent and move the cursor until it gets outside of the textRange\n    do {\n        if (appended) {\n            parent.insertBefore(cursorNode, cursorNode.previousSibling);\n        } else {\n            parent.appendChild(cursorNode);\n            appended = true;\n        }\n        cursor.moveToElementText(cursorNode);\n    } while ((result = cursor.compareEndPoints(comparison, textRange)) > 0 && cursorNode.previousSibling);\n\n    target = cursorNode.nextSibling;\n\n    if (result == -1 && isDataNode(target)) {\n        cursor.setEndPoint(start ? \"EndToStart\" : \"EndToEnd\", textRange);\n\n        dom.remove(cursorNode);\n\n        args = [target, cursor.text.length];\n    } else {\n        previous = !start && cursorNode.previousSibling;\n        next = start && cursorNode.nextSibling;\n\n        if (isDataNode(next)) {\n            args = [next, 0];\n        } else if (isDataNode(previous)) {\n            args = [previous, previous.length];\n        } else {\n            index = findNodeIndex(cursorNode);\n\n            if (parent.nextSibling && index == parent.childNodes.length - 1) {\n                args = [parent.nextSibling, 0];\n            } else {\n                args = [parent, index];\n            }\n        }\n\n        dom.remove(cursorNode);\n    }\n\n    range[start ? \"setStart\" : \"setEnd\"].apply(range, args);\n}\n\nvar RangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n\n            function visit(node) {\n                if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                    nodes.push(node);\n                } else {\n                    node = node.firstChild;\n                    while (node) {\n                        visit(node);\n                        node = node.nextSibling;\n                    }\n                }\n            }\n\n            new RangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar ImmutablesRangeIterator = RangeIterator.extend({\n    hasPartialSubtree: function() {\n        var immutable = Editor.Immutables && Editor.Immutables.immutable;\n        return immutable && !immutable(this._current) && RangeIterator.fn.hasPartialSubtree.call(this);\n    },\n\n    getSubtreeIterator: function() {\n        return new ImmutablesRangeIterator(this.getSubRange());\n    }\n});\n\nvar ImmutablesRangeEnumerator = Class.extend({\n    init: function(range) {\n        this.enumerate = function() {\n            var nodes = [];\n            var immutable = Editor.Immutables && Editor.Immutables.immutable;\n            function visit(node) {\n                if (immutable && !immutable(node)) {\n                    if (dom.is(node, \"img\") || (node.nodeType == 3 && (!dom.isEmptyspace(node) || node.nodeValue == \"\\ufeff\"))) {\n                        nodes.push(node);\n                    } else {\n                        node = node.firstChild;\n                        while (node) {\n                            visit(node);\n                            node = node.nextSibling;\n                        }\n                    }\n                }\n            }\n\n            new ImmutablesRangeIterator(range).traverse(visit);\n\n            return nodes;\n        };\n    }\n});\n\nvar RestorePoint = Class.extend({\n    init: function(range, body, options) {\n        var that = this;\n        that.range = range;\n        that.rootNode = RangeUtils.documentFromRange(range);\n        that.body = body || that.getEditable(range);\n        if (dom.name(that.body) != \"body\") {\n            that.rootNode = that.body;\n        }\n\n        that.startContainer = that.nodeToPath(range.startContainer);\n        that.endContainer = that.nodeToPath(range.endContainer);\n        that.startOffset = that.offset(range.startContainer, range.startOffset);\n        that.endOffset = that.offset(range.endContainer, range.endOffset);\n\n        that.immutables = options && options.immutables;\n\n        if (that.immutables) {\n            that.serializedImmutables = Editor.Immutables.removeImmutables(that.body);\n        }\n\n        that.html = that.body.innerHTML;\n\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    index: function(node) {\n        var result = 0,\n            lastType = node.nodeType;\n\n        while (node = node.previousSibling) {\n            var nodeType = node.nodeType;\n\n            if (nodeType != 3 || lastType != nodeType) {\n                result ++;\n            }\n\n            lastType = nodeType;\n        }\n\n        return result;\n    },\n\n    getEditable: function(range) {\n        var root = range.commonAncestorContainer;\n\n        while (root && (root.nodeType == 3 || root.attributes && (!root.attributes.contentEditable || root.attributes.contentEditable.nodeValue.toLowerCase() == \"false\"))) {\n            root = root.parentNode;\n        }\n\n        return root;\n    },\n\n    restoreHtml: function() {\n        var that = this;\n\n        dom.removeChildren(that.body);\n        that.body.innerHTML = that.html;\n        if (that.immutables && !that.serializedImmutables.empty) {\n            Editor.Immutables.restoreImmutables(that.body, that.serializedImmutables);\n        }\n    },\n\n    offset: function(node, value) {\n        if (node.nodeType == 3) {\n            while ((node = node.previousSibling) && node.nodeType == 3) {\n                value += node.nodeValue.length;\n            }\n        }\n\n        return value;\n    },\n\n    nodeToPath: function(node) {\n        var path = [];\n\n        while (node != this.rootNode) {\n            path.push(this.index(node));\n            node = node.parentNode;\n        }\n\n        return path;\n    },\n\n    toRangePoint: function(range, start, path, denormalizedOffset) {\n        var node = this.rootNode,\n            length = path.length,\n            offset = denormalizedOffset;\n\n        while (length-- && node) {\n            node = node.childNodes[path[length]];\n        }\n\n        while (node && node.nodeType == 3 && node.nodeValue.length < offset) {\n            offset -= node.nodeValue.length;\n            node = node.nextSibling;\n        }\n\n        if (node && offset >= 0) {\n            range[start ? 'setStart' : 'setEnd'](node, offset);\n        }\n    },\n\n    toRange: function() {\n        var that = this,\n            result = that.range.cloneRange();\n\n        that.toRangePoint(result, true, that.startContainer, that.startOffset);\n        that.toRangePoint(result, false, that.endContainer, that.endOffset);\n\n        return result;\n    }\n\n});\n\nvar Marker = Class.extend({\n    init: function() {\n        this.caret = null;\n    },\n\n    addCaret: function(range) {\n        var that = this;\n        var caret = that.caret = dom.create(RangeUtils.documentFromRange(range), 'span', { className: 'k-marker' });\n        range.insertNode(caret);\n\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n\n        range.selectNode(caret);\n        return caret;\n    },\n\n    removeCaret: function(range) {\n        var that = this,\n            previous = that.caret.previousSibling,\n            startOffset = 0;\n\n        if (previous) {\n            startOffset = isDataNode(previous) ? previous.nodeValue.length : findNodeIndex(previous);\n        }\n\n        var container = that.caret.parentNode;\n        var containerIndex = previous ? findNodeIndex(previous) : 0;\n\n        dom.remove(that.caret);\n        normalize(container);\n\n        var node = container.childNodes[containerIndex];\n\n        if (isDataNode(node)) {\n            range.setStart(node, startOffset);\n        } else if (node) {\n            var textNode = dom.lastTextNode(node);\n            if (textNode) {\n                range.setStart(textNode, textNode.nodeValue.length);\n            } else {\n                range[previous ? 'setStartAfter' : 'setStartBefore'](node);\n            }\n        } else {\n            if (!browser.msie && !container.innerHTML) {\n                container.innerHTML = '<br _moz_dirty=\"\" />';\n            }\n\n            range.selectNodeContents(container);\n        }\n        range.collapse(true);\n    },\n\n    add: function(range, expand) {\n        var that = this;\n\n        var collapsed = range.collapsed && !RangeUtils.isExpandable(range);\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (expand && range.collapsed) {\n            that.addCaret(range);\n            range = RangeUtils.expand(range);\n        }\n\n        var rangeBoundary = range.cloneRange();\n\n        rangeBoundary.collapse(false);\n        that.end = dom.create(doc, 'span', { className: 'k-marker' });\n        rangeBoundary.insertNode(that.end);\n\n        rangeBoundary = range.cloneRange();\n        rangeBoundary.collapse(true);\n        that.start = that.end.cloneNode(true);\n        rangeBoundary.insertNode(that.start);\n\n        that._removeDeadMarkers(that.start, that.end);\n\n        if (collapsed) {\n            var bom = doc.createTextNode(\"\\ufeff\");\n            dom.insertAfter(bom.cloneNode(), that.start);\n            dom.insertBefore(bom, that.end);\n        }\n\n        normalize(range.commonAncestorContainer);\n\n        range.setStartBefore(that.start);\n        range.setEndAfter(that.end);\n\n        return range;\n    },\n\n    _removeDeadMarkers: function(start, end) {\n        if (start.previousSibling && start.previousSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(start.previousSibling);\n        }\n\n        if (end.nextSibling && end.nextSibling.nodeValue == \"\\ufeff\") {\n            dom.remove(end.nextSibling);\n        }\n    },\n\n    _normalizedIndex: function(node) {\n        var index = findNodeIndex(node);\n        var pointer = node;\n\n        while (pointer.previousSibling) {\n            if (pointer.nodeType == 3 && pointer.previousSibling.nodeType == 3) {\n                index--;\n            }\n\n            pointer = pointer.previousSibling;\n        }\n\n        return index;\n    },\n\n    remove: function(range) {\n        var that = this,\n            start = that.start,\n            end = that.end,\n            shouldNormalizeStart,\n            shouldNormalizeEnd,\n            shouldNormalize;\n\n        normalize(range.commonAncestorContainer);\n\n        while (!start.nextSibling && start.parentNode) {\n            start = start.parentNode;\n        }\n\n        while (!end.previousSibling && end.parentNode) {\n            end = end.parentNode;\n        }\n\n        // merely accessing the siblings will solve range issues in IE\n        shouldNormalizeStart = (start.previousSibling && start.previousSibling.nodeType == 3) &&\n                               (start.nextSibling && start.nextSibling.nodeType == 3);\n\n        shouldNormalizeEnd = (end.previousSibling && end.previousSibling.nodeType == 3) &&\n                             (end.nextSibling && end.nextSibling.nodeType == 3);\n\n        shouldNormalize = shouldNormalizeStart && shouldNormalizeEnd;\n\n        start = start.nextSibling;\n        end = end.previousSibling;\n\n        var isBomSelected = start === end && dom.isBom(start);\n        if (isBomSelected && start.length > 1) {\n            start.nodeValue = start.nodeValue.charAt(0);\n        }\n\n        var collapsed = isBomSelected;\n        var collapsedToStart = false;\n        // collapsed range\n        if (start == that.end) {\n            collapsedToStart = !!that.start.previousSibling;\n            start = end = that.start.previousSibling || that.end.nextSibling;\n            collapsed = true;\n        }\n\n        dom.remove(that.start);\n        dom.remove(that.end);\n\n        if (!start || !end) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            range.collapse(true);\n            return;\n        }\n\n        var startOffset = collapsed ? isDataNode(start) ? start.nodeValue.length : start.childNodes.length : 0;\n        var endOffset = isDataNode(end) ? end.nodeValue.length : end.childNodes.length;\n\n        if (start.nodeType == 3) {\n            while (start.previousSibling && start.previousSibling.nodeType == 3) {\n                start = start.previousSibling;\n                startOffset += start.nodeValue.length;\n            }\n        }\n\n        if (end.nodeType == 3) {\n            while (end.previousSibling && end.previousSibling.nodeType == 3) {\n                end = end.previousSibling;\n                endOffset += end.nodeValue.length;\n            }\n        }\n\n        var startParent = start.parentNode;\n        var endParent = end.parentNode;\n        var startIndex = this._normalizedIndex(start);\n        var endIndex = this._normalizedIndex(end);\n\n        normalize(startParent);\n        if (start.nodeType == 3) {\n            start = startParent.childNodes[startIndex];\n        }\n\n        normalize(endParent);\n        if (end.nodeType == 3) {\n            end = endParent.childNodes[endIndex];\n        }\n\n        if (collapsed) {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range[collapsedToStart ? 'setStartAfter' : 'setStartBefore'](start);\n            }\n\n            range.collapse(true);\n\n        } else {\n            if (start.nodeType == 3) {\n                range.setStart(start, startOffset);\n            } else {\n                range.setStartBefore(start);\n            }\n\n            if (end.nodeType == 3) {\n                range.setEnd(end, endOffset);\n            } else {\n                range.setEndAfter(end);\n            }\n        }\n\n        if (that.caret) {\n            that.removeCaret(range);\n        }\n    }\n});\n\nvar boundary = /[\\u0009-\\u000d]|\\u0020|\\u00a0|\\ufeff|\\.|,|;|:|!|\\(|\\)|\\?/;\n\nvar RangeUtils = {\n    nodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n        return nodes;\n    },\n\n    textNodes: function(range) {\n        var allNodes = new RangeEnumerator(range).enumerate(),\n            result = allNodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n\n        return result;\n    },\n\n    editableTextNodes: function(range) {\n        var nodes = [],\n            immutableParent = Editor.Immutables && Editor.Immutables.immutableParent,\n            result = [];\n\n        if (immutableParent && !immutableParent(range.commonAncestorContainer)) {\n            nodes = new ImmutablesRangeEnumerator(range).enumerate();\n            result = nodes.filter(function(node) {\n                return dom.allowsTextContent(node.parentElement);\n            });\n        }\n\n        return result;\n    },\n\n    documentFromRange: function(range) {\n        var startContainer = range.startContainer;\n        return startContainer.nodeType == 9 ? startContainer : startContainer.ownerDocument;\n    },\n\n    createRange: function(document) {\n        return document.createRange();\n    },\n\n    selectRange: function(range) {\n        var image = RangeUtils.image(range);\n        if (image) {\n            range.setStartAfter(image);\n            range.setEndAfter(image);\n        }\n        var selection = SelectionUtils.selectionFromRange(range);\n        selection.removeAllRanges();\n        selection.addRange(range);\n    },\n\n    stringify: function(range) {\n        return kendo.format(\n            \"{0}:{1} - {2}:{3}\",\n            dom.name(range.startContainer), range.startOffset,\n            dom.name(range.endContainer), range.endOffset\n        );\n    },\n\n    split: function(range, node, trim) {\n        function partition(start) {\n            var partitionRange = range.cloneRange();\n            partitionRange.collapse(start);\n            partitionRange[start ? 'setStartBefore' : 'setEndAfter'](node);\n            var contents = partitionRange.extractContents();\n            if (trim) {\n                contents = dom.trim(contents);\n            }\n            dom[start ? 'insertBefore' : 'insertAfter'](contents, node);\n        }\n        partition(true);\n        partition(false);\n    },\n\n    mapAll: function(range, map) {\n        var nodes = [];\n\n        new RangeIterator(range).traverse(function(node) {\n            var mapped = map(node);\n\n            if (mapped && $.inArray(mapped, nodes) < 0) {\n                nodes.push(mapped);\n            }\n        });\n\n        return nodes;\n    },\n\n    getAll: function(range, predicate) {\n        var selector = predicate;\n\n        if (typeof predicate == \"string\") {\n            predicate = function(node) {\n                return dom.is(node, selector);\n            };\n        }\n\n        return RangeUtils.mapAll(range, function(node) {\n            if (predicate(node)) {\n                return node;\n            }\n        });\n    },\n\n    getMarkers: function(range) {\n        return RangeUtils.getAll(range, function(node) {\n            return node.className == 'k-marker';\n        });\n    },\n\n    image: function(range) {\n        var nodes = RangeUtils.getAll(range, \"img\");\n\n        if (nodes.length == 1) {\n            return nodes[0];\n        }\n    },\n\n    isStartOf: function(originalRange, node) {\n        if (originalRange.startOffset !== 0) {\n            return false;\n        }\n\n        var range = originalRange.cloneRange();\n\n        while (range.startOffset === 0 && range.startContainer != node) {\n            var index = dom.findNodeIndex(range.startContainer);\n            var parent = range.startContainer.parentNode;\n\n            while (index > 0 && parent[index - 1] && dom.insignificant(parent[index - 1])) {\n                index--;\n            }\n\n            range.setStart(parent, index);\n        }\n\n        return range.startOffset === 0 && range.startContainer == node;\n    },\n\n    isEndOf: function(originalRange, node) {\n        var range = originalRange.cloneRange();\n\n        range.collapse(false);\n\n        var start = range.startContainer;\n\n        if (dom.isDataNode(start) && range.startOffset == dom.getNodeLength(start)) {\n            range.setStart(start.parentNode, dom.findNodeIndex(start) + 1);\n            range.collapse(true);\n        }\n\n        range.setEnd(node, dom.getNodeLength(node));\n\n        var nodes = [];\n\n        function visit(node) {\n            if (!dom.insignificant(node) && !(dom.isDataNode(node) && /^[\\ufeff]*$/.test(node.nodeValue))) {\n                nodes.push(node);\n            }\n        }\n\n        new RangeIterator(range).traverse(visit);\n\n        return !nodes.length;\n    },\n\n    wrapSelectedElements: function(range) {\n        var startEditable = dom.editableParent(range.startContainer);\n        var endEditable = dom.editableParent(range.endContainer);\n\n        while (range.startOffset === 0 && range.startContainer != startEditable) {\n            range.setStart(range.startContainer.parentNode, dom.findNodeIndex(range.startContainer));\n        }\n\n        function isEnd(offset, container) {\n            var length = dom.getNodeLength(container);\n\n            if (offset == length) {\n                return true;\n            }\n\n            for (var i = offset; i < length; i++) {\n                if (!dom.insignificant(container.childNodes[i])) {\n                    return false;\n                }\n            }\n\n            return true;\n        }\n\n        while (isEnd(range.endOffset, range.endContainer) && range.endContainer != endEditable) {\n            range.setEnd(range.endContainer.parentNode, dom.findNodeIndex(range.endContainer) + 1);\n        }\n\n        return range;\n    },\n\n    expand: function(range) {\n        var result = range.cloneRange();\n\n        var startContainer = result.startContainer.childNodes[result.startOffset === 0 ? 0 : result.startOffset - 1];\n        var endContainer = result.endContainer.childNodes[result.endOffset];\n\n        if (!isDataNode(startContainer) || !isDataNode(endContainer)) {\n            return result;\n        }\n\n        var beforeCaret = startContainer.nodeValue;\n        var afterCaret = endContainer.nodeValue;\n\n        if (!beforeCaret || !afterCaret) {\n            return result;\n        }\n\n        var startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        var endOffset = afterCaret.search(boundary);\n\n        if (!startOffset || !endOffset) {\n            return result;\n        }\n\n        endOffset = endOffset == -1 ? afterCaret.length : endOffset;\n        startOffset = startOffset == -1 ? 0 : beforeCaret.length - startOffset;\n\n        result.setStart(startContainer, startOffset);\n        result.setEnd(endContainer, endOffset);\n\n        return result;\n    },\n\n    isExpandable: function(range) {\n        var node = range.startContainer;\n        var rangeDocument = RangeUtils.documentFromRange(range);\n\n        if (node == rangeDocument || node == rangeDocument.body) {\n            return false;\n        }\n\n        var result = range.cloneRange();\n\n        var value = node.nodeValue;\n        if (!value) {\n            return false;\n        }\n\n        var beforeCaret = value.substring(0, result.startOffset);\n        var afterCaret = value.substring(result.startOffset);\n\n        var startOffset = 0, endOffset = 0;\n\n        if (beforeCaret) {\n            startOffset = beforeCaret.split('').reverse().join('').search(boundary);\n        }\n\n        if (afterCaret) {\n            endOffset = afterCaret.search(boundary);\n        }\n\n        return startOffset && endOffset;\n    }\n};\n\nextend(Editor, {\n    SelectionUtils: SelectionUtils,\n    W3CRange: W3CRange,\n    RangeIterator: RangeIterator,\n    W3CSelection: W3CSelection,\n    RangeEnumerator: RangeEnumerator,\n    RestorePoint: RestorePoint,\n    Marker: Marker,\n    RangeUtils: RangeUtils\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        Editor = kendo.ui.editor,\n        dom = Editor.Dom,\n        template = kendo.template,\n        RangeUtils = Editor.RangeUtils,\n        complexBlocks = [\"ul\", \"ol\", \"tbody\", \"thead\", \"table\"],\n        toolsToBeUpdated = [\n            \"bold\",\n            \"italic\",\n            \"underline\",\n            \"strikethrough\",\n            \"superscript\",\n            \"subscript\",\n            \"forecolor\",\n            \"backcolor\",\n            \"fontname\",\n            \"fontsize\",\n            \"createlink\",\n            \"unlink\",\n            \"autolink\",\n            \"addcolumnleft\",\n            \"addcolumnright\",\n            \"addrowabove\",\n            \"addrowbelow\",\n            \"deleterow\",\n            \"deletecolumn\",\n            \"mergecells\",\n            \"formatting\",\n            \"cleanformatting\" ],\n        IMMUTABALE = \"k-immutable\",\n        IMMUTABALE_MARKER_SELECTOR = \"[\" + IMMUTABALE + \"]\",\n        IMMUTABLE_SELECTOR = \"[contenteditable='false']\";\n\n    var rootCondition = function(node) {\n        return $(node).is(\"body,.k-editor\");\n    };\n\n    var immutable = function(node) {\n        return node.getAttribute && node.getAttribute(\"contenteditable\") == \"false\";\n    };\n\n    var immutableParent = function(node) {\n        return dom.closestBy(node, immutable, rootCondition);\n    };\n\n    var expandImmutablesIn = function(range) {\n        var startImmutableParent = immutableParent(range.startContainer);\n        var endImmutableParent = immutableParent(range.endContainer);\n\n        if (startImmutableParent || endImmutableParent) {\n            if (startImmutableParent) {\n                range.setStartBefore(startImmutableParent);\n            }\n            if (endImmutableParent) {\n                range.setEndAfter(endImmutableParent);\n            }\n        }\n    };\n\n    var immutablesContext = function(range) {\n        if (immutableParent(range.commonAncestorContainer)) {\n            return true;\n        } else if (immutableParent(range.startContainer) || immutableParent(range.endContainer)) {\n            var editableNodes = RangeUtils.editableTextNodes(range);\n            if (editableNodes.length === 0) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    var randomId = function(length) {\n        var result = '';\n        var chars = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n        for (var i = length || 10; i > 0; --i) {\n            result += chars.charAt(Math.round(Math.random() * (chars.length - 1)));\n        }\n        return result;\n    };\n\n    var removeImmutables = function(root) {\n        var serializedImmutables = { empty: true }, nodeName, id, serialized;\n         $(root).find(IMMUTABLE_SELECTOR).each(function(i, node) {\n            nodeName = dom.name(node);\n            id = randomId();\n            serialized = \"<\" + nodeName + \" \" + IMMUTABALE + \"='\" + id + \"'></\" + nodeName + \">\";\n            serializedImmutables[id] = { node: node, style: $(node).attr(\"style\") };\n            serializedImmutables.empty = false;\n            $(node).replaceWith(serialized);\n        });\n\n        return serializedImmutables;\n    };\n\n    var restoreImmutables = function(root, serializedImmutables) {\n        var id, immutable;\n        $(root).find(IMMUTABALE_MARKER_SELECTOR).each(function(i, node) {\n            id = node.getAttribute(IMMUTABALE);\n            immutable = serializedImmutables[id];\n            $(node).replaceWith(immutable.node);\n            if (immutable.style != $(immutable.node).attr(\"style\")) {\n                $(immutable.node).removeAttr(\"style\").attr(\"style\", immutable.style);\n            }\n        });\n    };\n\n    var deletingKey = function(keyCode) {\n        var keys = kendo.keys;\n        return keyCode === keys.BACKSPACE || keyCode == keys.DELETE;\n    };\n    var updateToolOptions = function(tool) {\n        var options = tool ? tool.options : undefined$1;\n        if (options && options.finder) {\n            options.finder._initOptions({ immutables: true });\n        }\n    };\n\n    var Immutables = Class.extend({\n        init: function(editor) {\n            this.editor = editor;\n            this.serializedImmutables = {};\n            this.options = $.extend({}, editor && editor.options && editor.options.immutables);\n\n            var tools = kendo.ui.Editor.defaultTools;\n            updateToolOptions(tools.justifyLeft);\n            updateToolOptions(tools.justifyCenter);\n            updateToolOptions(tools.justifyRight);\n            updateToolOptions(tools.justifyFull);\n        },\n\n        serialize: function(node) {\n            var result = this._toHtml(node),\n                id;\n\n            if (result.indexOf(IMMUTABALE) === -1) {\n                id = this.randomId();\n                result = result.replace(/>/, ' ' + IMMUTABALE + '=\"' + id + '\">');\n            } else {\n                id = result.match(/k-immutable\\s*=\\s*['\"](.*)['\"]/)[1];\n            }\n\n            this.serializedImmutables[id] = node;\n            return result;\n        },\n\n        _toHtml: function(node) {\n            var serialization = this.options.serialization;\n            var serializationType = typeof serialization;\n            var nodeName;\n\n            switch (serializationType) {\n                case \"string\":\n                    return template(serialization)(node);\n                case \"function\":\n                    return serialization(node);\n                default:\n                    nodeName = dom.name(node);\n                    return \"<\" + nodeName + \"></\" + nodeName + \">\";\n            }\n        },\n\n        deserialize: function(node) {\n            var that = this;\n            var deserialization = this.options.deserialization;\n\n            $(IMMUTABALE_MARKER_SELECTOR, node).each(function() {\n                var id = this.getAttribute(IMMUTABALE);\n                var immutable = that.serializedImmutables[id];\n                if (kendo.isFunction(deserialization)) {\n                    deserialization(this, immutable);\n                }\n                $(this).replaceWith(immutable);\n            });\n\n            that.serializedImmutables = {};\n        },\n\n        randomId: function(length) {\n            return randomId(length);\n        },\n\n        keydown: function(e, range) {\n            var isDeleting = deletingKey(e.keyCode);\n            var shouldCancelEvent = (isDeleting && this._cancelDeleting(e, range)) ||\n                (!isDeleting && this._cancelTyping(e, range));\n\n            if (shouldCancelEvent) {\n                e.preventDefault();\n                return true;\n            }\n        },\n\n        _cancelTyping: function(e, range) {\n            var editor = this.editor;\n            var keyboard = editor.keyboard;\n\n            return range.collapsed && !keyboard.typingInProgress &&\n                keyboard.isTypingKey(e) && immutablesContext(range);\n        },\n\n        _cancelDeleting: function(e, range) {\n            var keys = kendo.keys;\n            var backspace = e.keyCode === keys.BACKSPACE;\n            var del = e.keyCode == keys.DELETE;\n\n            if (!backspace && !del) {\n                return false;\n            }\n            var cancelDeleting = false;\n            if (range.collapsed) {\n                if (immutablesContext(range)) {\n                    return true;\n                }\n                var immutable = this.nextImmutable(range, del);\n                if (immutable && backspace) {\n                    var closestSelectionLi = dom.closest(range.commonAncestorContainer, \"li\");\n                    if (closestSelectionLi) {\n                        var closestImmutableLi = dom.closest(immutable, \"li\");\n                        if (closestImmutableLi && closestImmutableLi !== closestSelectionLi) {\n                            return cancelDeleting;\n                        }\n                    }\n                }\n                if (immutable && !dom.tableCell(immutable)) {\n                    if (dom.parentOfType(immutable, complexBlocks) === dom.parentOfType(range.commonAncestorContainer, complexBlocks)) {\n                        while (immutable && immutable.parentNode.childNodes.length == 1) {\n                            immutable = immutable.parentNode;\n                        }\n                        if (dom.tableCell(immutable)) {\n                            return cancelDeleting;\n                        }\n                        this._removeImmutable(immutable, range);\n                    }\n                    cancelDeleting = true;\n                }\n            }\n            return cancelDeleting;\n        },\n\n        nextImmutable: function(range, forwards) {\n            var commonContainer = range.commonAncestorContainer;\n            if (dom.isBom(commonContainer) || ((forwards && RangeUtils.isEndOf(range, commonContainer)) || (!forwards && RangeUtils.isStartOf(range, commonContainer)))) {\n                var next = this._nextNode(commonContainer, forwards);\n                if (next && dom.isBlock(next) && !immutableParent(next)) {\n                    while (next && next.children && next.children[forwards ? 0 : next.children.length - 1]) {\n                        next = next.children[forwards ? 0 : next.children.length - 1];\n                    }\n                }\n                return immutableParent(next);\n            }\n        },\n\n        _removeImmutable: function(immutable, range) {\n            var editor = this.editor;\n            var startRestorePoint = new Editor.RestorePoint(range, editor.body);\n            dom.remove(immutable);\n            Editor._finishUpdate(editor, startRestorePoint);\n        },\n\n        _nextNode: function(node, forwards) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\";\n            var current = node, next;\n            while (current && !next && !dom.isChildOfBaseContainer(current)) {\n                next = current[sibling];\n                if (next && dom.isDataNode(next) && /^\\s|[\\ufeff]$/.test(next.nodeValue)) {\n                    current = next;\n                    next = current[sibling];\n                }\n                if (!next) {\n                    current = current.parentNode;\n                }\n            }\n            return next;\n        }\n    });\n\n    Immutables.immutable = immutable;\n    Immutables.immutableParent = immutableParent;\n    Immutables.expandImmutablesIn = expandImmutablesIn;\n    Immutables.immutablesContext = immutablesContext;\n    Immutables.toolsToBeUpdated = toolsToBeUpdated;\n    Immutables.removeImmutables = removeImmutables;\n    Immutables.restoreImmutables = restoreImmutables;\n\n    Editor.Immutables = Immutables;\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        extend = $.extend;\n\nfunction finishUpdate(editor, startRestorePoint) {\n    var endRestorePoint = editor.selectionRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n    var command = new GenericCommand(startRestorePoint, endRestorePoint);\n    command.editor = editor;\n\n    editor.undoRedoStack.push(command);\n    editor._refreshTools();\n\n    return endRestorePoint;\n}\n\nvar Command = Class.extend({\n    init: function(options) {\n        this.options = options;\n        this.restorePoint = new RestorePoint(options.range, options.body, { immutables: options.immutables });\n        this.marker = new Marker();\n        this.formatter = options.formatter;\n    },\n\n    getRange: function() {\n        return this.restorePoint.toRange();\n    },\n\n    lockRange: function(expand) {\n        return this.marker.add(this.getRange(), expand);\n    },\n\n    releaseRange: function(range) {\n        this.marker.remove(range);\n        this.editor.selectRange(range);\n    },\n\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n        this.editor.selectRange(point.toRange());\n    },\n\n    redo: function() {\n        this.exec();\n    },\n\n    createDialog: function(content, options) {\n        var editor = this.editor;\n\n        return $(content).appendTo(document.body)\n            .kendoWindow(extend({}, editor.options.dialogOptions, options))\n            .closest(\".k-window\")\n            .addClass(\"k-editor-window\")\n            .toggleClass(\"k-rtl\", kendo.support.isRtl(editor.wrapper)).end();\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.formatter.editor = this.editor;\n        this.formatter.toggle(range);\n        this.releaseRange(range);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    expandImmutablesIn: function(range) {\n        if (this.immutables()) {\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            this.restorePoint = new RestorePoint(range, this.editor.body);\n        }\n    },\n\n    _actionButtonsTemplate: function({ messages, insertButtonIcon, cancelButtonIcon }) {\n        return '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n        kendo.html.renderButton(`<button class=\"k-dialog-insert\">${messages.dialogInsert}</button>`, { themeColor: \"primary\", icon: insertButtonIcon }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${messages.dialogCancel}</button>`, { icon: cancelButtonIcon }) +\n    '</div>';\n    }\n});\n\nvar GenericCommand = Class.extend({\n    init: function(startRestorePoint, endRestorePoint) {\n        this.body = startRestorePoint.body;\n        this.startRestorePoint = startRestorePoint;\n        this.endRestorePoint = endRestorePoint;\n    },\n\n    redo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.endRestorePoint.html;\n        this.editor.selectRange(this.endRestorePoint.toRange());\n    },\n\n    undo: function() {\n        dom.removeChildren(this.body);\n\n        this.body.innerHTML = this.startRestorePoint.html;\n        this.editor.selectRange(this.startRestorePoint.toRange());\n    }\n});\n\nextend(editorNS, {\n    _finishUpdate: finishUpdate,\n    Command: Command,\n    GenericCommand: GenericCommand\n});\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    dom = Editor.Dom;\n\nvar ViewHtmlCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.async = true;\n    },\n\n    exec: function() {\n        var that = this,\n            editor = that.editor,\n            options = editor.options,\n            messages = editor.options.messages,\n            dialog = $(kendo.template(ViewHtmlCommand.template)(messages)).appendTo(document.body),\n            textarea = \".k-editor-textarea > textarea\",\n            content, comments;\n\n        options.serialization.immutables = editor.immutables;\n\n        comments = dom.getAllComments(editor.body);\n\n        content = EditorUtils.cacheComments(editor.value(), comments);\n        content = ViewHtmlCommand.indent(content);\n        content = EditorUtils.retrieveComments(content, comments);\n\n        options.serialization.immutables = undefined$1;\n\n        function apply(e) {\n            options.deserialization.immutables = editor.immutables;\n            editor.value(dialog.find(textarea).val());\n            options.deserialization.immutables = undefined$1;\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            editor.trigger(\"change\");\n        }\n\n        function close(e) {\n            e.preventDefault();\n\n            dialog.data(\"kendoWindow\").destroy();\n\n            if (editor.immutables) {\n                editor.immutables.serializedImmutables = {};\n            }\n\n            editor.focus();\n        }\n\n        let window = this.createDialog(dialog, {\n            title: messages.viewHtml,\n            _footerTemplate: ViewHtmlCommand._footerTemplate,\n            _footerMessages: messages,\n            width: 600,\n            height: 400,\n            resizable: true,\n            close: close,\n            visible: false\n        })\n            .find(textarea).val(content).end()\n            .data(\"kendoWindow\");\n\n            window.center().open();\n\n            window.wrapper.find(\".k-dialog-update\").on(\"click\", apply).end();\n            window.wrapper.find(\".k-dialog-close\").on(\"click\", close).end();\n        dialog.find(textarea).trigger(\"focus\");\n    }\n});\n\nextend(ViewHtmlCommand, {\n    template: () =>\n    '<div class=\"k-editor-dialog k-popup-edit-form k-viewhtml-dialog\">' +\n        '<span class=\"k-input k-textarea k-input-solid k-input-md k-rounded-md k-editor-textarea\"><textarea class=\"k-input-inner !k-overflow-auto !k-resize-none\"></textarea></span>' +\n    '</div>',\n    _footerTemplate: ({ dialogUpdate, dialogCancel }) =>\n    `<div class=\"k-actions k-actions-start k-actions-horizontal k-window-actions\">` +\n        kendo.html.renderButton(`<button class=\"k-dialog-update\">${kendo.htmlEncode(dialogUpdate)}</button>`, { themeColor: \"primary\", icon: \"check\" }) +\n        kendo.html.renderButton(`<button class=\"k-dialog-close\">${kendo.htmlEncode(dialogCancel)}</button>`, { icon: \"cancel-outline\" }) +\n    `</div>`,\n    indent: function(content) {\n        return content.replace(/<\\/(p|li|ul|ol|h[1-6]|table|tr|td|th)>/ig, \"</$1>\\n\")\n                      .replace(/<(ul|ol)([^>]*)><li/ig, \"<$1$2>\\n<li\")\n                      .replace(/<br \\/>/ig, \"<br />\\n\")\n                      .replace(/\\n$/, \"\");\n    }\n});\n\nkendo.ui.editor.ViewHtmlCommand = ViewHtmlCommand;\n\nEditor.EditorUtils.registerTool(\"viewHtml\", new Tool({ command: ViewHtmlCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils;\n\nvar FormatCommand = Command.extend({\n    init: function(options) {\n        options.formatter = options.formatter();\n        var finder = options.formatter.finder;\n        if (finder && EditorUtils.formatByName(\"immutable\", finder.format)) {\n            finder._initOptions({ immutables: options.immutables });\n        }\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar FormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        var that = this;\n\n        return new FormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = this.options.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar && ui.getKendoToggleButton()) {\n            toolbar.toggle(ui, isFormatted);\n        }\n    }\n});\n\n$.extend(Editor, {\n    FormatCommand: FormatCommand,\n    FormatTool: FormatTool\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    Tool = Editor.Tool,\n    FormatTool = Editor.FormatTool,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    extend = $.extend,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    MOUSEDOWN_NS = \"mousedown.kendoEditor\",\n    KEYDOWN_NS = \"keydown.kendoEditor\",\n    KMARKER = \"k-marker\";\n\nvar InlineFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    numberOfSiblings: function(referenceNode) {\n        var textNodesCount = 0,\n            elementNodesCount = 0,\n            markerCount = 0,\n            parentNode = referenceNode.parentNode,\n            node;\n\n        for (node = parentNode.firstChild; node; node = node.nextSibling) {\n            if (node != referenceNode) {\n                if (node.className == KMARKER) {\n                    markerCount++;\n                } else if (node.nodeType == 3) {\n                    textNodesCount++;\n                } else {\n                    elementNodesCount++;\n                }\n            }\n        }\n\n        if (markerCount > 1 && parentNode.firstChild.className == KMARKER && parentNode.lastChild.className == KMARKER) {\n            // full node selection\n            return 0;\n        } else {\n            return elementNodesCount + textNodesCount;\n        }\n    },\n\n    findSuitable: function(sourceNode, skip) {\n        if (!skip && this.numberOfSiblings(sourceNode) > 0) {\n            return null;\n        }\n\n        var node = sourceNode.parentNode;\n        var tags = this.format[0].tags;\n\n        while (!dom.ofType(node, tags)) {\n            if (this.numberOfSiblings(node) > 0) {\n                return null;\n            }\n\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n\n    findFormat: function(sourceNode) {\n        var format = this.format,\n            attrEquals = dom.attrEquals,\n            i, len, node, tags, attributes;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (node && dom.ofType(node, tags) && attrEquals(node, attributes)) {\n                return node;\n            }\n\n            while (node) {\n                node = dom.parentOfType(node, tags);\n                if (node && attrEquals(node, attributes)) {\n                    return node;\n                }\n            }\n        }\n\n        return null;\n    },\n\n    isFormatted: function(nodes) {\n        var i, len;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            if (this.findFormat(nodes[i])) {\n                return true;\n            }\n        }\n        return false;\n    }\n});\n\nvar InlineFormatter = Class.extend({\n    init: function(format, values) {\n        this.finder = new InlineFormatFinder(format);\n        this.attributes = extend({}, format[0].attr, values);\n        this.tag = format[0].tags[0];\n    },\n\n    wrap: function(node) {\n        return dom.wrap(node, dom.create(node.ownerDocument, this.tag, this.attributes));\n    },\n\n    activate: function(range, nodes) {\n        if (this.finder.isFormatted(nodes)) {\n            this.split(range);\n            this.remove(nodes);\n        } else {\n            this.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var textNodes = this.immutables() ? RangeUtils.editableTextNodes : RangeUtils.textNodes;\n        var nodes = textNodes(range);\n\n        if (nodes.length > 0) {\n            this.activate(range, nodes);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    apply: function(nodes) {\n        var formatNodes = [];\n        var i, l, node, formatNode;\n\n        if (nodes.length > 1) {\n            for (i = 0, l = nodes.length; i < l; i++) {\n                node = nodes[i];\n                formatNode = this.format(node, true);\n                formatNodes.push(formatNode);\n\n            }\n        } else {\n            node = nodes[0];\n            formatNode = this.format(node, false);\n        }\n\n        this.consolidate(formatNodes);\n    },\n\n    format: function(node, outerMostInline) {\n        var formatNode = this.finder.findSuitable(node);\n        var attributes = this.attributes;\n        var styleAttr = attributes ? attributes.style || {} : {};\n\n        if (formatNode) {\n            if (dom.is(formatNode, \"font\")) {\n                if (styleAttr.color) {\n                    formatNode.removeAttribute(\"color\");\n                }\n                if (styleAttr.fontName) {\n                    formatNode.removeAttribute(\"face\");\n                }\n                if (styleAttr.fontSize) {\n                    formatNode.removeAttribute(\"size\");\n                }\n            }\n            dom.attr(formatNode, attributes);\n        } else {\n            while (!dom.isBlock(node.parentNode) && node.parentNode.childNodes.length == 1 && node.parentNode.contentEditable !== 'true' && outerMostInline) {\n                node = node.parentNode;\n            }\n\n            formatNode = this.wrap(node);\n        }\n\n        return formatNode;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode;\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                if (this.attributes && this.attributes.style) {\n                    dom.unstyle(formatNode, this.attributes.style);\n                    if (!formatNode.style.cssText && !formatNode.attributes[\"class\"]) {\n                        dom.unwrap(formatNode);\n                    }\n                } else {\n                    dom.unwrap(formatNode);\n                }\n            }\n        }\n    },\n\n    split: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        var l = nodes.length;\n        var i, formatNode;\n\n        if (l > 0) {\n            for (i = 0; i < l; i++) {\n                formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    RangeUtils.split(range, formatNode, true);\n                }\n            }\n        }\n    },\n\n    consolidate: function(nodes) {\n        var node, last;\n\n        while (nodes.length > 1) {\n            node = nodes.pop();\n            last = nodes[nodes.length - 1];\n\n            if (node.previousSibling && node.previousSibling.className == KMARKER) {\n                last.appendChild(node.previousSibling);\n            }\n\n            if (node.tagName == last.tagName &&\n                node.previousSibling == last &&\n                node.style.cssText == last.style.cssText &&\n                node.className === last.className) {\n\n                while (node.firstChild) {\n                    last.appendChild(node.firstChild);\n                }\n\n                dom.remove(node);\n            }\n        }\n    }\n});\n\nvar GreedyInlineFormatFinder = InlineFormatFinder.extend({\n    init: function(format, greedyProperty, fontAttr, defaultValue) {\n        this.format = format;\n        this.greedyProperty = greedyProperty;\n        this.fontAttr = fontAttr;\n        this.defaultValue = defaultValue;\n        InlineFormatFinder.fn.init.call(this, format);\n    },\n\n    getInlineCssValue: function(node) {\n        var attributes = node.attributes;\n        var trim = kendo.trim;\n        var i, l, attribute, name, attributeValue, css, pair, cssIndex, len;\n        var propertyAndValue, property, value;\n\n        if (!attributes) {\n            return;\n        }\n\n        for (i = 0, l = attributes.length; i < l; i++) {\n            attribute = attributes[i];\n            name = attribute.nodeName;\n            attributeValue = attribute.nodeValue;\n\n            if (attribute.specified && name == \"style\") {\n\n                css = trim(attributeValue || node.style.cssText).split(\";\");\n\n                for (cssIndex = 0, len = css.length; cssIndex < len; cssIndex++) {\n                    pair = css[cssIndex];\n                    if (pair.length) {\n                        propertyAndValue = pair.split(\":\");\n                        property = trim(propertyAndValue[0].toLowerCase());\n                        value = trim(propertyAndValue[1]);\n\n                        if (property != this.greedyProperty) {\n                            continue;\n                        }\n\n                        return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n                    }\n                }\n            }\n\n            if (this.fontAttr && attribute.specified && name == this.fontAttr) {\n                property = attribute.nodeValue;\n                value = attribute.nodeValue;\n\n                return property.indexOf(\"color\") >= 0 ? dom.toHex(value) : value;\n            }\n        }\n    },\n\n    getFormatInner: function(node) {\n        var $node = $(dom.isDataNode(node) ? node.parentNode : node);\n        var parents = $node.parentsUntil(\"[contentEditable]\").addBack().toArray().reverse();\n        var i, len, value;\n\n        for (i = 0, len = parents.length; i < len; i++) {\n            value = this.greedyProperty == \"className\" ? parents[i].className : this.getInlineCssValue(parents[i]);\n\n            if (value) {\n                return value;\n            }\n        }\n\n        return this.defaultValue || \"inherit\";\n    },\n\n    getFormat: function(nodes) {\n        var result = this.getFormatInner(nodes[0]), i, len;\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != this.getFormatInner(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result;\n    },\n\n    isFormatted: function(nodes) {\n        return this.getFormat(nodes) !== \"\";\n    }\n});\n\nvar GreedyInlineFormatter = InlineFormatter.extend({\n    init: function(format, values, greedyProperty) {\n        InlineFormatter.fn.init.call(this, format, values);\n\n        this.values = values;\n        this.finder = new GreedyInlineFormatFinder(format, greedyProperty);\n\n        if (greedyProperty) {\n            this.greedyProperty = kendo.toCamelCase(greedyProperty);\n        }\n\n    },\n\n    activate: function(range, nodes) {\n        var greedyProperty = this.greedyProperty;\n        var action = \"apply\";\n\n        this.split(range);\n\n        if (greedyProperty && this.values.style[greedyProperty] == \"inherit\") {\n            action = \"remove\";\n        }\n\n        this[action](nodes);\n    }\n});\n\nvar InlineFormatTool = FormatTool.extend({\n    init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new InlineFormatFinder(options.format),\n            formatter: function() { return new InlineFormatter(options.format); }\n        }));\n    }\n});\n\nvar DelayedExecutionTool = Tool.extend({\n    update: function(ui, nodes) {\n        var list = ui.data(this.type);\n\n        list.close();\n        list.value(this.finder.getFormat(nodes));\n    }\n});\n\nvar FontTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        // IE has single selection hence we are using select box instead of combobox\n        this.type = \"kendoComboBox\";\n        this.format = [{ tags: [\"span\", \"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr);\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options,\n            toolName = options.name,\n            dataSource,\n            range,\n            widget = ui.data(\"kendoComboBox\"),\n            defaultValue = [];\n\n        if (!widget) {\n            return;\n        }\n\n        if (options.defaultValue) {\n           defaultValue = [{\n                text: editor.options.messages[options.defaultValue[0].text],\n                value: options.defaultValue[0].value\n           }];\n        }\n\n        dataSource = defaultValue.concat(options.items ? options.items : (editor.options[toolName] || [] ));\n        widget.setDataSource(dataSource);\n\n        widget.bind(\"change\", (e) => {\n            editor._range = range;\n            if (e.sender.value() !== \"\") {\n                Tool.exec(editor, toolName, e.sender.value());\n            }\n        });\n\n        widget.bind(\"close\", () => {\n            setTimeout(function() {\n                editor._deleteSavedRange();\n            },0);\n        });\n\n        widget.value(\"inherit\");\n\n        widget.wrapper.on(MOUSEDOWN_NS, \".k-select,.k-input-button,.k-input\", function() {\n            var newRange = editor.getRange();\n            range = editor._containsRange(newRange) ? newRange : range;\n        })\n        .on(KEYDOWN_NS, function(e) {\n            if (e.keyCode === kendo.keys.ENTER) {\n                editor._deleteSavedRange();\n                e.preventDefault();\n            }\n        });\n    }\n\n});\n\nvar ColorTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.format = [{ tags: [\"span\",\"font\"] }];\n        this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr);\n    },\n\n    options: {\n        palette: \"websafe\",\n        columns: 18\n    },\n\n    update: function() {\n        this._widget.close();\n    },\n\n    command: function(commandArguments) {\n        var options = this.options,\n            format = this.format,\n            style = {};\n\n        return new Editor.FormatCommand(extend(commandArguments, {\n            formatter: function() {\n                style[options.domAttr] = commandArguments.value;\n\n                return new GreedyInlineFormatter(format, { style: style }, options.cssAttr);\n            }\n        }));\n    },\n\n    initialize: function(ui, editor) {\n        var that = this,\n            toolName = that.options.name,\n            component = this._widget = ui.getKendoColorPicker();\n\n        if (!component) {\n            return;\n        }\n\n        component.bind(\"change\", () => {\n            var color = component.value();\n\n            if (color) {\n                Tool.exec(editor, toolName, color);\n            }\n\n            delete that.storedRange;\n            delete that._inputFocused;\n\n            editor.focus();\n        });\n\n        component.bind(\"open\", () => {\n            that.storedRange = editor.getRange();\n\n            component._popup.element.on(MOUSEDOWN_NS, function(e) {\n                if (!$(e.target).is(\"input.k-color-value\")) {\n                    e.preventDefault();\n                }\n            });\n\n            if (!component._popup.element.is(\"[unselectable='on']\")) {\n                component._popup.element\n                    .attr({ unselectable: \"on\" })\n                    .find(\"*:not(input)\").attr(\"unselectable\", \"on\")\n                    .end().find(\"input\").on(\"focus\", function() {\n                        that._inputFocused = true;\n                    });\n            }\n\n            component._popup.one(\"activate\", () => {\n                component._popup.element.find(\".k-colorpalette\").trigger(\"focus\");\n            });\n        });\n\n        component.bind(\"close\", (e) => {\n            component._popup.element.off(MOUSEDOWN_NS);\n        });\n\n        component.unbind(\"activate\").bind(\"activate\", (e) => {\n            if (!component._value || component._value.toCssRgba() === \"rgba(255, 255, 255, 0)\") {\n                return;\n            }\n\n            component.trigger(\"change\");\n        });\n\n        component.wrapper\n            .attr({ unselectable: \"on\" })\n            .find(\"*:not(input)\").attr(\"unselectable\", \"on\");\n\n        component.value(\"transparent\");\n    }\n});\n\nextend(Editor, {\n    InlineFormatFinder: InlineFormatFinder,\n    InlineFormatter: InlineFormatter,\n    DelayedExecutionTool: DelayedExecutionTool,\n    GreedyInlineFormatFinder: GreedyInlineFormatFinder,\n    GreedyInlineFormatter: GreedyInlineFormatter,\n    InlineFormatTool: InlineFormatTool,\n    FontTool: FontTool,\n    ColorTool: ColorTool\n});\n\nregisterFormat(\"bold\", [ { tags: [\"strong\", \"b\"] }, { tags: [\"span\"], attr: { style: { fontWeight: \"bold\" } } } ]);\nregisterTool(\"bold\", new InlineFormatTool({\n    key: \"B\",\n    ctrl: true,\n    format: formats.bold,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"italic\", [ { tags: [\"em\", \"i\"] }, { tags: [\"span\"], attr: { style: { fontStyle: \"italic\" } } } ]);\nregisterTool(\"italic\", new InlineFormatTool({\n    key: \"I\",\n    ctrl: true,\n    format: formats.italic,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"underline\", [ { tags: [\"span\"], attr: { style: { textDecoration: \"underline\" } } }, { tags: [\"u\"] } ]);\nregisterTool(\"underline\", new InlineFormatTool({\n    key: \"U\",\n    ctrl: true,\n    format: formats.underline,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"strikethrough\", [ { tags: [\"del\", \"strike\"] }, { tags: [\"span\"], attr: { style: { textDecoration: \"line-through\" } } } ]);\nregisterTool(\"strikethrough\", new InlineFormatTool({\n    format: formats.strikethrough,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"superscript\", [ { tags: [\"sup\"] } ]);\nregisterTool(\"superscript\", new InlineFormatTool({\n    format: formats.superscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterFormat(\"subscript\", [ { tags: [\"sub\"] } ]);\nregisterTool(\"subscript\", new InlineFormatTool({\n    format: formats.subscript,\n    ui: {\n        togglable: true\n    }\n}));\n\nregisterTool(\"foreColor\", new ColorTool({\n    cssAttr: \"color\",\n    fontAttr: \"color\",\n    domAttr: \"color\",\n    name: \"foreColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"foreground-color\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"backColor\", new ColorTool({\n    cssAttr: \"background-color\",\n    domAttr: \"backgroundColor\",\n    name: \"backColor\",\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"ColorPicker\",\n        componentOptions: {\n            views: [\"palette\"],\n            toolIcon: \"droplet\",\n            palette: \"websafe\",\n            columns: 18,\n            preview: false,\n            input: false,\n            buttons: false,\n            commandOn: \"change\",\n            closeOnSelect: true\n        }\n    }\n}));\n\nregisterTool(\"fontName\", new FontTool({\n    cssAttr: \"font-family\",\n    fontAttr: \"face\",\n    domAttr: \"fontFamily\",\n    name: \"fontName\",\n    defaultValue: [{ text: \"fontNameInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"fontSize\", new FontTool({\n    cssAttr: \"font-size\",\n    fontAttr: \"size\",\n    domAttr: \"fontSize\",\n    name: \"fontSize\",\n    defaultValue: [{ text: \"fontSizeInherit\", value: \"inherit\" }],\n    ui: {\n        type: \"component\",\n        component: \"ComboBox\",\n        componentOptions: {\n            dataValueField: \"value\",\n            dataTextField: \"text\",\n            valuePrimitive: true\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    InlineFormatter = Editor.InlineFormatter,\n    InlineFormatFinder = Editor.InlineFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    editableTextNodes = RangeUtils.editableTextNodes,\n    registerTool = Editor.EditorUtils.registerTool,\n    keys = kendo.keys;\n\nvar HTTP_PROTOCOL = \"http://\";\nvar protocolRegExp = /^\\w*:\\/\\//;\nvar endLinkCharsRegExp = /[\\w\\/\\$\\-_\\*\\?]/i;\n\nvar LinkFormatFinder = Class.extend({\n    findSuitable: function(sourceNode) {\n        return dom.parentOfType(sourceNode, [\"a\"]);\n    }\n});\n\nvar LinkFormatter = Class.extend({\n    init: function() {\n        this.finder = new LinkFormatFinder();\n    },\n\n    apply: function(range, attributes) {\n        var nodes = this.immutables ? editableTextNodes(range) : textNodes(range);\n        var markers, doc, formatter, a, parent;\n\n        if (attributes.innerText) {\n            doc = RangeUtils.documentFromRange(range);\n            markers = RangeUtils.getMarkers(range);\n\n            range.deleteContents();\n            a = dom.create(doc, \"a\", attributes);\n            range.insertNode(a);\n\n            parent = a.parentNode;\n            if (dom.name(parent) == \"a\") {\n                dom.insertAfter(a, parent);\n            }\n\n            if (dom.emptyNode(parent)) {\n                dom.remove(parent);\n            }\n\n            // move range and markers after inserted link\n            var ref = a;\n            for (var i = 0; i < markers.length; i++) {\n                dom.insertAfter(markers[i], ref);\n                ref = markers[i];\n            }\n\n            if (markers.length) {\n                dom.insertBefore(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                dom.insertAfter(doc.createTextNode(\"\\ufeff\"), markers[1] || markers[0]);\n                range.setStartBefore(markers[0]);\n                range.setEndAfter(markers[markers.length - 1]);\n            }\n        } else {\n            formatter = new InlineFormatter([{ tags: [\"a\"] }], attributes);\n            formatter.finder = this.finder;\n            formatter.apply(nodes);\n        }\n    }\n});\n\nvar UnlinkCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: function(range) {\n                var nodes = that.immutables() ? editableTextNodes(range) : textNodes(range);\n                new InlineFormatter([{ tags: [\"a\"] }]).remove(nodes);\n            }\n        };\n        this.options = options;\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar LinkCommand = Command.extend({\n    init: function(options) {\n        var that;\n        this.options = options;\n        Command.fn.init.call(this, options);\n        this.formatter = new LinkFormatter();\n\n        if (!options.url) {\n            this.attributes = null;\n            this.async = true;\n        } else {\n            this.exec = function() {\n                this.formatter.immutables = that && that.immutables();\n                this.formatter.apply(options.range, {\n                    href: options.url,\n                    innerText: options.text || options.url,\n                    target: options.target\n                });\n            };\n        }\n    },\n\n    exec: function() {\n        var messages = this.editor.options.messages;\n        this._initialText = \"\";\n        this._range = this.lockRange(true);\n        this.formatter.immutables = this.immutables();\n\n        var nodes = textNodes(this._range);\n        var a = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null;\n        var img = nodes.length && dom.name(nodes[0]) == \"img\";\n\n        var dialog = this.createDialog(\"<div/>\", {\n            title: messages.createLink,\n            minWidth: 340,\n            close: this._close.bind(this),\n            visible: false\n        }).data(\"kendoWindow\");\n\n        this._form = this._createForm(dialog);\n\n        if (a) {\n            this._range.selectNodeContents(a);\n            nodes = textNodes(this._range);\n        }\n\n        this._initialText = this.linkText(nodes);\n\n        dialog.wrapper\n            .find(\".k-dialog-insert\").on(\"click\", this._apply.bind(this)).end()\n            .find(\".k-dialog-close\").on(\"click\", this._close.bind(this)).end()\n            .find(\".k-form-field input\").on(\"keydown\", this._keydown.bind(this)).end()\n            .find(\"#k-editor-link-url\").val(this.linkUrl(a)).end()\n            .find(\"#k-editor-link-text\").val(this._initialText).end()\n            .find(\"#k-editor-link-title\").val(a ? a.title : \"\").end()\n            .find(\"#k-editor-link-target\").prop(\"checked\", a ? a.target == \"_blank\" : false).end()\n            .find(\".k-editor-link-text-row\").toggle(!img);\n\n        this._dialog = dialog.center().open();\n\n        $(\"#k-editor-link-url\", dialog.element).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-link-url\",\n                    label: encode(messages.linkWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-text\",\n                    label: encode(messages.linkText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-title\",\n                    label: encode(messages.linkToolTip),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-link-target\",\n                    editorOptions: {\n                        label: encode(messages.linkOpenInNewWindow)\n                    },\n                    label: \"\",\n                    editor: \"CheckBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        formElement.find(\"#k-editor-link-text\").parents(\".k-form-field\").addClass(\"k-editor-link-text-row\");\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"link\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    },\n\n    _keydown: function(e) {\n        var keys = kendo.keys;\n\n        if (e.keyCode == keys.ENTER) {\n            this._apply(e);\n        } else if (e.keyCode == keys.ESC) {\n            this._close(e);\n        }\n    },\n\n    _apply: function(e) {\n        var element = this._dialog.element;\n        var href = $(\"#k-editor-link-url\", element).val();\n        var title, text, target;\n        var textInput = $(\"#k-editor-link-text\", element);\n\n        if (href && href != HTTP_PROTOCOL) {\n\n            if (href.indexOf(\"@\") > 0 && !/^(\\w+:)|(\\/\\/)/i.test(href)) {\n                href = \"mailto:\" + href;\n            }\n\n            this.attributes = { href: href };\n\n            title = $(\"#k-editor-link-title\", element).val();\n            if (title) {\n                this.attributes.title = title;\n            }\n\n            if (textInput.is(\":visible\")) {\n                text = kendo.trim(textInput.val());\n                if (!text && !this._initialText) {\n                    this.attributes.innerText = href;\n                } else if (text && (text !== this._initialText)) {\n                    this.attributes.innerText = dom.stripBom(text);\n                }\n            }\n\n            target = $(\"#k-editor-link-target\", element).is(\":checked\");\n            this.attributes.target = target ? \"_blank\" : null;\n\n            this.formatter.apply(this._range, this.attributes);\n        }\n\n        this._close(e);\n\n        if (this.change) {\n            this.change();\n        }\n    },\n\n    _close: function(e) {\n        e.preventDefault();\n        this._form.destroy();\n        this._dialog.destroy();\n\n        dom.windowFromDocument(RangeUtils.documentFromRange(this._range)).focus();\n\n        this.releaseRange(this._range);\n    },\n\n    linkUrl: function(anchor) {\n        if (anchor) {\n            // IE < 8 returns absolute url if getAttribute is not used\n            return anchor.getAttribute(\"href\", 2);\n        }\n\n        return HTTP_PROTOCOL;\n    },\n\n    linkText: function(nodes) {\n        var text = \"\";\n        var i;\n\n        for (i = 0; i < nodes.length; i++) {\n            text += nodes[i].nodeValue;\n        }\n\n        return dom.stripBom(text || \"\");\n    },\n\n    redo: function() {\n        var range = this.lockRange(true);\n\n        this.formatter.apply(range, this.attributes);\n        this.releaseRange(range);\n    }\n\n});\n\nvar AutoLinkCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.formatter = new LinkFormatter();\n    },\n\n    exec: function() {\n        var detectedLink = this.detectLink();\n        if (!detectedLink) {\n            return;\n        }\n\n        var range = this.getRange();\n        var linkMarker = new kendo.ui.editor.Marker();\n        var linkRange = range.cloneRange();\n\n        linkRange.setStart(detectedLink.start.node, detectedLink.start.offset);\n        linkRange.setEnd(detectedLink.end.node, detectedLink.end.offset);\n\n        range = this.lockRange();\n        linkMarker.add(linkRange);\n\n        this.formatter.apply(linkRange, {\n            href: this._ensureWebProtocol(detectedLink.text)\n        });\n\n        linkMarker.remove(linkRange);\n        this.releaseRange(range);\n    },\n\n    detectLink: function() {\n        var range = this.getRange();\n        var startNode = range.startContainer;\n        var startOffset = range.startOffset;\n        var prev = startNode.previousSibling;\n        if (!prev && ((dom.isBom(startNode) && !startNode.nextSibling) || (!startOffset && dom.isDataNode(startNode)))) {\n            startNode = startNode.parentNode;\n            startOffset = 0;\n        }\n        var traverser = new LeftDomTextTraverser({\n            node: startNode,\n            offset: startOffset,\n            cancelAtNode: function(node) { return node && dom.name(node) === \"a\"; }\n        });\n\n        var detection = new DomTextLinkDetection(traverser);\n        return detection.detectLink();\n    },\n\n    changesContent: function() {\n        return !!this.detectLink();\n    },\n\n    _ensureWebProtocol: function(linkText) {\n        var hasProtocol = this._hasProtocolPrefix(linkText);\n        return hasProtocol ? linkText : this._prefixWithWebProtocol(linkText);\n    },\n\n    _hasProtocolPrefix: function(linkText) {\n        return protocolRegExp.test(linkText);\n    },\n\n    _prefixWithWebProtocol: function(linkText) {\n        return HTTP_PROTOCOL + linkText;\n    }\n});\n\nvar UnlinkTool = Tool.extend({\n    init: function(options) {\n        this.options = options;\n        this.finder = new InlineFormatFinder([{ tags: [\"a\"] }]);\n\n        Tool.fn.init.call(this, $.extend(options, { command: UnlinkCommand }));\n    },\n\n    update: function(ui, nodes) {\n        var isLink = this.finder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\");\n\n        if (isLink) {\n            toolbar.enable(ui, true);\n        } else {\n            toolbar.enable(ui, false);\n        }\n    }\n});\n\nvar DomTextLinkDetection = Class.extend({\n    init: function(traverser) {\n        this.traverser = traverser;\n        this.start = DomPos();\n        this.end = DomPos();\n        this.text = \"\";\n    },\n\n    detectLink: function() {\n        var node = this.traverser.node;\n        var offset = this.traverser.offset;\n        if (dom.isDataNode(node)) {\n            var text = node.data.substring(0, offset);\n            if (/\\s{2}$/.test(dom.stripBom(text))) {\n                return;\n            }\n        } else if (offset === 0) {//heuristic for new line\n            var p = dom.closestEditableOfType(node, dom.blockElements);\n            if (p && p.previousSibling) {\n                this.traverser.init({\n                    node: p.previousSibling\n                });\n            }\n        }\n\n        this.traverser.traverse(this._detectEnd.bind(this));\n        if (!this.end.blank()) {\n            this.traverser = this.traverser.clone(this.end);\n            this.traverser.traverse(this._detectStart.bind(this));\n\n            if (!this._isLinkDetected()) {\n                var puntuationOptions = this.traverser.extendOptions(this.start);\n                var puntuationTraverser = new RightDomTextTraverser(puntuationOptions);\n                puntuationTraverser.traverse(this._skipStartPuntuation.bind(this));\n                if (!this._isLinkDetected()) {\n                    this.start = DomPos();\n                }\n            }\n        }\n\n        if (this.start.blank()) {\n            return null;\n        } else {\n            return {\n                start: this.start,\n                end: this.end,\n                text: this.text\n            };\n        }\n    },\n\n    _isLinkDetected: function() {\n        return protocolRegExp.test(this.text) || /^w{3}\\./i.test(this.text);\n    },\n\n    _detectEnd: function(text, node) {\n        var i = lastIndexOfRegExp(text, endLinkCharsRegExp);\n        if (i > -1) {\n            this.end.node = node;\n            this.end.offset = i + 1;\n\n            return false;\n        }\n    },\n\n    _detectStart: function(text, node) {\n        var i = lastIndexOfRegExp(text, /\\s/);\n        var ii = i + 1;\n        this.text = text.substring(ii) + this.text;\n\n        this.start.node = node;\n        this.start.offset = ii;\n\n        if (i > -1) {\n            return false;\n        }\n    },\n\n    _skipStartPuntuation: function(text, node, offset) {\n        var i = indexOfRegExp(text, /\\w/);\n        var ii = i;\n        if (i === -1) {\n            ii = text.length;\n        }\n\n        this.text = this.text.substring(ii);\n        this.start.node = node;\n        this.start.offset = ii + (offset | 0);\n\n        if (i > -1) {\n            return false;\n        }\n    }\n});\n\nfunction lastIndexOfRegExp(str, search) {\n    var i = str.length;\n    while (i-- && !search.test(str[i])) {}\n\n    return i;\n}\nfunction indexOfRegExp(str, search) {\n    var r = search.exec(str);\n\n    return r ? r.index : -1;\n}\n\nvar DomPos = function() {\n    return {\n        node: null,\n        offset: null,\n        blank: function() {\n            return this.node === null && this.offset === null;\n        }\n    };\n};\n\nvar DomTextTraverser = Class.extend({\n    init: function(options) {\n        this.node = options.node;\n        this.offset = options.offset === undefined$1 ? (dom.isDataNode(this.node) && this.node.length) || 0 : options.offset;\n        this.cancelAtNode = options.cancelAtNode || this.cancelAtNode || $.noop;\n    },\n\n    traverse: function(callback) {\n        if (!callback) {\n            return;\n        }\n        this.cancel = false;\n        this._traverse(callback, this.node, this.offset);\n    },\n\n    _traverse: function(callback, node, offset) {\n        if (!node || this.cancel) {\n            return;\n        }\n        if (node.nodeType === 3) {\n            var text = node.data;\n            if (offset !== undefined$1) {\n                text = this.subText(text, offset);\n            }\n            this.cancel = (callback(text, node, offset) === false);\n        }\n        else {\n            var edgeNode = this.edgeNode(node);\n            this.cancel = this.cancel || this.cancelAtNode(edgeNode);\n            return this._traverse(callback, edgeNode);\n        }\n\n        var next = this.next(node);\n        if (!next) {\n            var parent = node.parentNode;\n            while (!next && dom.isInline(parent)) {\n                next = this.next(parent);\n                parent = parent.parentNode;\n            }\n        }\n        this.cancel = this.cancel || this.cancelAtNode(next);\n        this._traverse(callback, next);\n    },\n\n    extendOptions: function(o) {\n        return $.extend({\n            node: this.node,\n            offset: this.offset,\n            cancelAtNode: this.cancelAtNode\n        }, o || {});\n    },\n\n    edgeNode: function(node) {},\n    next: function(node) {},\n    subText: function(text, offset) {}\n\n});\n\nvar LeftDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(0, splitIndex);\n    },\n\n    next: function(node) {\n        return node.previousSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.lastChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new LeftDomTextTraverser(o);\n    }\n});\n\nvar RightDomTextTraverser = DomTextTraverser.extend({\n    subText: function(text, splitIndex) {\n        return text.substring(splitIndex);\n    },\n\n    next: function(node) {\n        return node.nextSibling;\n    },\n\n    edgeNode: function(node) {\n        return node.firstChild;\n    },\n\n    clone: function(options) {\n        var o = this.extendOptions(options);\n        return new RightDomTextTraverser(o);\n    }\n});\n\nextend(kendo.ui.editor, {\n    LinkFormatFinder: LinkFormatFinder,\n    LinkFormatter: LinkFormatter,\n    UnlinkCommand: UnlinkCommand,\n    LinkCommand: LinkCommand,\n    AutoLinkCommand: AutoLinkCommand,\n    UnlinkTool: UnlinkTool,\n    DomTextLinkDetection: DomTextLinkDetection,\n    LeftDomTextTraverser: LeftDomTextTraverser,\n    RightDomTextTraverser: RightDomTextTraverser\n});\n\nregisterTool(\"createLink\", new Tool({ key: \"K\", ctrl: true, command: LinkCommand }));\nregisterTool(\"unlink\", new UnlinkTool({ key: \"K\", ctrl: true, shift: true, ui: { enable: false } }));\nregisterTool(\"autoLink\", new Tool({ key: [keys.ENTER, keys.SPACEBAR], keyPressCommand: true, command: AutoLinkCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    formats = kendo.ui.Editor.fn.options.formats,\n    dom = Editor.Dom,\n    FormatTool = Editor.FormatTool,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    registerFormat = EditorUtils.registerFormat,\n    RangeUtils = Editor.RangeUtils;\n\nvar BlockFormatFinder = Class.extend({\n    init: function(format) {\n        this.format = format;\n    },\n\n    contains: function(node, children) {\n        var i, len, child;\n\n        for (i = 0, len = children.length; i < len; i++) {\n            child = children[i];\n            if (!child || !dom.isAncestorOrSelf(node, child)) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var format = this.format,\n            suitable = [],\n            i, len, candidate;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            for (var f = format.length - 1; f >= 0; f--) {\n                candidate = dom.ofType(nodes[i], format[f].tags) ? nodes[i] : dom.closestEditableOfType(nodes[i], format[f].tags);\n                if (candidate) {\n                    break;\n                }\n            }\n\n            if (!candidate || candidate.contentEditable === 'true') {\n                return [];\n            }\n\n            if ($.inArray(candidate, suitable) < 0) {\n                suitable.push(candidate);\n            }\n        }\n\n        this._resolveListsItems(suitable);\n\n        for (i = 0, len = suitable.length; i < len; i++) {\n            if (this.contains(suitable[i], suitable)) {\n                return [suitable[i]];\n            }\n        }\n\n        return suitable;\n    },\n    _resolveListsItems: function(nodes) {\n        var i, node, wrapper;\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            wrapper = dom.is(node, \"li\") ? node : dom.wrapper(node);\n            wrapper = wrapper && dom.list(wrapper) ? wrapper.children[0] : wrapper;\n            if (dom.is(wrapper, \"li\")) {\n                node = nodes[i] = wrapper;\n            }\n        }\n    },\n\n    findFormat: function(sourceNode, until) {\n        var format = this.format,\n            i, len, node, tags, attributes;\n        var editableParent = dom.editableParent(sourceNode);\n        var immutables = this.options && this.options.immutables;\n        var ImmutablesNS = Editor.Immutables;\n\n        for (i = 0, len = format.length; i < len; i++) {\n            node = sourceNode;\n            tags = format[i].tags;\n            attributes = format[i].attr;\n\n            if (immutables && tags && tags[0] == \"immutable\") {\n                var immutable = ImmutablesNS.immutableParent(node);\n                if (immutable && dom.attrEquals(immutable, attributes)) {\n                    return node;\n                }\n            }\n\n            while (node && dom.isAncestorOf(editableParent, node)) {\n                if (dom.ofType(node, tags) && dom.attrEquals(node, attributes)) {\n                    return node;\n                }\n\n                if (until && until(node)) {\n                    break;\n                }\n\n                node = node.parentNode;\n            }\n        }\n        return null;\n    },\n\n    getFormat: function(nodes) {\n        var that = this,\n            findFormat = function(node) {\n                    return that.findFormat(dom.isDataNode(node) ? node.parentNode : node);\n                },\n            result = findFormat(nodes[0]),\n            i, len;\n\n        if (!result) {\n            return \"\";\n        }\n\n        for (i = 1, len = nodes.length; i < len; i++) {\n            if (result != findFormat(nodes[i])) {\n                return \"\";\n            }\n        }\n\n        return result.nodeName.toLowerCase();\n    },\n\n    isFormatted: function(nodes, until) {\n        for (var i = 0, len = nodes.length; i < len; i++) {\n            if (!this.findFormat(nodes[i], until)) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n});\n\nvar BlockFormatter = Class.extend({\n    init: function(format, values) {\n        this.format = format;\n        this.values = values;\n        this.finder = new BlockFormatFinder(format);\n    },\n\n    wrap: function(tag, attributes, nodes) {\n\n        var commonAncestor = nodes.length == 1 ? dom.blockParentOrBody(nodes[0]) : dom.commonAncestor.apply(null, nodes);\n\n        if (dom.isInline(commonAncestor)) {\n            commonAncestor = dom.blockParentOrBody(commonAncestor);\n        }\n\n        var ancestors = dom.significantChildNodes(commonAncestor),\n            position = dom.findNodeIndex(ancestors[0]),\n            wrapper = dom.create(commonAncestor.ownerDocument, tag, attributes),\n            i, ancestor;\n\n        for (i = 0; i < ancestors.length; i++) {\n            ancestor = ancestors[i];\n            if (dom.isBlock(ancestor)) {\n                dom.attr(ancestor, attributes);\n\n                if (wrapper.childNodes.length) {\n                    dom.insertBefore(wrapper, ancestor);\n                    wrapper = wrapper.cloneNode(false);\n                }\n\n                position = dom.findNodeIndex(ancestor) + 1;\n\n                continue;\n            }\n\n            wrapper.appendChild(ancestor);\n        }\n\n        if (wrapper.firstChild) {\n            dom.insertAt(commonAncestor, wrapper, position);\n        }\n    },\n\n    apply: function(nodes) {\n        var format, values = this.values;\n\n        function attributes(format) {\n            return extend({}, format && format.attr, values);\n        }\n\n        this._handleImmutables(nodes, true);\n\n        var images = dom.filter(\"img\", nodes);\n        var imageFormat = EditorUtils.formatByName(\"img\", this.format);\n        var imageAttributes = attributes(imageFormat);\n        $.each(images, function() {\n            dom.attr(this, imageAttributes);\n        });\n\n        // only images were selected, no need to wrap\n        if (images.length == nodes.length) {\n            return;\n        }\n\n        var nonImages = dom.filter(\"img\", nodes, true);\n        var formatNodes = this.finder.findSuitable(nonImages);\n\n        if (formatNodes.length) {\n            for (var i = 0, len = formatNodes.length; i < len; i++) {\n                format = EditorUtils.formatByName(dom.name(formatNodes[i]), this.format);\n                dom.attr(formatNodes[i], attributes(format));\n            }\n        } else {\n            format = this.format[0];\n            this.wrap(format.tags[0], attributes(format), nonImages);\n        }\n    },\n\n    _handleImmutables: function(nodes, applyFormatting) {\n        if (!this.immutables()) {\n            return;\n        }\n        var immutableFormat = EditorUtils.formatByName(\"immutable\", this.format);\n        if (!immutableFormat) {\n            return;\n        }\n        var ImmutablesNS = Editor.Immutables;\n        var l = nodes.length - 1;\n        for (var i = l; i >= 0; i--) {\n            var immutableParent = ImmutablesNS.immutableParent(nodes[i]);\n            if (!immutableParent) {\n                continue;\n            }\n            if (immutableParent !== nodes[i + 1]) {\n                if (applyFormatting) {\n                    dom.attr(immutableParent, immutableFormat.attr);\n                } else {\n                    dom.unstyle(immutableParent, immutableFormat.attr.style);\n                }\n            }\n            nodes.splice(i, 1);\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    remove: function(nodes) {\n        var i, l, formatNode, namedFormat, name;\n\n        this._handleImmutables(nodes, false);\n\n        for (i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n            if (formatNode) {\n                name = dom.name(formatNode);\n                namedFormat = EditorUtils.formatByName(name, this.format);\n                if (namedFormat.attr.style) {\n                    dom.unstyle(formatNode, namedFormat.attr.style);\n                }\n                if (namedFormat.attr.className) {\n                    dom.removeClass(formatNode, namedFormat.attr.className);\n                }\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n        if (that.finder.isFormatted(nodes)) {\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n});\n\nvar GreedyBlockFormatter = Class.extend({\n    init: function(format, values) {\n        var that = this;\n        that.format = format;\n        that.values = values;\n        that.finder = new BlockFormatFinder(format);\n    },\n\n    apply: function(nodes) {\n        var format = this.format;\n        var blocks = dom.blockParents(nodes);\n        var formatTag = format[0].tags[0];\n        var i, len, list, formatter, range;\n        var element;\n        var tagName;\n        var block;\n        var immutalbeParent;\n\n        if (blocks.length) {\n            for (i = 0, len = blocks.length; i < len; i++) {\n                block = blocks[i];\n                immutalbeParent = this.immutables() && Editor.Immutables.immutableParent(block);\n\n                if (!immutalbeParent) {\n                    tagName = dom.name(block);\n\n                    if (tagName == \"li\") {\n                        list = block.parentNode;\n                        formatter = new Editor.ListFormatter(list.nodeName.toLowerCase(), formatTag);\n                        range = this.editor.createRange();\n                        range.selectNode(blocks[i]);\n                        formatter.toggle(range);\n                    } else if (formatTag && (tagName == \"td\" || block.attributes.contentEditable)) {\n                        new BlockFormatter(format, this.values).apply(block.childNodes);\n                    } else {\n                        element = dom.changeTag(block, formatTag);\n                        dom.attr(element, format[0].attr);\n                    }\n                }\n            }\n        } else {\n            var blockFormatter = new BlockFormatter(format, this.values);\n            blockFormatter.editor = this.editor;\n            blockFormatter.apply(nodes);\n        }\n    },\n\n    toggle: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n        if (!nodes.length) {\n            range.selectNodeContents(range.commonAncestorContainer);\n            nodes = RangeUtils.textNodes(range);\n            if (!nodes.length) {\n                nodes = dom.significantChildNodes(range.commonAncestorContainer);\n            }\n        }\n\n        this.apply(nodes);\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    }\n});\n\nvar BlockFormatTool = FormatTool.extend({ init: function(options) {\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new BlockFormatFinder(options.format),\n            formatter: function() {\n                return new BlockFormatter(options.format);\n            }\n        }));\n    }\n});\n\nextend(Editor, {\n    BlockFormatFinder: BlockFormatFinder,\n    BlockFormatter: BlockFormatter,\n    GreedyBlockFormatter: GreedyBlockFormatter,\n    BlockFormatTool: BlockFormatTool\n});\n\nvar listElements = [\"ul\",\"ol\",\"li\"];\n\nregisterFormat(\"justifyLeft\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"left\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"left\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"left\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyLeft\", new BlockFormatTool({\n    format: formats.justifyLeft,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyCenter\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"center\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"center\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyCenter\", new BlockFormatTool({\n    format: formats.justifyCenter,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyRight\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"right\" } } },\n    { tags: [\"img\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { \"float\": \"right\", display: \"\", marginLeft: \"\", marginRight: \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"right\", listStylePosition: \"inside\" } } }\n]);\nregisterTool(\"justifyRight\", new BlockFormatTool({\n    format: formats.justifyRight,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\nregisterFormat(\"justifyFull\", [\n    { tags: dom.nonListBlockElements, attr: { style: { textAlign: \"justify\" } } },\n    { tags: [\"img\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: [\"immutable\"], attr: { style: { display: \"block\", marginLeft: \"auto\", marginRight: \"auto\", \"float\": \"\" } } },\n    { tags: listElements, attr: { style: { textAlign: \"justify\", listStylePosition: \"\" } } }\n]);\nregisterTool(\"justifyFull\", new BlockFormatTool({\n    format: formats.justifyFull,\n    ui: {\n        togglable: true,\n        group: \"align\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    FormatTool = Editor.FormatTool,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    textNodes = RangeUtils.textNodes,\n    registerTool = Editor.EditorUtils.registerTool;\n\nvar ListFormatFinder = BlockFormatFinder.extend({\n    init: function(options) {\n        this.tag = options.tag;\n        this.attr = options.attr;\n        this.altAttr = options.altAttr;\n\n        var tags = this.tags = [this.tag == 'ul' ? 'ol' : 'ul', this.tag];\n        var format = [{ tags: tags, attr: this.attr }];\n\n        if (this.altAttr) {\n            format.push({\n                tags: tags,\n                attr: this.altAttr\n            });\n        }\n\n        BlockFormatFinder.fn.init.call(this, format);\n    },\n\n    matchesType: function(node) {\n        return dom.attrEquals(node, this.attr) || (this.altAttr && dom.attrEquals(node, this.altAttr));\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    isFormatted: function(nodes) {\n        var formatNodes = [];\n        var formatNode, i;\n\n        for (i = 0; i < nodes.length; i++) {\n            formatNode = this.findFormat(nodes[i], this.isList);\n\n            if (formatNode && dom.name(formatNode) == this.tag && this.matchesType(formatNode)) {\n                formatNodes.push(formatNode);\n            }\n        }\n\n        if (formatNodes.length < 1) {\n            return false;\n        }\n\n        if (formatNodes.length != nodes.length) {\n            return false;\n        }\n\n        // check if sequential lists are selected\n        for (i = 0; i < formatNodes.length; i++) {\n            if (formatNodes[i].parentNode != formatNode.parentNode) {\n                break;\n            }\n\n            if (formatNodes[i] != formatNode) {\n                return false;\n            }\n        }\n\n        return true;\n    },\n\n    findSuitable: function(nodes) {\n        var candidate = this.findFormat(nodes[0], this.isList);\n\n        if (candidate && dom.name(candidate) == this.tag) {\n            return candidate;\n        }\n\n        return null;\n    }\n\n});\n\nvar ListFormatter = Class.extend({\n    init: function(options, unwrapTag) {\n        var that = this;\n        options = $.isPlainObject(options) ? options : { tag: options, attr: null };\n        that.tag = options.tag;\n        that.attr = options.attr;\n        that.finder = new ListFormatFinder(options);\n        that.unwrapTag = unwrapTag;\n    },\n\n    isList: function(node) {\n        return dom.list(node);\n    },\n\n    immutables: function() {\n        return this.editor && !!this.editor.options.immutables;\n    },\n\n    wrap: function(list, nodes) {\n        var li = dom.create(list.ownerDocument, \"li\"),\n            i, node,\n            isImmutable = this.immutables() ? Editor.Immutables.immutable : $.noop;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n\n            if (dom.is(node, 'li')) {\n                list.appendChild(node);\n                continue;\n            }\n\n            if (this.isList(node)) {\n                while (node.firstChild) {\n                    list.appendChild(node.firstChild);\n                }\n                continue;\n            }\n\n            if (dom.is(node, \"td\")) {\n                while (node.firstChild) {\n                    li.appendChild(node.firstChild);\n                }\n                list.appendChild(li);\n                node.appendChild(list);\n                list = list.cloneNode(false);\n                li = li.cloneNode(false);\n                continue;\n            }\n\n            li.appendChild(node);\n\n            if (dom.isBlock(node)) {\n                list.appendChild(li);\n                if (!isImmutable(node)) {\n                    dom.unwrap(node);\n                }\n                li = li.cloneNode(false);\n            }\n        }\n\n        if (li.firstChild) {\n            list.appendChild(li);\n        }\n    },\n\n    containsAny: function(parent, nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n            if (dom.isAncestorOrSelf(parent, nodes[i])) {\n                return true;\n            }\n        }\n\n        return false;\n    },\n\n    suitable: function(candidate, nodes) {\n        if (candidate.className == \"k-marker\") {\n            var sibling = candidate.nextSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n\n            sibling = candidate.previousSibling;\n\n            if (sibling && dom.isBlock(sibling)) {\n                return false;\n            }\n        }\n\n        return this.containsAny(candidate, nodes) || dom.isInline(candidate) || candidate.nodeType == 3;\n    },\n\n    _parentLists: function(node) {\n        var editable = dom.closestEditable(node);\n\n        return $(node).parentsUntil(editable, \"ul,ol\");\n    },\n\n    split: function(range) {\n        var nodes = textNodes(range);\n        var start, end, parents;\n\n        if (nodes.length) {\n            start = dom.parentOfType(nodes[0], ['li']);\n            end = dom.parentOfType(nodes[nodes.length - 1], ['li']);\n            range.setStartBefore(start);\n            range.setEndAfter(end);\n\n            for (var i = 0, l = nodes.length; i < l; i++) {\n                var formatNode = this.finder.findFormat(nodes[i]);\n                if (formatNode) {\n                    parents = this._parentLists(formatNode);\n                    if (parents.length) {\n                        RangeUtils.split(range, parents.last()[0], true);\n                    } else {\n                        RangeUtils.split(range, formatNode, true);\n                    }\n                }\n            }\n        }\n    },\n\n    merge: function(tag, formatNode) {\n        var prev = formatNode.previousSibling, next;\n\n        while (prev && (prev.className == \"k-marker\" || (prev.nodeType == 3 && dom.isWhitespace(prev)))) {\n            prev = prev.previousSibling;\n        }\n\n        // merge with previous list\n        if (prev && dom.name(prev) == tag && this.finder.matchesType(prev)) {\n            while (formatNode.firstChild) {\n                prev.appendChild(formatNode.firstChild);\n            }\n            dom.remove(formatNode);\n            formatNode = prev;\n        }\n\n        next = formatNode.nextSibling;\n        while (next && (next.className == \"k-marker\" || (next.nodeType == 3 && dom.isWhitespace(next)))) {\n            next = next.nextSibling;\n        }\n\n        // merge with next list\n        if (next && dom.name(next) == tag && this.finder.matchesType(next)) {\n            while (formatNode.lastChild) {\n                next.insertBefore(formatNode.lastChild, next.firstChild);\n            }\n            dom.remove(formatNode);\n        }\n    },\n\n    breakable: function(node) {\n        return (\n            node != node.ownerDocument.body &&\n            !/table|tbody|thead|tr|td/.test(dom.name(node)) &&\n            !node.attributes.contentEditable\n        );\n    },\n\n    findSuitableNode: function(nodes) {\n        var that = this,\n            finder = that.finder,\n            tag = that.tag,\n            formatNode;\n\n        formatNode = finder.findSuitable(nodes);\n\n        if (!formatNode) {\n            // Find the opposite tag\n            finder = new ListFormatFinder({ tag: tag == \"ul\" ? \"ol\" : \"ul\" });\n            formatNode = finder.findSuitable(nodes);\n        }\n\n        if (!formatNode) {\n            // Find the same tag\n            finder = new ListFormatFinder({ tag: tag });\n            formatNode = finder.findSuitable(nodes);\n            formatNode = formatNode && that.finder.matchesType(formatNode) ? null : formatNode;\n        }\n\n\n        return formatNode;\n    },\n\n    applyOnSection: function(section, nodes) {\n        var tag = this.tag;\n        var attr = this.attr;\n        var commonAncestor = dom.closestSplittableParent(nodes);\n\n        var ancestors = [];\n        var formatNode = this.findSuitableNode(nodes);\n\n        var childNodes;\n\n        if (/table|tbody|thead/.test(dom.name(commonAncestor))) {\n            childNodes = $.map(nodes, function(node) {\n                return dom.parentOfType(node, [\"td\"]);\n            });\n        } else {\n            childNodes = dom.significantChildNodes(commonAncestor);\n\n            if ($.grep(childNodes, dom.isBlock).length) {\n                childNodes = $.grep(childNodes, (function(node) {\n                    return this.containsAny(node, nodes);\n                }).bind(this));\n            }\n\n            if (!childNodes.length) {\n                childNodes = nodes;\n            }\n        }\n\n        function pushAncestor() {\n            ancestors.push(this);\n        }\n\n        for (var i = 0; i < childNodes.length; i++) {\n            var child = childNodes[i];\n            var suitable = (!formatNode || !dom.isAncestorOrSelf(formatNode, child)) && this.suitable(child, nodes);\n\n            if (!suitable) {\n                continue;\n            }\n\n            if (formatNode && this.isList(child)) {\n                // merging lists\n                $.each(child.children, pushAncestor);\n                dom.remove(child);\n            } else {\n                ancestors.push(child);\n            }\n        }\n\n        if (ancestors.length == childNodes.length && this.breakable(commonAncestor)) {\n            ancestors = [commonAncestor];\n        }\n\n        if (!formatNode) {\n            formatNode = dom.create(commonAncestor.ownerDocument, tag, attr);\n            if (dom.isBlock(ancestors[0])) {\n                dom.mergeAttributes(ancestors[0], formatNode);\n            }\n            dom.insertBefore(formatNode, ancestors[0]);\n        }\n\n        this.wrap(formatNode, ancestors);\n\n        while (dom.isBom(formatNode.nextSibling)) {\n            dom.remove(formatNode.nextSibling);\n        }\n\n        if (!this.finder.matchesType(formatNode)) {\n            formatNode.removeAttribute(\"type\");\n            formatNode.style.listStyleType = \"\";\n            dom.mergeAttributes(dom.create(commonAncestor.ownerDocument, tag, attr), formatNode, true);\n        }\n\n        if (formatNode && formatNode.getAttribute(\"type\") === \"\") {\n            formatNode.removeAttribute(\"type\");\n        }\n\n        if (!dom.is(formatNode, tag)) {\n            dom.changeTag(formatNode, tag);\n        }\n\n        this.merge(tag, formatNode);\n    },\n\n    apply: function(nodes) {\n        var i = 0,\n            sections = [],\n            lastSection,\n            lastNodes,\n            section,\n            node,\n            l = nodes.length,\n            immutableParent = this.immutables() ? Editor.Immutables.immutableParent : $.noop;\n\n        function addLastSection() {\n            if (lastSection) {\n                sections.push({\n                    section: lastSection,\n                    nodes: lastNodes\n                });\n            }\n        }\n\n        // split nodes into sections that need to be different lists\n        for (i = 0; i < l; i++) {\n            node = immutableParent(nodes[i]) || nodes[i];\n            section = dom.closestEditable(node, [\"td\",\"th\",\"body\"]);\n            if (!lastSection || section != lastSection) {\n                addLastSection();\n                lastNodes = [node];\n                lastSection = section;\n            } else {\n                lastNodes.push(node);\n            }\n        }\n\n        addLastSection();\n\n        for (i = 0; i < sections.length; i++) {\n            this.applyOnSection(sections[i].section, sections[i].nodes);\n        }\n    },\n\n    unwrap: function(ul) {\n        var fragment = ul.ownerDocument.createDocumentFragment(),\n            unwrapTag = this.unwrapTag,\n            parents,\n            li,\n            p,\n            child;\n\n        for (li = ul.firstChild; li; li = li.nextSibling) {\n            p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n\n            while (li.firstChild) {\n                child = li.firstChild;\n\n                if (dom.isBlock(child)) {\n\n                    if (p.firstChild) {\n                        fragment.appendChild(p);\n                        p = dom.create(ul.ownerDocument, unwrapTag || 'p');\n                    }\n\n                    fragment.appendChild(child);\n                } else {\n                    p.appendChild(child);\n                }\n            }\n\n            if (p.firstChild) {\n                fragment.appendChild(p);\n            }\n        }\n\n        parents = this._parentLists(ul);\n\n        if (parents[0]) {\n            dom.insertAfter(fragment, parents.last()[0]);\n            parents.last().remove();\n        } else {\n            dom.insertAfter(fragment, ul);\n        }\n\n        dom.remove(ul);\n    },\n\n    remove: function(nodes) {\n        var formatNode;\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            formatNode = this.finder.findFormat(nodes[i]);\n\n            if (formatNode) {\n                this.unwrap(formatNode);\n            }\n        }\n    },\n\n    toggle: function(range) {\n        var that = this,\n            nodes = textNodes(range),\n            ancestor = range.commonAncestorContainer;\n\n        if (!nodes.length) {\n            range.selectNodeContents(ancestor);\n            nodes = textNodes(range);\n            if (!nodes.length) {\n                var text = ancestor.ownerDocument.createTextNode(\"\");\n                range.startContainer.appendChild(text);\n                nodes = [text];\n                range.selectNode(text.parentNode);\n            }\n        }\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        if (that.finder.isFormatted(nodes)) {\n            that.split(range);\n            that.remove(nodes);\n        } else {\n            that.apply(nodes);\n        }\n    }\n\n});\n\nvar ListCommand = Command.extend({\n    init: function(options) {\n        options.formatter = new ListFormatter({ tag: options.tag, attr: options.attr });\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar ListTool = FormatTool.extend({\n    init: function(options) {\n        this.options = options;\n\n        FormatTool.fn.init.call(this, extend(options, {\n            finder: new ListFormatFinder(options)\n        }));\n    },\n\n    command: function(commandArguments) {\n        return new ListCommand(extend(commandArguments, { tag: this.options.tag, attr: this.options.attr }));\n    }\n});\n\nextend(Editor, {\n    ListFormatFinder: ListFormatFinder,\n    ListFormatter: ListFormatter,\n    ListCommand: ListCommand,\n    ListTool: ListTool\n});\n\nregisterTool(\"insertUnorderedList\", new ListTool({ tag: 'ul', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertOrderedList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"\" }, type: \"\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertUpperRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"upper-roman\" } }, altAttr: { type: \"I\" }, ui: { togglable: true, group: \"lists\" } }));\nregisterTool(\"insertLowerRomanList\", new ListTool({ tag: 'ol', attr: { style: { listStyleType: \"lower-roman\" } }, altAttr: { type: \"i\" }, ui: { togglable: true, group: \"lists\" } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    DelayedExecutionTool = Editor.DelayedExecutionTool,\n    Command = Editor.Command,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\n\nvar FormattingTool = DelayedExecutionTool.extend({\n    init: function(options) {\n        var that = this;\n        Tool.fn.init.call(that, kendo.deepExtend({}, that.options, options));\n\n        that.type = \"kendoDropDownList\";\n\n        that.finder = {\n            getFormat: function() { return \"\"; }\n        };\n    },\n\n    options: {\n        items: [\n            { text: \"Paragraph\", value: \"p\" },\n            { text: \"Quotation\", value: \"blockquote\" },\n            { text: \"Heading 1\", value: \"h1\" },\n            { text: \"Heading 2\", value: \"h2\" },\n            { text: \"Heading 3\", value: \"h3\" },\n            { text: \"Heading 4\", value: \"h4\" },\n            { text: \"Heading 5\", value: \"h5\" },\n            { text: \"Heading 6\", value: \"h6\" }\n        ],\n        width: 110\n    },\n\n    toFormattingItem: function(item) {\n        var value = item.value;\n\n        if (!value) {\n            return item;\n        }\n\n        if (item.tag || item.className) {\n            return item;\n        }\n\n        var dot = value.indexOf(\".\");\n\n        if (dot === 0) {\n            item.className = value.substring(1);\n        } else if (dot == -1) {\n            item.tag = value;\n        } else {\n            item.tag = value.substring(0, dot);\n            item.className = value.substring(dot + 1);\n        }\n\n        return item;\n    },\n\n    command: function(args) {\n        var that = this;\n        var item = args.value;\n\n        item = this.toFormattingItem(item);\n\n        return new Editor.FormatCommand({\n            range: args.range,\n            formatter: function() {\n                var formatter,\n                    tags = (item.tag || item.context || \"span\").split(\",\"),\n                    format = [{\n                        tags: tags,\n                        attr: { className: item.className || \"\" }\n                    }];\n\n                if ($.inArray(tags[0], dom.inlineElements) >= 0) {\n                    formatter = new Editor.GreedyInlineFormatter(format);\n                } else {\n                    formatter = new Editor.GreedyBlockFormatter(format);\n                }\n\n                formatter.editor = that.editor;\n                return formatter;\n            }\n        });\n    },\n\n    decorate: function(body) {\n        var component = this.component,\n            dataSource = component.dataSource,\n            items = dataSource.data(),\n            i, tag, className, style;\n\n        if (body) {\n            component.list.css(\"background-color\", dom.getEffectiveBackground($(body)));\n        }\n\n        if (this.component && this.component.options && this.component.options.unsafeInline !== false) {\n            for (i = 0; i < items.length; i++) {\n                tag = items[i].tag || \"span\";\n                className = items[i].className;\n\n                style = dom.inlineStyle(body, tag, { className: className });\n\n                style = style.replace(/\"/g, \"'\");\n\n                items[i].style = style + \";display:inline-block\";\n            }\n        }\n\n        dataSource.trigger(\"change\");\n    },\n\n    initialize: function(ui, editor) {\n        var options = this.options;\n        var toolName = options.name;\n        var that = this;\n        var component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        that.editor = editor;\n        that.component = component;\n\n        // must be moved to themes\n        ui.closest(\".k-dropdownlist\").width(options.width);\n\n        component.setOptions({\n            optionLabel: editor.options.messages.formatting,\n            change: () => {\n                var dataItem = component.dataItem();\n\n                if (dataItem) {\n                    Tool.exec(editor, toolName, dataItem.toJSON());\n                }\n            },\n            dataBound: function() {\n                var i, items = component.dataSource.data(),\n                    optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n                for (i = 0; i < items.length; i++) {\n                    items[i] = that.toFormattingItem(items[i]);\n                }\n\n                if (optionLabel.length) {\n                    optionLabel.remove();\n                }\n            }\n        });\n    },\n\n    getFormattingValue: function(items, nodes) {\n        for (var i = 0; i < items.length; i++) {\n            var item = items[i];\n            var tag = item.tag || item.context || \"\";\n            var className = item.className ? \".\" + item.className : \"\";\n            var selector = tag + className;\n\n            var element = $(nodes[0]).closest(selector)[0];\n\n            if (!element) {\n                continue;\n            }\n\n            if (nodes.length == 1) {\n                return item.value;\n            }\n\n            for (var n = 1; n < nodes.length; n++) {\n                if (!$(nodes[n]).closest(selector)[0]) {\n                    break;\n                } else if (n == nodes.length - 1) {\n                    return item.value;\n                }\n            }\n        }\n\n        return \"\";\n    },\n\n    update: function(ui, nodes) {\n        var selectBox = $(ui).data(this.type);\n        // necessary until formatBlock is deleted\n        if (!selectBox) {\n            return;\n        }\n\n        var dataSource = selectBox.dataSource,\n            items = dataSource.data(),\n            i, context,\n            ancestor = dom.commonAncestor.apply(null, nodes);\n\n        if (ancestor != dom.closestEditable(ancestor) && this._ancestor == ancestor) {\n            return;\n        } else {\n            this._ancestor = ancestor;\n        }\n\n        for (i = 0; i < items.length; i++) {\n            context = items[i].context;\n\n            items[i].visible = !context || !!$(ancestor).closest(context).length;\n        }\n\n        dataSource.filter([{ field: \"visible\", operator: \"eq\", value: true }]);\n\n        DelayedExecutionTool.fn.update.call(this, ui, nodes);\n\n        selectBox.value(this.getFormattingValue(dataSource.view(), nodes));\n\n        selectBox.wrapper.toggleClass(\"k-disabled\", !dataSource.view().length);\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nvar CleanFormatCommand = Command.extend({\n    exec: function() {\n        var range = this.lockRange(true);\n        this.tagsToClean = this.options.remove || \"strong,em,span,sup,sub,del,b,i,u,font\".split(\",\");\n\n        RangeUtils.wrapSelectedElements(range);\n\n        var nodes = RangeUtils.mapAll(range, function(node) {\n            return node;\n        });\n\n\n        for (var c = nodes.length - 1; c >= 0; c--) {\n            var node = nodes[c];\n            if (!this.immutableParent(node)) {\n                this.clean(node);\n            }\n        }\n\n        this.releaseRange(range);\n    },\n\n    clean: function(node) {\n        if (!node || dom.isMarker(node)) {\n            return;\n        }\n\n        var name = dom.name(node);\n\n        if (name == \"ul\" || name == \"ol\") {\n            var listFormatter = new Editor.ListFormatter(name);\n            var prev = node.previousSibling;\n            var next = node.nextSibling;\n\n            listFormatter.unwrap(node);\n\n            // clean contents\n            for (; prev && prev != next; prev = prev.nextSibling) {\n                this.clean(prev);\n            }\n        } else if (name == \"blockquote\") {\n            dom.changeTag(node, \"p\");\n        } else if (node.nodeType == 1 && !dom.insignificant(node)) {\n            for (var i = node.childNodes.length - 1; i >= 0; i--) {\n                this.clean(node.childNodes[i]);\n            }\n\n            node.removeAttribute(\"style\");\n            node.removeAttribute(\"class\");\n        } else {\n            unwrapListItem(node);\n        }\n\n        if ($.inArray(name, this.tagsToClean) > -1) {\n            dom.unwrap(node);\n        }\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\n\nfunction unwrapListItem(node) {\n    var li = dom.closestEditableOfType(node, [\"li\"]);\n    if (li) {\n        var listFormatter = new Editor.ListFormatter(dom.name(li.parentNode));\n        var range = kendo.ui.editor.W3CRange.fromNode(node);\n        range.selectNode(li);\n        listFormatter.toggle(range);\n    }\n}\n\n$.extend(Editor, {\n    FormattingTool: FormattingTool,\n    CleanFormatCommand: CleanFormatCommand\n});\n\nregisterTool(\"formatting\", new FormattingTool({\n    ui: {\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            highlightFirst: false,\n            autoWidth: true,\n            template: kendo.template(\n                (data) => `<span unselectable=\"on\" ${data.style ? `class=\"k-d-block\" style=\"display:block;${data.style || \"\"}` : \"\"}\">${kendo.htmlEncode(data.text)}</span>`\n            )\n        },\n        overflow: \"never\"\n    }\n}));\n\nregisterTool(\"cleanFormatting\", new Tool({ command: CleanFormatCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    keys = kendo.keys,\n    KEDITORIMAGEURL = \"#k-editor-image-url\",\n    KEDITORIMAGETITLE = \"#k-editor-image-title\",\n    KEDITORIMAGEWIDTH = \"#k-editor-image-width\",\n    KEDITORIMAGEHEIGHT = \"#k-editor-image-height\";\n\nvar ImageCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertImage: function(img, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.src && attributes.src != \"http://\") {\n\n            var removeIEAttributes = function() {\n                setTimeout(function() {\n                    if (!attributes.width) {\n                        img.removeAttribute(\"width\");\n                    }\n\n                    if (!attributes.height) {\n                        img.removeAttribute(\"height\");\n                    }\n\n                    img.removeAttribute(\"complete\");\n                });\n            };\n\n            if (!img) {\n                img = dom.create(doc, \"img\", attributes);\n                img.onload = img.onerror = removeIEAttributes;\n\n                range.deleteContents();\n                range.insertNode(img);\n\n                if (!img.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), img);\n                }\n\n                removeIEAttributes();\n\n                range.setStartAfter(img);\n                range.setEndAfter(img);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                img.onload = img.onerror = removeIEAttributes;\n                dom.attr(img, attributes);\n                removeIEAttributes();\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        if (!that.insertImage(RangeUtils.image(range), range)) {\n            that.releaseRange(range);\n        }\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            applied = false,\n            img = RangeUtils.image(range),\n            imageWidth = img && img.getAttribute(\"width\") || \"\",\n            imageHeight = img && img.getAttribute(\"height\") || \"\",\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            imageBrowser = options.imageBrowser,\n            showBrowser = !!(kendo.ui.ImageBrowser && imageBrowser && imageBrowser.transport && imageBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertImage,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                w = parseInt(element.find(KEDITORIMAGEWIDTH).val(), 10),\n                h = parseInt(element.find(KEDITORIMAGEHEIGHT).val(), 10);\n\n            that.attributes = {\n                src: element.find(KEDITORIMAGEURL).val().replace(/ /g, \"%20\"),\n                alt: element.find(KEDITORIMAGETITLE).val()\n            };\n\n            that.attributes.width = null;\n            that.attributes.height = null;\n\n            if (!isNaN(w) && w > 0) {\n                that.attributes.width = w;\n            }\n\n            if (!isNaN(h) && h > 0) {\n                that.attributes.height = h;\n            }\n\n            applied = that.insertImage(img, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORIMAGEURL).val(img ? img.getAttribute(\"src\", 2) : \"http://\").end()\n        .find(KEDITORIMAGETITLE).val(img ? img.alt : \"\").end()\n        .find(KEDITORIMAGEWIDTH).val(imageWidth).end()\n        .find(KEDITORIMAGEHEIGHT).val(imageHeight).end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            this._imageBrowser = new kendo.ui.ImageBrowser(\n                element.find(\".k-imagebrowser\"),\n                extend({}, imageBrowser)\n            );\n\n            this._imageBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORIMAGEURL).val(this.value());\n                }\n            });\n\n            this._imageBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORIMAGEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-image-url\",\n                    label: encode(messages.imageWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-title\",\n                    label: encode(messages.imageAltText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-width\",\n                    label: encode(messages.imageWidth),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-image-height\",\n                    label: encode(messages.imageHeight),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser k-imagebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"image-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.ImageCommand = ImageCommand;\n\nregisterTool(\"insertImage\", new Editor.Tool({ command: ImageCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    loadingOverlay = '<div contenteditable=\"false\" class=\"k-loading-mask\" style=\"width: 100%; height: 100%; position: absolute; top: 0px; left: 0px;\"><div class=\"k-loading-image\"></div><div class=\"k-loading-color\"></div></div>';\n\nvar ImportCommand = Command.extend({\n    exec: function() {\n        (this.editor._uploadWidget || this._initializeUploadWidget()).element.click();\n    },\n\n    _initializeUploadWidget: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var importOptions = editor.options[\"import\"];\n        var upload = $('<input id=\"editorImport\" name=\"files\" type=\"file\" />').kendoUpload({\n            success: cmd._onUploadSuccess.bind(cmd),\n            progress: cmd._onUploadProgress.bind(cmd),\n            select: cmd._onUploadSelect.bind(cmd),\n            error: cmd._onUploadError.bind(cmd),\n            complete: cmd._onUploadComplete.bind(cmd),\n            showFileList: false,\n            multiple: false,\n            async: {\n                saveUrl: importOptions.proxyURL,\n                autoUpload: true,\n                saveField: \"file\"\n            },\n            validation: {\n                allowedExtensions: importOptions.allowedExtensions,\n                maxFileSize: importOptions.maxFileSize\n            }\n        }).getKendoUpload();\n\n        editor._uploadWidget = upload;\n\n        return upload;\n    },\n    _onUploadComplete: function(ev) {\n        this._trigger(\"complete\", ev);\n        ev.sender.clearAllFiles();\n\n        this._removeLoadingOverlay();\n    },\n    _onUploadSuccess: function(ev) {\n        this.editor.value(ev.response.html.replace(/<\\/?body>/ig, \"\"));\n        this._trigger(\"success\", ev);\n    },\n    _onUploadProgress: function(ev) {\n        this._trigger(\"progress\", ev);\n    },\n    _onUploadSelect: function(ev) {\n        this._trigger(\"select\", ev);\n        if (!ev.files[0].validationErrors) {\n            this._initLoadingOverlay();\n        }\n    },\n    _onUploadError: function(ev) {\n        this._trigger(\"error\", ev);\n    },\n\n    _trigger: function(eventType, uploadEvent) {\n        var editor = this.editor;\n        var importOptions = editor.options[\"import\"];\n        if (typeof importOptions[eventType] === \"function\") {\n            importOptions[eventType].call(editor, uploadEvent);\n        }\n    },\n\n    _initLoadingOverlay: function() {\n        var editable = this.editor.body;\n        if (Editor.Dom.is(editable, \"body\")) {\n            this._iframeWrapper = this._container =\n                this.editor.wrapper.find(\"iframe\").parent()\n                .css({ position: \"relative\" }).append(loadingOverlay);\n        } else {\n            this._container = $(editable).append(loadingOverlay);\n        }\n\n        kendo.ui.progress(this._container, true);\n    },\n\n    _removeLoadingOverlay: function() {\n        kendo.ui.progress(this._container, false);\n        $(this._iframeWrapper).css({\n            position: \"\"\n        });\n\n        delete this._container;\n        delete this._iframeWrapper;\n    }\n});\n\nextend(Editor, {\n    ImportCommand: ImportCommand\n});\n\nregisterTool(\"import\", new Tool({\n    command: ImportCommand,\n    ui: {\n        showText: \"both\"\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        GenericCommand = editorNS.GenericCommand,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        RestorePoint = editorNS.RestorePoint,\n        extend = $.extend;\n\nvar InsertHtmlCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n        var options = this.options;\n        var range = options.range;\n        var body = editor.body;\n        var startRestorePoint = new RestorePoint(range, body);\n        var html = options.html || options.value || '';\n\n        editor.selectRange(range);\n\n        editor.clipboard.paste(html, options);\n\n        if (options.postProcess) {\n            options.postProcess(editor, editor.getRange());\n        }\n\n        var genericCommand = new GenericCommand(startRestorePoint, new RestorePoint(editor.getRange(), body));\n        genericCommand.editor = editor;\n        editor.undoRedoStack.push(genericCommand);\n\n        editor.focus();\n    }\n});\n\nvar InsertHtmlTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var options = this.options,\n            dataSource = options.items ? options.items : editor.options.insertHtml,\n            component = ui.getKendoDropDownList();\n\n        if (!component) {\n            return;\n        }\n\n        component.one(\"open\", () => {\n            var optionLabel = component.list.parent().find(\".k-list-optionlabel\");\n\n            if (optionLabel.length) {\n                optionLabel.remove();\n            }\n        });\n\n        component.setOptions({\n            dataSource: dataSource,\n            optionLabel: editor.options.messages.insertHtml\n        });\n        component.bind(\"change\", () => {\n            Tool.exec(editor, 'insertHtml', component.value());\n        });\n    },\n\n    command: function(commandArguments) {\n        return new InsertHtmlCommand(commandArguments);\n    },\n\n    update: function(ui) {\n        var component = ui.data(\"kendoDropDownList\");\n        component.close();\n        component.value(null);\n    }\n});\n\nextend(editorNS, {\n    InsertHtmlCommand: InsertHtmlCommand,\n    InsertHtmlTool: InsertHtmlTool\n});\n\nregisterTool(\"insertHtml\", new InsertHtmlTool({\n    ui: {\n        initialValue: \"Insert HTML\",\n        type: \"component\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            autoSize: true,\n            highlightFirst: false\n        },\n        overflow: \"never\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    registerTool = EditorUtils.registerTool,\n    defaultExportAsItems = [\n        { text: 'Docx', value: 'docx' },\n        { text: 'Rtf', value: 'rtf' },\n        { text: 'Pdf', value: 'pdf' },\n        { text: 'Html', value: 'html' },\n        { text: 'Plain Text', value: 'txt' }\n    ];\n\nvar ExportAsCommand = Command.extend({\n    init: function(options) {\n        var cmd = this;\n        cmd.options = options;\n        Command.fn.init.call(cmd, options);\n        cmd.attributes = null;\n        cmd.exportType = options.exportType;\n    },\n\n    exec: function() {\n        var cmd = this;\n        var range = this.lockRange(true);\n        cmd.postToProxy();\n        cmd.releaseRange(range);\n    },\n\n    postToProxy: function() {\n        this.generateForm().appendTo('body').submit().remove();\n    },\n\n    generateForm: function() {\n        var cmd = this;\n        var exportAsOptions = cmd.editor.options.exportAs;\n        var form = $('<form>').attr({\n            action: exportAsOptions && exportAsOptions.proxyURL || \"\",\n            method: 'POST'\n        });\n\n        form.append([\n            cmd.valueInput(),\n            cmd.exportTypeInput(),\n            cmd.fileNameInput(),\n            cmd.antiForgeryInput()\n        ]);\n\n        return form;\n    },\n\n    valueInput: function() {\n        var editor = this.editor;\n        return $('<input>').attr({\n            value: editor.encodedValue(),\n            name: 'value',\n            type: 'hidden'\n        });\n    },\n\n    exportTypeInput: function() {\n        var cmd = this;\n        return $('<input>').attr({\n            value: cmd.exportType,\n            name: 'exportType',\n            type: 'hidden'\n        });\n\n    },\n\n    fileNameInput: function() {\n        var editor = this.editor;\n        var exportAsOptions = editor.options.exportAs;\n        var fileName = exportAsOptions && exportAsOptions.fileName || editor.element.attr(\"id\") || \"editor\";\n        return $('<input>').attr({\n            value: fileName,\n            name: 'fileName',\n            type: 'hidden'\n        });\n    },\n\n    antiForgeryInput: function() {\n        var csrf_param = $(\"meta[name=csrf-param],meta[name=_csrf_header]\").attr(\"content\");\n\n        return $(\"input[name^='__RequestVerificationToken']\").clone()\n                    .add($(\"input[name^='\" + csrf_param + \"']\").clone());\n    }\n});\n\nvar ExportAsTool = Tool.extend({\n    init: function(options) {\n        var tool = this;\n        Tool.fn.init.call(tool, kendo.deepExtend({}, tool.options, options));\n        tool.type = 'kendoDropDownList';\n    },\n\n    options: {\n        items: defaultExportAsItems\n    },\n\n    command: function(args) {\n        var value = args.value;\n        return new Editor.ExportAsCommand({\n            range: args.range,\n            exportType: value.exportType\n        });\n    },\n\n    initialize: function(ui, editor) {\n        var tool = this,\n            component = ui.getKendoDropDownList();\n\n        tool.editor = editor;\n\n        component.bind(\"change\", this.changeHandler.bind(this));\n    },\n\n    changeHandler: function(e) {\n        this._exec(e.sender.value());\n        e.sender.value(null);\n        e.sender.wrapper.find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    update: function(ui, editor) {\n        var component = ui.data(\"kendoDropDownList\");\n\n        component.close();\n        component.value(null);\n        ui.closest(\".k-dropdownlist\").find(\".k-export-tool-text\").text(kendo.htmlEncode(this.editor.options.messages.exportAs));\n    },\n\n    _exec: function(value) {\n        if (value) {\n            Tool.exec(this.editor, this.options.name, { exportType: value } );\n        }\n    },\n\n    destroy: function() {\n        this._ancestor = null;\n    }\n});\n\nextend(Editor, {\n    ExportAsTool: ExportAsTool,\n    ExportAsCommand: ExportAsCommand\n});\n\nregisterTool('exportAs', new ExportAsTool({\n    ui: {\n        type: \"component\",\n        overflow: \"never\",\n        component: \"DropDownList\",\n        componentOptions: {\n            dataTextField: \"text\",\n            dataValueField: \"value\",\n            valuePrimitive: true,\n            value: null,\n            width: \"140px\",\n            highlightFirst: false,\n            autoWidth: true,\n            itemTemplate: (data) => `<span class=\\\"k-link k-menu-link\\\" data-value=\\\"${data.value}\\\">${data.text}</strong></span>`,\n            icon: \"export\",\n            valueTemplate: () => `<span class=\"k-editor-export\">${kendo.ui.icon({ icon: \"export\", iconClass: \"k-button-icon\" })}<span class=\"k-export-tool-text\"></span></span>`\n        }\n    }\n}));\n\n}(window.kendo.jQuery));\n\n(function($, undefined$1) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    EditorUtils = Editor.EditorUtils,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command,\n    Tool = Editor.Tool,\n    RangeUtils = Editor.RangeUtils,\n    blockElements = dom.blockElements,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatter = Editor.BlockFormatter;\n\nfunction indent(node, value) {\n    var isRtl = $(node).css(\"direction\") == \"rtl\",\n        indentDirection = isRtl ? \"Right\" : \"Left\",\n        property = dom.name(node) != \"td\" ? \"margin\" + indentDirection : \"padding\" + indentDirection;\n    if (value === undefined$1) {\n        return node.style[property] || 0;\n    } else {\n        if (value > 0) {\n            node.style[property] = value + \"px\";\n        } else {\n            node.style[property] = \"\";\n\n            if (!node.style.cssText) {\n                node.removeAttribute(\"style\");\n            }\n        }\n    }\n}\n\nvar IndentFormatter = Class.extend({\n    init: function() {\n        this.finder = new BlockFormatFinder([{ tags: dom.blockElements }]);\n    },\n\n    apply: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targets = [],\n            i, len, formatNode, parentList, sibling;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        if (formatNodes.length) {\n            for (i = 0, len = formatNodes.length; i < len; i++) {\n                if (dom.is(formatNodes[i], \"li\")) {\n                    if (!$(formatNodes[i]).index()) {\n                        targets.push(formatNodes[i].parentNode);\n                    } else if ($.inArray(formatNodes[i].parentNode, targets) < 0) {\n                        targets.push(formatNodes[i]);\n                    }\n                } else {\n                    targets.push(formatNodes[i]);\n                }\n            }\n\n            while (targets.length) {\n                formatNode = targets.shift();\n                if (dom.is(formatNode, \"li\")) {\n                    parentList = formatNode.parentNode;\n                    sibling = $(formatNode).prev(\"li\");\n                    var siblingList = sibling.find(\"ul,ol\").last();\n\n                    var nestedList = $(formatNode).children(\"ul,ol\")[0];\n\n                    if (nestedList && sibling[0]) {\n                        if (siblingList[0]) {\n                           siblingList.append(formatNode);\n                           siblingList.append($(nestedList).children());\n                           dom.remove(nestedList);\n                        } else {\n                            sibling.append(nestedList);\n                            nestedList.insertBefore(formatNode, nestedList.firstChild);\n                        }\n                    } else {\n                        nestedList = sibling.children(\"ul,ol\")[0];\n                        if (!nestedList) {\n                            nestedList = dom.create(formatNode.ownerDocument, dom.name(parentList), this.getListTypeAttr(parentList));\n                            sibling.append(nestedList);\n                        }\n\n                        while (formatNode && formatNode.parentNode == parentList) {\n                            nestedList.appendChild(formatNode);\n                            formatNode = targets.shift();\n                        }\n                    }\n                } else {\n                    var marginLeft = parseInt(indent(formatNode), 10) + 30;\n                    indent(formatNode, marginLeft);\n\n                    for (var targetIndex = 0; targetIndex < targets.length; targetIndex++) {\n                        if ($.contains(formatNode, targets[targetIndex])) {\n                            targets.splice(targetIndex, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            var formatter = new BlockFormatter([{ tags: [\"p\"] }], { style: { marginLeft: 30 } });\n\n            formatter.apply(nodes);\n        }\n    },\n\n    getListTypeAttr: function(list) {\n        var type = list.getAttribute(\"type\");\n        var styleType = list.style.listStyleType;\n\n        return type ? { type: type } : { style: { listStyleType: styleType } };\n    },\n\n    mapImmutables: function(nodes) {\n        if (!this.immutables) {\n            return nodes;\n        } else {\n            var immutables = [];\n            return $.map(nodes, function(node) {\n                var immutable = Editor.Immutables.immutableParent(node);\n                if (immutable) {\n                    if ($.inArray(immutable, immutables) === -1) {\n                        immutables.push(immutable);\n                    } else {\n                        return null;\n                    }\n                }\n                return immutable || node;\n            });\n        }\n    },\n\n    remove: function(nodes) {\n        nodes = dom.filterBy(nodes, dom.htmlIndentSpace, true);\n        var formatNodes = this.finder.findSuitable(nodes),\n            targetNode, i, len, list, listParent, siblings,\n            formatNode, marginLeft;\n\n        formatNodes = this.mapImmutables(formatNodes);\n\n        for (i = 0, len = formatNodes.length; i < len; i++) {\n            formatNode = $(formatNodes[i]);\n\n            if (formatNode.is(\"li\")) {\n                list = formatNode.parent();\n                listParent = list.parent();\n                // listParent will be ul or ol in case of invalid dom - <ul><li></li><ul><li></li></ul></ul>\n                if (listParent.is(\"li,ul,ol\") && !indent(list[0])) {\n                    // skip already processed nodes\n                    if (targetNode && $.contains(targetNode, listParent[0])) {\n                        continue;\n                    }\n\n                    siblings = formatNode.nextAll(\"li\");\n                    if (siblings.length) {\n                        $(list[0].cloneNode(false)).appendTo(formatNode).append(siblings);\n                    }\n\n                    if (listParent.is(\"li\")) {\n                        formatNode.insertAfter(listParent);\n                    } else {\n                        formatNode.appendTo(listParent);\n                    }\n\n                    if (!list.children(\"li\").length) {\n                        list.remove();\n                    }\n\n                    continue;\n                } else {\n                    if (targetNode == list[0]) {\n                        // removing format on sibling LI elements\n                        continue;\n                    }\n                    targetNode = list[0];\n                }\n            } else {\n                targetNode = formatNodes[i];\n            }\n\n            marginLeft = parseInt(indent(targetNode), 10) - 30;\n            indent(targetNode, marginLeft);\n        }\n    }\n\n});\n\nvar IndentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = /** @ignore */ {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.apply(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        options.formatter = {\n            toggle: (function(range) {\n                var indentFormatter = new IndentFormatter();\n                indentFormatter.immutables = this.editor && this.editor.options.immutables;\n                indentFormatter.remove(RangeUtils.nodes(range));\n            }).bind(that)\n        };\n        Command.fn.init.call(this, options);\n    }\n});\n\nvar OutdentTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n\n        this.finder = new BlockFormatFinder([{ tags: blockElements }]);\n    },\n\n    initialize: function(ui, editor) {\n        $.extend(this.options, {\n            immutables: editor && editor.options.immutables\n        });\n    },\n\n    update: function(ui, nodes) {\n        var suitableNodes = this.finder.findSuitable(nodes),\n            toolbar = ui.closest(\".k-toolbar\").data(\"kendoToolBar\"),\n            isOutdentable, listParentsCount, i, len, suitable, immutableParent;\n\n        for (i = 0, len = suitableNodes.length; i < len; i++) {\n            suitable = suitableNodes[i];\n\n            if (this.options.immutables) {\n                immutableParent = Editor.Immutables.immutableParent(suitable);\n\n                if (immutableParent) {\n                    suitable = immutableParent;\n                }\n            }\n\n            isOutdentable = indent(suitable);\n\n            if (!isOutdentable) {\n                listParentsCount = $(suitable).parents(\"ul,ol\").length;\n                isOutdentable = (dom.is(suitable, \"li\") && (listParentsCount > 1 || indent(suitable.parentNode))) ||\n                                (dom.ofType(suitable, [\"ul\",\"ol\"]) && listParentsCount > 0);\n            }\n\n            if (isOutdentable) {\n                toolbar.enable(ui, true);\n                return;\n            }\n        }\n\n        toolbar.enable(ui, false);\n    }\n});\n\nextend(Editor, {\n    IndentFormatter: IndentFormatter,\n    IndentCommand: IndentCommand,\n    OutdentCommand: OutdentCommand,\n    OutdentTool: OutdentTool\n});\n\nregisterTool(\"indent\", new Tool({ command: IndentCommand }));\nregisterTool(\"outdent\", new OutdentTool({ command: OutdentCommand, ui: { enable: false } }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    extend = $.extend,\n    editorNS = kendo.ui.editor,\n    dom = editorNS.Dom,\n    Command = editorNS.Command,\n    Tool = editorNS.Tool,\n    BlockFormatter = editorNS.BlockFormatter,\n    normalize = dom.normalize,\n    RangeUtils = editorNS.RangeUtils,\n    registerTool = editorNS.EditorUtils.registerTool;\n\nvar ParagraphCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    _insertMarker: function(doc, range) {\n        var marker = dom.create(doc, 'a'), container;\n        marker.className = \"k-marker\";\n\n        range.insertNode(marker);\n\n        if (!marker.parentNode) {\n            // inserting paragraph in Firefox full body range\n            container = range.commonAncestorContainer;\n            container.innerHTML = \"\";\n            container.appendChild(marker);\n        }\n\n        normalize(marker.parentNode);\n\n        return marker;\n    },\n\n    _moveFocus: function(range, candidate) {\n        if (dom.isEmpty(candidate)) {\n            range.setStartBefore(candidate);\n        } else {\n            range.selectNodeContents(candidate);\n\n            var focusNode = RangeUtils.textNodes(range)[0];\n\n            if (!focusNode) {\n                while (candidate.childNodes.length && !dom.is(candidate.firstChild, \"br\")) {\n                    candidate = candidate.firstChild;\n                }\n\n                focusNode = candidate;\n            }\n\n            if (dom.isEmpty(focusNode)) {\n                range.setStartBefore(focusNode);\n            } else {\n                if (dom.emptyNode(focusNode)) {\n                    focusNode.innerHTML = \"\\ufeff\";\n                }\n                var startNode = focusNode.firstChild || focusNode;\n                if (dom.isDataNode(startNode)) {\n                    range.setStart(startNode, 0);\n                } else {\n                    range.setStartBefore(startNode);\n                }\n            }\n        }\n    },\n\n    shouldTrim: function(range) {\n        var blocks = 'p,h1,h2,h3,h4,h5,h6'.split(','),\n            startInBlock = dom.parentOfType(range.startContainer, blocks),\n            endInBlock = dom.parentOfType(range.endContainer, blocks);\n        return (startInBlock && !endInBlock) || (!startInBlock && endInBlock);\n    },\n\n    _blankAfter: function(node) {\n        while (node && (dom.isMarker(node) || dom.stripBom(node.nodeValue) === \"\")) {\n            node = node.nextSibling;\n        }\n\n        return !node;\n    },\n\n    exec: function() {\n        var range = this.getRange(),\n            doc = RangeUtils.documentFromRange(range),\n            parent, previous, next,\n            emptyParagraphContent = editorNS.emptyElementContent,\n            paragraph, marker, li, heading, tableNode, rng,\n            shouldTrim;\n\n        this.expandImmutablesIn(range);\n\n        shouldTrim = this.shouldTrim(range);\n\n        range.deleteContents();\n        marker = this._insertMarker(doc, range);\n\n        dom.stripBomNode(marker.previousSibling);\n        dom.stripBomNode(marker.nextSibling);\n\n        li = dom.closestEditableOfType(marker, ['li']);\n        heading = dom.closestEditableOfType(marker, 'h1,h2,h3,h4,h5,h6'.split(','));\n        tableNode = dom.is(marker.parentNode, 'table') && marker.parentNode;\n\n        if (li) {\n            // hitting 'enter' in empty li\n            if (dom.emptyNode(li)) {\n                paragraph = dom.create(doc, 'p');\n\n                if (dom.next(li)) {\n                    rng = range.cloneRange();\n                    rng.selectNode(li);\n\n                    RangeUtils.split(rng, li.parentNode);\n                }\n\n                var br = $(\"br\", li);\n                if (br.length == 1) {\n                    br.remove();\n                }\n\n                var parentNode = li.parentNode;\n                var parentChildrenLength = li.parentNode.children.length;\n                var firstChild = parentChildrenLength > 1 && li.childNodes.length == 1 && li.children[0];\n\n                dom.insertAfter(paragraph, parentNode);\n                dom.remove(parentChildrenLength == 1 ? li.parentNode : li);\n\n                if (firstChild && firstChild !== marker) {\n                    paragraph.appendChild(firstChild);\n                    paragraph.appendChild(marker);\n                } else {\n                    paragraph.innerHTML = emptyParagraphContent;\n                }\n                next = paragraph;\n            }\n        } else if (heading && this._blankAfter(marker)) {\n            paragraph = this._insertParagraphAfter(heading);\n            dom.remove(marker);\n            next = paragraph;\n        } else if (tableNode) {\n            paragraph = this._insertParagraphAfter(tableNode);\n            dom.remove(marker);\n            next = paragraph;\n        }\n\n        if (!next) {\n            if (!(li || heading)) {\n                new BlockFormatter([{ tags: ['p'] }]).apply([marker]);\n            }\n\n            range.selectNode(marker);\n\n            parent = dom.parentOfType(marker, [li ? 'li' : heading ? dom.name(heading) : 'p']);\n\n            RangeUtils.split(range, parent, shouldTrim);\n\n            previous = parent.previousSibling;\n\n            if (dom.is(previous, 'li') && previous.firstChild && !dom.is(previous.firstChild, 'br')) {\n                previous = previous.firstChild;\n            }\n\n            next = parent.nextSibling;\n\n            this.clean(previous, { links: true });\n            this.clean(next, { links: true });\n\n            if (dom.is(next, 'li') && next.firstChild && !dom.is(next.firstChild, 'br')) {\n                next = next.firstChild;\n            }\n\n            dom.remove(parent);\n\n            // normalize updates the caret display in Gecko\n            normalize(previous);\n        }\n\n        normalize(next);\n\n        this._moveFocus(range, next);\n\n        range.collapse(true);\n\n        dom.scrollTo(next, true);\n\n        RangeUtils.selectRange(range);\n    },\n\n    _insertParagraphAfter: function(node) {\n        var range = this.getRange();\n        var doc = RangeUtils.documentFromRange(range);\n        var emptyElementContent = editorNS.emptyElementContent;\n        var paragraph = dom.create(doc, 'p');\n\n        dom.insertAfter(paragraph, node);\n        paragraph.innerHTML = emptyElementContent;\n\n        return paragraph;\n    },\n\n    clean: function(node, options) {\n        var root = node;\n\n        if (node.firstChild && dom.is(node.firstChild, 'br')) {\n            dom.remove(node.firstChild);\n        }\n\n        if (dom.isDataNode(node) && !node.nodeValue) {\n            node = node.parentNode;\n        }\n\n        if (node) {\n            var siblings = false;\n            while (node.firstChild && node.firstChild.nodeType == 1) {\n                siblings = siblings || (dom.significantNodes(node.childNodes).length > 1);\n                node = node.firstChild;\n            }\n\n            if (!dom.isEmpty(node) && node.className != \"k-br\" && /^\\s*$/.test(node.innerHTML) && !siblings) {\n                $(root).find(\".k-br\").remove();\n                node.innerHTML = editorNS.emptyElementContent;\n            }\n\n            if (options && options.links) {\n                while (node != root) {\n                    if (dom.is(node, \"a\") && dom.emptyNode(node)) {\n                        dom.unwrap(node);\n                        break;\n                    }\n                    node = node.parentNode;\n                }\n            }\n        }\n    }\n});\n\nvar NewLineCommand = Command.extend({\n    init: function(options) {\n        this.options = options;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.getRange();\n        this.expandImmutablesIn(range);\n\n        var br = dom.create(RangeUtils.documentFromRange(range), 'br');\n        var node = range.startContainer;\n        var filler;\n        var browser = kendo.support.browser;\n        var oldIE = browser.msie && browser.version < 11;\n        var tableNode = dom.is(node, 'table') && node;\n        var kbrParent;\n\n        range.deleteContents();\n        if (tableNode) {\n            dom.insertAfter(br, tableNode);\n        } else {\n            kbrParent = $(node).closest('.k-br');\n            range.insertNode(br);\n\n            if (kbrParent.length) {\n                // pressing enter in an k-br node\n                dom.unwrap(kbrParent[0]);\n            }\n        }\n\n        normalize(br.parentNode);\n\n        if (!oldIE && (!br.nextSibling || dom.isWhitespace(br.nextSibling))) {\n            // Gecko and WebKit cannot put the caret after only one br.\n            if (!!br.nextSibling && dom.isWhitespace(br.nextSibling)) {\n                $(br.nextSibling).remove();\n            }\n            filler = br.cloneNode(true);\n            filler.className = 'k-br';\n            dom.insertAfter(filler, br);\n        }\n\n        range.setStartAfter(br);\n        range.collapse(true);\n\n        dom.scrollTo(br.nextSibling || br, true);\n\n        RangeUtils.selectRange(range);\n    }\n});\n\nextend(editorNS, {\n    ParagraphCommand: ParagraphCommand,\n    NewLineCommand: NewLineCommand\n});\n\nregisterTool(\"insertLineBreak\", new Tool({ key: 13, shift: true, command: NewLineCommand }));\nregisterTool(\"insertParagraph\", new Tool({ key: 13, command: ParagraphCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    encode = kendo.htmlEncode,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n    LinkFormatter = Editor.LinkFormatter,\n    textNodes = RangeUtils.textNodes,\n    keys = kendo.keys,\n    KEDITORFILEURL = \"#k-editor-file-url\",\n    KEDITORFILETEXT = \"#k-editor-file-text\",\n    KEDITORFILETITLE = \"#k-editor-file-title\";\n\nvar FileCommand = Command.extend({\n    init: function(options) {\n        var that = this;\n        Command.fn.init.call(that, options);\n\n        that.formatter = new LinkFormatter();\n\n        that.async = true;\n        that.attributes = {};\n    },\n\n    insertFile: function(file, range) {\n        var attributes = this.attributes;\n        var doc = RangeUtils.documentFromRange(range);\n\n        if (attributes.href && attributes.href != \"http://\") {\n\n            if (!file) {\n                file = dom.create(doc, \"a\", { href: attributes.href });\n                file.innerHTML = attributes.innerHTML;\n                file.title = attributes.title;\n\n                range.deleteContents();\n                range.insertNode(file);\n\n                if (!file.nextSibling) {\n                    dom.insertAfter(doc.createTextNode(\"\\ufeff\"), file);\n                }\n\n                range.setStartAfter(file);\n                range.setEndAfter(file);\n                RangeUtils.selectRange(range);\n                return true;\n            } else {\n                dom.attr(file, attributes);\n            }\n        }\n\n        return false;\n    },\n\n    redo: function() {\n        var that = this,\n            range = that.lockRange();\n\n        this.formatter.apply(range, this.attributes);\n        that.releaseRange(range);\n    },\n\n    exec: function() {\n        var that = this,\n            range = that.lockRange(),\n            nodes = textNodes(range),\n            applied = false,\n            file = nodes.length ? this.formatter.finder.findSuitable(nodes[0]) : null,\n            dialog,\n            form,\n            isIE = kendo.support.browser.msie,\n            options = that.editor.options,\n            messages = options.messages,\n            fileBrowser = options.fileBrowser,\n            showBrowser = !!(kendo.ui.FileBrowser && fileBrowser && fileBrowser.transport && fileBrowser.transport.read !== undefined$1),\n            dialogOptions = {\n                title: messages.insertFile,\n                visible: false,\n                resizable: showBrowser\n            };\n\n        this.expandImmutablesIn(range);\n\n        function apply(e) {\n            var element = dialog.element,\n                href = element.find(KEDITORFILEURL).val().replace(/ /g, \"%20\"),\n                innerHTML = element.find(KEDITORFILETEXT).val(),\n                title = element.find(KEDITORFILETITLE).val();\n\n            that.attributes = {\n                href: href,\n                innerHTML: innerHTML !== \"\" ? innerHTML : href,\n                title: title\n            };\n\n            applied = that.insertFile(file, range);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n        }\n\n        function close(e) {\n            e.preventDefault();\n            form.destroy();\n            dialog.destroy();\n\n            dom.windowFromDocument(RangeUtils.documentFromRange(range)).focus();\n            if (!applied) {\n                that.releaseRange(range);\n            }\n        }\n\n        function keyDown(e) {\n            if (e.keyCode == keys.ENTER) {\n                apply(e);\n            } else if (e.keyCode == keys.ESC) {\n                close(e);\n            }\n        }\n\n        dialogOptions.close = close;\n\n        if (showBrowser) {\n            dialogOptions.width = 750;\n        }\n        dialogOptions.minWidth = 350;\n\n        dialog = this.createDialog(\"<div/>\", dialogOptions).data(\"kendoWindow\");\n        form = that._createForm(dialog, showBrowser);\n\n        dialog.element.toggleClass(\"k-filebrowser-dialog\", showBrowser);\n        dialog.wrapper\n        .find(\".k-dialog-insert\").on(\"click\", apply).end()\n        .find(\".k-dialog-close\").on(\"click\", close).end()\n        .find(\".k-form-field input\").on(\"keydown\", keyDown).end()\n        // IE < 8 returns absolute url if getAttribute is not used\n        .find(KEDITORFILEURL).val(file ? file.getAttribute(\"href\", 2) : \"http://\").end()\n        .find(KEDITORFILETEXT).val(file ? file.innerText : \"\").end()\n        .find(KEDITORFILETITLE).val(file ? file.title : \"\").end();\n\n        var element = dialog.element;\n        if (showBrowser) {\n            that._fileBrowser = new kendo.ui.FileBrowser(\n                element.find(\".k-filebrowser\"),\n                extend({}, fileBrowser)\n            );\n\n            that._fileBrowser.bind(\"change\", function(ev) {\n                if (ev.selected.get(\"type\") === \"f\") {\n                    element.find(KEDITORFILEURL).val(this.value());\n                }\n            } );\n\n            that._fileBrowser.bind(\"apply\", apply);\n        }\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n        dialog.center().open();\n        element.find(KEDITORFILEURL).trigger(\"focus\").select();\n    },\n\n    _createForm: function(dialog, showBrowser) {\n        var that = this;\n        var formElement = $(\"<div/>\").appendTo(dialog.element);\n        var messages = that.editor.options.messages;\n\n        var form = formElement.kendoForm({\n            renderButtons: false,\n            items: [\n                {\n                    field: \"k-editor-file-url\",\n                    label: encode(messages.fileWebAddress),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-text\",\n                    label: encode(messages.fileText),\n                    editor: \"TextBox\"\n                },\n                {\n                    field: \"k-editor-file-title\",\n                    label: encode(messages.fileTitle),\n                    editor: \"TextBox\"\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        if (showBrowser) {\n            formElement.prepend($('<div class=\"k-filebrowser\"></div>'));\n        }\n\n        dialog.element.after($(that._actionButtonsTemplate({ messages, insertButtonIcon: \"file-add\", cancelButtonIcon: \"cancel-outline\" })));\n\n        return form;\n    }\n\n});\n\nkendo.ui.editor.FileCommand = FileCommand;\n\nregisterTool(\"insertFile\", new Editor.Tool({ command: FileCommand }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    extend = $.extend,\n    Editor = kendo.ui.editor,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    Command = Editor.Command,\n\n    NS = \"kendoEditor\",\n    ACTIVESTATE = \"k-active\",\n    SELECTEDSTATE = \"k-selected\",\n    SCOPE = \"scope\",\n    ROW = \"row\",\n    COL = \"col\",\n    ROWGROUP = \"rowgroup\",\n    COLGROUP = \"colgroup\",\n    COLSPAN = \"colspan\",\n    ROWSPAN = \"rowspan\",\n    TABLE = \"table\",\n    THEAD = \"thead\",\n    TBODY = \"tbody\",\n    TR = \"tr\",\n    TD = \"td\",\n    TH = \"th\",\n\n    Tool = Editor.Tool,\n    InsertHtmlCommand = Editor.InsertHtmlCommand,\n    BlockFormatFinder = Editor.BlockFormatFinder,\n    BlockFormatTool = Editor.BlockFormatTool,\n    FormatCommand = Editor.FormatCommand,\n    registerTool = Editor.EditorUtils.registerTool,\n    registerFormat = Editor.EditorUtils.registerFormat,\n    formats = kendo.ui.Editor.fn.options.formats,\n    getTouches = kendo.getTouches;\nvar template = kendo.template;\n\nvar columnTemplate = ({ width, content }) => `<td style=\"width:${width}%;\">${content}</td>`;\n\nvar tableFormatFinder = new BlockFormatFinder([{ tags: [TABLE] }]);\n\nvar TableCommand = InsertHtmlCommand.extend({\n    init: function(options) {\n        var o = $.extend({\n            postProcess: this.postProcess,\n            skipCleaners: true\n        }, options || {});\n\n        InsertHtmlCommand.fn.init.call(this, o);\n    },\n    _tableHtml: function(rows, columns) {\n        rows = rows || 1;\n        columns = columns || 1;\n        var columnHtml = template(columnTemplate)({ width: 100 / columns, content: Editor.emptyTableCellContent });\n        var rowHeight = 100 / rows;\n\n        return \"<table class='k-table' data-last>\" +\n                    new Array(rows + 1).join(\n                    \"<tr style='height:\" + rowHeight + \"%;'>\" +\n                        new Array(columns + 1).join(columnHtml) +\n                    \"</tr>\") +\n               \"</table>\";\n    },\n\n    postProcess: function(editor, range) {\n        var insertedTable = $(\"table[data-last]\", editor.document).removeAttr(\"data-last\");\n\n        range.setStart(insertedTable.find(TD)[0], 0);\n        range.collapse(true);\n\n        editor.selectRange(range);\n    },\n\n    exec: function() {\n        var options = this.options;\n        options.html = this._tableHtml(options.rows, options.columns);\n\n        InsertHtmlCommand.fn.exec.call(this);\n    }\n});\n\nvar PopupTool = Tool.extend({\n    initialize: function(ui, editor) {\n        var that = this;\n        var btn = $(\"<button>\" + editor.options.messages.tableWizard + \"</button>\");\n        var popup = $(this.options.popupTemplate).appendTo(\"body\").kendoPopup({\n            anchor: ui,\n            copyAnchorStyles: false,\n            open: this._open.bind(this),\n            activate: this._activate.bind(this),\n            close: this._close.bind(this)\n        }).data(\"kendoPopup\");\n\n        ui.on(\"click\", this._toggle.bind(this))\n          .on(\"keydown\", this._keydown.bind(this));\n\n        this._editor = editor;\n        this._popup = popup;\n\n        editor.tablePopup = this._popup;\n\n        var tableWizard = new Editor.TableWizardTool({\n            command: Editor.TableWizardCommand,\n            insertNewTable: true\n        });\n\n        registerTool(\"tableWizardInsert\", tableWizard);\n\n        btn.appendTo(popup.element);\n        btn.kendoButton({\n            icon: \"table-wizard\"\n        });\n\n        btn.on(\"click\", () => {\n            that._editor.exec(\"tableWizardInsert\");\n        });\n    },\n\n    popup: function() {\n        return this._popup;\n    },\n\n    _activate: $.noop,\n\n    _open: function() {\n        this._popup.options.anchor.addClass(ACTIVESTATE);\n    },\n\n    _close: function() {\n        this._popup.options.anchor.removeClass(ACTIVESTATE);\n    },\n\n    _keydown: function(e) {\n        var that = this,\n            keys = kendo.keys,\n            key = e.keyCode;\n\n        if (key == keys.ESC) {\n            that._popup.close();\n        } else if (key == keys.DOWN && e.altKey) {\n            that._popup.open();\n            that._setTableSize({ row: 1, col: 1 });\n        } else if (key === keys.ENTER) {\n            setTimeout(() => {\n                that._setTableSize({ row: 1, col: 1 });\n            });\n        }\n    },\n\n    _toggle: function(e) {\n        var button = $(e.target).closest(\".k-tool\");\n\n        if (!button.hasClass(\"k-disabled\")) {\n            this.popup().toggle();\n        }\n    },\n\n    update: function(ui) {\n        var popup = this.popup();\n\n        if (popup.wrapper && popup.wrapper.css(\"display\") == \"block\") {\n            popup.close();\n        }\n\n        ui.removeClass(\"k-hover\");\n    },\n\n    destroy: function() {\n        if (this._popup) {\n            this._popup.destroy();\n        }\n    }\n});\n\nvar InsertTableTool = PopupTool.extend({\n    init: function(options) {\n        this.cols = 8;\n        this.rows = 6;\n\n        PopupTool.fn.init.call(this, $.extend(options, {\n            command: TableCommand,\n            popupTemplate:\n                \"<div class='k-ct-popup'>\" +\n                    \"<div>\" +\n                        new Array(this.cols * this.rows + 1).join(\"<span class='k-ct-cell k-disabled'></span>\") +\n                    \"</div>\" +\n                    \"<div class='k-status'></div>\" +\n                \"</div>\"\n        }));\n    },\n\n    _activate: function() {\n        var that = this,\n            element = that._popup.element,\n            cells = element.find(\".k-ct-cell\"),\n            firstCell = cells.eq(0),\n            lastCell = cells.eq(cells.length - 1),\n            start = kendo.getOffset(firstCell),\n            end = kendo.getOffset(lastCell),\n            cols = that.cols,\n            rows = that.rows,\n            cellWidth, cellHeight;\n\n        element.find(\"*\").addBack().attr(\"unselectable\", \"on\");\n\n        end.left += lastCell[0].offsetWidth;\n        end.top += lastCell[0].offsetHeight;\n\n        cellWidth = (end.left - start.left) / cols;\n        cellHeight = (end.top - start.top) / rows;\n\n        function tableFromLocation(e) {\n            var w = $(window);\n            return {\n                row: Math.floor((e.clientY + w.scrollTop() - start.top) / cellHeight) + 1,\n                col: Math.floor((e.clientX + w.scrollLeft() - start.left) / cellWidth) + 1\n            };\n        }\n\n        element.autoApplyNS(NS)\n            .on(\"mousemove\", \".k-ct-cell\", function(e) {\n                that._setTableSize(tableFromLocation(e));\n            })\n            .on(\"mouseleave\", \".k-ct-cell\", function() {\n                that._setTableSize();\n            })\n            .on(\"down\", \".k-ct-cell\", function(e) {\n                e.preventDefault();\n                var touch = getTouches(e)[0];\n                that._exec(tableFromLocation(touch.location));\n            });\n    },\n\n    _valid: function(size) {\n        return size && size.row > 0 && size.col > 0 && size.row <= this.rows && size.col <= this.cols;\n    },\n\n    _exec: function(size) {\n        if (this._valid(size)) {\n            this._editor.exec(\"createTable\", {\n                rows: size.row,\n                columns: size.col\n            });\n            this._popup.close();\n        }\n    },\n\n    _setTableSize: function(size) {\n        var element = this._popup.element;\n        var status = element.find(\".k-status\");\n        var cells = element.find(\".k-ct-cell\");\n        var cols = this.cols;\n        var messages = this._editor.options.messages;\n\n        if (this._valid(size)) {\n            status.text(kendo.format(messages.createTableHint, size.row, size.col));\n\n            cells.each(function(i) {\n                $(this).toggleClass(\n                    SELECTEDSTATE,\n                    i % cols < size.col && i / cols < size.row\n                );\n            });\n        } else {\n            status.text(messages.createTable);\n            cells.removeClass(SELECTEDSTATE);\n        }\n    },\n\n    _keydown: function(e) {\n        var initiallyVisible = this._popup.visible();\n\n        PopupTool.fn._keydown.call(this, e);\n\n        if (!this._popup.visible()) {\n            return;\n        }\n\n        var keys = kendo.keys;\n        var key = e.keyCode;\n        var cells = this._popup.element.find(\".k-ct-cell\");\n        var focus = Math.max(cells.filter(\".k-selected\").last().index(), 0);\n        var selectedRows = Math.floor(focus / this.cols);\n        var selectedColumns = focus % this.cols;\n\n        var changed = false,\n            button;\n\n        if (key == keys.DOWN && !e.altKey) {\n            changed = true;\n            selectedRows++;\n        } else if (key == keys.UP) {\n            changed = true;\n            selectedRows--;\n        } else if (key == keys.RIGHT) {\n            changed = true;\n            selectedColumns++;\n        } else if (key == keys.LEFT) {\n            changed = true;\n            selectedColumns--;\n        } else if (key == keys.TAB) {\n            button = this._popup.element.find(\".k-button\");\n\n            if (button.length > 0) {\n                changed = true;\n                button.trigger(\"focus\");\n            }\n        }\n\n        var tableSize = {\n            row: Math.max(1, Math.min(this.rows, selectedRows + 1)),\n            col: Math.max(1, Math.min(this.cols, selectedColumns + 1))\n        };\n\n        if (key == keys.ENTER && initiallyVisible) {\n            this._exec(tableSize);\n        } else {\n            this._setTableSize(tableSize);\n        }\n\n        if (changed) {\n            e.preventDefault();\n            e.stopImmediatePropagation();\n        }\n    },\n\n    _open: function() {\n        var messages = this._editor.options.messages;\n\n        PopupTool.fn._open.call(this);\n\n        this.popup().element\n            .find(\".k-status\").text(messages.createTable).end()\n            .find(\".k-ct-cell\").removeClass(SELECTEDSTATE);\n    },\n\n    _close: function() {\n        PopupTool.fn._close.call(this);\n        this.popup().element.off(\".\" + NS);\n    }\n});\n\nvar TableModificationCommand = Command.extend({\n    undo: function() {\n        var point = this.restorePoint;\n        point.restoreHtml();\n\n        $(this.editor.body).find(\".k-element-resize-handle-wrapper\")\n            .each(function(index,el) {\n                el.remove();\n            });\n\n        this.editor.selectRange(point.toRange());\n    },\n    _clearColIndexAttr: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n    },\n    _mapColIndices: function(table) {\n        dom.reMapTableColumns(table, \"col-index\");\n    },\n    _findRowSpanCell: function(parent, rowIndex, colIndex) {\n        var row, cell;\n\n        for (var i = rowIndex; i >= 0; i--) {\n            row = parent.rows[i];\n            cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n            if (cell.length) {\n                return cell;\n            }\n        }\n    },\n    _resetElementResizing: function(editor) {\n        editor._destroyResizings();\n        editor._initializeColumnResizing();\n        editor._initializeRowResizing();\n        editor._initializeElementResizing();\n    },\n    _findNextTdInRow: function(row, colIndex) {\n        var lastTd = row.find(\"td:last-child\"),\n            lastIndex = parseInt(lastTd.attr(\"col-index\"), 10) + lastTd.prop(\"colSpan\") - 1,\n            td;\n\n        for (var i = colIndex; i <= lastIndex; i++) {\n            td = row.find(\"[col-index=\" + i + \"]\");\n            if (td.length) {\n                return td;\n            }\n        }\n    },\n    _adjustColgroups: function(row, table) {\n        var colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            cells = row.cells,\n            numberOfCells = cells.length,\n            i, colgroup, cell;\n\n        while (colElements.length > 0) {\n            colElements[0].remove();\n        }\n        while (colgroupElements.length > 0) {\n            colgroupElements[0].remove();\n        }\n\n        for (i = numberOfCells - 1; i >= 0; i--) {\n            cell = cells[i];\n            if (cell.getAttribute(SCOPE) === COLGROUP) {\n                colgroup = dom.createEmptyNode(this.editor.document, COLGROUP);\n                colgroup.setAttribute(\"span\", cell.getAttribute(COLSPAN));\n                table.prepend(colgroup);\n            } else {\n                table.prepend(dom.createEmptyNode(this.editor.document, COL));\n            }\n        }\n    },\n    _associateHeaderIds: function(table) {\n        dom.clearTableMappings(table, \"col-index\");\n        dom.reMapTableColumns(table, \"col-index\");\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n        dom.associateWithIds(table);\n    },\n    _getNumberOfColumns: function(table) {\n        return dom._getNumberOfColumns(table, \"td, th\");\n    }\n});\n\nvar InsertRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            position = this.options.position || \"after\",\n            cellCount, row, cell,\n            newRow, rowIndex, rowSpanIndex, createdCell;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        row = td.parentNode;\n        rowIndex = dom.findNodeIndex(row, true);\n\n        if (td.rowSpan > 1 && position === \"after\") {\n            row = table.rows[rowIndex + td.rowSpan - 1];\n        }\n\n        cellCount = this._getNumberOfColumns(table);\n        newRow = row.cloneNode(true);\n        $(newRow).empty();\n\n        for (var i = 0; i < cellCount; i = i + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                if (cell.prop(\"rowSpan\") > 1 && position === \"after\" && cell) {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                } else {\n                    this._appendCell(newRow, cell);\n                }\n            } else {\n                rowIndex = dom.findNodeIndex(row, true);\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, i);\n                rowSpanIndex = cell.closest(TR).index();\n\n                if (rowSpanIndex + cell.prop(\"rowSpan\") - 1 === rowIndex && position === \"after\") {\n                    this._appendCell(newRow, cell);\n                } else {\n                    cell.attr(ROWSPAN, cell.prop(\"rowSpan\") + 1);\n                }\n            }\n\n            createdCell = $(newRow).find(\"[col-index=\" + i + \"]\");\n            if (createdCell.attr(SCOPE) === ROWGROUP && !createdCell.attr(ROWSPAN)) {\n                createdCell.attr(SCOPE, ROW);\n            }\n        }\n\n        if (position == \"before\") {\n            dom.insertBefore(newRow, row);\n        } else {\n            dom.insertAfter(newRow, row);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _appendCell: function(row, cell) {\n        var newCell;\n\n        newCell = cell.clone();\n        newCell.html(Editor.emptyTableCellContent);\n        newCell.removeAttr(ROWSPAN);\n        newCell.appendTo(row);\n    }\n});\n\nvar InsertColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(true),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            columnIndex,\n            i,\n            rows = table && table.rows,\n            cell,\n            newCell,\n            position = this.options.position || \"after\";\n\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        columnIndex = parseInt(td.getAttribute(\"col-index\"),10);\n\n        if (td.colSpan > 1 && position === \"after\") {\n            td.setAttribute(\"col-index\", columnIndex + td.colSpan - 1);\n            columnIndex = columnIndex + td.colSpan - 1;\n        }\n\n        for (i = 0; i < rows.length; i++) {\n            cell = this._processForColSpan(rows[i], columnIndex, position, td);\n\n            if (!cell) {\n                continue;\n            }\n\n            newCell = cell.cloneNode();\n            newCell.innerHTML = Editor.emptyTableCellContent;\n            newCell.removeAttribute(COLSPAN);\n\n            if (newCell.getAttribute(SCOPE) && newCell.getAttribute(SCOPE) === COLGROUP) {\n                newCell.setAttribute(SCOPE, COL);\n            }\n\n            if (position == \"before\") {\n                dom.insertBefore(newCell, cell);\n            } else {\n                dom.insertAfter(newCell, cell);\n            }\n\n            this._resizeCells(newCell, cell);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n\n        this._resetElementResizing(this.editor);\n    },\n    _processForColSpan: function(row, columnIndex, position, selectedCell) {\n        var cell,\n            colSpanEffect,\n            index = columnIndex - 1;\n\n        cell = $(row).find(\"[col-index=\" + columnIndex + \"]\")[0];\n\n        if (cell && cell.colSpan > 1 && position === \"after\" && cell !== selectedCell) {\n            cell.colSpan += 1;\n            return;\n        }\n\n        if (cell) {\n            return cell;\n        }\n\n        for (index; index >= 0; index--) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\")[0];\n\n            if (cell && cell.colSpan > 1) {\n                break;\n            }\n        }\n\n        if (!cell) {\n            return;\n        }\n\n        colSpanEffect = parseInt(cell.getAttribute(\"col-index\"),10) + cell.colSpan - 1;\n\n        if (colSpanEffect === columnIndex && position === \"after\") {\n            return cell;\n        } else if (columnIndex <= colSpanEffect) {\n            cell.setAttribute(COLSPAN, cell.colSpan + 1);\n        }\n    },\n    _resizeCells: function(newCell, cell) {\n        var width = newCell.style.width,\n        parsedWidth, unit, calculatedWidth;\n\n        if (!width) {\n            return;\n        }\n\n        parsedWidth = parseFloat(width);\n        unit = width.slice(parsedWidth.toString().length);\n        calculatedWidth = (parsedWidth / 2) + unit;\n\n        newCell.style.width = calculatedWidth;\n        cell.style.width = calculatedWidth;\n    }\n});\n\nvar DeleteRowCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange();\n        var rows = RangeUtils.mapAll(range, function(node) {\n            return $(node).closest(TR)[0];\n        });\n        var td = dom.closest(range.endContainer, [TD, TH]);\n        var row = rows[0];\n        var rowSpan = td ? td.rowSpan : 1;\n        var rowIndex = $(rows[0]).index();\n        var table = dom.closest(row, TABLE);\n        var rowParent = row.parentElement;\n        var focusElement;\n\n        if (!table || (this.immutables() && Editor.Immutables.immutableParent(row))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        for (var x = 0; x < rowSpan; x++) {\n            if (rows.indexOf(rowParent.rows[rowIndex + x]) < 0) {\n                rows.push(rowParent.rows[rowIndex + x]);\n            }\n        }\n\n        if (table.rows.length <= rows.length) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else if (rowParent.rows.length <= rows.length) {\n            focusElement = rowParent.nextSibling;\n\n            if (!focusElement) {\n                focusElement = rowParent.previousSibling;\n            }\n\n            dom.remove(rowParent);\n        } else {\n            this._mapColIndices(table);\n\n            for (var i = 0; i < rows.length; i++) {\n                row = rows[i];\n                dom.removeTextSiblings(row);\n                focusElement = dom.next(row) || dom.prev(row);\n                focusElement = focusElement.cells[0];\n\n                // IE needs to focus the new row before removing the old one\n                this._focusElement(range, focusElement);\n                focusElement = null;\n\n                this._handleRowSpanCells(table, row);\n\n                dom.remove(row);\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        } else if (dom.is(rowParent, THEAD) && $(table).find(\"[scope]\").length > 0) {\n            this._adjustColgroups(rowParent.rows[0], table);\n        }\n\n        if (focusElement) {\n            this._focusElement(range, focusElement);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _focusElement: function(range, node) {\n        range.setStart(node, 0);\n        range.collapse(true);\n        this.editor.selectRange(range);\n    },\n    _handleRowSpanCells: function(table, row) {\n        var index, cell, adjacentCell, nextRow, rowIndex = dom.findNodeIndex(row, true),\n            firstRow = table.rows[0],\n            lastCell = firstRow.cells[firstRow.cells.length - 1],\n            lastIndex = parseInt(lastCell.getAttribute(\"col-index\"),10) + lastCell.colSpan - 1;\n\n        for (index = 0; index <= lastIndex; index = index + cell.prop(\"colSpan\")) {\n            cell = $(row).find(\"[col-index=\" + index + \"]\");\n\n            if (cell.length && cell.prop(\"rowSpan\") > 1) {\n                nextRow = table.rows[rowIndex + 1];\n                adjacentCell = $(nextRow).find(\"[col-index=\" + (index + 1) + \"]\");\n\n                if (adjacentCell.length) {\n                    adjacentCell.before(cell);\n                } else {\n                    $(nextRow).append(cell);\n                }\n                this._reduceRowSpan(cell);\n            }\n\n            if (!cell.length) {\n                cell = this._findRowSpanCell(row.parentElement, rowIndex, index);\n                this._reduceRowSpan(cell);\n            }\n        }\n    },\n    _reduceRowSpan: function(td) {\n        var rowSpanValue = td.prop(\"rowSpan\") - 1;\n\n        if (rowSpanValue <= 1) {\n            td.removeAttr(ROWSPAN);\n            if (td.attr(SCOPE) === ROWGROUP) {\n                td.attr(SCOPE, ROW);\n            }\n        } else {\n            td.attr(ROWSPAN, rowSpanValue);\n        }\n    }\n});\n\nvar DeleteColumnCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table = dom.closest(td, TABLE),\n            rows = table && table.rows,\n            columnIndex = dom.findNodeIndex(td, true),\n            columnCount = rows && rows[0].cells.length,\n            colElements = table.getElementsByTagName(COL),\n            colgroupElements = table.getElementsByTagName(COLGROUP),\n            focusElement, i, cell, x;\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        if (columnCount == 1 || td.colSpan == columnCount) {\n            focusElement = dom.next(table);\n            if (!focusElement || dom.insignificant(focusElement)) {\n                focusElement = dom.prev(table);\n            }\n\n            if (focusElement && focusElement.rows) {\n                focusElement = focusElement.rows[0].cells[0];\n            }\n\n            dom.remove(table);\n            this._resetElementResizing(this.editor);\n        } else {\n            dom.removeTextSiblings(td);\n\n            focusElement = dom.next(td) || dom.prev(td);\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt(td.getAttribute(\"col-index\"), 10);\n\n            for (x = 0; x < td.colSpan; x++) {\n                for (i = 0; i < rows.length; i = i + (cell.prop(\"rowSpan\") || 1)) {\n                    cell = $(rows[i]).find(\"[col-index=\" + (columnIndex + x) + \"]\");\n\n                    if (cell.length && cell.prop(\"colSpan\") <= 1) {\n                        cell.remove();\n                    } else {\n                        this._handleColSpanCells(rows[i], columnIndex + x);\n                    }\n                }\n            }\n\n            this._clearColIndexAttr(table);\n        }\n\n        if (colElements.length > 0 || colgroupElements.length > 0) {\n            this._adjustColgroups(rows[0], table);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        if (focusElement) {\n            range.setStart(focusElement, 0);\n            range.collapse(true);\n            this.editor.selectRange(range);\n        }\n\n        this._resetElementResizing(this.editor);\n    },\n    _handleColSpanCells: function(row, colIndex) {\n        var cell = $(row).find(\"[col-index=\" + colIndex + \"]\");\n\n        if (cell.length && cell.prop(\"colSpan\") > 1) {\n            var clone = cell.clone(true);\n            cell.after(clone);\n            this._reduceColSpan(clone);\n            clone.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n            cell.remove();\n            return;\n        }\n\n        for (var i = colIndex; i >= 0; i--) {\n            cell = $(row).find(\"[col-index=\" + i + \"]\");\n\n            if (cell.length) {\n                this._reduceColSpan(cell);\n                cell.attr(\"col-index\", parseInt(cell.attr(\"col-index\"),10) + 1);\n                return;\n            }\n        }\n    },\n    _reduceColSpan: function(td) {\n        var colSpanValue = td.prop(\"colSpan\") - 1;\n\n        if (colSpanValue <= 1) {\n            td.removeAttr(COLSPAN);\n            if (td.attr(SCOPE) === COLGROUP) {\n                td.attr(SCOPE, COL);\n            }\n        } else {\n            td.attr(COLSPAN, colSpanValue);\n        }\n    }\n});\n\nvar MergeCellsHorizontallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            table, row, columnIndex, nextTd, colspan;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            table = dom.closest(td, TABLE);\n            row = td.parentNode;\n            columnIndex = dom.findNodeIndex(td, true);\n            nextTd = row.children[columnIndex + 1];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10);\n            nextTd = $(row).find(\"[col-index=\" + (columnIndex + 1 + this._getColspan(td) - 1) + \"]\").get(0);\n\n            if (!nextTd || nextTd.rowSpan !== td.rowSpan || td.tagName !== nextTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            colspan = this._getColspan(td) + this._getColspan(nextTd);\n\n            $(td).prop(COLSPAN, colspan)\n                 .append(dom.emptyNode(nextTd) ? \"\" : \"<br/>\" + nextTd.innerHTML);\n\n            $(td).width(td.offsetWidth);\n            $(nextTd).remove();\n\n            if (td.getAttribute(SCOPE) === COL) {\n                td.setAttribute(SCOPE, COLGROUP);\n            }\n            if (td.getAttribute(SCOPE) === COLGROUP) {\n                this._adjustColgroups(row, table);\n            }\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n            this._resetElementResizing(this.editor);\n    },\n    _getColspan: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10) || 1;\n    }\n});\n\nvar MergeCellsVerticallyCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            td = dom.closest(range.endContainer, [TD, TH]),\n            tr, parent, table, columnIndex, rowIndex, targetRow, bottomTd;\n\n            if (!td) {\n                this.releaseRange(range);\n                return;\n            }\n\n            tr = dom.closest(td, TR);\n            parent = dom.closest(td, [THEAD, TBODY]);\n            table = dom.closest(td, TABLE);\n            columnIndex = dom.findNodeIndex(td, true);\n            rowIndex = dom.findNodeIndex(tr, true);\n\n            if (rowIndex + 1 === parent.rows.length) {\n                this.releaseRange(range);\n                return;\n            }\n\n            targetRow = parent.rows[rowIndex + this._getRowspan(td)];\n            bottomTd = targetRow && targetRow.children[columnIndex];\n\n            if (this.immutables() && Editor.Immutables.immutableParent(td)) {\n                this.releaseRange(range);\n                return;\n            }\n\n            this._mapColIndices(table);\n\n            columnIndex = $(td).attr(\"col-index\");\n            bottomTd = $(targetRow).find(\"[col-index=\" + columnIndex + \"]\").get(0);\n\n            if (!bottomTd || bottomTd.colSpan !== td.colSpan || td.tagName !== bottomTd.tagName) {\n                this._clearColIndexAttr(table);\n                this.releaseRange(range);\n                return;\n            }\n\n            $(td).prop(ROWSPAN, this._getRowspan(td) + this._getRowspan(bottomTd))\n                 .append(dom.emptyNode(bottomTd) ? \"\" : \"<br/>\" + bottomTd.innerHTML);\n\n            if (td.getAttribute(SCOPE) === ROW) {\n                td.setAttribute(SCOPE, ROWGROUP);\n            }\n\n            $(bottomTd).remove();\n\n            if ($(table).find(\"[headers]\").length > 0) {\n                this._associateHeaderIds(table);\n            }\n\n            this._clearColIndexAttr(table);\n            this.releaseRange(range);\n    },\n    _getRowspan: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10) || 1;\n    }\n});\n\nvar SplitCellCommand = TableModificationCommand.extend({\n    exec: function() {\n        var range = this.lockRange(),\n            type = this.options.type,\n            attr = type === \"row\" ? COLSPAN : ROWSPAN,\n            td = dom.closest(range.endContainer, [TD, TH]),\n            parent = dom.closest(td, [THEAD, TBODY]),\n            table = dom.closest(td, TABLE),\n            emptyTd = dom.createEmptyNode(this.editor.document, td.nodeName.toLowerCase());\n\n        if (!td || (this.immutables() && Editor.Immutables.immutableParent(td))) {\n            this.releaseRange(range);\n            return;\n        }\n\n        this._mapColIndices(table);\n\n        if (type === \"row\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellHorizontally(td, parent, attr, emptyTd);\n        } else if (type === \"column\" && $(td).is(\"[\" + attr + \"]\")) {\n            this._splitCellVertically(td, parent, attr, emptyTd);\n        }\n\n        if ($(td).prop(attr.toLowerCase()) <= 1) {\n            $(td).removeAttr(attr);\n        }\n\n        if ($(table).find(\"[headers]\").length > 0) {\n            this._associateHeaderIds(table);\n        }\n\n        this._clearColIndexAttr(table);\n        this.releaseRange(range);\n    },\n    _getRowspanValue: function(td) {\n        return parseInt(td.getAttribute(ROWSPAN), 10);\n    },\n    _getColspanValue: function(td) {\n        return parseInt(td.getAttribute(COLSPAN), 10);\n    },\n    _splitCellHorizontally: function(td, parent, attr, emptyTd) {\n        var rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            tdToAdd = $(emptyTd),\n            colSpanResult = Math.floor(colSpan / 2);\n\n            if (colSpanResult > 1) {\n                tdToAdd.attr(COLSPAN, colSpanResult);\n            }\n\n            if (rowSpan > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpan);\n            }\n\n            $(td).prop(attr, colSpan - colSpanResult)\n                .after(tdToAdd);\n\n            $(td).width(td.offsetWidth);\n            tdToAdd.width(tdToAdd[0].offsetWidth);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === COLGROUP) {\n                    tdToAdd.attr(SCOPE, COL);\n                    if (!td.getAttribute(COLSPAN) || td.getAttribute(COLSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, COL);\n                    }\n\n                    this._adjustColgroups(td.parentNode, parent.parentNode);\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    },\n    _splitCellVertically: function(td, parent, attr, emptyTd) {\n        var tr = dom.closest(td,TR),\n            columnIndex = parseInt($(td).attr(\"col-index\"), 10),\n            rowIndex = dom.findNodeIndex(tr, true),\n            rowSpan = td.rowSpan,\n            colSpan = td.colSpan,\n            rowSpanResult = Math.floor(rowSpan / 2),\n            targetRow = $(parent).find(TR).eq(rowIndex + rowSpan - rowSpanResult),\n            nextTd = this._findNextTdInRow(targetRow, columnIndex + colSpan),\n            tdToAdd = $(emptyTd);\n\n            if (rowSpanResult > 1) {\n                tdToAdd.attr(ROWSPAN, rowSpanResult);\n            }\n            if (colSpan > 1) {\n                tdToAdd.attr(COLSPAN, colSpan);\n            }\n\n            if (nextTd && nextTd.length) {\n                nextTd.before(tdToAdd);\n            } else {\n                targetRow.append(tdToAdd);\n            }\n\n            $(td).prop(attr, rowSpan - rowSpanResult);\n\n            if (td.hasAttribute(SCOPE)) {\n                if (td.getAttribute(SCOPE) === ROWGROUP) {\n                    tdToAdd.attr(SCOPE, ROW);\n                    if (!td.getAttribute(ROWSPAN) || td.getAttribute(ROWSPAN) === \"1\") {\n                        td.setAttribute(SCOPE, ROW);\n                    }\n                } else {\n                    tdToAdd.attr(SCOPE, td.getAttribute(SCOPE));\n                }\n            }\n    }\n});\n\nvar TableModificationTool = Tool.extend({\n    command: function(options) {\n        var commandsMap = {\n            row: {\n                insert: InsertRowCommand,\n                \"delete\": DeleteRowCommand,\n                merge: MergeCellsHorizontallyCommand,\n                split: SplitCellCommand\n            },\n            column: {\n                insert: InsertColumnCommand,\n                \"delete\": DeleteColumnCommand,\n                merge: MergeCellsVerticallyCommand,\n                split: SplitCellCommand\n            }\n        };\n\n        options = extend(options, this.options);\n        options.action = options.action || \"insert\";\n\n        return new commandsMap[options.type][options.action](options);\n    },\n\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableFormatCommand = FormatCommand.extend({\n    exec: function() {\n        var that = this;\n        var editor = that.editor;\n\n        FormatCommand.fn.exec.call(this);\n\n        if (editor.elementResizing) {\n            editor.elementResizing._showResizeHandles();\n        }\n    }\n});\n\n// var tableAlignFormatFinder = BlockFormatFinder.extend({\n\n// });\n\nvar TableFormatTool = BlockFormatTool.extend({\n    update: function(ui, nodes) {\n        var isTable = !tableFormatFinder.isFormatted(nodes),\n            isFormatted = this.options.finder.isFormatted(nodes, this.isTable),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (toolbar) {\n            toolbar.toggle(ui, isFormatted);\n        }\n\n        if (isTable === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    },\n    command: function(commandArguments) {\n        var that = this;\n\n        return new TableFormatCommand(extend(commandArguments, {\n            formatter: that.options.formatter\n        }));\n    },\n    isTable: function(node) {\n        return dom.is(node, \"table\");\n    }\n});\n\nextend(kendo.ui.editor, {\n    PopupTool: PopupTool,\n    TableCommand: TableCommand,\n    InsertTableTool: InsertTableTool,\n    TableFormatTool: TableFormatTool,\n    TableFormatCommand: TableFormatCommand,\n    TableModificationTool: TableModificationTool,\n    InsertRowCommand: InsertRowCommand,\n    InsertColumnCommand: InsertColumnCommand,\n    DeleteRowCommand: DeleteRowCommand,\n    DeleteColumnCommand: DeleteColumnCommand,\n    MergeCellsHorizontallyCommand: MergeCellsHorizontallyCommand,\n    MergeCellsVerticallyCommand: MergeCellsVerticallyCommand,\n    SplitCellCommand: SplitCellCommand\n});\n\n\nregisterTool(\"createTable\", new InsertTableTool({ ui: { popup: true, overflow: \"never\" } }));\n\nregisterTool(\"addColumnLeft\", new TableModificationTool({ type: \"column\", position: \"before\" }));\nregisterTool(\"addColumnRight\", new TableModificationTool({ type: \"column\" }));\nregisterTool(\"addRowAbove\", new TableModificationTool({ type: \"row\", position: \"before\" }));\nregisterTool(\"addRowBelow\", new TableModificationTool({ type: \"row\" }));\nregisterTool(\"deleteRow\", new TableModificationTool({ type: \"row\", action: \"delete\" }));\nregisterTool(\"deleteColumn\", new TableModificationTool({ type: \"column\", action: \"delete\" }));\nregisterTool(\"mergeCellsHorizontally\", new TableModificationTool({ type: \"row\", action: \"merge\" }));\nregisterTool(\"mergeCellsVertically\", new TableModificationTool({ type: \"column\", action: \"merge\" }));\nregisterTool(\"splitCellHorizontally\", new TableModificationTool({ type: \"row\", action: \"split\" }));\nregisterTool(\"splitCellVertically\", new TableModificationTool({ type: \"column\", action: \"split\" }));\n\nregisterFormat(\"tableAlignLeft\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"left\" } }\n]);\nregisterTool(\"tableAlignLeft\", new TableFormatTool({\n    format: formats.tableAlignLeft,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignCenter\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"auto\" } } },\n    { tags: [\"table\"], attr: { align: \"center\" } }\n]);\nregisterTool(\"tableAlignCenter\", new TableFormatTool({\n    format: formats.tableAlignCenter,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\nregisterFormat(\"tableAlignRight\", [\n    { tags: [\"table\"], attr: { style: { marginLeft: \"auto\", marginRight: \"\" } } },\n    { tags: [\"table\"], attr: { align: \"right\" } }\n]);\nregisterTool(\"tableAlignRight\", new TableFormatTool({\n    format: formats.tableAlignRight,\n    ui: {\n        togglable: true,\n        group: \"tableAlign\"\n    }\n}));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        Class = kendo.Class,\n        editorNS = kendo.ui.editor,\n        RangeUtils = editorNS.RangeUtils,\n        dom = editorNS.Dom,\n        RestorePoint = editorNS.RestorePoint,\n        Marker = editorNS.Marker,\n        browser = kendo.support.browser,\n        extend = $.extend;\n\nvar Clipboard = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        var pasteCleanup = editor.options.pasteCleanup;\n        this.nonSplittableTagsOnPaste = editor.options.nonSplittableTagsOnPaste || [];\n        this.cleaners = [\n            new ScriptCleaner(pasteCleanup),\n            new TabCleaner(pasteCleanup),\n            new MSWordFormatCleaner(pasteCleanup),\n            new WebkitFormatCleaner(pasteCleanup),\n            new HtmlTagsCleaner(pasteCleanup),\n            new HtmlAttrCleaner(pasteCleanup),\n            new HtmlContentCleaner(pasteCleanup),\n            new CustomCleaner(pasteCleanup) //always keep at end\n        ];\n    },\n\n    htmlToFragment: function(html) {\n        var editor = this.editor,\n            doc = editor.document,\n            container = dom.create(doc, 'div'),\n            fragment = doc.createDocumentFragment();\n\n        container.innerHTML = html;\n\n        while (container.firstChild) {\n            fragment.appendChild(container.firstChild);\n        }\n\n        return fragment;\n    },\n\n    isBlock: function(html) {\n        return (/<(div|p|ul|ol|table|h[1-6])/i).test(html);\n    },\n\n    _startModification: function() {\n        var range;\n        var restorePoint;\n        var editor = this.editor;\n\n        if (this._inProgress) {\n            return;\n        }\n\n        this._inProgress = true;\n\n        range = editor.getRange();\n        restorePoint = new RestorePoint(range, editor.body);\n\n        dom.persistScrollTop(editor.document);\n\n        return { range: range, restorePoint: restorePoint };\n    },\n\n    _endModification: function(modificationInfo) {\n        editorNS._finishUpdate(this.editor, modificationInfo.restorePoint);\n\n        this.editor._selectionChange();\n\n        this._inProgress = false;\n    },\n\n    _contentModification: function(before, after) {\n        var that = this;\n        var editor = that.editor;\n        var modificationInfo = that._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        before.call(that, editor, modificationInfo.range);\n\n        setTimeout(function() {\n            after.call(that, editor, modificationInfo.range);\n\n            that._endModification(modificationInfo);\n        });\n    },\n\n    _removeBomNodes: function(range) {\n        var nodes = RangeUtils.textNodes(range);\n\n        for (var i = 0; i < nodes.length; i++) {\n            nodes[i].nodeValue = dom.stripBom(nodes[i].nodeValue) || nodes[i].nodeValue;\n        }\n    },\n\n    _onBeforeCopy: function(range) {\n        var marker = new Marker();\n        marker.add(range);\n\n        this._removeBomNodes(range);\n\n        marker.remove(range);\n\n        this.editor.selectRange(range);\n    },\n\n    oncopy: function() {\n        this._onBeforeCopy(this.editor.getRange());\n    },\n\n    oncut: function() {\n        this._onBeforeCopy(this.editor.getRange());\n        this._contentModification($.noop, $.noop);\n    },\n\n    _fileToDataURL: function(blob) {\n        var deferred = $.Deferred();\n\n        var reader = new FileReader();\n\n        if (!(blob instanceof window.File) && blob.getAsFile) {\n            blob = blob.getAsFile();\n        }\n\n        reader.onload = deferred.resolve.bind(deferred);\n\n        reader.readAsDataURL(blob);\n\n        return deferred.promise();\n    },\n\n    _triggerPaste: function(html, options) {\n        var args = { html: html || \"\" };\n\n        args.html = args.html.replace(/\\ufeff/g, \"\");\n\n        this.editor.trigger(\"paste\", args);\n\n        this.paste(args.html, options || {});\n    },\n\n    _handleImagePaste: function(e) {\n        if (!('FileReader' in window) || (browser.msie && browser.version > 10)) {\n            return;\n        }\n\n        var clipboardData = e.clipboardData || e.originalEvent.clipboardData ||\n                    window.clipboardData || {};\n\n        var items = clipboardData.items || clipboardData.files;\n\n        return this._insertImages(items);\n    },\n\n    _insertImages: function(items) {\n        if (!items) {\n            return;\n        }\n\n        var images = $.grep(items, function(item) { return (/^image\\//i).test(item.type); });\n        var html = $.grep(items, function(item) { return (/^text\\/html/i).test(item.type); });\n\n        if (html.length || !images.length) {\n            return;\n        }\n\n        var modificationInfo = this._startModification();\n\n        if (!modificationInfo) {\n            return;\n        }\n\n        $.when.apply($, $.map(images, this._fileToDataURL))\n            .done((function() {\n                var results = Array.prototype.slice.call(arguments);\n                var html = $.map(results, function(e) {\n                    return '<img src=\"' + e.target.result + '\" />';\n                }).join(\"\");\n\n                this._triggerPaste(html);\n\n                this._endModification(modificationInfo);\n            }).bind(this));\n\n        return true;\n    },\n\n    onpaste: function(e) {\n        if (this.editor.body.contentEditable === \"false\") {\n            return;\n        }\n\n        if (this._handleImagePaste(e)) {\n            e.preventDefault();\n            return;\n        }\n\n        this.expandImmutablesIn();\n\n        this._contentModification(\n            function beforePaste(editor, range) {\n                var clipboardNode = dom.create(editor.document, 'div', {\n                        className: 'k-paste-container',\n                        innerHTML: \"\\ufeff\"\n                    });\n                var browser = kendo.support.browser;\n                var body = editor.body;\n\n                this._decoreateClipboardNode(clipboardNode, body);\n\n                body.appendChild(clipboardNode);\n\n                //Browser scrolls to clipboardNode\n                if (browser.webkit) {\n                    this._moveToCaretPosition(clipboardNode, range);\n                }\n\n                // text ranges are slow in IE10-, DOM ranges are buggy in IE9-10\n                if (browser.msie && browser.version < 11) {\n                    e.preventDefault();\n                    var r = editor.createRange();\n                    r.selectNodeContents(clipboardNode);\n                    editor.selectRange(r);\n                    var textRange = editor.document.body.createTextRange();\n                    textRange.moveToElementText(clipboardNode);\n                    $(body).off('paste');\n                    textRange.execCommand('Paste');\n                    $(body).on('paste', this.onpaste.bind(this));\n                } else {\n                    var clipboardRange = editor.createRange();\n                    clipboardRange.selectNodeContents(clipboardNode);\n                    editor.selectRange(clipboardRange);\n                }\n\n                range.deleteContents();\n            },\n            function afterPaste(editor, range) {\n                var html = \"\", containers;\n\n                editor.selectRange(range);\n\n                containers = $(editor.body).children(\".k-paste-container\");\n\n                containers.each(function() {\n                    var lastChild = this.lastChild;\n\n                    if (lastChild && dom.is(lastChild, 'br')) {\n                        dom.remove(lastChild);\n                    }\n\n                    html += this.innerHTML;\n                });\n\n                containers.remove();\n\n                this._triggerPaste(html, { clean: true });\n            }\n        );\n    },\n    ondragover: function(e) {\n        if (browser.msie || browser.edge) {\n            e.stopPropagation();\n            e.preventDefault();\n        }\n    },\n    ondrop: function(e) {\n        if (!('FileReader' in window)) {\n            return;\n        }\n\n        var dataTransfer = (e.originalEvent || e).dataTransfer || {};\n        var items = dataTransfer.items || dataTransfer.files;\n\n        if (this._insertImages(items)) {\n            e.preventDefault();\n        }\n    },\n    _decoreateClipboardNode: function(node, body) {\n        if (!browser.msie && !browser.webkit) {\n            return;\n        }\n\n        node = $(node);\n        node.css({\n            borderWidth: \"0px\",\n            width: \"0px\",\n            height: \"0px\",\n            overflow: \"hidden\",\n            margin: \"0\",\n            padding: \"0\"\n        });\n\n        if (browser.msie) {\n            //node inherits BODY styles and this causes the browser to add additional\n            var documentElement = $(body.ownerDocument.documentElement);\n\n            node.css({\n                fontVariant: \"normal\",\n                fontWeight: \"normal\",\n                lineSpacing: \"normal\",\n                lineHeight: \"normal\",\n                textDecoration: \"none\"\n            });\n            var color = documentElement.css(\"color\");\n            if (color) {\n                node.css(\"color\", color);\n            }\n            var fontFamily = documentElement.css(\"fontFamily\");\n            if (fontFamily) {\n                node.css(\"fontFamily\", fontFamily);\n            }\n            var fontSize = documentElement.css(\"fontSize\");\n            if (fontSize) {\n                node.css(\"fontSize\", fontSize);\n            }\n        }\n    },\n    _moveToCaretPosition: function(node, range) {\n        var that = this;\n        var body = that.editor.body;\n        var nodeOffset = dom.offset(node, body);\n        var caretOffset = that._caretOffset(range, body);\n        var translateX = caretOffset.left - nodeOffset.left;\n        var translateY = caretOffset.top - nodeOffset.top;\n        var translate = \"translate(\" + translateX + \"px,\" + translateY + \"px)\";\n\n        $(node).css({\n            \"-webkit-transform\": translate,\n            \"transform\": translate\n        });\n    },\n    _caretOffset: function(range, body) {\n        var editor = this.editor;\n        var caret = dom.create(editor.document, 'span', { innerHTML: \"\\ufeff\" });\n        var startContainer = range.startContainer;\n        var rangeChanged;\n\n        if (range.collapsed) {\n            var isStartTextNode = dom.isDataNode(startContainer);\n            if (isStartTextNode && (dom.isBom(startContainer) || range.startOffset === 0)) {\n                dom.insertBefore(caret, startContainer);\n            } else if (isStartTextNode && range.startOffset === startContainer.length) {\n                dom.insertAfter(caret, startContainer);\n            } else {\n                range.insertNode(caret);\n                rangeChanged = true;\n            }\n        } else {\n            startContainer = startContainer === body ?\n                startContainer.childNodes[range.startOffset] : startContainer;\n            dom.insertBefore(caret, startContainer);\n        }\n\n        var offset = dom.offset(caret, body);\n        var prev = caret.previousSibling;\n        var next = caret.nextSibling;\n\n        dom.remove(caret);\n\n        if (rangeChanged && dom.isDataNode(prev) && dom.isDataNode(next) && !dom.isBom(prev) && !dom.isBom(next)) {\n            var prevLength = prev.length;\n            next.data = prev.data + next.data;\n            range.setStart(next, prevLength);\n            dom.remove(prev);\n\n            range.collapse(true);\n            editor.selectRange(range);\n        }\n\n        return offset;\n    },\n\n    expandImmutablesIn: function(range) {\n        var editor = this.editor;\n        if (editor && editor.options.immutables) {\n            var body = editor.body;\n            range = range || editor.getRange();\n            kendo.ui.editor.Immutables.expandImmutablesIn(range);\n            if (range.startContainer === body && range.startOffset === 0) {\n                var doc = body.ownerDocument;\n                var bomNode = doc.createTextNode(\"\\ufeff\");\n                body.insertBefore(bomNode, body.childNodes[0]);\n                range.setStartBefore(bomNode);\n            }\n            editor.selectRange(range);\n        }\n    },\n\n    splittableParent: function(block, node) {\n        var parentNode, body;\n\n        if (block) {\n            return dom.closestEditableOfType(node, ['p', 'ul', 'ol']) || node.parentNode;\n        }\n\n        parentNode = node.parentNode;\n        body = node.ownerDocument.body;\n\n        if (dom.isInline(parentNode)) {\n            while (parentNode.parentNode != body && !dom.isBlock(parentNode.parentNode)) {\n                parentNode = parentNode.parentNode;\n            }\n        }\n\n        return parentNode;\n    },\n\n    paste: function(html, options) {\n        var editor = this.editor,\n            nonSplittableTagsOnPaste = this.nonSplittableTagsOnPaste,\n            preventSplit = false,\n            unwrapPasted = false,\n            i, l, childNodes, isList;\n\n        this.expandImmutablesIn();\n\n        options = extend({ clean: false, split: true }, options);\n\n        if (!options.skipCleaners) {\n            for (i = 0, l = this.cleaners.length; i < l; i++) {\n                if (this.cleaners[i].applicable(html)) {\n                    html = this.cleaners[i].clean(html);\n                }\n            }\n        }\n\n        if (options.clean) {\n            // remove br elements which immediately precede block elements\n            html = html.replace(/(<br>(\\s|&nbsp;)*)+(<\\/?(div|p|li|col|t))/ig, \"$3\");\n            // remove empty inline elements\n            html = html.replace(/<(a|span)[^>]*><\\/\\1>/ig, \"\");\n        }\n\n        html = html.replace(/<(a|span|font)([^>]*)> <\\/\\1>/ig, \"<$1$2>&nbsp;</$1>\");\n\n        // It is possible in IE to copy just <li> tags\n        html = html.replace(/^<li/i, '<ul><li').replace(/li>$/g, 'li></ul>');\n\n        var block = this.isBlock(html);\n\n        editor.focus();\n        var range = editor.getRange();\n        range.deleteContents();\n\n        if (range.startContainer == editor.document) {\n            range.selectNodeContents(editor.body);\n        }\n\n        var marker = new Marker();\n        var caret = marker.addCaret(range);\n\n        var parent = this.splittableParent(block, caret);\n        var unwrap = false;\n\n        for (i = 0; i < nonSplittableTagsOnPaste.length; i++) {\n            const splitter = nonSplittableTagsOnPaste[i],\n                tag = splitter.tag || splitter;\n\n            if (dom.is(parent, tag)) {\n                preventSplit = true;\n                unwrapPasted = splitter.unwrap !== false;\n                break;\n            }\n        }\n\n        var splittable = parent != editor.body && !dom.is(parent, \"td\") && !preventSplit;\n\n        if (options.split && splittable && (block || dom.isInline(parent))) {\n            range.selectNode(caret);\n            RangeUtils.split(range, parent, true);\n            unwrap = true;\n        }\n\n        var fragment = this.htmlToFragment(html);\n\n        if (fragment.firstChild && fragment.firstChild.className === \"k-paste-container\") {\n            var fragmentsHtml = [];\n            for (i = 0, l = fragment.childNodes.length; i < l; i++) {\n                fragmentsHtml.push(fragment.childNodes[i].innerHTML);\n            }\n\n            fragment = this.htmlToFragment(fragmentsHtml.join('<br />'));\n        }\n\n        childNodes = fragment.childNodes;\n\n        if (unwrapPasted) {\n            isList = dom.list(childNodes[0]);\n            dom.unwrap(childNodes[0]);\n\n            if (isList) {\n                range.selectNode(caret.parentNode);\n            }\n        }\n\n        $(childNodes)\n            .filter(\"table\").addClass(\"k-table\").end()\n            .find(\"table\").addClass(\"k-table\");\n\n        $(childNodes).each(function(index, elm) {\n           if (dom.isBlock(elm) && !dom.isSelfClosing(elm) && elm.innerHTML === \"\") {\n                elm.appendChild(editor.document.createTextNode(\"\\ufeff\"));\n           }\n        });\n\n        range.insertNode(fragment);\n\n        parent = this.splittableParent(block, caret);\n        if (unwrap) {\n            while (caret.parentNode != parent) {\n                dom.unwrap(caret.parentNode);\n            }\n\n            dom.unwrap(caret.parentNode);\n        }\n\n        dom.normalize(range.commonAncestorContainer);\n        caret.style.display = 'inline';\n        dom.restoreScrollTop(editor.document);\n        dom.scrollTo(caret);\n        marker.removeCaret(range);\n\n        var rangeEnd = range.commonAncestorContainer.parentNode;\n        if (range.collapsed && dom.name(rangeEnd) == \"tbody\" || range.collapsed && dom.name(rangeEnd) == \"thead\") {\n            range.setStartAfter($(rangeEnd).closest(\"table\")[0]);\n            range.collapse(true);\n        }\n\n        var focusedTable = $(range.commonAncestorContainer.parentNode).closest(\"table\");\n\n        if (focusedTable.get(0)) {\n            var siblingNodes = focusedTable.parent().contents();\n            var lastSiblingIndex = siblingNodes.length - 1;\n            var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n            while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n                lastSiblingIndex -= 1;\n                lastSibling = siblingNodes.get(lastSiblingIndex);\n            }\n\n            if (lastSibling === focusedTable.get(0) && !focusedTable.parents(\"table\").length) {\n                dom.insertAfter(dom.createEmptyNode(editor.document, \"p\"), focusedTable[0]);\n            }\n        }\n\n        editor._handleSpaceAndNewLines();\n        editor.selectRange(range);\n    }\n});\n\nvar Cleaner = Class.extend({\n    init: function(options) {\n        this.options = options || {};\n        this.replacements = [];\n    },\n\n    clean: function(html, customReplacements) {\n        var that = this,\n            replacements = customReplacements || that.replacements,\n            i, l;\n\n        for (i = 0, l = replacements.length; i < l; i += 2) {\n            html = html.replace(replacements[i], replacements[i + 1]);\n        }\n\n        return html;\n    }\n});\n\nvar ScriptCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /<(\\/?)script([^>]*)>/i, \"<$1telerik:script$2>\"\n        ];\n    },\n\n    applicable: function(html) {\n        return !this.options.none && (/<script[^>]*>/i).test(html);\n    }\n});\n\nvar TabCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        var replacement = ' ';\n        this.replacements = [\n            /<span\\s+class=\"Apple-tab-span\"[^>]*>\\s*<\\/span>/gi, replacement,\n            /\\t/gi, replacement,\n            /&nbsp;&nbsp; &nbsp;/gi, replacement\n        ];\n    },\n\n    applicable: function(html) {\n        return (/&nbsp;&nbsp; &nbsp;|class=\"?Apple-tab-span/i).test(html);\n    }\n});\n\nvar MSWordFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.junkReplacements = [\n            /<\\?xml[^>]*>/gi, '',\n            /<!--(.|\\n)*?-->/g, '', /* comments */\n            /&quot;/g, \"'\", /* encoded quotes (in attributes) */\n            /<o:p>&nbsp;<\\/o:p>/ig, '&nbsp;',\n            /<\\/?(meta|link|style|o:|v:|x:)[^>]*>((?:.|\\n)*?<\\/(meta|link|style|o:|v:|x:)[^>]*>)?/ig, '', /* external references and namespaced tags */\n            /<\\/o>/g, ''\n        ];\n        this.replacements = this.junkReplacements.concat([\n            /(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?(h[1-6]|hr|p|div|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|caption|address|pre|form|blockquote|dl|dt|dd|dir|fieldset)[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*/g, '$1',\n            /<br><br>/g, '<BR><BR>',\n            /<br>\\n/g, '<br/>',\n            /<br>(?!\\n)/g, ' ',\n            /<table([^>]*)>(\\s|&nbsp;)+<t/gi, '<table$1><t',\n            /<tr[^>]*>(\\s|&nbsp;)*<\\/tr>/gi, '',\n            /<tbody[^>]*>(\\s|&nbsp;)*<\\/tbody>/gi, '',\n            /<table[^>]*>(\\s|&nbsp;)*<\\/table>/gi, '',\n            /<BR><BR>/g, '<br>',\n            /^\\s*(&nbsp;)+/gi, '',\n            /(&nbsp;|<br[^>]*>)+\\s*$/gi, '',\n            /mso-[^;\"]*;?/ig, '', /* office-related CSS attributes */\n            /<(\\/?)b(\\s[^>]*)?>/ig, '<$1strong$2>',\n            /<(\\/?)font(\\s[^>]*)?>/ig, this.convertFontMatch,\n            /<(\\/?)i(\\s[^>]*)?>/ig, '<$1em$2>',\n            /style=([\"|'])\\s*\\1/g, '', /* empty style attributes */\n            /(<br[^>]*>)?\\n/g, function($0, $1) { return $1 ? $0 : ' '; } /* phantom extra line feeds */\n        ]);\n    },\n\n    convertFontMatch: function(match, closing, args) {\n        var faceRe = /face=['\"]([^'\"]+)['\"]/i;\n        var face = faceRe.exec(args);\n        var family = args && face && face[1];\n\n        if (closing) {\n            return '</span>';\n        } else if (family) {\n            return '<span style=\"font-family:' + family + '\">';\n        } else {\n            return '<span>';\n        }\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Mso/i).test(html) ||\n               (/style=\"[^\"]*mso-/i).test(html) ||\n               (/urn:schemas-microsoft-com:office/).test(html);\n    },\n\n    stripEmptyAnchors: function(html) {\n        return html.replace(/<a([^>]*)>\\s*<\\/a>/ig, function(a, attributes) {\n            if (!attributes || attributes.indexOf(\"href\") < 0) {\n                return \"\";\n            }\n\n            return a;\n        });\n    },\n\n    listType: function(p, listData) {\n        var html = p.innerHTML;\n        var text = dom.innerText(p);\n\n        var startingSymbol;\n        var matchSymbol = html.match(/^(?:<span [^>]*texhtml[^>]*>)?<span [^>]*(?:Symbol|Wingdings)[^>]*>([^<]+)/i);\n        var symbol = matchSymbol && matchSymbol[1];\n        var isNumber = /^[a-z\\d]/i.test(symbol);//including alpha-numeric and roman numerals\n\n        var trimStartText = function(text) {\n            return text.replace(/^(?:&nbsp;|[\\u00a0\\n\\r\\s])+/, '');\n        };\n\n        if (matchSymbol) {\n            startingSymbol = true;\n        }\n\n        html = html.replace(/<\\/?\\w+[^>]*>/g, '').replace(/&nbsp;/g, '\\u00a0');\n\n        if ((!startingSymbol && /^[\\u2022\\u00b7\\u00a7\\u00d8o]\\u00a0+/.test(html)) ||\n            (startingSymbol && /^.\\u00a0+/.test(html)) ||\n            (symbol && !isNumber && listData)) {\n            return {\n                tag: 'ul',\n                style: this._guessUnorderedListStyle(trimStartText(text))\n            };\n        }\n\n        if (/^\\s*\\w+[\\.\\)][\\u00a0 ]{2,}/.test(html)) {\n            return {\n                tag: 'ol',\n                style: this._guessOrderedListStyle(trimStartText(text))\n            };\n        }\n    },\n\n    _convertToLi: function(p) {\n        var content;\n\n        if (p.childNodes.length == 1) {\n            content = p.firstChild.nodeType === dom.nodeTypes.TEXT_NODE ? dom.innerText(p) : p.firstChild.innerHTML.replace(/^\\w+[\\.\\)](&nbsp;)+ /, \"\");\n            content = this._checkForBullet(content);\n        } else {\n            content = this._getHtmlNoBullet(p);\n        }\n\n        dom.remove(p);\n\n        return dom.create(document, 'li', { innerHTML: content });\n    },\n\n    _checkForBullet: function(html) {\n        var p = dom.create(document, 'p', { innerHTML: html });\n        var bulletRgx = /^\\s*\\w+[\\.\\)]\\s+/;\n\n        if (bulletRgx.test(p.innerText)) {\n            return this._getHtmlNoBullet(p);\n        }\n\n        return html;\n    },\n\n    _getHtmlNoBullet: function(element) {\n        var content,\n            name = dom.name(element);\n\n        dom.remove(element.firstChild);\n\n        // check for roman numerals\n        if (element.firstChild.nodeType == 3) {\n            if (/^[ivxlcdm]+\\.$/i.test(element.firstChild.nodeValue)) {\n                dom.remove(element.firstChild);\n            }\n        }\n\n        if (/^(&nbsp;|\\s)+$/i.test(element.firstChild.innerHTML)) {\n            dom.remove(element.firstChild);\n        }\n\n        if (name != \"p\") {\n            content = \"<\" + name + \">\" + element.innerHTML + \"</\" + name + \">\";\n        } else {\n            content = element.innerHTML;\n        }\n\n        return content;\n    },\n\n    _guessUnorderedListStyle: function(symbol) {\n        if (/^[\\u2022\\u00b7\\u00FC\\u00D8\\u002dv-]/.test(symbol)) {\n            return null;//return \"disc\"; //default CSS value\n        } else if (/^o/.test(symbol)) {\n            return \"circle\";\n        } else {\n            return \"square\";\n        }\n    },\n    _guessOrderedListStyle: function(symbol) {\n        var listType = null;\n        if (!/^\\d/.test(symbol)) {\n            listType = (/^[a-z]/.test(symbol) ? 'lower-' : 'upper-') +\n                       (/^[ivxlcdm]/i.test(symbol) ? 'roman' : 'alpha');\n        }\n\n        return listType;\n    },\n\n    extractListLevels: function(html) {\n        var msoListRegExp = /style=['\"]?[^'\"]*?mso-list:\\s?[a-zA-Z]+(\\d+)\\s[a-zA-Z]+(\\d+)\\s(\\w+)/gi;\n\n        html = html.replace(msoListRegExp, function(match, list, level) {\n            return kendo.format('data-list=\"{0}\" data-level=\"{1}\" {2}', list, level, match);\n        });\n\n        return html;\n    },\n\n    _createList: function(type, styleType) {\n        return dom.create(document, type, {\n            style: { listStyleType: styleType }\n        });\n    },\n\n    lists: function(placeholder) {\n        var blockChildren = $(placeholder).find(dom.blockElements.join(',')),\n            lastMargin = -1,\n            name,\n            levels = {},\n            li,\n            rootMargin,\n            rootIndex,\n            lastRootLi,\n            isLastRootLi,\n            rootList,\n            i, p, type, margin, list, listData,\n            acceptedNameTags = [\"p\", \"h1\", \"h2\", \"h3\", \"h4\", \"h5\", \"h6\"],\n            isParentTable = false;\n\n        for (i = 0; i < blockChildren.length; i++) {\n            p = blockChildren[i];\n            listData = $(p).data();\n            var listIndex = listData.list;\n            name = dom.name(p);\n            isParentTable = !!$(p).parents(\"table\").length;\n\n            if (isParentTable) {\n                continue;\n            }\n\n            var listType = this.listType(p, listData);\n            type = listType && listType.tag;\n\n            if (!type || acceptedNameTags.indexOf(name) < 0) {\n                if (!p.innerHTML) {\n                    dom.remove(p);\n                } else if (li && !isLastRootLi) {\n                    li.appendChild(p);\n                }\n                continue;\n            }\n\n            // not supported list levels in ie\n            if (browser.msie) {\n                continue;\n            }\n\n            margin = listData.level || parseFloat(p.style.marginLeft || 0);\n\n            var levelType = type + listIndex;\n            if (!levels[margin]) {\n                levels[margin] = {};\n            }\n\n            if (!rootMargin || rootMargin < 0) {\n                rootMargin = margin;\n                rootIndex = listIndex;\n                lastRootLi = $(placeholder).find(\"[data-list='\" + rootIndex + \"']\").last()[0];\n                rootList = this._createList(type, listType.style);\n                dom.insertBefore(rootList, p);\n                lastMargin = margin;\n                levels[margin][levelType] = rootList;\n            }\n\n            isLastRootLi = lastRootLi === p;\n\n            list = levels[margin][levelType];\n\n            if (margin > lastMargin || !list) {\n                list = this._createList(type, listType.style);\n                levels[margin][levelType] = list;\n                li.appendChild(list);\n            }\n\n            li = this._convertToLi(p);\n            list.appendChild(li);\n\n            if (isLastRootLi) {\n                rootMargin = lastMargin = -1;\n            } else {\n                lastMargin = margin;\n            }\n        }\n    },\n\n    removeAttributes: function(element) {\n        var attributes = element.attributes,\n            i = attributes.length,\n            significantStyles = [],\n            isSignificantCss = function(val) {\n                var significantCss = [\"border\", \"background\", \"padding\"];\n\n                return significantCss.filter(function(cssAttr) {\n                    return val.trim().indexOf(cssAttr) === 0;\n                }).length > 0;\n            },\n            addSignificantStyles = function(val) {\n                if (isSignificantCss(val)) {\n                    significantStyles.push(val.trim());\n                }\n            },\n            attr, attributeName, attributeValues;\n\n        while (i--) {\n            if (dom.name(attributes[i]) != \"colspan\") {\n                attr = attributes[i];\n                attributeName = attr.name;\n\n                if (attributeName === \"style\" && (element.nodeName === \"TD\" || element.nodeName === \"TH\")) {\n                    attributeValues = attr.value.split(\";\");\n                    attributeValues.forEach(addSignificantStyles);\n                }\n\n                element.removeAttributeNode(attributes[i]);\n            }\n        }\n\n        if (significantStyles.length > 0) {\n            element.setAttribute(\"style\", significantStyles.join(\";\"));\n        }\n    },\n\n    createColGroup: function(row) {\n        var cells = row.cells;\n        var table = $(row).closest(\"table\");\n        var colgroup = table.children(\"colgroup\");\n\n        if (cells.length < 2) {\n            return;\n        } else if (colgroup.length) {\n            cells = colgroup.children();\n            colgroup[0].parentNode.removeChild(colgroup[0]);\n        }\n\n        colgroup = $($.map(cells, function(cell) {\n                var width = cell.width;\n                if (width && parseInt(width, 10) !== 0) {\n                    return kendo.format('<col style=\"width:{0}px;\"/>', width);\n                }\n\n                return \"<col />\";\n            }).join(\"\"));\n\n        // jquery 1.9/2.0 discrepancy\n        if (!colgroup.is(\"colgroup\")) {\n            colgroup = $(\"<colgroup/>\").append(colgroup);\n        }\n\n        colgroup.prependTo(table);\n    },\n\n    convertHeaders: function(row) {\n        var cells = row.cells,\n            i,\n            boldedCells = $.map(cells, function(cell) {\n                var child = $(cell).children(\"p\").children(\"strong\")[0];\n\n                if (child && dom.name(child) == \"strong\") {\n                    return child;\n                }\n            });\n\n        if (boldedCells.length == cells.length) {\n            for (i = 0; i < boldedCells.length; i++) {\n                dom.unwrap(boldedCells[i]);\n            }\n\n            $(row).closest(\"table\")\n                .find(\"colgroup\").after(\"<thead></thead>\").end()\n                .find(\"thead\").append(row);\n\n            for (i = 0; i < cells.length; i++) {\n                dom.changeTag(cells[i], \"th\");\n            }\n        }\n    },\n\n    removeParagraphs: function(cells) {\n        var i, j, len, cell, paragraphs;\n\n        for (i = 0; i < cells.length; i++) {\n            this.removeAttributes(cells[i]);\n\n            // remove paragraphs and insert line breaks between them\n            cell = $(cells[i]);\n            paragraphs = cell.children(\"p\");\n\n            for (j = 0, len = paragraphs.length; j < len; j++) {\n                if (j < len - 1) {\n                    dom.insertAfter(dom.create(document, \"br\"), paragraphs[j]);\n                }\n\n                dom.unwrap(paragraphs[j]);\n            }\n        }\n    },\n\n    removeTextNodes: function(trs) {\n        var i, j, childNodes, currentNode, row;\n\n        for (i = 0; i < trs.length; i++) {\n            row = trs[i];\n            childNodes = row.childNodes;\n\n            for (j = 0; j < childNodes.length; j++) {\n                currentNode = childNodes[j];\n\n                if (currentNode.nodeType === dom.nodeTypes.TEXT_NODE) {\n                    row.removeChild(currentNode);\n                }\n            }\n        }\n    },\n\n    tables: function(placeholder) {\n        var tables = $(placeholder).find(\"table\"),\n            that = this,\n            rows,\n            firstRow, longestRow, i, j;\n\n        for (i = 0; i < tables.length; i++) {\n            rows = tables[i].rows;\n            longestRow = firstRow = rows[0];\n\n            for (j = 1; j < rows.length; j++) {\n                if (rows[j].cells.length > longestRow.cells.length) {\n                    longestRow = rows[j];\n                }\n            }\n\n            that.createColGroup(longestRow);\n            that.convertHeaders(firstRow);\n\n            that.removeAttributes(tables[i]);\n\n            that.removeParagraphs(tables.eq(i).find(\"td,th\"));\n\n            that.removeTextNodes(tables.eq(i).find(\"tr\"));\n        }\n    },\n\n    headers: function(placeholder) {\n        var titles = $(placeholder).find(\"p.MsoTitle\");\n\n        for (var i = 0; i < titles.length; i++) {\n            dom.changeTag(titles[i], \"h1\");\n        }\n    },\n\n    removeFormatting: function(placeholder) {\n        $(placeholder).find(\"*\").each(function() {\n            $(this).css({\n                fontSize: \"\",\n                fontFamily: \"\"\n            });\n\n            if (!this.getAttribute(\"style\") && !this.style.cssText) {\n                this.removeAttribute(\"style\");\n            }\n        });\n    },\n\n    clean: function(html) {\n        var that = this, placeholder;\n        var filters = this.options;\n\n        if (filters.none) {\n            html = Cleaner.fn.clean.call(that, html, this.junkReplacements);\n            html = that.stripEmptyAnchors(html);\n        } else {\n\n            html = filters.msConvertLists ? this.extractListLevels(html) : html;\n            html = Cleaner.fn.clean.call(that, html);\n            html = that.stripEmptyAnchors(html);\n\n            placeholder = dom.create(document, 'div', { innerHTML: html });\n            that.headers(placeholder);\n\n            if (filters.msConvertLists) {\n                that.lists(placeholder);\n            }\n            that.tables(placeholder);\n\n            if (filters.msAllFormatting) {\n                that.removeFormatting(placeholder);\n            }\n\n            html = placeholder.innerHTML.replace(/(<[^>]*)\\s+class=\"?[^\"\\s>]*\"?/ig, '$1');\n        }\n\n        return html;\n    }\n});\n\nvar WebkitFormatCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n\n        this.replacements = [\n            /\\s+class=\"Apple-style-span[^\"]*\"/gi, '',\n            /<(div|p|h[1-6])\\s+style=\"[^\"]*\"/gi, '<$1',\n            /^<div>(.*)<\\/div>$/, '$1'\n        ];\n    },\n\n    applicable: function(html) {\n        return (/class=\"?Apple-style-span|style=\"[^\"]*-webkit-nbsp-mode/i).test(html);\n    }\n});\n\nvar DomCleaner = Cleaner.extend({\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n        container = this.cleanDom(container);\n        return container.innerHTML;\n    },\n\n    cleanDom: function(container) {\n        return container;\n    }\n});\n\nvar HtmlTagsCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var tags = this.collectTags();\n\n        $(container).find(tags).each(function() {\n            dom.unwrap(this);\n        });\n\n        return container;\n    },\n\n    collectTags: function() {\n        if (this.options.span) {\n            return \"span\";\n        }\n    },\n\n    applicable: function() {\n        return this.options.span;\n    }\n});\n\nvar HtmlAttrCleaner = DomCleaner.extend({\n    cleanDom: function(container) {\n        var attributes = this.collectAttr();\n        var nodes = $(container).find(\"[\" + attributes.join(\"],[\") + \"]\");\n        nodes.removeAttr(attributes.join(\" \"));\n\n        return container;\n    },\n\n    collectAttr: function() {\n        if (this.options.css) {\n            return [\"class\", \"style\"];\n        }\n\n        return [];\n    },\n\n    applicable: function() {\n        return this.options.css;\n    }\n});\n\nvar TextContainer = function() {\n    this.text = \"\";\n    this.add = function(text) {\n        this.text += text;\n    };\n};\n\nvar HtmlTextLines = Class.extend({\n    init: function(separators) {\n        this.separators = separators || {\n                text: \" \",\n                line: \"<br/>\"\n            };\n        this.lines = [];\n        this.inlineBlockText = [];\n        this.resetLine();\n    },\n\n    appendText: function(text) {\n        if (text.nodeType === 3) {\n            text = text.nodeValue;\n        }\n\n        this.textContainer.add(text);\n    },\n\n    appendInlineBlockText: function(text) {\n        this.inlineBlockText.push(text);\n    },\n\n    flashInlineBlockText: function() {\n        if (this.inlineBlockText.length) {\n            this.appendText(this.inlineBlockText.join(\" \"));\n            this.inlineBlockText = [];\n        }\n    },\n\n    endLine: function() {\n        this.flashInlineBlockText();\n        this.resetLine();\n    },\n\n    html: function() {\n        var separators = this.separators;\n        var result = \"\";\n        var lines = this.lines;\n\n        this.flashInlineBlockText();\n\n        for (var i = 0, il = lines.length, il1 = il - 1; i < il; i++) {\n            var line = lines[i];\n            for (var j = 0, jl = line.length, jl1 = jl - 1; j < jl; j++) {\n                var text = line[j].text;\n                result += text;\n                if (j !== jl1) {\n                    result += separators.text;\n                }\n            }\n            if (i !== il1) {\n                result += separators.line;\n            }\n        }\n\n        return result;\n    },\n\n    resetLine: function() {\n        this.textContainer = new TextContainer();\n        this.line = [];\n        this.line.push(this.textContainer);\n        this.lines.push(this.line);\n    }\n});\n\nvar DomEnumerator = Class.extend({\n    init: function(callback) {\n        this.callback = callback;\n    },\n    enumerate: function(node) {\n        if (!node) {\n            return;\n        }\n\n        var preventDown = this.callback(node);\n\n        var child = node.firstChild;\n        if (!preventDown && child) {\n            this.enumerate(child);\n        }\n\n        this.enumerate(node.nextSibling);\n    }\n});\n\nvar HtmlContentCleaner = Cleaner.extend({\n    init: function(options) {\n        Cleaner.fn.init.call(this, options);\n        this.hasText = false; //unpleasant flag to prevent an empty line at the beginning of the generated content.\n        this.enumerator = new DomEnumerator(this.buildText.bind(this));\n    },\n\n    clean: function(html) {\n        var container = dom.create(document, 'div', { innerHTML: html });\n\n        return this.cleanDom(container);\n    },\n\n    cleanDom: function(container) {\n        this.separators = this.getDefaultSeparators();\n        this.htmlLines = new HtmlTextLines(this.separators);\n        this.enumerator.enumerate(container.firstChild);\n        this.hasText = false;\n\n        return this.htmlLines.html();\n    },\n\n    buildText: function(node) {\n        if (dom.isDataNode(node)) {\n            if (dom.isEmptyspace(node)) {\n                return;\n            }\n            this.htmlLines.appendText(node.nodeValue.replace('\\n', this.separators.line));\n            this.hasText = true;\n        } else if (dom.isBlock(node) && this.hasText) {\n            var action = this.actions[dom.name(node)] || this.actions.block;\n            return action(this, node);\n        } else if (dom.isBr(node)) {\n            this.htmlLines.appendText(this.separators.line);\n        }\n    },\n\n    applicable: function() {\n        var o = this.options;\n        return o.all || o.keepNewLines;\n    },\n\n    getDefaultSeparators: function() {\n        if (this.options.all) {\n            return { text: \" \", line: \" \" };\n        } else {\n            return { text: \" \", line: \"<br/>\" };\n        }\n    },\n\n    actions: {\n        ul: $.noop,\n        ol: $.noop,\n        table: $.noop,\n        thead: $.noop,\n        tbody: $.noop,\n        td: function(cleaner, node) {\n            var tdCleaner = new HtmlContentCleaner({ all: true });\n\n            var cellText = tdCleaner.cleanDom(node);\n            cleaner.htmlLines.appendInlineBlockText(cellText);\n\n            return true;\n        },\n\n        block: function(cleaner) {\n            cleaner.htmlLines.endLine();\n        }\n    }\n});\n\nvar CustomCleaner = Cleaner.extend({\n    clean: function(html) {\n        return this.options.custom(html);\n    },\n\n    applicable: function() {\n        return typeof(this.options.custom) === \"function\";\n    }\n});\n\nextend(editorNS, {\n    Clipboard: Clipboard,\n    Cleaner: Cleaner,\n    ScriptCleaner: ScriptCleaner,\n    TabCleaner: TabCleaner,\n    MSWordFormatCleaner: MSWordFormatCleaner,\n    WebkitFormatCleaner: WebkitFormatCleaner,\n    HtmlTagsCleaner: HtmlTagsCleaner,\n    HtmlAttrCleaner: HtmlAttrCleaner,\n    HtmlContentCleaner: HtmlContentCleaner,\n    HtmlTextLines: HtmlTextLines,\n    CustomCleaner: CustomCleaner\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n// Imports ================================================================\nvar kendo = window.kendo,\n    Class = kendo.Class,\n    editorNS = kendo.ui.editor,\n    RangeUtils = editorNS.RangeUtils,\n    dom = editorNS.Dom,\n    RestorePoint = editorNS.RestorePoint,\n    Marker = editorNS.Marker,\n    browser = kendo.support.browser,\n    bomSpan = \"<span  class='k-br'>\\ufeff</span>\",\n    extend = $.extend;\nvar nodeTypes = dom.nodeTypes;\nvar PREVIOUS_SIBLING = \"previousSibling\";\n\nfunction selected(node, range) {\n    return range.startContainer === node && range.endContainer === node &&\n        range.startOffset === 0 && range.endOffset == node.childNodes.length;\n}\n\nfunction getSibling(node, direction, condition) {\n    var sibling = node ? node[direction] : null;\n\n    while (sibling && !condition(sibling)) {\n        sibling = sibling[direction];\n    }\n\n    return sibling;\n}\n\nvar tableCells = \"td,th,caption\";\nvar tableCellsWrappers = \"table,tbody,thead,tfoot,tr\";\nvar tableElements = tableCellsWrappers + \",\" + tableCells;\nvar inTable = function(range) { return !range.collapsed && $(range.commonAncestorContainer).is(tableCellsWrappers); };\n\nvar RemoveTableContent = Class.extend({\n    remove: function(range) {\n        var that = this;\n        var marker = new Marker();\n        marker.add(range, false);\n\n        var nodes = RangeUtils.getAll(range, function(node) { return $(node).is(tableElements); });\n        var doc = RangeUtils.documentFromRange(range);\n        var start = marker.start;\n        var end = marker.end;\n        var cellsTypes = tableCells.split(\",\");\n        var startCell = dom.parentOfType(start, cellsTypes);\n        var endCell = dom.parentOfType(end, cellsTypes);\n        that._removeContent(start, startCell, true);\n        that._removeContent(end, endCell, false);\n        $(nodes).each(function(i, node) {\n            node = $(node);\n            (node.is(tableCells) ? node : node.find(tableCells)).each(function(j, cell) {\n                cell.innerHTML = \"&#65279;\";\n            });\n        });\n        if (startCell && !start.previousSibling) {\n            dom.insertBefore(doc.createTextNode(\"\\ufeff\"), start);\n        }\n        if (endCell && !end.nextSibling) {\n            dom.insertAfter(doc.createTextNode(\"\\ufeff\"), end);\n        }\n        if (startCell) {\n            range.setStartBefore(start);\n        } else if (nodes[0]) {\n            startCell = $(nodes[0]);\n            startCell = startCell.is(tableCells) ? startCell : startCell.find(tableCells).first();\n            if (startCell.length) {\n                range.setStart(startCell.get(0), 0);\n            }\n        }\n\n        range.collapse(true);\n\n        dom.remove(start);\n        dom.remove(end);\n    },\n    _removeContent: function(start, top, forwards) {\n        if (top) {\n            var sibling = forwards ? \"nextSibling\" : \"previousSibling\",\n                next,\n                getNext = function(node) {\n                    while (node && !node[sibling]) {\n                        node = node.parentNode;\n                    }\n                    return node && $.contains(top, node) ? node[sibling] : null;\n                };\n            start = getNext(start);\n            while (start) {\n                next = getNext(start);\n                dom.remove(start);\n                start = next;\n            }\n        }\n    }\n});\n\nvar TypingHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard,\n            isTypingKey = keyboard.isTypingKey(e),\n            evt = extend($.Event(), e);\n\n        that.editor.trigger(\"keydown\", evt);\n\n        if (evt.isDefaultPrevented()) {\n            e.preventDefault();\n            return true;\n        }\n\n        if (!evt.isDefaultPrevented() && isTypingKey && !keyboard.isTypingInProgress()) {\n            var range = editor.getRange();\n            var body = editor.body;\n            that.startRestorePoint = new RestorePoint(range, body);\n\n            if (inTable(range)) {\n                var removeTableContent = new RemoveTableContent(editor);\n                removeTableContent.remove(range);\n                editor.selectRange(range);\n            }\n\n            if (browser.webkit && !range.collapsed && selected(body, range)) {\n                body.innerHTML = \"\";\n            }\n\n            if (editor.immutables && editorNS.Immutables.immutablesContext(range)) {\n                var backspaceHandler = new editorNS.BackspaceHandler(editor);\n                backspaceHandler.deleteSelection(range);\n            }\n\n            keyboard.startTyping(function() {\n                that._removeBomSpan();\n                that.endRestorePoint = editorNS._finishUpdate(editor, that.startRestorePoint);\n            });\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function(e) {\n        var keyboard = this.editor.keyboard;\n\n        this.editor.trigger(\"keyup\", e);\n\n        if (keyboard.isTypingInProgress()) {\n            keyboard.endTyping();\n            return true;\n        }\n\n        return false;\n    },\n\n    _removeBomSpan: function() {\n        var node = this.editor.getRange().commonAncestorContainer;\n\n        if (!dom.emptyNode(node)) {\n            if (node.nodeType === 3) {\n                node = node.parentNode;\n            }\n\n            if (dom.insignificant(node)) {\n                // typing in an insignificant node\n                // make it significant\n                node.textContent = dom.stripBom(node.textContent);\n                dom.unwrap(node);\n            }\n        }\n    }\n});\n\nvar BackspaceHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n    _addCaret: function(container) {\n        var caret = dom.create(this.editor.document, \"a\");\n\n        // Only if not Chrome: Make sure to include cared in the formatted inline node\n        if (!kendo.support.browser.chrome && container.firstChild &&\n            container.firstChild.nodeType === nodeTypes.ELEMENT_NODE) {\n\n            container = container.firstChild;\n        }\n\n        dom.insertAt(container, caret, 0);\n        dom.stripBomNode(caret.previousSibling);\n        dom.stripBomNode(caret.nextSibling);\n        return caret;\n    },\n    _restoreCaret: function(caret) {\n        var range = this.editor.createRange();\n\n        if (!caret.nextSibling && dom.isDataNode(caret.previousSibling)) {\n            range.setStart(caret.previousSibling, caret.previousSibling.length);\n        } else {\n            range.setStartAfter(caret);\n        }\n\n        range.collapse(true);\n        this.editor.selectRange(range);\n        dom.remove(caret);\n    },\n    _handleDelete: function(range) {\n        var node = range.endContainer;\n        var block = dom.closestEditableOfType(node, dom.blockElements);\n\n        if (block && editorNS.RangeUtils.isEndOf(range, block)) {\n            // join with next sibling\n            var next = dom.next(block);\n            if (!next || dom.name(next) != \"p\") {\n                return false;\n            }\n\n            var caretPlaceholder = dom.significantChildNodes(next)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder)) ? caretPlaceholder : next;\n            var caret = this._addCaret(caretPlaceholder);\n\n            this._merge(block, next);\n\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        return false;\n    },\n    _cleanBomBefore: function(range) {\n        var offset = range.startOffset;\n        var node = range.startContainer;\n        var text = node.nodeValue;\n        var count = 0;\n        while (offset - count >= 0 && text[offset - count - 1] == \"\\ufeff\") {\n            count++;\n        }\n\n        if (count > 0) {\n            node.deleteData(offset - count, count);\n\n            range.setStart(node, Math.max(0, offset - count));\n            range.collapse(true);\n\n            this.editor.selectRange(range);\n        }\n    },\n    _handleBackspace: function(range) {\n        var node = range.startContainer;\n        var li = dom.closestEditableOfType(node, ['li']);\n        var block = dom.closestEditableOfType(node, 'p,h1,h2,h3,h4,h5,h6'.split(','));\n        var editor = this.editor;\n        var previousSibling;\n\n        if (dom.isDataNode(node)) {\n            if (range.collapsed && /^\\s[\\ufeff]+$/.test(node.nodeValue)) {\n                range.setStart(node, 0);\n                range.setEnd(node, node.length);\n                editor.selectRange(range);\n                return false;\n            }\n            this._cleanBomBefore(range);\n        }\n\n        previousSibling = getSibling(block, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.htmlIndentSpace(sibling);\n        });\n\n        //deleting the first list item with empty content in IE results in invalid range\n        if (range.collapsed && range.startOffset !== range.endOffset && range.startOffset < 0) {\n            range.startOffset = 0;\n            range.endOffset = 0;\n            editor.selectRange(range);\n        }\n\n        var startAtLi = li && editorNS.RangeUtils.isStartOf(range, li);\n        var liIndex = li && $(li).index();\n        var startAtNonFirstLi = startAtLi && liIndex > 0;\n        if (startAtNonFirstLi) {\n            block = li;\n            previousSibling = dom.prev(li);\n        }\n\n        if (block && previousSibling && dom.is(previousSibling, 'table') && editorNS.RangeUtils.isStartOf(range, block)) {\n            if (block.innerText === '') {\n                block.innerHTML = '\\ufeff';\n            }\n            return true;\n        }\n\n        // outdent\n        if (editorNS.RangeUtils.isStartOf(range, block) && parseInt(block.style.marginLeft,10) > 0) {\n            editor.exec(\"outdent\");\n            return true;\n        }\n\n        // unwrap block\n        if ((block && previousSibling && editorNS.RangeUtils.isStartOf(range, block)) || startAtNonFirstLi) {\n            var caretPlaceholder = dom.significantChildNodes(block)[0];\n            caretPlaceholder = (caretPlaceholder && dom.isInline(caretPlaceholder) && !dom.isImg(caretPlaceholder)) ? caretPlaceholder : block;\n\n            var caret = this._addCaret(caretPlaceholder);\n            this._merge(previousSibling, block);\n            this._restoreCaret(caret);\n\n            return true;\n        }\n\n        // unwrap li element\n        if (startAtLi && liIndex === 0) {\n            var child = li.firstChild;\n            if (!child) {\n                li.innerHTML = editorNS.emptyElementContent;\n                child = li.firstChild;\n            }\n\n            var formatter = new editorNS.ListFormatter(dom.name(li.parentNode), \"p\");\n            range.selectNodeContents(li);\n            formatter.toggle(range);\n\n            if (dom.insignificant(child)) {\n                range.setStartBefore(child);\n            } else {\n                range.setStart(child, 0);\n            }\n\n            editor.selectRange(range);\n\n            return true;\n        }\n\n        var rangeStartNode = node.childNodes[range.startOffset - 1];\n        var linkRange = range;\n        var anchor = rangeStartNode && dom.closestEditableOfType(rangeStartNode, ['a']);\n        var previousNode = getSibling(rangeStartNode || node, PREVIOUS_SIBLING, function(sibling) {\n            return !dom.isDataNode(sibling) || (!dom.isBom(sibling) && sibling.length > 0);\n        });\n        if (anchor || ((range.startOffset === 0 || rangeStartNode) && dom.is(previousNode, \"a\"))) {\n            anchor = anchor || previousNode;\n            linkRange = editor.createRange();\n            linkRange.setStart(anchor, anchor.childNodes.length);\n            linkRange.collapse(true);\n        }\n\n        anchor = anchor || dom.closestEditableOfType(rangeStartNode || linkRange.startContainer, ['a']);\n        var isEndOfLink = anchor && editorNS.RangeUtils.isEndOf(linkRange, anchor);\n        if (isEndOfLink) {\n            var command = new editorNS.UnlinkCommand({ range: linkRange, body: editor.body, immutables: !!editor.immutables });\n            editor.execCommand(command);\n            editor._selectionChange();\n        }\n        return false;\n    },\n    _handleSelection: function(range) {\n        var ancestor = range.commonAncestorContainer;\n        var table = dom.closest(ancestor, \"table\");\n        var emptyParagraphContent = editorNS.emptyElementContent;\n        var editor = this.editor;\n        var parentElementOrNode;\n\n        if (inTable(range)) {\n            var removeTableContent = new RemoveTableContent(editor);\n            removeTableContent.remove(range);\n            editor.selectRange(range);\n            return true;\n        }\n\n        var marker = new Marker();\n        marker.add(range, false);\n\n        if (range.commonAncestorContainer === editor.body) {\n            this._surroundFullyContent(marker, range);\n        }\n\n        if (editor.immutables) {\n            this._handleImmutables(marker);\n        }\n\n        this._surroundFullySelectedAnchor(marker, range);\n\n        range.setStartAfter(marker.start);\n        range.setEndBefore(marker.end);\n\n        var start = range.startContainer;\n        var end = range.endContainer;\n\n        range.deleteContents();\n\n        if (end.tagName.toLocaleLowerCase() === \"li\" && dom.emptyNode(end)) {\n            range.selectNode(end);\n            range.deleteContents();\n        }\n\n        if (table && $(table).text() === \"\") {\n            range.selectNode(table);\n            range.deleteContents();\n        }\n\n        ancestor = range.commonAncestorContainer;\n\n        if (dom.name(ancestor) === \"p\" && ancestor.innerHTML === \"\") {\n            ancestor.innerHTML = emptyParagraphContent;\n            range.setStart(ancestor, 0);\n        }\n\n        this._join(start, end);\n\n        dom.insertAfter(editor.document.createTextNode(\"\\ufeff\"), marker.start);\n        marker.remove(range);\n\n        start = range.startContainer;\n        if (dom.name(start) == \"tr\") {\n            start = start.childNodes[Math.max(0, range.startOffset - 1)];\n            range.setStart(start, dom.getNodeLength(start));\n        }\n\n        range.collapse(true);\n\n        editor.selectRange(range);\n\n        parentElementOrNode = start.parentElement || start.parentNode;\n\n        if (dom.isDataNode(start) && !dom.emptyNode(parentElementOrNode)) {\n            this._cleanBomBefore(range);\n        }\n\n        return true;\n    },\n    _handleImmutables: function(marker) {\n        var immutableParent = editorNS.Immutables.immutableParent;\n        var startImmutable = immutableParent(marker.start);\n        var endImmutable = immutableParent(marker.start);\n        if (startImmutable) {\n            dom.insertBefore(marker.start, startImmutable);\n        }\n        if (endImmutable) {\n            dom.insertAfter(marker.end, endImmutable);\n        }\n        if (startImmutable) {\n            dom.remove(startImmutable);\n        }\n        if (endImmutable && endImmutable.parentNode) {\n            dom.remove(endImmutable);\n        }\n    },\n    _surroundFullyContent: function(marker, range) {\n        var children = range.commonAncestorContainer.children,\n            startParent = children[0],\n            endParent = children[children.length - 1];\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _surroundFullySelectedAnchor: function(marker, range) {\n        var start = marker.start,\n            startParent = $(start).closest(\"a\").get(0),\n            end = marker.end,\n            endParent = $(end).closest(\"a\").get(0);\n\n        this._moveMarker(marker, range, startParent, endParent);\n    },\n    _moveMarker: function(marker, range, startParent, endParent) {\n        var start = marker.start,\n            end = marker.end;\n\n        if (startParent && RangeUtils.isStartOf(range, startParent)) {\n            dom.insertBefore(start, startParent);\n        }\n\n        if (endParent && RangeUtils.isEndOf(range, endParent)) {\n            dom.insertAfter(end, endParent);\n        }\n    },\n    _root: function(node) {\n        while (node && dom.name(node) != \"body\" && node.parentNode && dom.name(node.parentNode) != \"body\") {\n            node = node.parentNode;\n        }\n\n        return node;\n    },\n    _join: function(start, end) {\n        start = this._root(start);\n        end = this._root(end);\n\n        if (start != end && dom.is(end, \"p\")) {\n            this._merge(start, end);\n        }\n    },\n    _merge: function(dest, src) {\n        dom.removeTrailingBreak(dest);\n\n        while (dest && src.firstChild) {\n            if (dest.nodeType == 1) {\n                dest = dom.list(dest) ? dest.children[dest.children.length - 1] : dest;\n\n                if (dest) {\n                    dest.appendChild(src.firstChild);\n                }\n            } else if (dest.nodeType === nodeTypes.TEXT_NODE) {\n                this._mergeWithTextNode(dest, src.firstChild);\n            } else {\n                dest.parentNode.appendChild(src.firstChild);\n            }\n        }\n\n        dom.remove(src);\n    },\n\n    _mergeWithTextNode: function(textNode, appendedNode) {\n        if (textNode && textNode.nodeType === nodeTypes.TEXT_NODE) {\n            if (textNode.nextSibling && this._isCaret(textNode.nextSibling)) {\n                dom.insertAfter(appendedNode, textNode.nextSibling);\n            }\n            else {\n                dom.insertAfter(appendedNode, textNode);\n            }\n        }\n    },\n\n    _isCaret: function(element) {\n        return $(element).is(\"a\");\n    },\n\n    keydown: function(e) {\n        var method, startRestorePoint;\n        var editor = this.editor;\n        var range = editor.getRange();\n        var keyCode = e.keyCode;\n        var keys = kendo.keys;\n        var backspace = keyCode === keys.BACKSPACE;\n        var del = keyCode == keys.DELETE;\n\n        if (editor.immutables && editor.immutables.keydown(e, range)) {\n            return;\n        }\n\n        if ((backspace || del) && !range.collapsed) {\n            method = \"_handleSelection\";\n        } else if (backspace) {\n            method = \"_handleBackspace\";\n        } else if (del) {\n            method = \"_handleDelete\";\n        }\n\n        if (!method) {\n            return;\n        }\n\n        startRestorePoint = new RestorePoint(range, editor.body);\n\n        if (this[method](range)) {\n            e.preventDefault();\n\n            editorNS._finishUpdate(editor, startRestorePoint);\n        }\n    },\n    deleteSelection: function(range) {\n        this._handleSelection(range);\n    },\n    keyup: $.noop\n});\n\nvar SystemHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n        this.systemCommandIsInProgress = false;\n    },\n\n    createUndoCommand: function() {\n        this.startRestorePoint = this.endRestorePoint = editorNS._finishUpdate(this.editor, this.startRestorePoint);\n    },\n\n    changed: function() {\n        if (this.startRestorePoint) {\n            return this.startRestorePoint.html != this.editor.body.innerHTML;\n        }\n\n        return false;\n    },\n\n    keydown: function(e) {\n        var that = this,\n            editor = that.editor,\n            keyboard = editor.keyboard;\n\n        if (keyboard.isModifierKey(e)) {\n\n            if (keyboard.isTypingInProgress()) {\n                keyboard.endTyping(true);\n            }\n\n            that.startRestorePoint = new RestorePoint(editor.getRange(), editor.body);\n            return true;\n        }\n\n        if (keyboard.isSystem(e)) {\n            that.systemCommandIsInProgress = true;\n\n            if (that.changed()) {\n                that.systemCommandIsInProgress = false;\n                that.createUndoCommand();\n            }\n\n            return true;\n        }\n\n        return false;\n    },\n\n    keyup: function() {\n        var that = this;\n\n        if (that.systemCommandIsInProgress && that.changed()) {\n            that.systemCommandIsInProgress = false;\n            that.createUndoCommand();\n            return true;\n        }\n\n        return false;\n    }\n});\n\nvar SelectAllHandler = Class.extend({\n    init: function(editor) {\n        this.editor = editor;\n    },\n\n    keydown: function(e) {\n        if (!browser.webkit || e.isDefaultPrevented() ||\n            !(e.ctrlKey && e.keyCode == 65 && !e.altKey && !e.shiftKey)) {\n            return;\n        }\n        if (this.editor.options.immutables) {\n            this._toSelectableImmutables();\n        }\n        this._selectEditorBody();\n    },\n\n    _selectEditorBody: function() {\n        var editor = this.editor;\n        var range = editor.getRange();\n        range.selectNodeContents(editor.body);\n\n        setTimeout(function() {\n            editor.selectRange(range);\n        });\n    },\n\n    _toSelectableImmutables: function() {\n        var editor = this.editor,\n            body = editor.body,\n            immutable = editorNS.Immutables.immutable,\n            emptyTextNode = dom.emptyTextNode,\n            first = body.firstChild,\n            last = body.lastChild;\n\n        while (emptyTextNode(first)) {\n            first = first.nextSibling;\n        }\n\n        while (emptyTextNode(last)) {\n            last = last.previousSibling;\n        }\n\n        if (first && immutable(first)) {\n            $(bomSpan).prependTo(body);\n        }\n\n        if (last && immutable(last)) {\n            $(bomSpan).appendTo(body);\n        }\n    },\n\n    keyup: $.noop\n});\n\nvar Keyboard = Class.extend({\n    init: function(handlers) {\n        this.handlers = handlers;\n        this.typingInProgress = false;\n    },\n\n    isCharacter: function(keyCode) {\n        return (keyCode >= 48 && keyCode <= 90) || (keyCode >= 96 && keyCode <= 111) ||\n               (keyCode >= 186 && keyCode <= 192) || (keyCode >= 219 && keyCode <= 222) ||\n               keyCode == 229;\n    },\n\n    toolFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            toolOptions,\n            modifier = this._getShortcutModifier(e, navigator.platform);\n\n        for (toolName in tools) {\n            toolOptions = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            if ((toolOptions.key == key || toolOptions.key == e.keyCode) &&\n                toolOptions.ctrl == modifier &&\n                toolOptions.alt == e.altKey &&\n                toolOptions.shift == e.shiftKey) {\n                return toolName;\n            }\n        }\n    },\n\n    _getShortcutModifier: function(e, platform) {\n        var mac = platform.toUpperCase().indexOf('MAC') >= 0;\n        return mac ? e.metaKey : e.ctrlKey;\n    },\n\n    toolsFromShortcut: function(tools, e) {\n        var key = String.fromCharCode(e.keyCode),\n            toolName,\n            o,\n            matchesKey,\n            found = [];\n        var matchKey = function(toolKey) { return toolKey == key || toolKey == e.keyCode || toolKey == e.charCode; };\n\n        for (toolName in tools) {\n            o = $.extend({ ctrl: false, alt: false, shift: false }, tools[toolName].options);\n\n            matchesKey = Array.isArray(o.key) ? $.grep(o.key, matchKey).length > 0 : matchKey(o.key);\n            if (matchesKey &&\n                o.ctrl == e.ctrlKey &&\n                o.alt == e.altKey &&\n                o.shift == e.shiftKey) {\n                found.push(tools[toolName]);\n            }\n        }\n\n        return found;\n    },\n\n    isTypingKey: function(e) {\n        var keyCode = e.keyCode;\n        return (this.isCharacter(keyCode) && !e.ctrlKey && !e.altKey) ||\n               keyCode == 32 || keyCode == 13 || keyCode == 8 ||\n               (keyCode == 46 && !e.shiftKey && !e.ctrlKey && !e.altKey);\n    },\n\n    isModifierKey: function(e) {\n        var keyCode = e.keyCode;\n        return (keyCode == 17 && !e.shiftKey && !e.altKey) ||\n               (keyCode == 16 && !e.ctrlKey && !e.altKey) ||\n               (keyCode == 18 && !e.ctrlKey && !e.shiftKey);\n    },\n\n    isSystem: function(e) {\n        return e.keyCode == 46 && e.ctrlKey && !e.altKey && !e.shiftKey;\n    },\n\n    startTyping: function(callback) {\n        this.onEndTyping = callback;\n        this.typingInProgress = true;\n    },\n\n    stopTyping: function() {\n        if (this.typingInProgress && this.onEndTyping) {\n            this.onEndTyping();\n        }\n        this.typingInProgress = false;\n    },\n\n    endTyping: function(force) {\n        var that = this;\n        that.clearTimeout();\n        if (force) {\n            that.stopTyping();\n        } else {\n            that.timeout = window.setTimeout(that.stopTyping.bind(that), 1000);\n        }\n    },\n\n    isTypingInProgress: function() {\n        return this.typingInProgress;\n    },\n\n    clearTimeout: function() {\n        window.clearTimeout(this.timeout);\n    },\n\n    notify: function(e, what) {\n        var i, handlers = this.handlers;\n\n        for (i = 0; i < handlers.length; i++) {\n            if (handlers[i][what](e)) {\n                break;\n            }\n        }\n    },\n\n    keydown: function(e) {\n        this.notify(e, 'keydown');\n    },\n\n    keyup: function(e) {\n        this.notify(e, 'keyup');\n    }\n});\n\nextend(editorNS, {\n    TypingHandler: TypingHandler,\n    SystemHandler: SystemHandler,\n    BackspaceHandler: BackspaceHandler,\n    SelectAllHandler: SelectAllHandler,\n    Keyboard: Keyboard\n});\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar ExportPdfCommand = Command.extend({\n    init: function(options) {\n        this.async = true;\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var that = this;\n        var range = that.lockRange(true);\n        var editor = that.editor;\n\n        editor._destroyResizings();\n\n        editor.saveAsPDF().then(function() {\n            that.releaseRange(range);\n            editor._initializeColumnResizing();\n            editor._initializeRowResizing();\n            editor._initializeElementResizing();\n        });\n    }\n});\n\nextend(editorNS, {\n    ExportPdfCommand: ExportPdfCommand\n});\n\nregisterTool(\"pdf\", new Tool({ command: ExportPdfCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    // Imports ================================================================\n    var kendo = window.kendo,\n        editorNS = kendo.ui.editor,\n        Command = editorNS.Command,\n        EditorUtils = editorNS.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        Tool = editorNS.Tool,\n        extend = $.extend;\n\nvar PrintCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n\n        this.managesUndoRedo = true;\n    },\n\n    exec: function() {\n        var editor = this.editor;\n\n        if (kendo.support.browser.msie) {\n            editor.document.execCommand(\"print\", false, null);\n        } else if (editor.window.print) {\n            editor.window.print();\n        }\n    }\n});\n\nextend(editorNS, {\n    PrintCommand: PrintCommand\n});\n\nregisterTool(\"print\", new Tool({ command: PrintCommand }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    Tool = Editor.Tool,\n    Command = Editor.Command,\n    EditorUtils = Editor.EditorUtils,\n    dom = Editor.Dom,\n    RangeUtils = Editor.RangeUtils,\n    registerTool = EditorUtils.registerTool;\n\nvar CopyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        this.inlineStyles = [];\n        this.blockStyles = [];\n        this.collectStyles(range);\n        this.editor.inlineStyles = this.inlineStyles;\n        this.editor.blockStyles = this.blockStyles;\n        this.releaseRange(range);\n    },\n\n    collectStyles: function(range) {\n        var rangeNodes = RangeUtils.nodes(range);\n        var node;\n\n        if (rangeNodes.length === 1) {\n            node = rangeNodes[0].parentNode;\n        } else {\n            node = range.startContainer;\n        }\n\n        while (node && !dom.is(node, \"body\") && node.getAttribute(\"data-role\") !== \"editor\") {\n            if (dom.isBlock(node)) {\n                this.populateStyles(node, \"blockStyles\");\n                if (dom.is(node, \"li\")) {\n                    node = node.parentNode;\n                } else {\n                    node = null;\n                }\n            } else {\n                this.populateStyles(node, \"inlineStyles\");\n                node = node.parentNode;\n            }\n        }\n    },\n\n    populateStyles: function(node, destination) {\n        var styles = node.style;\n        var attributes = node.attributes;\n        var nodeStyles = {\n            tags: [ node.tagName ],\n            attr: {\n                style: {}\n            }\n        };\n        var styleValue, styleKey, attributeKey, attributeValue, i;\n\n        for (i = 0; styles && i < styles.length; i++) {\n            styleKey = styles[i];\n            styleValue = styles[styleKey];\n            nodeStyles.attr.style[styleKey] = styleValue;\n        }\n\n        for (i = 0; attributes && i < attributes.length; i++) {\n            attributeKey = attributes[i].nodeName;\n            attributeValue = attributes[i].nodeValue;\n            if (attributeKey === \"style\") {\n                continue;\n            } else if (attributeKey === \"class\") {\n                nodeStyles.attr.className = attributeValue;\n            } else {\n                nodeStyles.attr[attributeKey] = attributeValue;\n            }\n        }\n\n        this[destination].push(nodeStyles);\n    }\n});\n\nvar ApplyFormatCommand = Command.extend({\n    init: function(options) {\n        Command.fn.init.call(this, options);\n    },\n\n    exec: function() {\n        var range = this.lockRange(true);\n        var markers = RangeUtils.getMarkers(range);\n        var editor = this.editor;\n        var inlineStyles = editor.inlineStyles;\n        var blockStyles = editor.blockStyles;\n        var nodes;\n\n        if ((!inlineStyles || inlineStyles.length === 0) && (!blockStyles || blockStyles.length === 0)) {\n            return;\n        }\n\n        if (markers.length === 3) {\n            this.marker.removeCaret(range);\n            this.marker.caret = null;\n        }\n\n        this.removeEmptyElementsFromRange(range);\n        nodes = RangeUtils.nodes(range);\n        this.cleanInlineParents(nodes);\n        dom.normalize(range.commonAncestorContainer);\n\n        if (markers.length === 2) {\n            range.setStartAfter(markers[0]);\n            range.setEndBefore(markers[1]);\n        } else {\n            range.setStartBefore(nodes[0]);\n            range.setEndAfter(nodes[0]);\n        }\n\n        nodes = RangeUtils.nodes(range);\n\n        if (nodes && blockStyles && blockStyles.length) {\n            this.applyBlockStyles(nodes, blockStyles);\n        }\n\n        if (nodes && inlineStyles && inlineStyles.length) {\n            this.applyInlineStyles(nodes, inlineStyles);\n        }\n\n        this.releaseRange(range);\n    },\n\n    removeEmptyElementsFromRange: function(range) {\n        var isEmptyInline = function(node) {\n            return dom.isInline(node) && !node.firstChild && !dom.isMarker(node);\n        };\n        var emptyElements, i;\n\n        emptyElements = RangeUtils.getAll(range, isEmptyInline);\n\n        if (emptyElements && emptyElements.length > 0) {\n            for (i = 0; i < emptyElements.length; i++) {\n                emptyElements[i].parentNode.removeChild(emptyElements[i]);\n            }\n        }\n    },\n\n    cleanInlineParents: function(nodes) {\n        var i, node, parent, children, j, child, newNode;\n\n        for (i = 0; i < nodes.length; i++) {\n            node = nodes[i];\n            parent = node.parentNode;\n\n            if (this.immutableParent(node)) {\n                continue;\n            }\n\n            while (parent && dom.isInline(parent)) {\n                children = parent.childNodes;\n\n                for (j = 0; j < children.length; j++) {\n                    child = children[j];\n\n                    if (!dom.isMarker(child) && child !== node) {\n                        newNode = parent.cloneNode(true);\n                        newNode.innerHTML = \"\";\n                        dom.wrap(child, newNode);\n                    }\n                }\n\n                dom.unwrap(parent);\n                parent = node.parentNode;\n            }\n        }\n    },\n\n    applyBlockStyles: function(nodes, blockStyles) {\n        var formatTag = blockStyles[0].tags[0];\n        var attr = blockStyles[0].attr;\n        var document = this.editor.document;\n        var i, len, node, wrapper, blockParent, outerWrapper;\n        var previousNodes, nextNodes, previous, next, prevWrapper, nextWrapper, child, j, listItems;\n\n        for (i = 0, len = nodes.length; i < len; i++) {\n            node = nodes[i];\n\n            if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                continue;\n            }\n\n            blockParent = dom.blockParentOrBody(node);\n\n            if (blockParent.tagName !== \"BODY\" && blockParent.tagName !== formatTag) {\n                if (blockParent.tagName !== \"LI\" && blockParent.tagName !== \"TD\" && blockParent.tagName !== \"TH\") {\n                    previousNodes = [];\n                    nextNodes = [];\n                    previous = node.previousSibling;\n                    next = node.nextSibling;\n\n                    while (previous) {\n                        if (!dom.isMarker(previous)) {\n                            previousNodes.push(previous);\n                        }\n\n                        previous = previous.previousSibling;\n                    }\n\n                    if (previousNodes.length) {\n                        prevWrapper = blockParent.cloneNode(true);\n                        prevWrapper.innerHTML = \"\";\n                        dom.insertBefore(prevWrapper, previousNodes[0]);\n\n                        for (j = 0; j < previousNodes.length; j++) {\n                            child = previousNodes[j];\n                            dom.insertAt(prevWrapper, child, 0);\n                        }\n                    }\n\n                    while (next) {\n                        if (!dom.isMarker(next)) {\n                            nextNodes.push(next);\n                        }\n\n                        next = next.nextSibling;\n                    }\n\n                    if (nextNodes.length) {\n                        nextWrapper = blockParent.cloneNode(true);\n                        nextWrapper.innerHTML = \"\";\n                        dom.insertBefore(nextWrapper, nextNodes[0]);\n\n                        for (j = 0; j < nextNodes.length; j++) {\n                            child = nextNodes[j];\n                            nextWrapper.appendChild(child);\n                        }\n                    }\n\n                    dom.unwrap(blockParent);\n                }\n\n                wrapper = dom.create(document, formatTag, attr);\n                dom.wrap(node, wrapper);\n            } else if (blockParent.tagName === formatTag) {\n                dom.attr(blockParent, attr);\n            }\n        }\n\n        if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\" && formatTag === \"LI\") {\n            listItems = [];\n\n            while (dom.is(wrapper, \"li\")) {\n                listItems.push(wrapper);\n                wrapper = dom.prev(wrapper);\n            }\n\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.insertBefore(outerWrapper, listItems[listItems.length - 1]);\n            outerWrapper.appendChild(listItems[0]);\n\n            for (i = 1, len = listItems.length; i < len; i++) {\n                dom.insertBefore(listItems[i], outerWrapper.firstChild);\n            }\n        } else if (blockParent && blockStyles.length === 2 && blockParent.tagName !== \"LI\") {\n            outerWrapper = dom.create(document, blockStyles[1].tags[0], blockStyles[1].attr);\n            dom.wrap(wrapper, outerWrapper);\n        }\n    },\n\n    applyInlineStyles: function(nodes, inlineStyles) {\n        var document = this.editor.document;\n        var currentStyle, createdNode, topNode, i, newNode, node;\n\n        for (i = 0; i < inlineStyles.length; i++) {\n            currentStyle = inlineStyles[i];\n            createdNode = dom.create(document, currentStyle.tags[0], currentStyle.attr);\n\n            if (topNode) {\n                createdNode.appendChild(topNode);\n            }\n\n            topNode = createdNode;\n        }\n\n        if (topNode) {\n            for (i = 0; i < nodes.length; i++) {\n                node = nodes[i];\n                if (dom.isWhitespace(node) || this.immutableParent(node)) {\n                    continue;\n                }\n                newNode = topNode.cloneNode(true);\n                dom.insertBefore(newNode, node);\n\n                while (newNode.children && newNode.children.length) {\n                    newNode = newNode.children[0];\n                }\n\n                newNode.appendChild(node);\n            }\n        }\n    },\n\n    immutables: function() {\n        return this.editor && this.editor.options.immutables;\n    },\n\n    immutableParent: function(node) {\n        return this.immutables() && Editor.Immutables.immutableParent(node);\n    }\n});\n\nvar CopyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new CopyFormatCommand(commandArguments);\n    }\n});\n\nvar ApplyFormatTool = Tool.extend({\n    init: function(options) {\n        Tool.fn.init.call(this, options);\n    },\n\n    command: function(commandArguments) {\n        return new ApplyFormatCommand(commandArguments);\n    }\n});\n\n$.extend(Editor, {\n    CopyFormatCommand: CopyFormatCommand,\n    ApplyFormatCommand: ApplyFormatCommand,\n    CopyFormatTool: CopyFormatTool,\n    ApplyFormatTool: ApplyFormatTool\n});\n\nregisterTool(\"copyFormat\", new CopyFormatTool({ }));\nregisterTool(\"applyFormat\", new ApplyFormatTool({ }));\n\n})(window.kendo.jQuery);\n\n(function($) {\n\n    const kendo = window.kendo,\n        extend = $.extend,\n        Editor = kendo.ui.editor,\n        formats = kendo.ui.Editor.fn.options.formats,\n        dom = Editor.Dom,\n        Tool = Editor.Tool,\n        DelayedExecutionTool = Editor.DelayedExecutionTool,\n        BlockFormatter = Editor.BlockFormatter,\n        FormatCommand = Editor.FormatCommand,\n        GreedyInlineFormatFinder = Editor.GreedyInlineFormatFinder,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        registerFormat = EditorUtils.registerFormat,\n        RangeUtils = Editor.RangeUtils;\n\n    const LineHeightCommand = FormatCommand.extend({\n        exec: function() {\n            const cmd = this,\n                range = cmd.lockRange(true),\n                nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n\n            cmd.formatter.format[0].attr.style.lineHeight = cmd.options.value.lineHeight;\n            cmd.formatter.apply(nodes);\n            cmd.releaseRange(range);\n        }\n    });\n\n    const LineHeightFormatTool = DelayedExecutionTool.extend({\n        init: function(options) {\n            Tool.fn.init.call(this, options);\n\n            this.type = \"kendoComboBox\";\n            this.format = [{ tags: [\"p\", \"lineHeight\"] }];\n            this.finder = new GreedyInlineFormatFinder(this.format, options.cssAttr, options.fontAttr, options.defaultValue);\n        },\n\n        command: function(commandArguments) {\n            var that = this;\n\n            return new LineHeightCommand(extend(commandArguments, {\n                formatter: function() {\n                    return new BlockFormatter(that.options.format);\n                }\n            }));\n        },\n\n        initialize: function(ui, editor) {\n            var tool = this,\n                component = ui.getKendoComboBox();\n\n            tool.editor = editor;\n\n            component.bind(\"change\", this.changeHandler.bind(this));\n        },\n\n        changeHandler: function(e) {\n            this._exec(e.sender.value());\n        },\n\n        _exec: function(value) {\n            if (value) {\n                Tool.exec(this.editor, this.options.name, { lineHeight: value });\n            }\n        },\n    });\n\n    $.extend(Editor, {\n        LineHeightCommand: LineHeightCommand,\n        LineHeightFormatTool: LineHeightFormatTool\n    });\n\n    registerFormat(\"lineHeight\", [\n        { tags: dom.blockElements, attr: { style: { lineHeight: \"normal\" } } }\n    ]);\n\n    registerTool(\"lineHeight\", new LineHeightFormatTool({\n        cssAttr: \"line-height\",\n        format: formats.lineHeight,\n        defaultValue: 1.15,\n        ui: {\n            type: \"component\",\n            component: \"ComboBox\",\n            componentOptions: {\n                value: 1.15,\n                dataTextField: \"text\",\n                dataValueField: \"value\",\n                prefixOptions: {\n                    icon: \"paragraphHeight\"\n                },\n                autoSize: true,\n                dataSource: [\n                    { text: \"1\", value: \"1\" },\n                    { text: \"1.15\", value: \"1.15\" },\n                    { text: \"1.5\", value: \"1.5\" },\n                    { text: \"2\", value: \"2\" },\n                    { text: \"2.5\", value: \"2.5\" },\n                ]\n            }\n        }\n    }));\n})(window.kendo.jQuery);\n\n(function($) {\n\n    const kendo = window.kendo,\n        Editor = kendo.ui.editor,\n        Tool = Editor.Tool,\n        Command = Editor.Command,\n        EditorUtils = Editor.EditorUtils,\n        registerTool = EditorUtils.registerTool,\n        DOM = Editor.Dom,\n        SPACE_UNICODE = \"\\u00B7\",\n        NEW_LINE_UNICODE = \"\\u21B5\";\n\n    const createMark = function(range, document, character, scrollTop, index) {\n        const clonedRange = range.cloneRange(),\n              container = clonedRange.startContainer;\n\n        let domRect, x, y, textNode;\n\n        if (index !== undefined) {\n            clonedRange.setStart(container, index);\n            clonedRange.setEnd(container, index + 1);\n        }\n\n        domRect = clonedRange.getBoundingClientRect();\n\n        if (character === SPACE_UNICODE) {\n            x = domRect.x - domRect.width / 4;\n            y = domRect.y + domRect.height + scrollTop;\n        } else if (character === NEW_LINE_UNICODE) {\n            x = domRect.x;\n            y = domRect.y + domRect.height + scrollTop;\n        }\n\n        textNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        textNode.setAttributeNS(null, \"x\", x);\n        textNode.setAttributeNS(null, \"y\", y);\n        textNode.setAttributeNS(null, \"fill\", \"#6098f2\");\n        textNode.setAttributeNS(null, \"font-size\", `${Math.ceil(domRect.height + domRect.width)}px`);\n        textNode.textContent = character;\n\n        return textNode;\n    };\n\n    const appendSvgMarks = function() {\n        const that = this,\n            range = that.getRange().cloneRange(),\n            svgNodes = [],\n            overlay = that._formattingMarksOverlay[0],\n            fragment = that.document.createDocumentFragment(),\n            document = that.document,\n            scrollTop = document.documentElement.scrollTop;\n\n        range.setStart(that.body.firstChild, 0);\n        range.setEnd(that.body.lastChild, 0);\n\n        const nodes = DOM.getTextNodes(that.body).concat($(that.body).find(\"br\").toArray());\n\n        nodes.forEach((node) => {\n            if (node.nodeType === DOM.nodeTypes.TEXT_NODE) {\n                range.selectNodeContents(node);\n\n                for (let i = range.startOffset; i < range.endOffset; i++) {\n                    if ((range.startContainer.textContent.charCodeAt(i) === 32 || range.startContainer.textContent.charCodeAt(i) === 160)) {\n                        fragment.appendChild(createMark(range, document, SPACE_UNICODE, scrollTop, i));\n                    }\n                }\n            } else {\n                range.selectNode(node);\n                fragment.appendChild(createMark(range, document, NEW_LINE_UNICODE, scrollTop));\n            }\n        });\n\n        overlay.appendChild(fragment);\n    };\n\n    const clearFormattingMarksOverlay = function(editor) {\n        editor._formattingMarksOverlay.empty();\n    };\n\n    const applyFormattingMarks = function(editor) {\n        appendSvgMarks.call(editor);\n    };\n\n    const FormattingMarksCommand = Command.extend({\n        exec: function() {\n            const cmd = this,\n                range = cmd.lockRange(true),\n                editor = cmd.editor;\n\n            if (!editor._toggledFormattingMarks) {\n                editor._toggledFormattingMarks = true;\n                editor._appendFormattingMarksOverlay();\n                editor._appendFormattingMarksStyles();\n                clearFormattingMarksOverlay(editor);\n                applyFormattingMarks(editor);\n            } else {\n                editor._toggledFormattingMarks = false;\n                editor._destroyFormattingMarksOverlay();\n            }\n\n            cmd.releaseRange(range);\n        }\n    });\n\n    $.extend(Editor, {\n        FormattingMarksCommand: FormattingMarksCommand,\n        applyFormattingMarks: applyFormattingMarks,\n        clearFormattingMarksOverlay: clearFormattingMarksOverlay\n    });\n\n    registerTool(\"formattingMarks\", new Tool({ command: FormattingMarksCommand, icon: \"paragraphMark\", ui: { togglable: true } }));\n})(window.kendo.jQuery);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n    var parseFloat = global.parseFloat;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n\n    var PERCENTAGE = \"%\";\n    var PIXEL = \"px\";\n    var REGEX_NUMBER_IN_PERCENTAGES = /(\\d+)(\\.?)(\\d*)%/;\n    var REGEX_NUMBER_IN_PIXELS = /(\\d+)(\\.?)(\\d*)px/;\n    var STRING = \"string\";\n\n    function constrain(options) {\n        var value = options.value;\n        var lowerBound = options.min;\n        var upperBound = options.max;\n\n        return max(min(parseFloat(value), parseFloat(upperBound)), parseFloat(lowerBound));\n    }\n\n    function getScrollBarWidth(element) {\n        if (element && !$(element).is(\"body\") && element.scrollHeight > element.clientHeight) {\n            return kendo.support.scrollbar();\n        }\n\n        return 0;\n    }\n\n    function calculatePercentageRatio(value, total) {\n        if (inPercentages(value)) {\n            return parseFloat(value);\n        }\n        else {\n            return ((parseFloat(value) / total) * 100);\n        }\n    }\n\n    function inPercentages(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PERCENTAGES.test(value));\n    }\n\n    function inPixels(value) {\n        return (typeof(value) === STRING && REGEX_NUMBER_IN_PIXELS.test(value));\n    }\n\n    function toPercentages(value) {\n        return (parseFloat(value) + PERCENTAGE);\n    }\n\n    function toPixels(value) {\n        return (parseFloat(value) + PIXEL);\n    }\n\n    var ResizingUtils = {\n        constrain: constrain,\n        getScrollBarWidth: getScrollBarWidth,\n        calculatePercentageRatio: calculatePercentageRatio,\n        inPercentages: inPercentages,\n        inPixels: inPixels,\n        toPercentages: toPercentages,\n        toPixels: toPixels\n    };\n\n    extend(Editor, {\n        ResizingUtils: ResizingUtils\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var MOUSE_ENTER = \"mouseenter\";\n    var MOUSE_LEAVE = \"mouseleave\";\n    var MOUSE_MOVE = \"mousemove\";\n    var MOUSE_UP = \"mouseup\";\n\n    var COMMA = \",\";\n    var DOT = \".\";\n    var LAST_CHILD = \":last-child\";\n\n    var TABLE = \"table\";\n\n    var TableElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n\n            that.options.tags = Array.isArray(that.options.tags) ? that.options.tags : [that.options.tags];\n\n            if ($(element).is(TABLE)) {\n                that.element = element;\n                that._attachEventHandlers();\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n            var eventNamespace = that.options.eventNamespace;\n\n            if (that.element) {\n                $(that.element).off(eventNamespace);\n                that.element = null;\n            }\n\n            $(that.options.rootElement).off(KEY_DOWN + eventNamespace);\n\n            that._destroyResizeHandle();\n        },\n\n        options: {\n            tags: [],\n            min: 0,\n            rootElement: null,\n            eventNamespace: \"\",\n            rtl: false,\n            handle: {\n                dataAttribute: \"\",\n                height: 0,\n                width: 0,\n                classNames: {},\n                template: \"\"\n            }\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n\n            $(that.element).on(MOUSE_MOVE + options.eventNamespace, options.tags.join(COMMA), that.detectElementBorderHovering.bind(that));\n        },\n\n        resizingInProgress: function() {\n            var that = this;\n            var resizable = that._resizable;\n\n            if (resizable) {\n                return !!resizable.resizing;\n            }\n\n            return false;\n        },\n\n        resize: noop,\n\n        detectElementBorderHovering: function(e) {\n            var that = this;\n            var options = that.options;\n            var handleOptions = options.handle;\n            var tableElement = $(e.currentTarget);\n            var resizeHandle = that.resizeHandle;\n            var dataAttribute = handleOptions.dataAttribute;\n\n            if (!that.resizingInProgress()) {\n                if (!tableElement.is(LAST_CHILD) && that.elementBorderHovered(tableElement, e)) {\n                    if (resizeHandle) {\n                        if (resizeHandle.data(dataAttribute) && resizeHandle.data(dataAttribute) !== tableElement[0]) {\n                            that.showResizeHandle(tableElement, e);\n                        }\n                    }\n                    else {\n                        that.showResizeHandle(tableElement, e);\n                    }\n                }\n                else {\n                    if (resizeHandle) {\n                        that._destroyResizeHandle();\n                    }\n                }\n            }\n        },\n\n        elementBorderHovered: noop,\n\n        showResizeHandle: function(tableElement, e) {\n            var that = this;\n\n            if (e.buttons !== 0) {\n                //prevent showing when a mouse button is still being pressed\n                return;\n            }\n\n            that._initResizeHandle();\n            that.setResizeHandlePosition(tableElement);\n            that.setResizeHandleDimensions();\n            that.setResizeHandleDataAttributes(tableElement[0]);\n            that._attachResizeHandleEventHandlers();\n\n            that._initResizable(tableElement);\n\n            that._hideResizeMarker();\n            that.resizeHandle.show();\n        },\n\n        _initResizeHandle: function() {\n            var that = this;\n            var options = that.options;\n\n            that._destroyResizeHandle();\n\n            that.resizeHandle = $(options.handle.template).appendTo(options.rootElement);\n        },\n\n        setResizeHandlePosition: noop,\n\n        setResizeHandleDimensions: noop,\n\n        setResizeHandleDataAttributes: function(tableElement) {\n            var that = this;\n\n            that.resizeHandle.data(that.options.handle.dataAttribute, tableElement);\n        },\n\n        _attachResizeHandleEventHandlers: function() {\n            var that = this;\n            var options = that.options;\n            var eventNamespace = options.eventNamespace;\n            var markerClass = options.handle.classNames.marker;\n            var resizeHandle = that.resizeHandle;\n\n            that.resizeHandle\n                .on(MOUSE_DOWN + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).show();\n                })\n                .on(MOUSE_UP + eventNamespace, function() {\n                    resizeHandle.find(DOT + markerClass).hide();\n                });\n        },\n\n        _hideResizeMarker: function() {\n            var that = this;\n\n            that.resizeHandle.find(DOT + that.options.handle.classNames.marker).hide();\n        },\n\n        _destroyResizeHandle: function() {\n            var that = this;\n\n            if (that.resizeHandle) {\n                that._destroyResizable();\n                that.resizeHandle.off(that.options.eventNamespace).remove();\n                that.resizeHandle = null;\n            }\n        },\n\n        _initResizable: function(tableElement) {\n            var that = this;\n\n            if (!that.resizeHandle) {\n                return;\n            }\n\n            that._destroyResizable();\n\n            that._resizable = new kendo.ui.Resizable(tableElement, {\n                draggableElement: that.resizeHandle[0],\n                start: that.onResizeStart.bind(that),\n                resize: that.onResize.bind(that),\n                resizeend: that.onResizeEnd.bind(that)\n            });\n        },\n\n        _destroyResizable: function() {\n            var that = this;\n\n            if (that._resizable) {\n                that._resizable.destroy();\n                that._resizable = null;\n            }\n        },\n\n        onResizeStart: function() {\n            this._disableKeyboard();\n        },\n\n        onResize: function(e) {\n            this.setResizeHandleDragPosition(e);\n        },\n\n        setResizeHandleDragPosition: noop,\n\n        onResizeEnd: function(e) {\n            var that = this;\n\n            that.resize(e);\n            that._destroyResizeHandle();\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).off(KEY_DOWN + options.eventNamespace);\n        },\n\n        _disableKeyboard: function() {\n            var options = this.options;\n\n            $(options.rootElement).on(KEY_DOWN + options.eventNamespace, function(e) {\n                e.preventDefault();\n            });\n        },\n\n        _forceResizing: function(e) {\n            var resizable = this._resizable;\n\n            if (resizable && resizable.userEvents) {\n                resizable.userEvents._end(e);\n            }\n        }\n    });\n\n    var ResizingFactory = Class.extend({\n        create: function(editor, options) {\n            var that = this;\n            var resizingName = options.name;\n            var NS = options.eventNamespace;\n\n            $(editor.body)\n                .on(MOUSE_ENTER + NS, TABLE, function(e) {\n                    var table = e.currentTarget;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing) {\n                        if (resizing.element !== table && !resizing.resizingInProgress()) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, table, options);\n                        }\n                    }\n                    else {\n                        that._initResizing(editor, table, options);\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, TABLE, function(e) {\n                    var parentTable;\n                    var resizing = editor[resizingName];\n\n                    e.stopPropagation();\n\n                    if (resizing && !resizing.resizingInProgress() && !resizing.resizeHandle) {\n                        parentTable = $(resizing.element).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                })\n                .on(MOUSE_LEAVE + NS, function() {\n                    var resizing = editor[resizingName];\n\n                    if (resizing && !resizing.resizingInProgress()) {\n                        that._destroyResizing(editor, options);\n                    }\n                })\n                .on(MOUSE_UP + NS, function(e) {\n                    var resizing = editor[resizingName];\n                    var parentTable;\n\n                    if (resizing && resizing.resizingInProgress()) {\n                        parentTable = $(e.target).parents(TABLE)[0];\n\n                        if (parentTable) {\n                            resizing._forceResizing(e);\n                            that._destroyResizing(editor, options);\n                            that._initResizing(editor, parentTable, options);\n                        }\n                    }\n                });\n        },\n\n        dispose: function(editor, options) {\n            $(editor.body).off(options.eventNamespace);\n        },\n\n        _initResizing: function(editor, tableElement, options) {\n            var resizingName = options.name;\n            var resizingType = options.type;\n\n            editor[resizingName] = new resizingType(tableElement, {\n                rtl: kendo.support.isRtl(editor.element),\n                rootElement: editor.body\n            });\n        },\n\n        _destroyResizing: function(editor, options) {\n            var resizingName = options.name;\n\n            if (editor[resizingName]) {\n                editor[resizingName].destroy();\n                editor[resizingName] = null;\n            }\n        }\n    });\n    ResizingFactory.current = new ResizingFactory();\n\n    TableElementResizing.create = function(editor, options) {\n        ResizingFactory.current.create(editor, options);\n    };\n\n    TableElementResizing.dispose = function(editor, options) {\n        ResizingFactory.current.dispose(editor, options);\n    };\n\n    extend(Editor, {\n        TableElementResizing: TableElementResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var dom = Editor.Dom;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n\n    var NS = \".kendoEditorColumnResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-column-resize-handle\";\n    var RESIZE_MARKER_CLASS = \"k-column-resize-marker\";\n\n    var BODY = \"body\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TD = \"td\";\n    var TH = \"th\";\n    var TR = \"tr\";\n\n    var COLATTR = \"col-index\";\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n\n    var ColumnResizing = TableElementResizing.extend({\n        options: {\n            tags: [TD, TH],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"column\",\n                width: 10,\n                height: 0,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-column-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(column, e) {\n            var that = this;\n            var options = that.options;\n            var handleWidth = options.handle.width;\n            var borderOffset = column.offset().left + (options.rtl ? 0 : outerWidth(column));\n\n\n            var mousePosition = e.clientX + $(column[0].ownerDocument).scrollLeft();\n\n            if ((mousePosition > (borderOffset - handleWidth)) && (mousePosition < (borderOffset + handleWidth))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(column) {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var options = that.options;\n            var rtl = options.rtl;\n            var handleWidth = options.handle.width;\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var columnWidthOffset = rtl ? 0 : outerWidth(column);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var columnOffsetLeft = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var innerElementOffsetTop = tableInnerElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(tableInnerElement.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: innerElementOffsetTop + scrollTopOffset,\n                left: columnOffsetLeft + columnWidthOffset + (scrollLeftOffset - scrollBarWidth) - (handleWidth / 2),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var fullHeight = tableHead.length > 0 ? tableHead.height() + tableBody.height() : tableBody.height();\n\n            that.resizeHandle.css({\n                width: that.options.handle.width,\n                height: fullHeight\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rootElement = $(options.rootElement);\n            var handleWidth = options.handle ? options.handle.width : 0;\n            var min = options.min;\n            var rtl = options.rtl;\n            var columnWidth = outerWidth(column);\n            var columnLeftOffset = column.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(column.css(\"marginLeft\"));\n            var adjacentColumnWidth = outerWidth(column.next());\n            var resizeHandle = $(that.resizeHandle);\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var resizeHandleOffsetLeft = resizeHandle.offset().left -\n                                            (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                            parseFloat(resizeHandle.css(\"marginLeft\"));\n            var browser = kendo.support.browser;\n\n            if (rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetLeft + (scrollLeftOffset - scrollBarWidth) + e.x.delta,\n                min: columnLeftOffset + (scrollLeftOffset - scrollBarWidth) - (rtl ? adjacentColumnWidth : 0) + min,\n                max: columnLeftOffset + columnWidth + (scrollLeftOffset - scrollBarWidth) + (rtl ? 0 : adjacentColumnWidth) - handleWidth - min\n            });\n\n            resizeHandle.css({ left: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var column = $($(e.currentTarget).data(that.options.handle.dataAttribute));\n            var options = that.options;\n            var rtlModifier = options.rtl ? (-1) : 1;\n            var min = options.min;\n            var initialDeltaX = rtlModifier * e.x.initialDelta;\n            var newWidth;\n            var initialAdjacentColumnWidth;\n            var initialColumnWidth;\n            var colIndex;\n            var nextColumn;\n\n            dom.reMapTableColumns(that.element, COLATTR);\n\n            colIndex = parseInt(column.attr(COLATTR), 10);\n\n            if (column.prop(\"colSpan\") > 1) {\n                column = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + column.prop(\"colSpan\") - 1) + \"]\").eq(0);\n                colIndex = parseInt(column.attr(COLATTR), 10);\n            }\n\n            nextColumn = $(that.element).find(\"[\" + COLATTR + \"=\" + (colIndex + 1) + \"]:not([colspan])\");\n\n            that._setTableComputedWidth();\n            that._setColumnsComputedWidth();\n\n            initialColumnWidth = outerWidth(column);\n            initialAdjacentColumnWidth = outerWidth(nextColumn);\n\n            newWidth = constrain({\n                value: initialColumnWidth + initialDeltaX,\n                min: min,\n                max: initialColumnWidth + initialAdjacentColumnWidth - min\n            });\n\n            that._resizeColumn(column[0], newWidth);\n            that._resizeTopAndBottomColumns(column[0], newWidth);\n            that._resizeAdjacentColumns(parseInt(column.attr(COLATTR),10), initialAdjacentColumnWidth, initialColumnWidth, (initialColumnWidth - newWidth));\n\n            dom.clearTableMappings(that.element, COLATTR);\n        },\n\n        _setTableComputedWidth: function() {\n            var element = this.element;\n\n            if (element.style[WIDTH] === \"\") {\n                element.style[WIDTH] = toPixels(outerWidth($(element)));\n            }\n        },\n\n        _setColumnsComputedWidth: function() {\n            var that = this;\n            var tableInnerElement = $(that.element.tHead || that.element.tBodies[0]);\n            var innerElementWidth = outerWidth(tableInnerElement);\n            var columns = tableInnerElement.children(TR).children(TD);\n            var length = columns.length;\n            var currentColumnsWidths = columns.map(function() {\n                return outerWidth($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                if (inPercentages(columns[i].style[WIDTH])) {\n                    columns[i].style[WIDTH] = toPercentages(calculatePercentageRatio(currentColumnsWidths[i], innerElementWidth));\n                }\n                else {\n                    columns[i].style[WIDTH] = toPixels(currentColumnsWidths[i]);\n                }\n            }\n        },\n\n        _resizeTopAndBottomColumns: function(column, newWidth) {\n            var that = this;\n            var columnIndex = $(column).attr(COLATTR);\n            var topAndBottomColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    var cell = this;\n                    return ($(cell).attr(COLATTR) === columnIndex && cell !== column);\n                });\n            var length = topAndBottomColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeColumn(topAndBottomColumns[i], newWidth);\n            }\n        },\n\n        _resizeColumn: function(column, newWidth) {\n            var innerTableElement = $(this.element.tHead || this.element.tBodies[0]);\n            if (inPercentages(column.style[WIDTH])) {\n                column.style[WIDTH] = toPercentages(calculatePercentageRatio(newWidth, outerWidth(innerTableElement)));\n            }\n            else {\n                column.style[WIDTH] = toPixels(newWidth);\n            }\n        },\n\n        _resizeAdjacentColumns: function(columnIndex, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var adjacentColumns = $(that.element).children(TBODY + COMMA + THEAD).children(TR).children(that.options.tags.join(COMMA))\n                .filter(function() {\n                    return (parseInt($(this).attr(COLATTR),10) === (columnIndex + 1));\n                });\n            var length = adjacentColumns.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that._resizeAdjacentColumn(adjacentColumns[i], initialAdjacentColumnWidth, initialColumnWidth, deltaWidth);\n            }\n        },\n\n        _resizeAdjacentColumn: function(adjacentColumn, initialAdjacentColumnWidth, initialColumnWidth, deltaWidth) {\n            var that = this;\n            var min = that.options.min;\n            var newWidth;\n\n            newWidth = constrain({\n                value: initialAdjacentColumnWidth + deltaWidth,\n                min: min,\n                max: abs(initialColumnWidth + initialAdjacentColumnWidth - min)\n            });\n\n            that._resizeColumn(adjacentColumn, newWidth);\n        }\n    });\n\n    ColumnResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"columnResizing\",\n            type: ColumnResizing,\n            eventNamespace: NS\n        });\n    };\n\n    ColumnResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        ColumnResizing: ColumnResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var math = window.Math;\n    var abs = math.abs;\n\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n\n    var Editor = kendo.ui.editor;\n    var TableElementResizing = Editor.TableElementResizing;\n    var ResizingUtils = Editor.ResizingUtils;\n    var getScrollBarWidth = ResizingUtils.getScrollBarWidth;\n    var constrain = ResizingUtils.constrain;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var inPercentages = ResizingUtils.inPercentages;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorRowResizing\";\n    var RESIZE_HANDLE_CLASS = \"k-row-resize-handle\";\n    var RESIZE_HANDLE_MARKER_WRAPPER_CLASS = \"k-row-resize-marker-wrapper\";\n    var RESIZE_MARKER_CLASS = \"k-row-resize-marker\";\n\n    var BODY = \"body\";\n    var TR = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n\n    var COMMA = \",\";\n    var HEIGHT = \"height\";\n\n    var RowResizing = TableElementResizing.extend({\n        options: {\n            tags: [TR],\n            min: 20,\n            rootElement: null,\n            eventNamespace: NS,\n            rtl: false,\n            handle: {\n                dataAttribute: \"row\",\n                width: 0,\n                height: 10,\n                classNames: {\n                    handle: RESIZE_HANDLE_CLASS,\n                    marker: RESIZE_MARKER_CLASS\n                },\n                template:\n                    '<div class=\"k-row-resize-handle-wrapper\" unselectable=\"on\" contenteditable=\"false\">' +\n                        '<div class=\"' + RESIZE_HANDLE_CLASS + '\">' +\n                            '<div class=\"' + RESIZE_HANDLE_MARKER_WRAPPER_CLASS + '\">' +\n                                '<div class=\"' + RESIZE_MARKER_CLASS + '\"></div>' +\n                            '</div>' +\n                        '</div>' +\n                    '</div>'\n            }\n        },\n\n        elementBorderHovered: function(tableElement, e) {\n            var that = this;\n            var handleHeight = that.options.handle[HEIGHT];\n            var borderOffset = tableElement.offset().top + outerHeight(tableElement);\n            var mousePosition = e.clientY + $(tableElement[0].ownerDocument).scrollTop();\n\n            if ((mousePosition > (borderOffset - handleHeight)) && (mousePosition < (borderOffset + handleHeight))) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        },\n\n        setResizeHandlePosition: function(row) {\n            var that = this;\n            var options = that.options;\n            var handleHeight = options.handle[HEIGHT];\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var scrollLeftOffset = rootElement.is(BODY) ? 0 : kendo.scrollLeft(rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n\n            var rowOffsetLeft = row.offset().left -\n                                    (rootElement.offset().left + parseFloat(rootElement.css(\"borderLeftWidth\"))) -\n                                    parseFloat(row.css(\"marginLeft\"));\n            var rowOffsetTop = row.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(row.css(\"marginTop\"));\n            var browser = kendo.support.browser;\n\n            if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                scrollLeftOffset = scrollLeftOffset * -1;\n            }\n\n            that.resizeHandle.css({\n                top: rowOffsetTop + outerHeight(row) + scrollTopOffset - (handleHeight / 2),\n                left: rowOffsetLeft + (scrollLeftOffset - scrollBarWidth),\n                position: \"absolute\"\n            });\n        },\n\n        setResizeHandleDimensions: function() {\n            var that = this;\n            var innerTableElement = $(that.element.tHead || that.element.tBodies[0]);\n\n            that.resizeHandle.css({\n                width: innerTableElement.width(),\n                height: that.options.handle[HEIGHT]\n            });\n        },\n\n        setResizeHandleDragPosition: function(e) {\n            var that = this;\n            var options = that.options;\n            var min = options.min;\n            var tableHead = $(that.element).children(THEAD);\n            var tableBody = $(that.element).children(TBODY);\n            var topInnerTableElement = tableHead.length > 0 ? tableHead : tableBody;\n            var resizeHandle = $(that.resizeHandle);\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var $row = $(row);\n            var rootElement = $(options.rootElement);\n            var scrollTopOffset = rootElement.is(BODY) ? 0 : rootElement.scrollTop();\n            var tableTopOffset = topInnerTableElement.offset().top -\n                                    (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                    parseFloat(topInnerTableElement.css(\"marginTop\"));\n\n            var rowOffsetTop = $row.offset().top -\n                                (rootElement.offset().top + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat($row.css(\"marginTop\"));\n\n            var resizeHandleOffsetTop = resizeHandle.offset().top -\n                                (Math.max(0 , rootElement.offset().top) + parseFloat(rootElement.css(\"borderTopWidth\"))) -\n                                parseFloat(resizeHandle.css(\"marginTop\"));\n\n            var handleOffset = constrain({\n                value: resizeHandleOffsetTop + scrollTopOffset + e.y.delta,\n                min: rowOffsetTop + scrollTopOffset + min,\n                max: tableTopOffset + outerHeight(tableHead) + outerHeight(tableBody) + scrollTopOffset - options.handle[HEIGHT] - min\n            });\n\n            resizeHandle.css({ top: handleOffset });\n        },\n\n        resize: function(e) {\n            var that = this;\n            var options = that.options;\n            var row = $(e.currentTarget).data(options.handle.dataAttribute);\n            var currentRowHeight = outerHeight($(row));\n            var element = $(that.element);\n            var initialTableHeight = outerHeight(element);\n            var tableHead = element.children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = element.children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var initialStyleHeight = row.style[HEIGHT];\n            var newRowHeight = constrain({\n                value: currentRowHeight + e.y.initialDelta,\n                min: options.min,\n                max: abs(tableHeadHeight + tableBodyHeight - options.min)\n            });\n\n            that._setRowsHeightInPixels();\n            row.style[HEIGHT] = toPixels(newRowHeight);\n            that._setTableHeight(initialTableHeight + (newRowHeight - currentRowHeight));\n\n            if (inPercentages(initialStyleHeight)) {\n                //resize rows in percentages as late as possible to prevent incorrect precision calculations\n                that._setRowsHeightInPercentages();\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(TBODY + COMMA + THEAD).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(TR);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setTableHeight: function(newHeight) {\n            var element = this.element;\n\n            if (inPercentages(element.style[HEIGHT])) {\n                element.style[HEIGHT] = toPercentages(calculatePercentageRatio(newHeight, $(element).parent().height()));\n            }\n            else {\n                element.style[HEIGHT] = toPixels(newHeight);\n            }\n        }\n    });\n\n    RowResizing.create = function(editor) {\n        TableElementResizing.create(editor, {\n            name: \"rowResizing\",\n            type: RowResizing,\n            eventNamespace: NS\n        });\n    };\n\n    RowResizing.dispose = function(editor) {\n        TableElementResizing.dispose(editor, {\n            eventNamespace: NS\n        });\n    };\n\n    extend(Editor, {\n        RowResizing: RowResizing\n    });\n\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var $ = kendo.jQuery;\n    var extend = $.extend;\n    var noop = $.noop;\n\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var Draggable = kendo.ui.Draggable;\n    var Observable = kendo.Observable;\n    var getScrollBarWidth = Editor.ResizingUtils.getScrollBarWidth;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n\n    var NS = \".kendoEditorElementResizeHandle\";\n    var RESIZE_HANDLE_CLASS = \"k-element-resize-handle\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var HALF_INSIDE = \"halfInside\";\n    var MOUSE_OVER = \"mouseover\";\n    var MOUSE_OUT = \"mouseout\";\n\n    var BODY = \"body\";\n    var TABLE = \"table\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    var ElementResizeHandle = Observable.extend({\n        init: function(options) {\n            var that = this;\n\n            Observable.fn.init.call(that);\n\n            that.options = extend({}, that.options, options);\n            that.element = $(that.options.template).appendTo(that.options.appendTo)[0];\n\n            that._attachEventHandlers();\n            that._addStyles();\n            that._initDraggable();\n            that._initPositioningStrategy();\n            that._initDraggingStrategy();\n\n            $(that.element).data(TABLE, that.options.resizableElement);\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS).remove();\n            that.element = null;\n\n            that._destroyDraggable();\n\n            that.unbind();\n        },\n\n        options: {\n            appendTo: null,\n            direction: SOUTHEAST,\n            resizableElement: null,\n            rtl: false,\n            template:\n                \"<div class='k-element-resize-handle-wrapper' unselectable='on' contenteditable='false'>\" +\n                    \"<div class='\" + RESIZE_HANDLE_CLASS + \"'></div>\" +\n                \"</div>\"\n        },\n\n        events: [\n            DRAG_START,\n            DRAG,\n            DRAG_END,\n            MOUSE_OVER,\n            MOUSE_OUT\n        ],\n\n        show: function() {\n            this._setPosition();\n        },\n\n        _setPosition: function() {\n            var that = this;\n            var position = that._positioningStrategy.getPosition();\n\n            $(that.element).css({\n                top: position.top,\n                left: position.left,\n                position: \"absolute\"\n            });\n        },\n\n        _attachEventHandlers: function() {\n            var that = this;\n\n            $(that.element)\n                .on(MOUSE_OVER + NS, that._onMouseOver.bind(that))\n                .on(MOUSE_OUT + NS, that._onMouseOut.bind(that));\n        },\n\n        _onMouseOver: function() {\n            this.trigger(MOUSE_OVER);\n        },\n\n        _onMouseOut: function() {\n            this.trigger(MOUSE_OUT);\n        },\n\n        _addStyles: function() {\n            var that = this;\n            $(that.element).children(DOT + RESIZE_HANDLE_CLASS).addClass(\"k-resize-\" + that.options.direction);\n        },\n\n        _initPositioningStrategy: function() {\n            var that = this;\n            var options = that.options;\n\n            that._positioningStrategy = HandlePositioningStrategy.create({\n                name: options.direction,\n                handle: that.element,\n                resizableElement: options.resizableElement,\n                rootElement: options.rootElement,\n                rtl: options.rtl\n            });\n        },\n\n        _initDraggable: function() {\n            var that = this;\n            var element = that.element;\n\n            if (that._draggable || !element) {\n                return;\n            }\n\n            that._draggable = new Draggable(element, {\n                dragstart: that._onDragStart.bind(that),\n                drag: that._onDrag.bind(that),\n                dragend: that._onDragEnd.bind(that)\n            });\n        },\n\n        _onDragStart: function() {\n            this.trigger(DRAG_START);\n        },\n\n        _onDrag: function(e) {\n            var that = this;\n\n            that.trigger(DRAG, that._draggingStrategy.adjustDragDelta({\n                deltaX: e.x.delta,\n                deltaY: e.y.delta,\n                initialDeltaX: e.x.initialDelta,\n                initialDeltaY: e.y.initialDelta\n            }));\n        },\n\n        _onDragEnd: function() {\n            this.trigger(DRAG_END);\n        },\n\n        _destroyDraggable: function() {\n            var that = this;\n\n            if (that._draggable) {\n                that._draggable.destroy();\n                that._draggable = null;\n            }\n        },\n\n        _initDraggingStrategy: function() {\n            var that = this;\n\n            that._draggingStrategy = HandleDraggingStrategy.create({\n                name: that.options.direction\n            });\n        }\n    });\n\n    var StrategyFactory = Class.extend({\n        init: function() {\n            this._items = [];\n        },\n\n        register: function(name, type) {\n            this._items.push({\n                name: name,\n                type: type\n            });\n        },\n\n        create: function(options) {\n            var items = this._items;\n            var itemsLength = items.length;\n            var name = options.name ? options.name.toLowerCase() : \"\";\n            var match;\n            var item;\n            var i;\n\n            for (i = 0; i < itemsLength; i++) {\n                item = items[i];\n\n                if (item.name.toLowerCase() === name) {\n                    match = item;\n                    break;\n                }\n            }\n\n            if (match) {\n                return new match.type(options);\n            }\n        }\n    });\n\n    var PositioningStrategyFactory = StrategyFactory.extend({});\n    PositioningStrategyFactory.current = new PositioningStrategyFactory();\n\n    var HandlePositioningStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            handle: null,\n            offset: HALF_INSIDE,\n            resizableElement: null,\n            rootElement: null,\n            rtl: false\n        },\n\n        getPosition: function() {\n            var that = this;\n\n            var position = that.calculatePosition();\n            var handleOffsetPosition = that.applyHandleOffset(position);\n            var scrollOffsetPosition = that.applyScrollOffset(handleOffsetPosition);\n\n            return scrollOffsetPosition;\n        },\n\n        calculatePosition: noop,\n\n        applyHandleOffset: function(position) {\n            var options = this.options;\n            var handle = $(options.handle);\n\n            if (options.offset === HALF_INSIDE) {\n                return {\n                    top: position.top - (outerHeight(handle) / 2),\n                    left: position.left - (outerWidth(handle) / 2)\n                };\n            }\n\n            return position;\n        },\n\n        applyScrollOffset: function(position) {\n            var options = this.options;\n            var rootElement = $(options.rootElement);\n            var scrollBarWidth = options.rtl ? getScrollBarWidth(rootElement[0]) : 0;\n            var browser = kendo.support.browser;\n            var rootLeft;\n\n            if (!rootElement.is(BODY)) {\n                rootLeft = kendo.scrollLeft(rootElement) || 0;\n\n                if (options.rtl && (browser.mozilla || (browser.webkit && browser.version >= 85))) {\n                    rootLeft = rootLeft * -1;\n                }\n\n                return {\n                    top: position.top + (rootElement.scrollTop() || 0),\n                    left: position.left + rootLeft - scrollBarWidth\n                };\n            }\n\n            return position;\n        }\n    });\n\n    HandlePositioningStrategy.create = function(options) {\n        return PositioningStrategyFactory.current.create(options);\n    };\n\n    var EastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(EAST, EastPositioningStrategy);\n\n    var NorthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTH, NorthPositioningStrategy);\n\n    var NortheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHEAST, NortheastPositioningStrategy);\n\n    var NorthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top,\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(NORTHWEST, NorthwestPositioningStrategy);\n\n    var SouthPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + (outerWidth(resizableElement) / 2) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTH, SouthPositioningStrategy);\n\n    var SoutheastPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + outerWidth(resizableElement) + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHEAST, SoutheastPositioningStrategy);\n\n    var SouthwestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + outerHeight(resizableElement),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(SOUTHWEST, SouthwestPositioningStrategy);\n\n    var WestPositioningStrategy = HandlePositioningStrategy.extend({\n        calculatePosition: function() {\n            var resizableElement = $(this.options.resizableElement);\n            var offset = resizableElement.position();\n            var marginLeft = parseInt(resizableElement.css(\"marginLeft\"), 10);\n\n            return {\n                top: offset.top + (outerHeight(resizableElement) / 2),\n                left: offset.left + marginLeft\n            };\n        }\n    });\n    PositioningStrategyFactory.current.register(WEST, WestPositioningStrategy);\n\n    var DraggingStrategyFactory = StrategyFactory.extend({});\n    DraggingStrategyFactory.current = new DraggingStrategyFactory();\n\n    var HandleDraggingStrategy = Class.extend({\n        init: function(options) {\n            var that = this;\n            that.options = extend({}, that.options, options);\n        },\n\n        options: {\n            deltaX: {\n                adjustment: null,\n                modifier: null\n            },\n            deltaY: {\n                adjustment: null,\n                modifier: null\n            }\n        },\n\n        adjustDragDelta: function(deltas) {\n            var options = this.options;\n            var xAxisAdjustment = options.deltaX.adjustment * options.deltaX.modifier;\n            var yAxisAdjustment = options.deltaY.adjustment * options.deltaY.modifier;\n\n            return {\n                deltaX: deltas.deltaX * xAxisAdjustment,\n                deltaY: deltas.deltaY * yAxisAdjustment,\n                initialDeltaX: deltas.initialDeltaX * xAxisAdjustment,\n                initialDeltaY: deltas.initialDeltaY * yAxisAdjustment\n            };\n        }\n    });\n\n    HandleDraggingStrategy.create = function(options) {\n        return DraggingStrategyFactory.current.create(options);\n    };\n\n    var HorizontalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 0,\n                modifier: 0\n            }\n        }\n    });\n\n    var EastDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(EAST, EastDraggingStrategy);\n\n    var WestDraggingStrategy = HorizontalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(WEST, WestDraggingStrategy);\n\n    var VerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 0,\n                modifier: 0\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTH, NorthDraggingStrategy);\n\n    var SouthDraggingStrategy = VerticalDraggingStrategy.extend({\n        options: {\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTH, SouthDraggingStrategy);\n\n    var HorizontalAndVerticalDraggingStrategy = HandleDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                adjustment: 1,\n                modifier: 1\n            },\n            deltaY: {\n                adjustment: 1,\n                modifier: 1\n            }\n        }\n    });\n\n    var NorthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHEAST, NorthEastDraggingStrategy);\n\n    var NorthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: (-1)\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(NORTHWEST, NorthWestDraggingStrategy);\n\n    var SouthEastDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: 1\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHEAST, SouthEastDraggingStrategy);\n\n    var SouthWestDraggingStrategy = HorizontalAndVerticalDraggingStrategy.extend({\n        options: {\n            deltaX: {\n                modifier: (-1)\n            },\n            deltaY: {\n                modifier: 1\n            }\n        }\n    });\n    DraggingStrategyFactory.current.register(SOUTHWEST, SouthWestDraggingStrategy);\n\n    extend(Editor, {\n        ElementResizeHandle: ElementResizeHandle\n    });\n})(window.kendo);\n\n(function(kendo, undefined$1) {\n    var global = window;\n    var math = global.Math;\n    var min = math.min;\n    var max = math.max;\n\n    var $ = kendo.jQuery;\n    var contains = $.contains;\n    var extend = $.extend;\n\n    var browser = kendo.support.browser;\n    var Editor = kendo.ui.editor;\n    var Class = kendo.Class;\n    var ElementResizeHandle = Editor.ElementResizeHandle;\n    var ResizingUtils = Editor.ResizingUtils;\n    var calculatePercentageRatio = ResizingUtils.calculatePercentageRatio;\n    var constrain = ResizingUtils.constrain;\n    var inPercentages = ResizingUtils.inPercentages;\n    var inPixels = ResizingUtils.inPixels;\n    var toPercentages = ResizingUtils.toPercentages;\n    var toPixels = ResizingUtils.toPixels;\n    var outerWidth = kendo._outerWidth;\n    var outerHeight = kendo._outerHeight;\n    var RangeUtils = Editor.RangeUtils;\n\n    var NS = \".kendoEditorElementResizing\";\n    var RESIZE_HANDLE_WRAPPER_CLASS = \"k-element-resize-handle-wrapper\";\n    var TABLE_CLASS = \"k-table\";\n    var ELEMENT_RESIZING_CLASS = \"k-element-resizing\";\n\n    var DRAG_START = \"dragStart\";\n    var DRAG = \"drag\";\n    var DRAG_END = \"dragEnd\";\n    var KEY_DOWN = \"keydown\";\n    var MOUSE_DOWN = \"mousedown\";\n    var SELECT = \"select\";\n    var DROP = \"drop\";\n\n    var COLUMN = \"td\";\n    var ROW = \"tr\";\n    var TBODY = \"tbody\";\n    var THEAD = \"thead\";\n    var TABLE = \"table\";\n    var IMG = \"img\";\n    var ELEMENT_TYPES = [\"TABLE\", \"IMG\"];\n\n    var COMMA = \",\";\n    var WIDTH = \"width\";\n    var HEIGHT = \"height\";\n\n    var EAST = \"east\";\n    var NORTH = \"north\";\n    var NORTHEAST = \"northeast\";\n    var NORTHWEST = \"northwest\";\n    var SOUTH = \"south\";\n    var SOUTHEAST = \"southeast\";\n    var SOUTHWEST = \"southwest\";\n    var WEST = \"west\";\n\n    var DOT = \".\";\n\n    function isUndefined(value) {\n        return typeof(value) === \"undefined\";\n    }\n\n    var ElementResizing = Class.extend({\n        init: function(element, options) {\n            var that = this;\n\n            that.options = extend({}, that.options, options);\n            that.handles = [];\n\n            // Check whether the element is TABLE or IMG\n            if (ELEMENT_TYPES.indexOf(element.nodeName) >= 0) {\n                that.element = element;\n            }\n        },\n\n        destroy: function() {\n            var that = this;\n\n            $(that.element).off(NS);\n            that.element = null;\n\n            $(that.options.rootElement).off(KEY_DOWN + NS);\n\n            that._destroyResizeHandles();\n        },\n\n        options: {\n            appendHandlesTo: null,\n            rtl: false,\n            rootElement: null,\n            minWidth: 10,\n            minHeight: 10,\n            handles: [{\n                direction: NORTHWEST\n            }, {\n                direction: NORTH\n            }, {\n                direction: NORTHEAST\n            }, {\n                direction: EAST\n            }, {\n                direction: SOUTHEAST\n            }, {\n                direction: SOUTH\n            }, {\n                direction: SOUTHWEST\n            }, {\n                direction: WEST\n            }]\n        },\n\n        resize: function(args) {\n            var that = this;\n            var deltas = extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n\n            that._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            that._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            that.showResizeHandles();\n        },\n\n        _resizeWidth: function() {\n            return false;\n        },\n\n        _resizeHeight: function() {\n            return false;\n        },\n\n        _getMaxDimensionValue: function(dimension) {\n            var that = this;\n            var element = $(that.element);\n            var dimensionLowercase = dimension.toLowerCase();\n            var rtlModifier = that.options.rtl ? (-1) : 1;\n            var parent = $(that.element).parent();\n            var parentElement = parent[0];\n            var parentDimension = parent[dimensionLowercase]();\n            var parentScrollOffset = rtlModifier * (dimension === WIDTH ? kendo.scrollLeft(parent) : parent.scrollTop());\n\n            if (parentElement && parentElement === element.closest(COLUMN)[0]) {\n                if (parentElement.style[dimensionLowercase] === \"\" && !inPercentages(that.element.style[dimensionLowercase])) {\n                    return Infinity;\n                }\n                else {\n                    return (parentDimension + parentScrollOffset);\n                }\n            }\n            else {\n                return (parentDimension + parentScrollOffset);\n            }\n        },\n\n        showResizeHandles: function() {\n            var that = this;\n\n            that._initResizeHandles();\n            that._showResizeHandles();\n        },\n\n        _initResizeHandles: function() {\n            var that = this;\n            var handles = that.handles;\n            var options = that.options;\n            var handleOptions = that.options.handles;\n            var length = handleOptions.length;\n            var i;\n\n            if (handles && handles.length > 0) {\n                return;\n            }\n\n            for (i = 0; i < length; i++) {\n                that.handles.push(new ElementResizeHandle(extend({\n                    appendTo: options.appendHandlesTo,\n                    resizableElement: that.element,\n                    rootElement: options.rootElement,\n                    rtl: options.rtl\n                }, handleOptions[i])));\n            }\n\n            that._bindToResizeHandlesEvents();\n        },\n\n        _destroyResizeHandles: function() {\n            var that = this;\n            var length = that.handles ? that.handles.length : 0;\n\n            for (var i = 0; i < length; i++) {\n                that.handles[i].destroy();\n            }\n\n            that.handles = [];\n        },\n\n        _showResizeHandles: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n\n            for (i = 0; i < length; i++) {\n                that.handles[i].show();\n            }\n        },\n\n        _bindToResizeHandlesEvents: function() {\n            return false;\n        },\n\n        _onResizeHandleDragStart: function() {\n            var that = this;\n            var element = $(that.element);\n\n            element.addClass(ELEMENT_RESIZING_CLASS);\n\n            that._initialElementHeight = outerHeight(element);\n            that._initialElementWidth = outerWidth(element);\n            that._disableKeyboard();\n        },\n\n        _onResizeHandleDrag: function(e) {\n            this.resize(e);\n        },\n\n        _onResizeHandleDragEnd: function() {\n            var that = this;\n            $(that.element).removeClass(ELEMENT_RESIZING_CLASS);\n            that._enableKeyboard();\n        },\n\n        _enableKeyboard: function() {\n            $(this.options.rootElement).off(KEY_DOWN + NS);\n        },\n\n        _disableKeyboard: function() {\n            $(this.options.rootElement).on(KEY_DOWN + NS, function(e) {\n                e.preventDefault();\n            });\n        }\n    });\n\n    var TableResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n                handle.bind(DRAG, that._onResizeHandleDrag.bind(that));\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _hasRowsInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n\n            for (var i = 0; i < rows.length; i++) {\n                if (rows[i].style.height === \"\" || inPixels(rows[i].style.height)) {\n                    return true;\n                }\n            }\n\n            return false;\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleWidth = element[0].style[WIDTH];\n            var currentWidth = outerWidth(element);\n            var parentWidth = element.parent().width();\n            var maxWidth = that._getMaxDimensionValue(WIDTH);\n            var newWidth;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: maxWidth\n            });\n\n            if (inPercentages(styleWidth)) {\n                //detect resizing greater than 100%\n                if (currentWidth + delta > parentWidth) {\n                    ratioValue = max(constrainedWidth, parentWidth);\n                    ratioTotalValue = min(constrainedWidth, parentWidth);\n                }\n                else {\n                    ratioValue = min(constrainedWidth, parentWidth);\n                    ratioTotalValue = max(constrainedWidth, parentWidth);\n                }\n\n                newWidth = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newWidth = toPixels(constrainedWidth);\n            }\n\n            that._setColumnsWidth();\n\n            element[0].style[WIDTH] = newWidth;\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var styleHeight = element[0].style[HEIGHT];\n            var currentHeight = outerHeight(element);\n            var parent = element.parent();\n            var parentHeight = parent.height();\n            var maxHeight = that._getMaxDimensionValue(HEIGHT);\n            var newHeight;\n            var ratioValue;\n            var ratioTotalValue;\n            var constrainedHeight;\n            var minHeight = that.options.minHeight;\n            var hasRowsInPixels = that._hasRowsInPixels();\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: minHeight,\n                max: maxHeight\n            });\n\n            if (hasRowsInPixels && delta < 0) {\n                //decreasing table height when rows are sized in pixels is not possible\n                that._setRowsHeightInPercentages();\n            }\n\n            if (inPercentages(styleHeight)) {\n                //detect resizing greater than 100%\n                if (currentHeight + delta > parentHeight) {\n                    ratioValue = max(constrainedHeight, parentHeight);\n                    ratioTotalValue = min(constrainedHeight, parentHeight);\n                }\n                else {\n                    ratioValue = min(constrainedHeight, parentHeight);\n                    ratioTotalValue = max(constrainedHeight, parentHeight);\n                }\n\n                newHeight = toPercentages(calculatePercentageRatio(ratioValue, ratioTotalValue));\n            }\n            else {\n                newHeight = toPixels(constrainedHeight);\n            }\n\n            element[0].style[HEIGHT] = newHeight;\n\n            if (hasRowsInPixels && delta < 0) {\n                //restore original rows height unit\n                that._setRowsHeightInPixels();\n            }\n        },\n\n        _setColumnsWidth: function() {\n            var that = this;\n            var element = $(that.element);\n            var parentElement = element.parent()[0];\n            var parentColumn = element.closest(COLUMN);\n            var columns = parentColumn.closest(ROW).children();\n            var columnsLength = columns.length;\n            var i;\n\n            function isWidthInPercentages(element) {\n                var styleWidth = element.style.width;\n\n                if (styleWidth !== \"\") {\n                    return inPercentages(styleWidth) ? true : false;\n                }\n                else {\n                    return $(element).hasClass(TABLE_CLASS) ? true : false;\n                }\n            }\n\n            if (isWidthInPercentages(element[0]) && parentElement === parentColumn[0] && parentElement.style[WIDTH] === \"\") {\n                for (i = 0; i < columnsLength; i++) {\n                    columns[i].style[WIDTH] = toPixels($(columns[i]).width());\n                }\n            }\n        },\n\n        _setRowsHeightInPercentages: function() {\n            var that = this;\n            var tableHead = $(that.element).children(THEAD);\n            var tableHeadHeight = tableHead.length > 0 ? tableHead.height() : 0;\n            var tableBody = $(that.element).children(TBODY);\n            var tableBodyHeight = tableBody.height();\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPercentages(calculatePercentageRatio(currentRowsHeights[i], tableHeadHeight + tableBodyHeight));\n            }\n        },\n\n        _setRowsHeightInPixels: function() {\n            var that = this;\n            var rows = $(that.element).children(THEAD + COMMA + TBODY).children(ROW);\n            var length = rows.length;\n            var currentRowsHeights = rows.map(function() {\n                return outerHeight($(this));\n            });\n            var i;\n\n            for (i = 0; i < length; i++) {\n                rows[i].style[HEIGHT] = toPixels(currentRowsHeights[i]);\n            }\n        }\n    });\n\n    var ImageResizing = ElementResizing.extend({\n        _bindToResizeHandlesEvents: function() {\n            var that = this;\n            var handles = that.handles || [];\n            var length = handles.length;\n            var i;\n            var handle;\n\n            for (i = 0; i < length; i++) {\n                handle = handles[i];\n                handle.bind(DRAG_START, that._onResizeHandleDragStart.bind(that));\n\n                if (handle.options.direction === \"north\" || handle.options.direction === \"south\") {\n                    handle.bind(DRAG, that._onResizeHandleDragVertical.bind(that));\n                } else if (handle.options.direction === \"east\" || handle.options.direction === \"west\") {\n                    handle.bind(DRAG, that._onResizeHandleDragHorizontal.bind(that));\n                } else {\n                    handle.bind(DRAG, that._onResizeHandleDragLocked.bind(that));\n                }\n\n                handle.bind(DRAG_END, that._onResizeHandleDragEnd.bind(that));\n            }\n        },\n\n        _getDeltas: function(args) {\n            return extend({}, {\n                deltaX: 0,\n                deltaY: 0,\n                initialDeltaX: 0,\n                initialDeltaY: 0\n            }, args);\n        },\n\n        _onResizeHandleDragVertical: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragHorizontal: function(args) {\n            var deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this.showResizeHandles();\n        },\n\n        _onResizeHandleDragLocked: function(args) {\n            var min = Math.min(Math.abs(args.initialDeltaX), Math.abs(args.initialDeltaY)),\n                initialWidth = this._initialElementWidth,\n                initialHeight = this._initialElementHeight,\n                deltas;\n\n            if (min === args.initialDeltaX || min === args.initialDeltaX * -1) {\n                args.initialDeltaY = args.initialDeltaX * initialHeight / initialWidth;\n                args.deltaY = args.deltaX;\n            } else if (min === args.initialDeltaY || min === args.initialDeltaY * -1) {\n                args.initialDeltaX = args.initialDeltaY * initialWidth / initialHeight;\n                args.deltaX = args.deltaY;\n            }\n\n            deltas = this._getDeltas(args);\n\n            this._resizeWidth(deltas.deltaX, deltas.initialDeltaX);\n            this._resizeHeight(deltas.deltaY, deltas.initialDeltaY);\n\n            this.showResizeHandles();\n        },\n\n        _resizeWidth: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentWidth = outerWidth(element);\n            var newWidth;\n            var constrainedWidth;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementWidth)) {\n                that._initialElementWidth = currentWidth;\n            }\n\n            //use initial delta instead of delta as changing the width with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedWidth = constrain({\n                value: that._initialElementWidth + initialDelta,\n                min: that.options.minWidth,\n                max: that._getMaxDimensionValue(WIDTH)\n            });\n\n            newWidth = toPixels(constrainedWidth);\n            element[0].style[WIDTH] = newWidth;\n            element.attr(WIDTH, Math.floor(constrainedWidth));\n        },\n\n        _resizeHeight: function(delta, initialDelta) {\n            var that = this;\n            var element = $(that.element);\n            var currentHeight = outerHeight(element);\n            var newHeight;\n            var constrainedHeight;\n\n            if (delta === 0) {\n                return;\n            }\n\n            if (isUndefined(that._initialElementHeight)) {\n                that._initialElementHeight = currentHeight;\n            }\n\n            //use initial delta instead of delta as changing the height with a small value (e.g. 1px)\n            //on each drag does not work due to browser calculation of computed styles\n            constrainedHeight = constrain({\n                value: that._initialElementHeight + initialDelta,\n                min: that.options.minHeight,\n                max: Number.MAX_SAFE_INTEGER\n            });\n\n            newHeight = toPixels(constrainedHeight);\n            element[0].style[HEIGHT] = newHeight;\n            element.attr(HEIGHT, Math.floor(constrainedHeight));\n        }\n    });\n\n    var ElementResizingFactory = Class.extend({\n        create: function(editor) {\n            var factory = this;\n\n            $(editor.body)\n                .on(\"dragstart\" + NS, function() {\n                    var nodes = RangeUtils.nodes(editor.getRange()),\n                        hasImg = false;\n\n                    nodes.forEach(function(node) {\n                        if (node.nodeName === \"IMG\") {\n                            hasImg = true;\n                        }\n                    });\n\n                    if (hasImg && nodes.length > 1) {\n                        editor.elementResizing._destroyResizeHandles();\n                    }\n                })\n                .on(DROP + NS, function() {\n                    setTimeout(function() {\n                        var image = RangeUtils.image(editor.getRange());\n\n                        if (image) {\n                            editor.elementResizing._destroyResizeHandles();\n                            editor.elementResizing.element = image;\n                            editor.elementResizing.showResizeHandles();\n                        }\n                    });\n                })\n                .on(MOUSE_DOWN + NS, TABLE + COMMA + IMG, function(e) {\n                    var eventTarget = e.target;\n                    var eventCurrentTarget = e.currentTarget;\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n\n                    if (elementResizing) {\n                        if (element && eventCurrentTarget !== element) {\n                            if (contains(eventCurrentTarget, element) && element !== eventTarget && contains(element, eventTarget)) {\n                                //prevent a parent table resizing init when clicking on a nested table when the event bubbles\n                                //instead of stopping event propagation\n                                return;\n                            }\n                            else {\n                                if (element !== eventTarget) {\n                                    editor._destroyElementResizing();\n                                    factory._initResizing(editor, eventCurrentTarget);\n                                }\n                            }\n                        }\n                    }\n                    else {\n                        factory._initResizing(editor, eventCurrentTarget);\n                    }\n\n                    editor._showElementResizeHandles();\n                })\n                .on(MOUSE_DOWN + NS, function(e) {\n                    var elementResizing = editor.elementResizing;\n                    var element = elementResizing ? elementResizing.element : null;\n                    var target = e.target;\n                    var isResizeHandleOrChild = $(target).hasClass(RESIZE_HANDLE_WRAPPER_CLASS) || $(target).parents(DOT + RESIZE_HANDLE_WRAPPER_CLASS).length > 0;\n\n                    if (elementResizing && element !== target && !contains(element, target) && !isResizeHandleOrChild) {\n                        editor._destroyElementResizing();\n                    }\n                });\n        },\n\n        dispose: function(editor) {\n            $(editor.body).off(NS);\n        },\n\n        _initResizing: function(editor, element) {\n            // table and image resizing is natively supported in IE\n            // https://stackoverflow.com/questions/53831846/resizing-images-in-contenteditable-div-stopped-working-in-firefox\n            // Enable custom resize handlers for FF too\n            if (!browser.msie) {\n                if ($(element).is(TABLE)) {\n                    editor.elementResizing = editor.tableResizing = new TableResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                } else if ($(element).is(IMG)) {\n                    editor.elementResizing = new ImageResizing(element, {\n                        appendHandlesTo: editor.body,\n                        rtl: kendo.support.isRtl(editor.element),\n                        rootElement: editor.body\n                    });\n                }\n\n                if (editor._showElementResizeHandlesProxy) {\n                    editor.unbind(SELECT, editor._showElementResizeHandlesProxy);\n                    editor.bind(SELECT, editor._showElementResizeHandlesProxy);\n                }\n            }\n        }\n    });\n\n    ElementResizingFactory.current = new ElementResizingFactory();\n\n    extend(Editor, {\n        TableResizing: TableResizing,\n        ImageResizing: ImageResizing,\n        ElementResizing: ElementResizing,\n        ElementResizingFactory: ElementResizingFactory\n    });\n\n})(window.kendo);\n\n(function($, undefined$1) {\n\nvar kendo = window.kendo,\n    Editor = kendo.ui.editor,\n    EditorUtils = Editor.EditorUtils,\n    RangeUtils = Editor.RangeUtils,\n    dom = Editor.Dom,\n    registerTool = EditorUtils.registerTool,\n    Command = Editor.Command;\n\nvar tableFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"table\"] }]);\nvar cellsFormatFinder = new Editor.BlockFormatFinder([{ tags: [\"td\",\"th\"] }]);\nvar reUnit = /([a-z]+|%)$/i;\n\nvar COL = \"col\";\nvar ROW = \"row\";\nvar COLGROUP = \"colgroup\";\nvar SCOPE = \"scope\";\nvar COL_INDEX = \"col-index\";\nvar TH = \"th\";\nvar TD = \"td\";\nvar THEAD = \"thead\";\nvar HEADERS = \"headers\";\nvar TABLE = \"table\";\n\nvar TableWizardCommand = Command.extend({\n    exec: function() {\n        var cmd = this;\n        var editor = cmd.editor;\n        var range = cmd.range = cmd.lockRange();\n        var isTableCellWizard = cmd.options.tableCellWizard;\n        var selectedTable = cmd._sourceTable = !cmd.options.insertNewTable ? cmd._selectedTable(range) : undefined$1;\n        var selectedCells = cmd._selectedTableCells = selectedTable ? cmd._selectedCells(range) : undefined$1;\n        var options = {\n            visible: false,\n            messages: editor.options.messages,\n            closeCallback: cmd.onDialogClose.bind(cmd),\n            table: cmd.parseTable(selectedTable, selectedCells),\n            dialogOptions: editor.options.dialogOptions,\n            isRtl: kendo.support.isRtl(editor.wrapper)\n        };\n\n        var dialog = new Editor.TableWizardDialog(options);\n        dialog.open(isTableCellWizard);\n    },\n\n    onDialogClose: function(data) {\n        var cmd = this;\n        cmd.releaseRange(cmd.range);\n\n        if (data) { //Ok button pressed\n            if (cmd.options.insertNewTable) {\n                cmd.insertTable(cmd.createNewTable(data));\n            } else {\n                cmd.updateTable(data, cmd._sourceTable, cmd._selectedTableCells);\n            }\n        }\n    },\n    releaseRange: function(range) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        dom.windowFromDocument(doc).focus();\n        Command.fn.releaseRange.call(cmd, range);\n    },\n    insertTable: function(table) {\n        var range = this.range;\n\n        range.insertNode(table);\n        range.collapse(true);\n        this.editor.selectRange(range);\n\n        this._ensureFocusableAfterTable(table);\n    },\n    _ensureFocusableAfterTable: function(table) {\n        var siblingNodes = $(table).parent().contents();\n        var lastSiblingIndex = siblingNodes.length - 1;\n        var lastSibling = siblingNodes.get(lastSiblingIndex);\n\n        while (lastSibling.nodeValue !== null && (lastSibling.nodeValue === \" \" || lastSibling.nodeValue === \"\")) {\n            lastSiblingIndex -= 1;\n            lastSibling = siblingNodes.get(lastSiblingIndex);\n        }\n\n        if (lastSibling === table) {\n            dom.insertAfter(dom.createEmptyNode(this.editor.document, \"p\"), table);\n        }\n    },\n    updateTable: function(data, table, selectedCells) {\n        var cmd = this;\n        var tableRows = $(table.rows).toArray();\n        var tableProp = data.tableProperties;\n        var rows = tableProp.rows;\n        var tHead = table.tHead;\n        var last = cmd._lastInCollection;\n        var lastSelectedRow, cellProp;\n\n        //Leave only first selected cell\n        while (selectedCells.length > 1) {\n            selectedCells.pop();\n        }\n\n        lastSelectedRow = selectedCells.length ? last(selectedCells).parentNode : last(tableRows);\n\n        cmd._deleteTableRows(tableRows, tableRows.length - rows);\n\n        if (tableRows.length < rows) {\n            cmd._addRows(lastSelectedRow, rows, tableRows);\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        cmd._updateColumns(tableRows, tableProp.columns, selectedCells, lastSelectedRow);\n        cmd._updateTableProperties(table, tableProp);\n\n        cellProp = data.cellProperties;\n        if (selectedCells[0]) {\n            dom.attr(selectedCells[0], { id: (cellProp || {}).id || null });\n        }\n        if (cellProp) {\n            (cellProp.selectAllCells ? $(tableRows).children() : $(selectedCells)).each(function(i, cell) {\n                cmd._updateCellProperties(cell, cellProp, tableProp);\n            });\n        }\n\n        cmd._updateCaption(table, tableProp);\n\n        if (tHead) {\n            cmd._updateHeadersWithThead(table, data);\n        } else {\n            cmd._updateHeadersNoThead(table, data);\n        }\n\n        cmd._updateHeaderAssociates(table, tableProp);\n        dom.clearTableMappings(table, COL_INDEX);\n    },\n    _isHeadingRow: function(row) {\n        return dom.is(row.cells[0], TH) && dom.is(row.parentNode, THEAD);\n    },\n    _isHeadingCell: function(cell) {\n        return dom.is(cell, TH);\n    },\n    cellsWithHeadersAssociated: function(table) {\n        var cells = $(table.rows).children();\n        var headingIds = [];\n        var checkHeader = function(header) {\n            return headingIds.indexOf(header) > -1;\n        };\n\n        cells.each(function(c, cell) {\n            if (cell.id && dom.is(cell, TH)) {\n                headingIds.push(cell.id);\n            }\n        });\n\n        var associatedCells = cells.filter(function(c, cell) {\n            var headersAttr = cell.getAttribute(HEADERS);\n            var headersArray;\n\n            if (headersAttr && !dom.is(cell, TH)) {\n                headersArray = headersAttr.split(\" \");\n\n                if (headersArray && headersArray.length > 0) {\n                    return headersArray.some(checkHeader);\n                }\n            }\n\n            return false;\n        });\n\n        return !!associatedCells.length;\n    },\n    _insertCells: function(count, row, index) {\n        index = isNaN(index) ? -1 : index;\n        for (var i = 0, cell; i < count; i++) {\n            cell = row.insertCell(index);\n            cell.innerHTML = \"&nbsp;\";\n        }\n    },\n    _deleteTableRows: function(rows, count) {\n        for (var i = 0, row, rowParent; i < count; i++) {\n            row = rows.pop();\n            rowParent = row.parentNode;\n            rowParent.removeChild(row);\n            if (!rowParent.rows.length) {\n                dom.remove(rowParent);\n            }\n        }\n    },\n    createNewTable: function(data) {\n        var cmd = this;\n        var doc = cmd.editor.document;\n        var tableProp = data.tableProperties;\n        var table = dom.create(doc, TABLE);\n        var rowIndex = 0;\n        var thead;\n\n        cmd._updateTableProperties(table, tableProp);\n        cmd._updateCaption(table, tableProp);\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            thead = table.createTHead();\n            cmd._createTableRows(data, thead, rowIndex, true);\n            rowIndex += tableProp.headerRows;\n        }\n\n        var tbody = table.createTBody();\n        cmd._createTableRows(data, tbody, rowIndex, false);\n\n        dom.reMapTableColumns(table, COL_INDEX);\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        }\n\n        dom.clearTableMappings(table, COL_INDEX);\n\n        return table;\n    },\n    _createTableRows: function(data, container, initialIndex, headerRows) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var cellProp = data.cellProperties;\n        var columns = tableProp.columns;\n        var rows = headerRows ? tableProp.headerRows : tableProp.rows;\n        var headerColumns = tableProp.headerColumns;\n\n        for (var r = initialIndex, row; r < rows; r++) {\n            row = container.insertRow();\n\n            for (var c = 0, cell; c < columns; c++) {\n                if (headerRows || headerColumns > c) {\n                    cell = document.createElement(TH);\n                } else {\n                    cell = document.createElement(TD);\n                }\n\n                row.appendChild(cell);\n                cell.innerHTML = \"&nbsp;\";\n                if (cellProp && r === 0 && c === 0 && cellProp.id) {\n                    cell.id = cellProp.id;\n                }\n\n                cmd._updateCellProperties(cell, cellProp && (cellProp.selectAllCells || (r === 0 && c === 0)) ? cellProp : {}, tableProp);\n            }\n        }\n    },\n    _addRows: function(lastSelectedRow, rows, tableRows) {\n        var cmd = this;\n        var rowIndex = $(lastSelectedRow).index();\n        var cellsLength = lastSelectedRow.cells.length;\n        var newRowsCount = rows - tableRows.length;\n        var parent = lastSelectedRow.parentNode;\n        var row;\n\n        while (newRowsCount) {\n            row = parent.insertRow(rowIndex + 1);\n            cmd._insertCells(cellsLength - row.cells.length, row);\n            newRowsCount--;\n        }\n    },\n    _updateColumns: function(tableRows, columns, selectedCells, lastSelectedRow) {\n        var cmd = this;\n        var last = cmd._lastInCollection;\n        var firstRowLastCell = last(tableRows[0].cells);\n        var numberOfColumns = Number(firstRowLastCell.getAttribute(COL_INDEX)) + firstRowLastCell.colSpan;\n\n        if (numberOfColumns > columns) {\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                var rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n\n                while (rowColumns > columns) {\n                    if (lastCurrentCell.colSpan && lastCurrentCell.colSpan > 1) {\n                        lastCurrentCell.colSpan -= 1;\n                    } else {\n                        row.deleteCell(-1);\n                    }\n\n                    lastCurrentCell = last(row.cells);\n                    rowColumns = Number(lastCurrentCell.getAttribute(COL_INDEX)) + lastCurrentCell.colSpan;\n                }\n            });\n        }\n\n        if (numberOfColumns < columns) {\n            var cellIndex = $(last(selectedCells) || last(lastSelectedRow.cells)).index();\n            $(tableRows).each(function(i, row) {\n                var lastCurrentCell = last(row.cells);\n                cmd._insertCells(columns - Number(lastCurrentCell.getAttribute(COL_INDEX)) - lastCurrentCell.colSpan, row, cellIndex + 1);\n            });\n        }\n    },\n    _updateTableProperties: function(table, data) {\n        var style = this._getStylesData(data);\n        dom.attr(table, {\n            cellSpacing: data.cellSpacing || null,\n            topCellPadding: this._getNumericValue(data.topCellPadding) ?? '',\n            leftCellPadding: this._getNumericValue(data.leftCellPadding) ?? '',\n            bottomCellPadding: this._getNumericValue(data.bottomCellPadding) ?? '',\n            rightCellPadding: this._getNumericValue(data.rightCellPadding) ?? '',\n            className: data.className || null,\n            id: data.id || null,\n            summary: data.summary || null,\n            style: style || null\n        });\n        $(table).addClass(\"k-table\");\n    },\n    _updateCellProperties: function(cell, data, tableData) {\n        var style = this._getStylesData(data);\n        style.paddingTop = this._getNumericValue(data.topCellPadding) ?? this._getNumericValue(tableData?.topCellPadding) ?? '';\n        style.paddingLeft = this._getNumericValue(data.leftCellPadding) ?? this._getNumericValue(tableData?.leftCellPadding) ?? '';\n        style.paddingBottom = this._getNumericValue(data.bottomCellPadding) ?? this._getNumericValue(tableData?.bottomCellPadding) ?? '';\n        style.paddingRight = this._getNumericValue(data.rightCellPadding) ?? this._getNumericValue(tableData?.rightCellPadding) ?? '';\n        style.margin = data.cellMargin || null;\n        dom.attr(cell, {\n            style: style || null,\n            className: data.className || null\n        });\n    },\n    _updateCaption: function(table, data) {\n        if (table.caption && !data.captionContent) {\n            table.deleteCaption();\n        } else if (data.captionContent) {\n            var caption = table.createCaption();\n            caption.innerHTML = data.captionContent;\n            var alignment = this._getAlignmentData(data.captionAlignment);\n            dom.attr(caption, {\n                style: {\n                    textAlign: alignment.textAlign,\n                    verticalAlign: alignment.verticalAlign\n                }\n            });\n        }\n    },\n    _updateHeadersNoThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var rows = table.rows;\n        var row, cells, cell, i, j;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n            cells = row.cells;\n\n            for (j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                if (!cmd._isHeadingCell(cell) && (i < tableProp.headerRows || tableProp.headerColumns > cell.getAttribute(COL_INDEX))) {\n                    dom.changeTag(cell, TH, false);\n                } else if (cmd._isHeadingCell(cell) && i >= tableProp.headerRows && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                }\n            }\n        }\n    },\n    _updateHeadersWithThead: function(table, data) {\n        var cmd = this;\n        var tableProp = data.tableProperties;\n        var thead = table.tHead;\n        var rowIndex = 0;\n        var tbody = table.tBodies[0];\n        var row, cell, i;\n\n        if (!tbody) {\n            tbody = table.createTBody();\n        }\n\n        if (tableProp.headerRows && tableProp.headerRows > 0) {\n            if (!thead) {\n                thead = table.createTHead();\n            }\n\n            while (thead.rows.length < tableProp.headerRows) {\n                thead.appendChild(tbody.rows[0]);\n            }\n\n            while (thead.rows.length > tableProp.headerRows) {\n                tbody.appendChild(thead.rows[0]);\n            }\n\n            cmd._swapToHeaderCells(thead);\n        } else if (thead) {\n            while (thead.rows.length > 0) {\n                tbody.appendChild(thead.rows[thead.rows.length - 1]);\n            }\n\n            table.deleteTHead();\n        }\n\n        while (tbody.rows.length > rowIndex) {\n            row = tbody.rows[rowIndex];\n            for (i = 0; i < row.cells.length; i++) {\n                cell = row.cells[i];\n                if (cmd._isHeadingCell(cell) && tableProp.headerColumns <= cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TD, false);\n                } else if (!cmd._isHeadingCell(cell) && tableProp.headerColumns > cell.getAttribute(COL_INDEX)) {\n                    dom.changeTag(cell, TH, false);\n                }\n            }\n            rowIndex += 1;\n        }\n    },\n    _updateHeaderAssociates: function(table, tableProp) {\n        var cmd = this;\n\n        if (tableProp.cellsWithHeaders === \"ids\") {\n            if (!cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeScopes(table);\n            }\n            dom.associateWithIds(table);\n        } else if (tableProp.cellsWithHeaders === \"scope\") {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            }\n            cmd._addScopes(table, tableProp.headerRows, tableProp.headerColumns);\n        } else {\n            if (cmd.cellsWithHeadersAssociated(table)) {\n                cmd._removeAssociates(table);\n            } else {\n                cmd._removeScopes(table);\n            }\n        }\n    },\n    _addScopes: function(table, headerRows, headerCols) {\n        var rows = table.rows;\n        var i, j, row, cell;\n\n        for (i = 0; i < rows.length; i++) {\n            row = rows[i];\n\n            for (j = 0; j < row.cells.length; j++) {\n                cell = row.cells[j];\n\n                if (i < headerRows) {\n                    cell.setAttribute(SCOPE, COL);\n                } else if (cell.getAttribute(COL_INDEX) < headerCols) {\n                    cell.setAttribute(SCOPE, ROW);\n                }\n            }\n        }\n    },\n    _removeScopes: function(table) {\n        $(table).find(TH).removeAttr(SCOPE);\n        $(table).find(COL).remove();\n        $(table).find(COLGROUP).remove();\n    },\n    _removeAssociates: function(table) {\n        $(table).find(\"th, td\").removeAttr(\"id headers\");\n    },\n    _swapToHeaderCells: function(thead) {\n        var tds = $(thead).find(\"td\");\n        var swapCell = function(index, cell) {\n            dom.changeTag(cell, TH, false);\n        };\n        tds.each(swapCell);\n    },\n    _getStylesData: function(data) {\n        var that = this;\n        var alignment = this._getAlignmentData(data.alignment);\n        var whiteSpace = \"wrapText\" in data ? (data.wrapText ? \"\" : \"nowrap\") : null;\n\n        return $.extend({\n            width: data.width ? data.width + data.widthUnit : null,\n            height: data.height ? data.height + data.heightUnit : null,\n            textAlign: alignment.textAlign,\n            verticalAlign: alignment.verticalAlign,\n            backgroundColor: data.bgColor || \"\",\n            borderWidth: data.borderWidth,\n            borderStyle: data.borderStyle,\n            borderColor: data.borderColor || \"\",\n            borderCollapse: data.collapseBorders ? \"collapse\" : null,\n            whiteSpace: whiteSpace\n        }, that._getTablePositionData(data.position));\n    },\n    _getAlignmentData: function(alignment) {\n        var textAlign = \"\";\n        var verticalAlign = textAlign;\n\n        if (alignment) {\n            if (alignment.indexOf(\" \") != -1) {\n                var align = alignment.split(\" \");\n                textAlign = align[0];\n                verticalAlign = align[1];\n            } else {\n                textAlign = alignment;\n            }\n        }\n        return { textAlign: textAlign, verticalAlign: verticalAlign };\n    },\n    _getTablePositionData: function(position) {\n        if (!position) {\n            return {};\n        }\n\n        return { marginLeft: position != \"left\" ? \"auto\" : \"\", marginRight: position != \"right\" ? \"auto\" : \"\" };\n    },\n    parseTable: function(table, selectedCells) {\n        if (!table) {\n            return { tableProperties: {}, selectedCells: [] };\n        }\n\n        var cmd = this;\n        var tStyle = table.style;\n        var rows = table.rows;\n        var caption = table.caption;\n        var captionClone = $(caption ? caption.cloneNode(true) : undefined$1);\n        captionClone.find(\".k-marker\").remove();\n\n        var cssClass = table.className;\n        cssClass = cssClass.replace(/^k-table\\s|\\sk-table$/, \"\");\n        cssClass = cssClass.replace(/\\sk-table\\s/, \" \");\n        cssClass = cssClass.replace(/^k-table$/, \"\");\n\n        var tableAlignment = cmd._getAlignment(table, true);\n        var tablePosition = cmd._getTablePosition(table);\n        var captionAlignment = caption ? cmd._getAlignment(caption) : undefined$1;\n        var numberOfHeaderRows = dom._getNumberOfHeaderRows(table);\n\n        var cellsWithHeaders;\n        if (cmd.cellsWithHeadersAssociated(table)) {\n            cellsWithHeaders = \"ids\";\n        } else if ($(table).find(\"th[scope]\").length > 0) {\n            cellsWithHeaders = \"scope\";\n        } else {\n            cellsWithHeaders = \"none\";\n        }\n\n        dom.reMapTableColumns(table, COL_INDEX);\n        var numberOfColumns = dom._getNumberOfColumns(table);\n        var numberOfHeaderColumns = dom._getNumberOfHeaderColumns(table, numberOfHeaderRows);\n        dom.clearTableMappings(table, COL_INDEX);\n\n        var tableJson = {\n            tableProperties: {\n                width: tStyle.width || table.width ? parseFloat(tStyle.width || table.width) : null,\n                height: tStyle.height || table.height ? parseFloat(tStyle.height || table.height) : null,\n                columns: numberOfColumns,\n                rows: rows.length,\n                widthUnit: cmd._getUnit(tStyle.width),\n                heightUnit: cmd._getUnit(tStyle.height),\n                cellSpacing: table.cellSpacing,\n                topCellPadding: table.topCellPadding,\n                leftCellPadding: table.leftCellPadding,\n                bottomCellPadding: table.bottomCellPadding,\n                rightCellPadding: table.rightCellPadding,\n                alignment: tableAlignment.textAlign,\n                position: tablePosition,\n                bgColor: tStyle.backgroundColor || table.bgColor,\n                className: cssClass,\n                id: table.id,\n                borderWidth: tStyle.borderWidth || table.border,\n                borderColor: tStyle.borderColor,\n                borderStyle: tStyle.borderStyle || \"\",\n                collapseBorders: !!tStyle.borderCollapse,\n                summary: table.summary,\n                captionContent: caption ? captionClone.html() : \"\",\n                captionAlignment: caption && captionAlignment.textAlign ? captionAlignment.textAlign + \" \" + captionAlignment.verticalAlign : \"\",\n                headerRows: numberOfHeaderRows,\n                headerColumns: numberOfHeaderColumns,\n                cellsWithHeaders: cellsWithHeaders\n            },\n            selectedCells: []\n        };\n\n        tableJson.rows = cmd.parseTableRows(rows, selectedCells, tableJson);\n\n        return tableJson;\n    },\n    parseTableRows: function(rows, selectedCells, tableJson) {\n        var cmd = this;\n        var data = [], row, rowData, cells, cell, cellData;\n        for (var i = 0; i < rows.length; i++) {\n            row = rows[i];\n            rowData = { cells: [] };\n            cells = row.cells;\n            data.push(rowData);\n            for (var j = 0; j < cells.length; j++) {\n                cell = cells[j];\n                cellData = cmd.parseCell(cell);\n                if ($.inArray(cell, selectedCells) != -1) {\n                    tableJson.selectedCells.push(cellData);\n                }\n                rowData.cells.push(cellData);\n            }\n        }\n        return data;\n    },\n    parseCell: function(cell) {\n        var cmd = this;\n        var cStyle = cell.style;\n        var alignment = cmd._getAlignment(cell);\n        alignment = alignment.textAlign ? alignment.textAlign + \" \" + alignment.verticalAlign : \"\";\n\n        var data = {\n            width: cStyle.width || cell.width ? parseFloat(cStyle.width || cell.width) : null,\n            height: cStyle.height || cell.height ? parseFloat(cStyle.height || cell.height) : null,\n            widthUnit: cmd._getUnit(cStyle.width),\n            heightUnit: cmd._getUnit(cStyle.height),\n            cellMargin: cStyle.margin,\n            topCellPadding: cStyle.paddingTop,\n            leftCellPadding: cStyle.paddingLeft,\n            bottomCellPadding: cStyle.paddingBottom,\n            rightCellPadding: cStyle.paddingRight,\n            alignment: alignment,\n            bgColor: cStyle.backgroundColor || cell.bgColor,\n            className: cell.className,\n            id: cell.id,\n            borderWidth: cStyle.borderWidth || cell.border,\n            borderColor: cStyle.borderColor,\n            borderStyle: cStyle.borderStyle,\n            wrapText: cStyle.whiteSpace != \"nowrap\"\n        };\n\n        return data;\n    },\n    _getTablePosition: function(element) {\n        var style = element.style;\n        if (style.marginLeft == \"auto\" && style.marginRight == \"auto\") {\n            return \"center\";\n        }\n\n        if (style.marginLeft == \"auto\") {\n            return \"right\";\n        }\n\n        return \"left\";\n    },\n    _getAlignment: function(element, horizontalOnly) {\n        var style = element.style;\n        var hAlign = style.textAlign || element.align || \"\";\n        if (horizontalOnly) {\n            return { textAlign: hAlign };\n        }\n        var vAlign = style.verticalAlign || element.vAlign || \"\";\n        if (hAlign && vAlign) {\n            return { textAlign: hAlign, verticalAlign: vAlign };\n        }\n        if (!hAlign && vAlign) {\n            return { textAlign: \"left\", verticalAlign: vAlign };\n        }\n        if (hAlign && !vAlign) {\n            return { textAlign: hAlign, verticalAlign: \"top\" };\n        }\n        return { textAlign: \"\", verticalAlign: \"\" };\n    },\n    _getUnit: function(value) {\n        var unit = (value || \"\").match(reUnit);\n        return unit ? unit[0] : \"px\";\n    },\n    _selectedTable: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return tableFormatFinder.findSuitable(nodes)[0];\n    },\n    _selectedCells: function(range) {\n        var nodes = dom.filterBy(RangeUtils.nodes(range), dom.htmlIndentSpace, true);\n        return cellsFormatFinder.findSuitable(nodes);\n    },\n    _lastInCollection: function(collection) {\n        return collection[collection.length - 1];\n    },\n    _getNumericValue: function(value) {\n        return !isNaN(value) || typeof value === \"string\" ? value : null;\n    }\n});\n\nvar TableWizardTool = Editor.Tool.extend({\n    command: function(options) {\n        options.insertNewTable = this.options.insertNewTable;\n        options.tableCellWizard = !!this.options.tableCellWizard;\n        return new TableWizardCommand(options);\n    }\n});\n\nvar TableWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nvar TableCellWizardEditTool = TableWizardTool.extend({\n    update: function(ui, nodes) {\n        var isFormatted = !tableFormatFinder.isFormatted(nodes),\n            toolbar = ui.closest(\".k-toolbar\").getKendoToolBar();\n\n        if (isFormatted === true) {\n            toolbar.hide(ui);\n        } else {\n            toolbar.show(ui);\n        }\n    }\n});\n\nkendo.ui.editor.TableWizardTool = TableWizardTool;\nkendo.ui.editor.TableWizardCommand = TableWizardCommand;\n\nregisterTool(\"tableProperties\", new TableWizardEditTool({ command: TableWizardCommand, insertNewTable: false, property: \"tableProperties\" }));\nregisterTool(\"tableCellProperties\", new TableCellWizardEditTool({ command: TableWizardCommand, tableCellWizard: true, insertNewTable: false, property: \"tableCellProperties\" }));\n\n})(window.kendo.jQuery);\n\n(function($, undefined$1) {\n\nconst FORM_FIELD_CLASS = \"k-form-field\",\n      INVISIBLE_CLASS = \"k-visibility-invisible\",\n      DOT = \".\";\n\nvar kendo = window.kendo,\n    encode = kendo.htmlEncode,\n    numericTextBoxSettings = { format: \"0\", min: 0 },\n    units = [\"px\", \"em\"],\n    borderStyles = [\"solid\", \"dotted\", \"dashed\", \"double\", \"groove\", \"ridge\", \"inset\", \"outset\", \"initial\", \"inherit\", \"none\", \"hidden\"];\n\nvar DEFAULT_NUMBER_OF_COLS_AND_ROWS = 4;\n\nvar textWrapDropDownSettings = {\n    dataSource: [{\n        className: \"text-wrap\",\n        value: \"wrap\"\n    }, {\n        className: \"parameter-string\",\n        value: \"nowrap\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-text-wrap\" }) + encode(tooltip)\n};\n\nvar tablePositionDropDownSettings = {\n    dataSource: [{\n        className: \"table-position-start\",\n        value: \"left\"\n    }, {\n        className: \"table-position-center\",\n        value: \"center\"\n    }, {\n        className: \"table-position-end\",\n        value: \"right\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar tableAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-middle-left\",\n        value: \"left\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar cellAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-middle-left\",\n        value: \"left middle\"\n    }, {\n        className: \"table-align-middle-center\",\n        value: \"center middle\"\n    }, {\n        className: \"table-align-middle-right\",\n        value: \"right middle\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }) + encode(tooltip),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" }) + encode(tooltip)\n};\n\nvar accessibilityAlignmentDropDownSettings = {\n    dataSource: [{\n        className: \"table-align-top-left\",\n        value: \"left top\"\n    }, {\n        className: \"table-align-top-center\",\n        value: \"center top\"\n    }, {\n        className: \"table-align-top-right\",\n        value: \"right top\"\n    }, {\n        className: \"table-align-bottom-left\",\n        value: \"left bottom\"\n    }, {\n        className: \"table-align-bottom-center\",\n        value: \"center bottom\"\n    }, {\n        className: \"table-align-bottom-right\",\n        value: \"right bottom\"\n    }, {\n        className: \"align-remove\",\n        value: \"\"\n    }],\n    dataTextField: \"className\",\n    dataValueField: \"value\",\n    template: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className) }),\n    valueTemplate: ({ className, tooltip }) => kendo.ui.icon($(`<span title=\"${encode(tooltip)}\"></span>`), { icon: encode(className), iconClass: \"k-align-group\" })\n};\n\nvar tablePropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-table-wizard-tabs\" class=\"k-root-tabs\">' +\n            '<ul>' +\n                `<li class=\"k-active\">${ messages.tableTab }</li>` +\n                `<li>${ messages.accessibilityTab }</li>` +\n            '</ul>' +\n            '<div id=\"k-table-properties\"></div>' +\n            '<div id=\"k-accessibility-properties\"></div>' +\n        '</div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n    var cellPropertiesDialogTemplate = ({ messages }) =>\n    '<div class=\"k-editor-dialog k-editor-table-wizard-window k-action-window k-popup-edit-form\">' +\n        '<div id=\"k-cell-properties\"></div>' +\n        '<div class=\"k-actions k-actions-start k-actions-horizontal k-window-buttons\">' +\n                kendo.html.renderButton(`<button class=\"k-dialog-ok\"><span class=\"k-button-text\">${ messages.dialogOk }</span></button>`, {\n                    icon: 'check',\n                        themeColor: \"primary\"\n                    }) +\n                    kendo.html.renderButton(`<button class=\"k-dialog-close\"><span class=\"k-button-text\">${ messages.dialogCancel }</span></button>`, {\n                        icon: 'cancel-outline'\n                    }) +\n        '</div>' +\n    '</div>';\n\nvar TableWizardDialog = kendo.Class.extend({\n    init: function(options) {\n        this.options = options;\n    },\n    _openTablePropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectTableDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 700;\n        dialogOptions.width = 700;\n        dialogOptions.title = messages.tableProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        this.components = {};\n        that._initTabStripComponent(element);\n        that._tablePropertiesForm = that._createTablePropertiesForm(dialog, messages);\n        that._accessibilityPropertiesForm = that._createAccessibilityPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    _openCellPropertiesDialog: function() {\n        var that = this,\n            options = that.options,\n            dialogOptions = options.dialogOptions,\n            tableData = options.table,\n            dialog,\n            messages = options.messages,\n            isIE = kendo.support.browser.msie;\n\n        function close(e) {\n            e.preventDefault();\n            that.destroy();\n            dialog.destroy();\n        }\n\n        function okHandler(e) {\n            that.collectCellDialogValues(tableData);\n\n            close(e);\n\n            if (that.change) {\n                that.change();\n            }\n\n            options.closeCallback(tableData);\n        }\n\n        function closeHandler(e) {\n            close(e);\n            options.closeCallback();\n        }\n\n        dialogOptions.close = closeHandler;\n        dialogOptions.minWidth = 400;\n        dialogOptions.title = messages.tableCellProperties;\n        dialogOptions.visible = options.visible;\n\n        dialog = $(that._dialogTemplate(messages, cellPropertiesDialogTemplate)).appendTo(document.body)\n            .kendoWindow(dialogOptions)\n            .addClass(\"k-editor-window\")\n            .closest(\".k-window\").toggleClass(\"k-rtl\", options.isRtl).end()\n            .find(\".k-dialog-ok\").on(\"click\", okHandler).end()\n            .find(\".k-dialog-close\").on(\"click\", closeHandler).end()\n            .data(\"kendoWindow\");\n\n        var element = dialog.element;\n        that._cellPropertiesForm = that._createCellPropertiesForm(dialog, messages);\n\n        dialog.center();\n        dialog.open();\n\n        if (isIE) {\n            var dialogHeight = element.closest(\".k-window\").height();\n            element.css(\"max-height\", dialogHeight);\n        }\n    },\n    open: function(isCellProperties) {\n        if (!isCellProperties) {\n            this._openTablePropertiesDialog();\n        } else {\n            this._openCellPropertiesDialog();\n        }\n    },\n\n    _initTabStripComponent: function(element) {\n        var components = this.components = {};\n        components.tabStrip = element.find(\"#k-table-wizard-tabs\").kendoTabStrip({\n            animation: false\n        }).data(\"kendoTabStrip\");\n    },\n\n    collectTableDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectTableViewValues(data);\n        that._collectAccessibilityViewValues(data);\n    },\n\n    collectCellDialogValues: function() {\n        var that = this;\n        var data = that.options.table;\n        that._collectCellViewValues(data);\n    },\n\n    _collectTableViewValues: function(tableData) {\n        var tableView = this.components.tableView;\n        var tableProperties = tableData.tableProperties;\n        var cellData = tableData.cellProperties = tableData.cellProperties || {};\n        tableProperties.width = tableView.width.value();\n        tableProperties.widthUnit = tableView.widthUnit.value();\n        tableProperties.height = tableView.height.value();\n        tableProperties.columns = tableView.columns.value();\n        tableProperties.rows = tableView.rows.value();\n        tableProperties.heightUnit = tableView.heightUnit.value();\n        tableProperties.cellSpacing = tableView.cellSpacing.value();\n        tableProperties.topCellPadding = tableView.topCellPadding.value();\n        tableProperties.leftCellPadding = tableView.leftCellPadding.value();\n        tableProperties.bottomCellPadding = tableView.bottomCellPadding.value();\n        tableProperties.rightCellPadding = tableView.rightCellPadding.value();\n        tableProperties.alignment = tableView.alignment.value();\n        tableProperties.position = tableView.position.value();\n        tableProperties.bgColor = tableView.bgColor.value();\n        tableProperties.borderWidth = tableView.borderWidth.value();\n        tableProperties.borderColor = tableView.borderColor.value();\n        tableProperties.borderStyle = tableView.borderStyle.value();\n        tableProperties.collapseBorders = tableView.collapseBorders.check();\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / tableData.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n    _collectCellViewValues: function(table) {\n        var cellData = table.cellProperties = table.cellProperties || {};\n        var cellView = this.components.cellView;\n\n        cellData.selectAllCells = cellView.selectAllCells.check();\n        cellData.width = cellView.width.value();\n        cellData.widthUnit = cellView.widthUnit.value();\n        cellData.height = cellView.height.value();\n        cellData.heightUnit = cellView.heightUnit.value();\n        cellData.independentCellPaddings = cellView.independentCellPaddings.check();\n        cellData.topCellPadding = cellView.topCellPadding.value();\n        cellData.leftCellPadding = cellView.leftCellPadding.value();\n        cellData.bottomCellPadding = cellView.bottomCellPadding.value();\n        cellData.rightCellPadding = cellView.rightCellPadding.value();\n        cellData.cellMargin = cellView.cellMargin.value();\n        cellData.alignment = cellView.alignment.value();\n        cellData.bgColor = cellView.bgColor.value();\n        cellData.className = cellView.className.value();\n        cellData.id = cellView.id.value();\n        cellData.borderWidth = cellView.borderWidth.value();\n        cellData.borderColor = cellView.borderColor.value();\n        cellData.borderStyle = cellView.borderStyle.value();\n        cellData.wrapText = cellView.wrapTextValue.value() == \"wrap\";\n\n        if (!cellData.width) {\n            cellData.selectAllCells = true;\n            cellData.width = 100 / table.tableProperties.columns;\n            cellData.widthUnit = \"%\";\n        }\n    },\n\n   _collectAccessibilityViewValues: function(table) {\n        var tableProperties = table.tableProperties;\n        var accessibilityView = this.components.accessibilityView;\n        tableProperties.captionContent = accessibilityView.captionContent.value();\n        tableProperties.captionAlignment = accessibilityView.captionAlignment.value();\n        tableProperties.summary = accessibilityView.summary.value();\n        tableProperties.cellsWithHeaders = accessibilityView.cellsWithHeaders.value();\n        tableProperties.className = accessibilityView.className.value();\n        tableProperties.id = accessibilityView.id.value();\n        tableProperties.headerRows = accessibilityView.headerRows.value();\n        tableProperties.headerColumns = accessibilityView.headerColumns.value();\n    },\n    _addUnit: function(units, value) {\n        if (value && $.inArray(value, units) == -1) {\n            units.push(value);\n        }\n    },\n\n    _initNumericTextbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoNumericTextBox(\n                settings ? $.extend({}, numericTextBoxSettings, settings) : numericTextBoxSettings\n            ).data(\"kendoNumericTextBox\");\n        if (property in data) {\n            component.value(parseInt(data[property], 10));\n        }\n    },\n\n    _initDropDownList: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initBorderStyleDropDown: function(element, property, data, storage, dataSource) {\n        var component = storage[property] = element.kendoDropDownList({\n            dataSource: dataSource,\n            optionLabel: this.options.messages.borderNone\n        }).data(\"kendoDropDownList\");\n        this._setComponentValue(component, data, property);\n    },\n\n    _initTablePositionDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tablePositionDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.tableAlignLeft;\n        dataSource[1].tooltip = messages.tableAlignCenter;\n        dataSource[2].tooltip = messages.tableAlignRight;\n\n        this._initPositionDropDown(element, tablePositionDropDownSettings, \"position\", data, tableView);\n    },\n\n    _initTableAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var tableView = this.components.tableView;\n        var dataSource = tableAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeft;\n        dataSource[1].tooltip = messages.alignCenter;\n        dataSource[2].tooltip = messages.alignRight;\n        dataSource[3].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, tableAlignmentDropDownSettings, \"alignment\", data, tableView);\n    },\n\n    _initCellAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var cellView = this.components.cellView;\n        var dataSource = cellAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftMiddle;\n        dataSource[4].tooltip = messages.alignCenterMiddle;\n        dataSource[5].tooltip = messages.alignRightMiddle;\n        dataSource[6].tooltip = messages.alignLeftBottom;\n        dataSource[7].tooltip = messages.alignCenterBottom;\n        dataSource[8].tooltip = messages.alignRightBottom;\n        dataSource[9].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, cellAlignmentDropDownSettings, \"alignment\", data, cellView);\n    },\n\n    _initAccessibilityAlignmentDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var accessibilityView = this.components.accessibilityView;\n        var dataSource = accessibilityAlignmentDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.alignLeftTop;\n        dataSource[1].tooltip = messages.alignCenterTop;\n        dataSource[2].tooltip = messages.alignRightTop;\n        dataSource[3].tooltip = messages.alignLeftBottom;\n        dataSource[4].tooltip = messages.alignCenterBottom;\n        dataSource[5].tooltip = messages.alignRightBottom;\n        dataSource[6].tooltip = messages.alignRemove;\n\n        this._initAlignmentDropDown(element, accessibilityAlignmentDropDownSettings, \"captionAlignment\", data, accessibilityView);\n    },\n    _initTextWrapDropDown: function(element, data) {\n        var messages = this.options.messages;\n        var name = \"wrapTextValue\";\n        data.wrapTextValue = data.wrapText ? \"wrap\" : \"nowrap\";\n\n        var cellView = this.components.cellView;\n        var dataSource = textWrapDropDownSettings.dataSource;\n        dataSource[0].tooltip = messages.wrapText;\n        dataSource[1].tooltip = messages.fitToCell;\n        var component = cellView[name] =\n            element.kendoDropDownList(textWrapDropDownSettings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-text-wrap');\n        this._setComponentValue(component, data, name);\n    },\n    _initPositionDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-position');\n        this._setComponentValue(component, data, name);\n    },\n    _initAlignmentDropDown: function(element, settings, name, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        component.list.addClass('k-align');\n        this._setComponentValue(component, data, name);\n    },\n    _initAssociationDropDown: function(element, name, settings, data, storage) {\n        var component = storage[name] =\n            element.kendoDropDownList(settings).data(\"kendoDropDownList\");\n\n        this._setComponentValue(component, data, name);\n    },\n    _setComponentValue: function(component, data, property) {\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initColorPicker: function(element, property, data, storage) {\n        var component = storage[property] =\n            element.kendoColorPicker({ buttons: false, clearButton: true }).data(\"kendoColorPicker\");\n\n        if (data[property]) {\n            component.value(data[property]);\n        }\n    },\n    _initInput: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextBox(settings || {}).data(\"kendoTextBox\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    _initCheckbox: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoCheckBox(settings || {}).data(\"kendoCheckBox\");\n        if (property in data) {\n            component.check(data[property]);\n        }\n    },\n\n    _initTextArea: function(element, property, data, storage, settings) {\n        var component = storage[property] = element.kendoTextArea(settings || {}).data(\"kendoTextArea\");\n        if (property in data) {\n            component.value(data[property]);\n        }\n    },\n\n    destroy: function() {\n        var that = this;\n        that._destroyComponents(this.components);\n\n        delete that.components;\n    },\n    _destroyComponents: function(components) {\n        for (var widget in components) {\n            if (components[widget].destroy) {\n                components[widget].destroy();\n            }\n            delete components[widget];\n        }\n    },\n\n    _dialogTemplate: function(messages, dialogTemplate) {\n        return kendo.template(dialogTemplate || tablePropertiesDialogTemplate)({ messages: messages });\n    },\n\n    _onPaddingTopChange: function(e) {\n        let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n            view = this.components[viewType],\n            independentCellPaddings = !view.independentCellPaddings.check(),\n            topCellPaddingNumeric = view.topCellPadding,\n            topCellPaddingValue = topCellPaddingNumeric.value(),\n            leftCellPaddingNumeric = view.leftCellPadding,\n            bottomCellPaddingNumeric = view.bottomCellPadding,\n            rightCellPaddingNumeric = view.rightCellPadding;\n\n        if (independentCellPaddings) {\n            leftCellPaddingNumeric.value(topCellPaddingValue);\n            bottomCellPaddingNumeric.value(topCellPaddingValue);\n            rightCellPaddingNumeric.value(topCellPaddingValue);\n        }\n\n        topCellPaddingNumeric._cachedPadding = topCellPaddingValue;\n    },\n\n    _onPaddingCheckChange: function(e) {\n        let viewType = this.components.tableView ? \"tableView\" : \"cellView\",\n            messages = this.options.messages,\n            checked = e.sender.check(),\n            view = this.components[viewType],\n            topCellPaddingNumeric = view.topCellPadding,\n            leftCellPaddingNumeric = view.leftCellPadding,\n            bottomCellPaddingNumeric = view.bottomCellPadding,\n            rightCellPaddingNumeric = view.rightCellPadding,\n            topCellPaddingValue = topCellPaddingNumeric.value(),\n            bottomCellPaddingValue = bottomCellPaddingNumeric.value(),\n            leftCellPaddingValue = leftCellPaddingNumeric.value(),\n            rightCellPaddingValue = rightCellPaddingNumeric.value();\n\n        if (!checked) {\n            if (topCellPaddingValue === bottomCellPaddingValue &&\n                    topCellPaddingValue === leftCellPaddingValue &&\n                    topCellPaddingValue === rightCellPaddingValue) {\n                leftCellPaddingNumeric.value(topCellPaddingValue);\n                bottomCellPaddingNumeric.value(topCellPaddingValue);\n                rightCellPaddingNumeric.value(topCellPaddingValue);\n            } else {\n                topCellPaddingNumeric.value(null);\n            }\n\n            leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n            bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n            rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).addClass(INVISIBLE_CLASS);\n\n            topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.cellPadding);\n        } else {\n            if (!isNaN(topCellPaddingNumeric._cachedPadding)) {\n                topCellPaddingNumeric.value(topCellPaddingNumeric._cachedPadding);\n            }\n\n            leftCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n            bottomCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n            rightCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).removeClass(INVISIBLE_CLASS);\n\n            topCellPaddingNumeric.wrapper.closest(DOT + FORM_FIELD_CLASS).find(\".k-form-label\").text(messages.topPadding);\n        }\n    },\n\n    _onColumnsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerColumnsNumeric = accessibilityView.headerColumns;\n        var currentNumberOfColumnsHeaders = headerColumnsNumeric.value();\n        var numberOfColumns = args.sender.value();\n\n        if (numberOfColumns < currentNumberOfColumnsHeaders) {\n            headerColumnsNumeric.value(numberOfColumns);\n        }\n\n        headerColumnsNumeric.max(numberOfColumns);\n    },\n\n    _onRowsNumberChange: function(args) {\n        var that = this;\n        var accessibilityView = that.components.accessibilityView;\n        var headerRowsNumeric = accessibilityView.headerRows;\n        var currentNumberOfRowHeaders = headerRowsNumeric.value();\n        var numberOfRows = args.sender.value();\n\n        if (numberOfRows < currentNumberOfRowHeaders) {\n            headerRowsNumeric.value(numberOfRows);\n        }\n\n        headerRowsNumeric.max(numberOfRows);\n    },\n\n    _createTablePropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-table-properties\");\n        var components = that.components;\n        var tableView = components.tableView = {};\n        var tableProperties = table.tableProperties = table.tableProperties || {};\n        var form;\n\n        that._addUnit(units, tableProperties.widthUnit);\n        that._addUnit(units, tableProperties.heightUnit);\n        tableProperties.borderStyle = tableProperties.borderStyle || \"\";\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-columns\",\n                    label: encode(messages.columns),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-columns\" />').appendTo(container),\n                            \"columns\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onColumnsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-rows\",\n                    label: encode(messages.rows),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input type=\"numeric\" id=\"k-editor-table-rows\" />').appendTo(container),\n                            \"rows\",\n                            tableProperties,\n                            tableView,\n                            {\n                                min: 1,\n                                value: DEFAULT_NUMBER_OF_COLS_AND_ROWS,\n                                change: that._onRowsNumberChange.bind(that)\n                            });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width\",\n                    label: encode(messages.width),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-width\" />').appendTo(container), \"width\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height\",\n                    label: encode(messages.height),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-height\" />').appendTo(container), \"height\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-table-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-table-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            tableProperties,\n                            tableView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-position\",\n                    label: encode(messages.position),\n                    editor: function(container, options) {\n                        that._initTablePositionDropDown($('<input id=\"k-editor-table-position\" class=\"k-position\" />').appendTo(container), tableProperties);\n                    }\n                },\n                {\n                    colSpan: 2,\n                    field: \"k-editor-table-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initTableAlignmentDropDown($('<input id=\"k-editor-table-alignment\" class=\"k-align\" />').appendTo(container), tableProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-spacing\",\n                    label: encode(messages.cellSpacing),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-spacing\" />').appendTo(container), \"cellSpacing\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    type: \"group\",\n                    label: \"Cell Paddings\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 20\n                    },\n                    items: [\n                        {\n                            colSpan: \"full\",\n                            field: \"k-editor-padding-all-sides\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", tableProperties, tableView,\n                                {\n                                    checked: true,\n                                    label: encode(messages.independentCellPaddings),\n                                    change: that._onPaddingCheckChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-top\",\n                            label: encode(messages.topPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-top\" />').appendTo(container), \"topCellPadding\", tableProperties, tableView,\n                                {\n                                    placeholder: encode(messages.auto),\n                                    change: that._onPaddingTopChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-right\",\n                            label: encode(messages.rightPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-right\" />').appendTo(container), \"rightCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-bottom\",\n                            label: encode(messages.bottomPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cell-padding-left\",\n                            label: encode(messages.leftPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cell-padding-left\" />').appendTo(container), \"leftCellPadding\", tableProperties, tableView, { placeholder: encode(messages.auto) });\n                            }\n                        }\n                    ]\n                }, {\n                    type: \"group\",\n                    label: \"Borders\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 10\n                    },\n                    items: [{\n                        colSpan: \"full\",\n                        field: \"k-editor-table-bg\",\n                        label: encode(messages.tableBackground),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-table-bg\" />').appendTo(container), \"bgColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-border-width\" />').appendTo(container), \"borderWidth\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-border-color\" />').appendTo(container), \"borderColor\", tableProperties, tableView);\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                tableProperties,\n                                tableView,\n                                borderStyles);\n                        }\n                    },{\n                        colSpan: \"full\",\n                        field: \"k-editor-collapse-borders\",\n                        label: \"\",\n                        editor: function(container, options) {\n                            that._initCheckbox($('<input id=\"k-editor-collapse-borders\"/>').appendTo(container), \"collapseBorders\", tableProperties, tableView, { label: encode(messages.collapseBorders) });\n                        }\n                    }]\n                }\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createCellPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-cell-properties\");\n        var components = that.components = that.components || {};\n        var cellView = components.cellView = {};\n        var cellProperties = (table.selectedCells && table.selectedCells[0]) || { borderStyle: \"\", wrapText: true };\n        var form;\n\n        that._addUnit(units, cellProperties.widthUnit);\n        that._addUnit(units, cellProperties.heightUnit);\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-selectAllCells\",\n                    label: \"\",\n                    editor: function(container, options) {\n                        that._initCheckbox($('<input id=\"k-editor-selectAllCells\" />').appendTo(container), \"selectAllCells\", table.tableProperties, cellView, { label: encode(messages.selectAllCells) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width\",\n                    label: encode(messages.width),\n                    hint: encode(messages.applyToColumn),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-width\" />').appendTo(container), \"width\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-width-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-width-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"widthUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height\",\n                    label: encode(messages.height),\n                    hint: encode(messages.applyToRow),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-cell-height\" />').appendTo(container), \"height\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    colSpan: 1,\n                    field: \"k-editor-cell-height-type\",\n                    label: {\n                        encoded: false,\n                        text: '&nbsp;'\n                    },\n                    editor: function(container, options) {\n                        that._initDropDownList($(`<input id=\"k-editor-cell-height-type\" aria-label=\"${ messages.units }\" />`).appendTo(container),\n                            \"heightUnit\",\n                            cellProperties,\n                            cellView,\n                            units);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-cell-alignment\",\n                    label: encode(messages.alignment),\n                    editor: function(container, options) {\n                        that._initCellAlignmentDropDown($('<input id=\"k-editor-cell-alignment\" class=\"k-align\" />').appendTo(container), cellProperties);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-wrap-text\",\n                    label: \"Text control\",\n                    editor: function(container, options) {\n                        that._initTextWrapDropDown($('<input id=\"k-editor-wrap-text\" />').appendTo(container),\n                        cellProperties);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-bg\",\n                    label: encode(messages.background),\n                    editor: function(container, options) {\n                        that._initColorPicker($('<input id=\"k-editor-cell-bg\" />').appendTo(container), \"bgColor\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: 2,\n                    field: \"k-editor-table-cell-margin\",\n                    label: encode(messages.cellMargin),\n                    editor: function(container, options) {\n                        that._initNumericTextbox($('<input id=\"k-editor-table-cell-margin\" />').appendTo(container), \"cellMargin\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                    }\n                },{\n                    type: \"group\",\n                    label: \"Cell Paddings\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 20\n                    },\n                    items: [\n                        {\n                            colSpan: \"full\",\n                            field: \"k-editor-padding-all-sides\",\n                            label: \"\",\n                            editor: function(container, options) {\n                                that._initCheckbox($('<input id=\"k-editor-padding-all-sides\" />').appendTo(container), \"independentCellPaddings\", table.tableProperties, cellView,\n                                {\n                                    checked: true,\n                                    label: encode(messages.independentCellPaddings),\n                                    change: that._onPaddingCheckChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-top\",\n                            label: encode(messages.topPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-top\" />').appendTo(container), \"topCellPadding\", cellProperties, cellView,\n                                {\n                                    placeholder: encode(messages.auto),\n                                    change: that._onPaddingTopChange.bind(that)\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-right\",\n                            label: encode(messages.rightPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-right\" />').appendTo(container), \"rightCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-bottom\",\n                            label: encode(messages.bottomPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-bottom\" />').appendTo(container), \"bottomCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-cells-padding-left\",\n                            label: encode(messages.leftPadding),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-cells-padding-left\" />').appendTo(container), \"leftCellPadding\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                            }\n                        }\n                    ]\n                },{\n                    type: \"group\",\n                    label: \"Borders\",\n                    layout: \"grid\",\n                    colSpan: 4,\n                    grid: {\n                        cols: 4,\n                        gutter: 10\n                    },\n                    items: [{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-width\",\n                        label: encode(messages.borderWidth),\n                        editor: function(container, options) {\n                            that._initNumericTextbox($('<input id=\"k-editor-cell-border-width\" />').appendTo(container), \"borderWidth\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 1,\n                        field: \"k-editor-cell-border-color\",\n                        label: encode(messages.borderColor),\n                        editor: function(container, options) {\n                            that._initColorPicker($('<input id=\"k-editor-cell-border-color\" />').appendTo(container), \"borderColor\", cellProperties, cellView, { placeholder: encode(messages.auto) });\n                        }\n                    },{\n                        colSpan: 2,\n                        field: \"k-editor-cell-border-style\",\n                        label: encode(messages.borderStyle),\n                        editor: function(container, options) {\n                            that._initBorderStyleDropDown($('<input id=\"k-editor-cell-border-style\" />').appendTo(container),\n                                \"borderStyle\",\n                                cellProperties,\n                                cellView,\n                                borderStyles);\n                        }\n                    }]\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-id\" />').appendTo(container), \"id\", cellProperties, cellView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-cell-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-cell-css-class\" />').appendTo(container), \"className\", cellProperties, cellView);\n                    }\n                }\n            ]\n        }).data(\"kendoForm\");\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    },\n\n    _createAccessibilityPropertiesForm: function(dialog, messages) {\n        var that = this;\n        var table = that.options.table;\n        var formElement = dialog.element.find(\"#k-accessibility-properties\");\n        var components = that.components;\n        var accessibilityView = components.accessibilityView = {};\n        var tableProperties = table.tableProperties;\n        var form;\n\n        form = formElement.kendoForm({\n            renderButtons: false,\n            layout: \"grid\",\n            grid: {\n                cols: 4\n            },\n            items: [\n                {\n                    colSpan: \"full\",\n                    field: \"k-editor-id\",\n                    label: {\n                        text: encode(messages.id),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-id\" />').appendTo(container), \"id\", tableProperties, accessibilityView);\n                    }\n                },{\n                    colSpan: \"full\",\n                    field: \"k-editor-css-class\",\n                    label: {\n                        text: encode(messages.cssClass),\n                        optional: true\n                    },\n                    editor: function(container, options) {\n                        that._initInput($('<input id=\"k-editor-css-class\" />').appendTo(container), \"className\", tableProperties, accessibilityView);\n                    }\n                },\n                {\n                    layout: \"grid\",\n                    grid: {\n                        cols: 4,\n                        gutter: 16\n                    },\n                    colSpan: \"full\",\n                    type: \"group\",\n                    label: \"Accessibility\",\n                    items: [\n                        {\n                            colSpan: 2,\n                            field: \"k-editor-table-caption\",\n                            label: {\n                                text: encode(messages.caption),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initInput($('<input id=\"k-editor-table-caption\" />').appendTo(container), \"captionContent\", tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-accessibility-alignment\",\n                            label: encode(messages.captionAlignment),\n                            editor: function(container, options) {\n                                that._initAccessibilityAlignmentDropDown($('<input id=\"k-editor-accessibility-alignment\" />').appendTo(container), tableProperties);\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-rows\",\n                            label: encode(messages.headerRows),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-rows\" />').appendTo(container),\n                                \"headerRows\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.rows || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 1,\n                            field: \"k-editor-table-header-columns\",\n                            label: encode(messages.headerColumns),\n                            editor: function(container, options) {\n                                that._initNumericTextbox($('<input id=\"k-editor-table-header-columns\" />').appendTo(container),\n                                \"headerColumns\",\n                                tableProperties,\n                                accessibilityView,\n                                {\n                                    max: tableProperties.columns || DEFAULT_NUMBER_OF_COLS_AND_ROWS\n                                });\n                            }\n                        },{\n                            colSpan: 2,\n                            field: \"k-editor-cells-headers\",\n                            label: encode(messages.associateCellsWithHeaders),\n                            editor: function(container, options) {\n                                var element = $(`<select id=\"k-editor-cells-headers\">\n                                    <option value=\"none\">${ messages.associateNone }</option>\n                                    <option value=\"scope\">${ messages.associateScope }</option>\n                                    <option value=\"ids\">${ messages.associateIds }</option>\n                                </select>`).appendTo(container);\n\n                                that._initAssociationDropDown(element, \"cellsWithHeaders\", { valuePrimitive: true }, tableProperties, accessibilityView);\n                            }\n                        },{\n                            colSpan: \"full\",\n                            field: \"k-editor-accessibility-summary\",\n                            label: {\n                                text: encode(messages.summary),\n                                optional: true\n                            },\n                            editor: function(container, options) {\n                                that._initTextArea($('<textarea id=\"k-editor-accessibility-summary\"></textarea>').appendTo(container), \"summary\", tableProperties, accessibilityView, {\n                                    rows: 5,\n                                    placeholder: messages.tableSummaryPlaceholder\n                                });\n                            }\n                        }\n                    ]\n                }\n            ]\n        }).data(\"kendoForm\");\n\n        form.layoutWrapper.addClass(\"k-gap-x-4\");\n\n        return form;\n    }\n});\n\nkendo.ui.editor.TableWizardDialog = TableWizardDialog;\n\n})(window.kendo.jQuery);\n\nvar __meta__ = {\n        id: \"editor\",\n        name: \"Editor\",\n        category: \"web\",\n        description: \"Rich text editor component\",\n        depends: [ \"combobox\", \"dropdownlist\", \"window\", \"colorpicker\", \"toolbar\", \"icons\" ],\n        features: [ {\n            id: \"editor-imagebrowser\",\n            name: \"Image Browser\",\n            description: \"Support for uploading and inserting images\",\n            depends: [ \"imagebrowser\" ]\n        }, {\n            id: \"editor-resizable\",\n            name: \"Resize handle\",\n            description: \"Support for resizing the content area via a resize handle\",\n            depends: [ \"resizable\" ]\n        }, {\n            id: \"editor-tablewizard\",\n            name: \"Table wizard dialog\",\n            description: \"Support for table properties configuration\",\n            depends: [ \"tabstrip\", \"button\", \"numerictextbox\", \"textarea\" ]\n        }, {\n            id: \"editor-pdf-export\",\n            name: \"PDF export\",\n            description: \"Export Editor content as PDF\",\n            depends: [ \"pdf\", \"drawing\" ]\n        }]\n    };\nvar kendo$1 = kendo;\n\nexport { kendo$1 as default };\n"]}