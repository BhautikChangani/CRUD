<script>
    function onNodeClick(e) {
        kendoConsole.log("NodeClick event fired  on " + e.dataItem.id);
    }

    function onLinkClick(e) {
        kendoConsole.log("LinkClick event fired --> source " + e.dataItem.source.id + " -- target --> " + e.dataItem.target.id);
    }

    function onNodeEnter(e) {
        kendoConsole.log("onNodeEnter event fired on " + e.dataItem.id);
    }

    function onLinkEnter(e) {
        kendoConsole.log("onLinkEnter event fired on --> source " + e.dataItem.source.id + " -- target --> " + e.dataItem.target.id);
    }

    function onNodeLeave(e) {
        kendoConsole.log("onNodeLeave event fired on " + e.dataItem.id);
    }

    function onLinkLeave(e) {
        kendoConsole.log("onLinkLeave event fired on --> source " + e.dataItem.source.id + " -- target --> " + e.dataItem.target.id);
    }
</script>

<div class="demo-section wide">
    @(Html.Kendo().Sankey()
            .Name("sankey")
            .Theme("sass")
            .Title(t => t.Text("Sankey Diagram"))
            .Legend(l => l.Position(LegendPosition.Bottom))
            .Links(l => l.ColorType(LinkColorType.Source))
            .Data(d => d.Nodes(n =>
            {
                n.Add().Id(1).Label(l => l.Text("Source"));
                n.Add().Id(2).Label(l => l.Text("Target"));
            })
            .Links(l =>
            {
                l.Add().SourceId(1).Value(12).TargetId(2);
            }))
           .Events(e => e
              .NodeClick("onNodeClick")
              .LinkClick("onLinkClick")
              .NodeEnter("onNodeEnter")
              .LinkEnter("onLinkEnter")
              .NodeLeave("onNodeLeave")
              .LinkLeave("onLinkLeave")
        )
    )
</div>

<style>
    #sankey {
        width: 700px;
        height: 500px;
        margin: 0 auto;
    }
</style>

<script>
    $(document).ready(function () {
        var data = {
            nodes: [
                {
                    id: "female",
                    label: {
                        text: "Female (58%)",
                    },
                },
                {
                    id: "male",
                    color: 'yellow',
                    label: {
                        text: "Male (42%)",
                    },
                },
                {
                    id: "tablet",
                    label: {
                        text: "Tablet (12%)",
                    },
                },
                {
                    id: "mobile",
                    label: {
                        text: "Mobile (40%)",
                    },
                },
                {
                    id: "desktop",
                    label: {
                        text: "Desktop (48%)",
                    },
                },
                {
                    id: "< 18",
                    label: {
                        text: "< 18 years (8%)",
                    },
                },
                {
                    id: "18-26",
                    label: {
                        text: "18-26 years (35%)",
                    },
                },
                {
                    id: "27-40",
                    label: {
                        text: "27-40 years (38%)",
                    },
                },
                {
                    id: "> 40",
                    label: {
                        text: "> 40 years (19%)",
                    },
                },
            ],
            links: [
                {
                    sourceId: "female",
                    targetId: "tablet",
                    value: 12,
                },
                {
                    sourceId: "female",
                    targetId: "mobile",
                    value: 14,
                },
                {
                    sourceId: "female",
                    targetId: "desktop",
                    value: 32,
                },
                {
                    sourceId: "male",
                    targetId: "mobile",
                    value: 26,
                },
                {
                    sourceId: "male",
                    targetId: "desktop",
                    value: 16,
                },
                {
                    sourceId: "tablet",
                    targetId: "< 18",
                    value: 4,
                },
                {
                    sourceId: "tablet",
                    targetId: "> 40",
                    value: 8,
                },
                {
                    sourceId: "mobile",
                    targetId: "< 18",
                    value: 4,
                },
                {
                    sourceId: "mobile",
                    targetId: "18-26",
                    value: 24,
                },
                {
                    sourceId: "mobile",
                    targetId: "27-40",
                    value: 10,
                },
                {
                    sourceId: "mobile",
                    targetId: "> 40",
                    value: 2,
                },
                {
                    sourceId: "desktop",
                    targetId: "18-26",
                    value: 11,
                },
                {
                    sourceId: "desktop",
                    targetId: "27-40",
                    value: 18,
                },
                {
                    sourceId: "desktop",
                    targetId: "> 40",
                    value: 19,
                },
            ],
        };

        var sankey = $("#sankey").data().kendoSankey;
        sankey.setOptions({
            data: data,
        })
    });
</script>